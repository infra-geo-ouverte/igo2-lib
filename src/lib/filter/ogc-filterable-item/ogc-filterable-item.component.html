<mat-list-item>
  
  <mat-icon *ngIf="ogcFiltersHeaderShown" class="igo-chevron" mat-list-avatar igoCollapse [target]="ogcFilters" [collapsed]="false">
  </mat-icon>
  <h4 *ngIf="ogcFiltersHeaderShown" matLine [matTooltip]="datasource.title" matTooltipShowDelay="500">{{datasource.title}}</h4>
  <h4 *ngIf="!ogcFiltersHeaderShown" matLine></h4>

  <!-- <span *ngIf="!datasource.options['disableRefreshFilter'] && layers[0].visible"> -->
    <button mat-icon-button tooltip-position="below" matTooltipShowDelay="500" [matTooltip]="'igo.filter.refreshFilters' | translate"
    [disabled]="!layers[0].visible || datasource.options['disableRefreshFilter'] || !layers[0].isInResolutionsRange"
    [color]="color" (click)="refreshFilters()">
      <mat-icon>
        refresh
      </mat-icon>
    </button>
  <!-- </span> -->

  <span *ngIf="datasource.options.download && ogcFiltersHeaderShown">
    <button mat-icon-button tooltip-position="below" matTooltipShowDelay="500" [matTooltip]="'igo.download.action' | translate"
      [color]="color" (click)="openDownload()">
      <mat-icon>file_download</mat-icon>
    </button>
  </span>
  <button [disabled]="datasource.options['sourceFields'].length === 0" mat-icon-button tooltip-position="below" matTooltipShowDelay="500"
    [matTooltip]="'igo.filter.addFilter' | translate" [color]="color" (click)="addFilterToSequence()">
    <mat-icon>
      add
    </mat-icon>
  </button>
</mat-list-item>

<div #ogcFilters class="igo-datasource-filters-container">
  <igo-ogc-filterable-form [datasource]="datasource">
  </igo-ogc-filterable-form>
</div>
