<span *ngIf="filtersAreEditable">
<mat-list-item>

  <mat-icon *ngIf="ogcFiltersHeaderShown" class="igo-chevron" mat-list-avatar igoCollapse [target]="ogcFilters" [collapsed]="filtersCollapsed">
  </mat-icon>
  <h4 *ngIf="ogcFiltersHeaderShown" matLine [matTooltip]="layer.title" matTooltipShowDelay="500">{{layer.title}}</h4>
  <h4 *ngIf="!ogcFiltersHeaderShown" matLine></h4>

  <button mat-icon-button *ngIf="hasActiveSpatialFilter && showFeatureOnMap" tooltip-position="below" matTooltipShowDelay="500"
  [matTooltip]="'igo.geo.filter.hideFeatureExtent' | translate"
  [disabled]="!layer.visible || !layer.isInResolutionsRange"
  [color]="color"
  (click)="toggleShowFeatureOnMap()">
    <mat-icon>
      border_outer
    </mat-icon>
  </button>

  <button mat-icon-button *ngIf="hasActiveSpatialFilter && !showFeatureOnMap" tooltip-position="below" matTooltipShowDelay="500"
  [matTooltip]="'igo.geo.filter.showFeatureExtent' | translate"
  [disabled]="!layer.visible || !layer.isInResolutionsRange"
  [color]="color"
  (click)="toggleShowFeatureOnMap()">
    <mat-icon>
      border_clear
    </mat-icon>
  </button>

  <span *ngIf="downloadable && ogcFiltersHeaderShown">
    <button mat-icon-button tooltip-position="below" matTooltipShowDelay="500" [matTooltip]="'igo.geo.download.action' | translate"
      [color]="color" (click)="openDownload()">
      <mat-icon>file_download</mat-icon>
    </button>
  </span>
  <button *ngIf="this.datasource.options.ogcFilters.advancedOgcFilters" [disabled]="!datasource.options.sourceFields ||Â datasource.options.sourceFields.length === 0" mat-icon-button tooltip-position="below" matTooltipShowDelay="500"
    [matTooltip]="'igo.geo.filter.addFilter' | translate" [color]="color" (click)="addFilterToSequence()">
    <mat-icon>
      add
    </mat-icon>
  </button>
</mat-list-item>

<button *ngIf="!layer.visible && ogcFiltersHeaderShown" mat-icon-button tooltip-position="below" matTooltipShowDelay="500" [matTooltip]="'igo.geo.layer.showLayer' | translate"
color="warn" (click)="setVisible()">
<mat-icon>error_outline</mat-icon>
</button>

<div #ogcFilters class="igo-datasource-filters-container">
  <igo-ogc-filterable-form [datasource]="datasource" [map]="map" [refreshFilters]="refreshFunc" [showFeatureOnMap]="showFeatureOnMap">
  </igo-ogc-filterable-form>

  <mat-checkbox labelPosition='before' *ngIf="hasPushButton" (change)="changeOgcFilterType($event)"
    [(ngModel)]="datasource.options.ogcFilters.advancedOgcFilters">
    {{'igo.geo.filter.advancedOgcFilters' | translate}}
  </mat-checkbox>
</div>
</span>
