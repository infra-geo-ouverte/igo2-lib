<div class="igo-search-selector">
  <button
    mat-icon-button
    class="igo-search-selector-button"
    color="primary"
    tooltip-position="below"
    matTooltipShowDelay="500"
    [matTooltip]="'igo.geo.search.menu.tooltip' | translate"
    [matMenuTriggerFor]="searchSelectorMenu">
    <mat-icon svgIcon="menu-down"></mat-icon>
  </button>

  <mat-menu
    #searchSelectorMenu="matMenu"
    class="no-border-radius"
    xPosition="before"
    yPosition="above">
    <mat-radio-group
      class="igo-search-selector-radio-group"
      [value]="enabled"
      (change)="onSearchTypeChange($event.value)">
      <mat-radio-button *ngFor="let searchType of searchTypes" [value]="searchType">
        {{getSearchTypeTitle(searchType) | translate}}
      </mat-radio-button>
    </mat-radio-group>
    <button
      mat-menu-item
      [matMenuTriggerFor]="setting">
      <mat-icon svgIcon="settings"></mat-icon>{{ 'igo.geo.search.settings' | translate}}
    </button>
  </mat-menu>

  <mat-menu
    #setting="matMenu"
    class="no-border-radius">
      <ng-container *ngFor="let source of getSearchSources()">
        <button *ngIf="source.settings.length > 0"
          [matMenuTriggerFor]="sub_menu"
          mat-menu-item>{{source.title}}
        </button>
          <mat-menu #sub_menu="matMenu"
            xPosition="before"
            yPosition="above"
          >
            <ng-container *ngFor="let setting of source.settings">
              <button
                  mat-menu-item
                  [matMenuTriggerFor]="test_sub_menu">
                {{'igo.geo.search.searchSources.settings.'+ setting.title | translate}}
              </button>
              <mat-menu #test_sub_menu="matMenu"
                [ngSwitch]="setting.type"
                xPosition="before"
                yPosition="above">
                <span *ngSwitchCase="'radiobutton'">
                  <mat-radio-group
                    class="igo-search-selector-radio-group"
                    [value]="setting">
                    <mat-radio-button *ngFor="let settingValue of setting.values"
                      [value]="settingValue"
                      [checked]="settingValue.enabled"
                      (click)="stopHere($event)"
                      (change)="settingsValueCheckedRadioButton($event, source, setting, settingValue)">
                      {{settingValue.title}}
                    </mat-radio-button>
                  </mat-radio-group>
                </span>
                <span *ngSwitchCase="'checkbox'">
                  <mat-checkbox class="igo-search-selector-radio-group"
                    class="mat-menu-item"
                    [checked]="settingValue.enabled"
                    [value]="setting"
                    (click)="stopHere($event)"
                    (change)="settingsValueCheckedCheckbox($event, source, setting, settingValue)"
                    *ngFor="let settingValue of setting.values">{{settingValue.title}}
                  </mat-checkbox>
                </span>
              </mat-menu>
            </ng-container>
          </mat-menu>
      </ng-container>
  </mat-menu>




</div>
