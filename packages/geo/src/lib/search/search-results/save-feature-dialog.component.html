<h1 mat-dialog-title class="mat-typography">{{'igo.geo.layer.saveFeatureInLayer' | translate}}</h1>

<div mat-dialog-content class="mat-typography">
  <form class="igo-form" [formGroup]="form">
    <igo-list [navigation]="false" [selection]="false">
      <igo-search-results-item
        igoListItem
        color="accent"
        [result]="feature"
        showIcons="true">
      </igo-search-results-item>
    </igo-list>
    
    <div class="igo-input-container">
      <mat-form-field>
        <input type="text"
          placeholder="{{'igo.geo.layer.chooseOrSet' | translate}}"
          matInput
          [matAutocomplete]="auto"
          formControlName="layerName">
        <mat-autocomplete [displayWith]="displayFn" #auto="matAutocomplete" (optionSelected)="onLayerSelected($event.option.value)">
          <mat-option *ngFor="let layer of filteredLayers$ | async" [value]="layer">
            <p mat-line>{{layer.title}}</p>
          </mat-option>
        </mat-autocomplete>
        <mat-error *ngIf="form.controls['layerName'].errors?.featureTypeError"> Vous ne pouvez pas ajouter une résultats de recherche de type différent dans la même couche.</mat-error>
      </mat-form-field>
    </div>
  </form>
</div>

<div mat-dialog-actions style="justify-content: center">
  <div class="igo-form-button-group create-layer-button-top-padding">
    <button
      mat-raised-button
      type="button"
      (click)="cancel()">
      {{'igo.geo.layer.cancelBtn' | translate}}
    </button>
    <button
      id="createLayerBtnDialog"
      mat-raised-button
      [disabled]="!form.valid"
      type="button"
      color="primary"
      (click)="save()">
      {{'igo.geo.layer.saveBtn' | translate}}
    </button>
  </div>
</div>