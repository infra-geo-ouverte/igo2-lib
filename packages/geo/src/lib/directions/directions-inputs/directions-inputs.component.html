<div cdkDropList class="example-list" (cdkDropListDropped)="drop($event)">
  <div class="example-box" *ngFor="let stop of stopsStore.view.all$() | async; let i = index;" cdkDrag>
    <div class="igo-input-container">
    <input type="text"
           [placeholder]="'igo.geo.directionsForm.'+ stop.placeholder | translate"
           aria-label="Number"
           matInput
           [(ngModel)]="stop.text"
           (keyup)="setStopText($event,stop)"
           (keydown.enter)="$event.preventDefault()"
           [matAutocomplete]="auto">
    <button 
           mat-button 
           *ngIf="stop.text"
           matSuffix mat-icon-button color="warn" aria-label="Clear" (click)="clearStop(stop)">
           <mat-icon svgIcon="close"></mat-icon>
     </button>
    
    <mat-autocomplete #auto="matAutocomplete">
      <mat-optgroup *ngFor="let source of stop.searchProposals" [label]="source.source.title" [disabled]="source.source.enabled === false">
        <mat-option *ngFor="let result of source.results" [value]="result.meta ? result.meta.title : ''" 
        (onSelectionChange)="chooseProposal(result,stop)"
        matTooltipShowDelay="500" [matTooltip]="result.meta ? result.meta.title : ''">
          {{ result.meta ? result.meta.title : '' }}
        </mat-option>
      </mat-optgroup>
    </mat-autocomplete>
  </div>




    <div class="igo-form-button-group">
      <button cdkDragHandle mat-icon-button tooltip-position="below" matTooltipShowDelay="500"
        [matTooltip]="'igo.geo.directionsForm.removeStop' | translate" color="primary">
        <mat-icon svgIcon="gesture-swipe-vertical"></mat-icon>
      </button>

      <button *ngIf="(stopsStore.count$ | async)> 2" mat-icon-button tooltip-position="below" matTooltipShowDelay="500"
        [matTooltip]="'igo.geo.directionsForm.removeStop' | translate" color="warn" (click)="removeStop(stop)">
        <mat-icon svgIcon="delete"></mat-icon>
      </button>
      <button *ngIf="(stopsStore.count$ | async)<= 2" disabled="true" mat-icon-button tooltip-position="below"
        matTooltipShowDelay="500" [matTooltip]="'igo.geo.directionsForm.removeStop' | translate" color="warn">
        <mat-icon svgIcon="blank"></mat-icon>
      </button>
    </div>
  </div>
</div>