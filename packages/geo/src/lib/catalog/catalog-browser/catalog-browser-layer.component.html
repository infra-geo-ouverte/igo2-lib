<mat-list-item>
  <mat-icon *ngIf="haveGroup()" mat-list-avatar svgIcon="blank"></mat-icon>
  <h4 mat-line matTooltipShowDelay="500" [ngClass]="(catalogAllowLegend)?'igo-cataloglayer-title':''" (click)="askForLegend($event)" [matTooltip]="title">{{title}}</h4>

  <igo-metadata-button [layer]="layer"></igo-metadata-button>

  <button
    (mouseenter)="onMouseEvent($event)" (mouseleave)="onMouseEvent($event)"
    mat-icon-button
    tooltip-position="below"
    matTooltipShowDelay="500"
    [matTooltip]="computeTooltip() | translate"
    [color]="(isPreview$ | async) ? '' : added ? 'warn' : ''"
    (click)="onToggleClick($event)">
    <mat-icon
       matBadge
       igoMatBadgeIcon="eye-off"
       [matBadgeHidden]="isInResolutionsRange()"
       matBadgeColor="accent"
       matBadgeSize="small"
       matBadgePosition="after"
       [svgIcon]="(isPreview$ | async) ? 'plus' : added ? 'delete' : 'plus'">
    </mat-icon>
  </button>

</mat-list-item>

<div #legend class="igo-cataloglayer-legend-container">
  <igo-layer-legend
    *ngIf="(layerLegendShown$ | async) && (igoLayer$ | async) && catalogAllowLegend"
    [layer]="igoLayer$ | async">
  </igo-layer-legend>
</div>
