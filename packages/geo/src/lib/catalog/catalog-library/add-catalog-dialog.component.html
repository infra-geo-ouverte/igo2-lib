<mat-tab-group
  [selectedIndex]="!data.addedCatalog && data.predefinedCatalogs.length ? 0 : 1"
>
  <mat-tab
    [label]="'igo.geo.catalog.library.predefined' | translate"
    [disabled]="!data.predefinedCatalogs.length"
  >
    @if (predefinedForm$ | async; as form) {
      <igo-form
        [form]="form"
        [formData]="data$ | async"
        (submitForm)="onPredefinedSubmit($any($event))"
      >
        @if (form.fields.length) {
          <div class="form-container">
            @for (field of form.fields; track field) {
              <igo-form-field [field]="field"></igo-form-field>
            }
          </div>
        }
        <div formButtons class="actions-container">
          <button matButton="filled" type="submit" color="primary">
            {{ 'igo.geo.catalog.library.add' | translate }}
          </button>
        </div>
      </igo-form>
    }
  </mat-tab>

  <mat-tab class="tabs" [label]="'igo.geo.catalog.library.custom' | translate">
    @if (customForm$ | async; as form) {
      <igo-form
        [form]="form"
        [formData]="customData$ | async"
        (submitForm)="onCustomSubmit($any($event))"
      >
        @if (form.fields.length) {
          <div class="form-container">
            @for (field of form.fields; track field) {
              <igo-form-field [field]="field"></igo-form-field>
            }
          </div>
        }
        <div formButtons class="actions-container">
          <button matButton="filled" type="submit" color="primary">
            {{ 'igo.geo.catalog.library.add' | translate }}
          </button>
        </div>
      </igo-form>
    }
    @if (data.error && data.addedCatalog && emailAddress) {
      <span>
        <p class="error">
          {{
            languageService.translate.instant(
              'igo.geo.catalog.externalProvider.unavailableWithEmail',
              { value: data.addedCatalog.url, email: emailAddress }
            )
          }}
        </p>
      </span>
    }
    @if (data.error && data.addedCatalog && !emailAddress) {
      <span>
        <p class="error">
          {{
            languageService.translate.instant('igo.geo.catalog.unavailable', {
              value: data.addedCatalog.url
            })
          }}
        </p>
      </span>
    }
  </mat-tab>
</mat-tab-group>
