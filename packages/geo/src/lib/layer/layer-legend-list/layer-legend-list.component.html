<div class="layer-legend-list-container">
  @if ((layersInUi$ | async).length && allowShowAllLegends) {
    <mat-slide-toggle
      tooltip-position="above"
      matTooltipShowDelay="500"
      [matTooltip]="'igo.geo.layer.legend.showAll' | translate"
      [checked]="showAllLegendsValue"
      [labelPosition]="'before'"
      (change)="toggleShowAllLegends($event.checked)"
    >
      {{ 'igo.geo.layer.legend.showAll' | translate }}
    </mat-slide-toggle>
  }
  @if ((layersInUi$ | async).length && allowShowAllLegends) {
    <mat-divider></mat-divider>
  }
  <igo-list [navigation]="false" [selection]="false">
    @for (layer of layers$ | async; track layer; let i = $index) {
      @if (!(excludeBaseLayers && isLayerItem(layer) && layer.baseLayer)) {
        <igo-layer-legend-item
          igoListItem
          [layer]="$any(layer)"
          [updateLegendOnResolutionChange]="updateLegendOnResolutionChange"
        >
        </igo-layer-legend-item>
      }
    }
  </igo-list>
  @if (
    !showAllLegendsValue &&
    (layersInUi$ | async).length &&
    (hasVisibleOrInRangeLayers$ | async) === false &&
    (hasVisibleAndNotInRangeLayers$ | async) === false &&
    allowShowAllLegends
  ) {
    <p class="layers-empty">
      {{ 'igo.geo.layer.legend.noLayersVisibleWithShowAllButton' | translate }}
    </p>
  }
  @if (
    !showAllLegendsValue &&
    (layersInUi$ | async).length &&
    (hasVisibleOrInRangeLayers$ | async) === false &&
    (hasVisibleAndNotInRangeLayers$ | async) &&
    allowShowAllLegends
  ) {
    <p class="layers-empty">
      {{
        'igo.geo.layer.legend.noLayersVisibleWithShowAllButtonButZoom'
          | translate
      }}
    </p>
  }
  @if (
    (layersInUi$ | async).length &&
    (hasVisibleOrInRangeLayers$ | async) === false &&
    (hasVisibleAndNotInRangeLayers$ | async) === false &&
    !allowShowAllLegends
  ) {
    <p class="layers-empty">
      {{ 'igo.geo.layer.legend.noLayersVisible' | translate }}
    </p>
  }
  @if (
    (layersInUi$ | async).length &&
    (hasVisibleOrInRangeLayers$ | async) === false &&
    (hasVisibleAndNotInRangeLayers$ | async) &&
    !allowShowAllLegends
  ) {
    <p class="layers-empty">
      {{ 'igo.geo.layer.legend.noLayersVisibleButZoom' | translate }}
    </p>
  }
</div>
