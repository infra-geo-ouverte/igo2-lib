<igo-offlinable-layer-selector (selectedOfflinableLayers)="onSelectedOfflinableLayers($event)" [map]="mapState.map"></igo-offlinable-layer-selector>

<mat-form-field>
  <mat-label>{{'igo.integration.download.regionEditor.regionName' | translate}}</mat-label>
  <input matInput [(ngModel)]="regionName">
</mat-form-field>

<div>
  <br>
  <div>
    <igo-tile-generation-option 
      #genParam
      (valueChange)="onGenerationParamsChange($event)"
      [disabled]="disableGenerationParamsComponent"
      [parentLevel]="parentLevel"
    ></igo-tile-generation-option>
  </div>
  <div *ngIf="activateDrawingTool">
    <igo-region-draw
      #regionDraw
      [map]='igoMap'
      [(regionGeometryForm)]='drawnRegionGeometryForm'
      ngDefaultControl
    ></igo-region-draw>
  </div>
  <igo-region-download-estimation
    #regionDownloadEstimation
    [updateEstimation$]="updateEstimation$"
    [tilesToDownload]='tilesToDownload'
    [geometries]='geometries'
    [genParams]='genParams'
    [tileGrid]='tileGrid'
    [mode]='editionStrategy'
  ></igo-region-download-estimation>
  <div *ngIf="isDownloading$ | async">
    <br>
    <mat-label>{{'igo.integration.download.regionEditor.progression' | translate}}</mat-label>
    <mat-progress-bar
      #progressBar
      mode="determinate"
      [value]="progression$ | async"
    ></mat-progress-bar>
  </div>
  <div class="button-row">
    <button 
      mat-button
      #download
      (click)="onDownloadClick()"
      [disabled]="
        disableDownloadButton
        || (enoughSpace$ | async) === false"
      >{{ downloadButtonTitle | translate }}</button>
    <button mat-button #cancel (click)="onCancelClick()">{{'igo.integration.download.regionEditor.buttons.cancel' | translate}}</button>
  <div>
</div>
