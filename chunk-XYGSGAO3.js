import{$a as ln,D as Po,E as Eo,G as Si,Oa as on,Pa as nn,Qa as rn,aa as Ro,ab as pn,ba as ze,bb as mn,c as oe,ea as zo,ga as Uo,ha as Ue,ib as dn,j as Mo,jb as un,k as Io,kb as fn,l as To,la as Yo,ma as Xo,n as ko,q as vi,ra as Ne,s as Re,ta as tn,ua as en,y as Ci,z as bi}from"./chunk-4UN2RPJE.js";import{p as Ct,s as j,t as N}from"./chunk-LEXDMZQM.js";import{A as Fo,Aa as Qo,Ba as Zo,C as Bo,Ca as Jo,H as Do,Ha as an,I as Oo,Ia as sn,J as Lo,Ja as cn,K as $o,Ka as fe,L as jo,Qa as gn,Ra as hn,Sa as xn,a as Le,c as $e,d as bo,e as So,fa as Vo,g as je,ga as ue,i as Ve,ja as Ao,ma as No,na as Ho,oa as Go,pa as Wo,wa as Ko,ya as qo}from"./chunk-XOFOAZN4.js";import{$a as me,$d as dt,Aa as si,Ab as T,C as Gi,Ca as ci,Cb as io,Cg as J,D as Wi,Db as S,Dc as Te,Dg as Y,Ea as I,Eb as oo,F as Ki,Fa as pe,Fb as g,Fc as ke,G as at,Gb as mt,Ha as It,Hb as q,Hd as mi,He as et,I as ce,Ia as Zi,Ie as it,Ja as Ji,Jb as At,Je as ho,Jf as ut,Kb as pi,Ke as xo,Kf as ft,L as qi,Lb as xt,M as wt,Ma as Yi,Mb as _t,Mc as Pe,Nb as A,O as Vt,Ob as x,Of as ee,P as oi,Pb as V,Qb as w,Ra as s,Rc as co,Sa as d,T as Ht,Tb as Kt,Td as Fe,Te as ot,Ub as qt,Vb as Qt,Ve as hi,Wb as vt,Wc as lo,Wd as Be,Xb as P,Xe as nt,Xf as wo,Y as Qi,Yc as Rt,Ye as Tt,Zb as Ie,Zc as zt,Zd as tt,_ as ni,_e as _o,_f as ie,aa as st,ac as u,ae as R,af as vo,ba as ri,bc as f,bf as Xt,c as Se,cc as no,cf as kt,da as ai,dc as ro,ea as Mt,eb as b,ee as fo,ef as Co,eg as Ae,f as pt,fa as ye,fb as Xi,fe as di,ff as Pt,g as gt,gb as li,gf as Et,h as Ui,ha as le,hb as Gt,ib as l,ie as ui,ig as z,ja as K,jb as Wt,je as fi,jf as Ft,ka as we,kb as ht,kf as Oe,kg as B,le as gi,lg as F,mc as L,mf as Bt,mg as lt,na as k,nd as po,nf as rt,oa as Me,od as mo,of as Dt,pa as ct,pb as de,pf as xi,q as jt,qf as te,re as De,rf as yo,sc as ao,se as Yt,sf as _i,td as uo,ub as c,ue as go,v as yt,vb as p,vc as so,w as Ni,wa as v,wb as E,wc as Zt,wd as Ee,x as Hi,xa as C,xb as to,xc as $,yb as eo,ye as Q,zd as Jt,ze as Z}from"./chunk-J6VW2V73.js";var Ge=["*"],Wn=["content"],Kn=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],qn=["mat-drawer","mat-drawer-content","*"];function Qn(o,a){if(o&1){let t=T();c(0,"div",1),S("click",function(){v(t);let i=g();return C(i._onBackdropClicked())}),p()}if(o&2){let t=g();ht("mat-drawer-shown",t._isShowingBackdrop())}}function Zn(o,a){o&1&&(c(0,"mat-drawer-content"),q(1,2),p())}var Jn=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],Yn=["mat-sidenav","mat-sidenav-content","*"];function Xn(o,a){if(o&1){let t=T();c(0,"div",1),S("click",function(){v(t);let i=g();return C(i._onBackdropClicked())}),p()}if(o&2){let t=g();ht("mat-drawer-shown",t._isShowingBackdrop())}}function tr(o,a){o&1&&(c(0,"mat-sidenav-content"),q(1,2),p())}var er='.mat-drawer-container{position:relative;z-index:1;color:var(--mat-sidenav-content-text-color, var(--mat-app-on-background));background-color:var(--mat-sidenav-content-background-color, var(--mat-app-background));box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible;background-color:var(--mat-sidenav-scrim-color)}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;color:var(--mat-sidenav-container-text-color, var(--mat-app-on-surface-variant));box-shadow:var(--mat-sidenav-container-elevation-shadow);background-color:var(--mat-sidenav-container-background-color, var(--mat-app-surface));border-top-right-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));border-bottom-right-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));width:var(--mat-sidenav-container-width);display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0);border-top-left-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));border-bottom-left-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));border-top-right-radius:0;border-bottom-right-radius:0}[dir=rtl] .mat-drawer{border-top-left-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));border-bottom-left-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));border-top-right-radius:0;border-bottom-right-radius:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{border-top-right-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));border-bottom-right-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));border-top-left-radius:0;border-bottom-left-radius:0;left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-side{box-shadow:none;border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid}.mat-drawer-side.mat-drawer-end{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side.mat-drawer-end{border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid;border-left:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}',vn={transformDrawer:fo("transform",[fi("open, open-instant",ui({transform:"none",visibility:"visible"})),fi("void",ui({"box-shadow":"none",visibility:"hidden"})),gi("void => open-instant",di("0ms")),gi("void <=> open, open-instant => void",di("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])};var ir=new le("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:or}),yi=new le("MAT_DRAWER_CONTAINER");function or(){return!1}var He=(()=>{class o extends te{constructor(t,e,i,n,r){super(i,n,r),this._changeDetectorRef=t,this._container=e}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}static{this.\u0275fac=function(e){return new(e||o)(d(L),d(ai(()=>bn)),d(It),d(xi),d(pe))}}static{this.\u0275cmp=k({type:o,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(e,i){e&2&&Wt("margin-left",i._container._contentMargins.left,"px")("margin-right",i._container._contentMargins.right,"px")},standalone:!0,features:[vt([{provide:te,useExisting:o}]),me,P],ngContentSelectors:Ge,decls:1,vars:0,template:function(e,i){e&1&&(mt(),q(0))},encapsulation:2,changeDetection:0})}}return o})(),Cn=(()=>{class o{get position(){return this._position}set position(t){t=t==="end"?"end":"start",t!==this._position&&(this._isAttached&&this._updatePositionInParent(t),this._position=t,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(t){this._mode=t,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(t){this._disableClose=Rt(t)}get autoFocus(){let t=this._autoFocus;return t??(this.mode==="side"?"dialog":"first-tabbable")}set autoFocus(t){(t==="true"||t==="false"||t==null)&&(t=Rt(t)),this._autoFocus=t}get opened(){return this._opened}set opened(t){this.toggle(Rt(t))}constructor(t,e,i,n,r,m,_,y){this._elementRef=t,this._focusTrapFactory=e,this._focusMonitor=i,this._platform=n,this._ngZone=r,this._interactivityChecker=m,this._doc=_,this._container=y,this._focusTrap=null,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new pt,this._animationEnd=new pt,this._animationState="void",this.openedChange=new I(!0),this._openedStream=this.openedChange.pipe(at(h=>h),yt(()=>{})),this.openedStart=this._animationStarted.pipe(at(h=>h.fromState!==h.toState&&h.toState.indexOf("open")===0),oi(void 0)),this._closedStream=this.openedChange.pipe(at(h=>!h),yt(()=>{})),this.closedStart=this._animationStarted.pipe(at(h=>h.fromState!==h.toState&&h.toState==="void"),oi(void 0)),this._destroyed=new pt,this.onPositionChanged=new I,this._modeChanged=new pt,this._injector=we(ci),this._changeDetectorRef=we(L),this.openedChange.pipe(st(this._destroyed)).subscribe(h=>{h?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{Gi(this._elementRef.nativeElement,"keydown").pipe(at(h=>h.keyCode===27&&!this.disableClose&&!lo(h)),st(this._destroyed)).subscribe(h=>this._ngZone.run(()=>{this.close(),h.stopPropagation(),h.preventDefault()}))}),this._animationEnd.subscribe(h=>{let{fromState:M,toState:W}=h;(W.indexOf("open")===0&&M==="void"||W==="void"&&M.indexOf("open")===0)&&this.openedChange.emit(this._opened)})}_forceFocus(t,e){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let i=()=>{t.removeEventListener("blur",i),t.removeEventListener("mousedown",i),t.removeAttribute("tabindex")};t.addEventListener("blur",i),t.addEventListener("mousedown",i)})),t.focus(e)}_focusByCssSelector(t,e){let i=this._elementRef.nativeElement.querySelector(t);i&&this._forceFocus(i,e)}_takeFocus(){if(!this._focusTrap)return;let t=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":li(()=>{!this._focusTrap.focusInitialElement()&&typeof t.focus=="function"&&t.focus()},{injector:this._injector});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus);break}}_restoreFocus(t){this.autoFocus!=="dialog"&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,t):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){let t=this._doc.activeElement;return!!t&&this._elementRef.nativeElement.contains(t)}ngAfterViewInit(){this._isAttached=!0,this._position==="end"&&this._updatePositionInParent("end"),this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState())}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap?.destroy(),this._anchor?.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(t){return this.toggle(!0,t)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(t=!this.opened,e){t&&e&&(this._openedVia=e);let i=this._setOpen(t,!t&&this._isFocusWithinDrawer(),this._openedVia||"program");return t||(this._openedVia=null),i}_setOpen(t,e,i){return this._opened=t,t?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",e&&this._restoreFocus(i)),this._changeDetectorRef.markForCheck(),this._updateFocusTrapState(),new Promise(n=>{this.openedChange.pipe(Vt(1)).subscribe(r=>n(r?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=!!this._container?.hasBackdrop&&this.opened)}_updatePositionInParent(t){if(!this._platform.isBrowser)return;let e=this._elementRef.nativeElement,i=e.parentNode;t==="end"?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),i.insertBefore(this._anchor,e)),i.appendChild(e)):this._anchor&&this._anchor.parentNode.insertBefore(e,this._anchor)}static{this.\u0275fac=function(e){return new(e||o)(d(It),d(mo),d(uo),d(co),d(pe),d(po),d(ao,8),d(yi,8))}}static{this.\u0275cmp=k({type:o,selectors:[["mat-drawer"]],viewQuery:function(e,i){if(e&1&&pi(Wn,5),e&2){let n;xt(n=_t())&&(i._content=n.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(e,i){e&1&&oo("@transform.start",function(r){return i._animationStarted.next(r)})("@transform.done",function(r){return i._animationEnd.next(r)}),e&2&&(io("@transform",i._animationState),Gt("align",null),ht("mat-drawer-end",i.position==="end")("mat-drawer-over",i.mode==="over")("mat-drawer-push",i.mode==="push")("mat-drawer-side",i.mode==="side")("mat-drawer-opened",i.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],standalone:!0,features:[P],ngContentSelectors:Ge,decls:3,vars:0,consts:[["content",""],["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(e,i){e&1&&(mt(),c(0,"div",1,0),q(2),p())},dependencies:[te],encapsulation:2,data:{animation:[vn.transformDrawer]},changeDetection:0})}}return o})(),bn=(()=>{class o{get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(t){this._autosize=Rt(t)}get hasBackdrop(){return this._drawerHasBackdrop(this._start)||this._drawerHasBackdrop(this._end)}set hasBackdrop(t){this._backdropOverride=t==null?null:Rt(t)}get scrollable(){return this._userContent||this._content}constructor(t,e,i,n,r,m=!1,_){this._dir=t,this._element=e,this._ngZone=i,this._changeDetectorRef=n,this._animationMode=_,this._drawers=new Zi,this.backdropClick=new I,this._destroyed=new pt,this._doCheckSubject=new pt,this._contentMargins={left:null,right:null},this._contentMarginChanges=new pt,this._injector=we(ci),t&&t.change.pipe(st(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),r.change().pipe(st(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=m}ngAfterContentInit(){this._allDrawers.changes.pipe(ni(this._allDrawers),st(this._destroyed)).subscribe(t=>{this._drawers.reset(t.filter(e=>!e._container||e._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(ni(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(t=>{this._watchDrawerToggle(t),this._watchDrawerPosition(t),this._watchDrawerMode(t)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(wt(10),st(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(t=>t.open())}close(){this._drawers.forEach(t=>t.close())}updateContentMargins(){let t=0,e=0;if(this._left&&this._left.opened){if(this._left.mode=="side")t+=this._left._getWidth();else if(this._left.mode=="push"){let i=this._left._getWidth();t+=i,e-=i}}if(this._right&&this._right.opened){if(this._right.mode=="side")e+=this._right._getWidth();else if(this._right.mode=="push"){let i=this._right._getWidth();e+=i,t-=i}}t=t||null,e=e||null,(t!==this._contentMargins.left||e!==this._contentMargins.right)&&(this._contentMargins={left:t,right:e},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(t){t._animationStarted.pipe(at(e=>e.fromState!==e.toState),st(this._drawers.changes)).subscribe(e=>{e.toState!=="open-instant"&&this._animationMode!=="NoopAnimations"&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),t.mode!=="side"&&t.openedChange.pipe(st(this._drawers.changes)).subscribe(()=>this._setContainerClass(t.opened))}_watchDrawerPosition(t){t&&t.onPositionChanged.pipe(st(this._drawers.changes)).subscribe(()=>{li(()=>{this._validateDrawers()},{injector:this._injector,phase:Xi.Read})})}_watchDrawerMode(t){t&&t._modeChanged.pipe(st(Ki(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(t){let e=this._element.nativeElement.classList,i="mat-drawer-container-has-open";t?e.add(i):e.remove(i)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(t=>{t.position=="end"?(this._end!=null,this._end=t):(this._start!=null,this._start=t)}),this._right=this._left=null,this._dir&&this._dir.value==="rtl"?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&this._start.mode!="over"||this._isDrawerOpen(this._end)&&this._end.mode!="over"}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(t=>t&&!t.disableClose&&this._drawerHasBackdrop(t)).forEach(t=>t._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._drawerHasBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._drawerHasBackdrop(this._end)}_isDrawerOpen(t){return t!=null&&t.opened}_drawerHasBackdrop(t){return this._backdropOverride==null?!!t&&t.mode!=="side":this._backdropOverride}static{this.\u0275fac=function(e){return new(e||o)(d(Ee,8),d(It),d(pe),d(L),d(yo),d(ir),d(Ji,8))}}static{this.\u0275cmp=k({type:o,selectors:[["mat-drawer-container"]],contentQueries:function(e,i,n){if(e&1&&(At(n,He,5),At(n,Cn,5)),e&2){let r;xt(r=_t())&&(i._content=r.first),xt(r=_t())&&(i._allDrawers=r)}},viewQuery:function(e,i){if(e&1&&pi(He,5),e&2){let n;xt(n=_t())&&(i._userContent=n.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(e,i){e&2&&ht("mat-drawer-container-explicit-backdrop",i._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],standalone:!0,features:[vt([{provide:yi,useExisting:o}]),P],ngContentSelectors:qn,decls:4,vars:2,consts:[[1,"mat-drawer-backdrop",3,"mat-drawer-shown"],[1,"mat-drawer-backdrop",3,"click"]],template:function(e,i){e&1&&(mt(Kn),b(0,Qn,1,2,"div",0),q(1),q(2,1),b(3,Zn,2,0,"mat-drawer-content")),e&2&&(de(i.hasBackdrop?0:-1),s(3),de(i._content?-1:3))},dependencies:[He],styles:['.mat-drawer-container{position:relative;z-index:1;color:var(--mat-sidenav-content-text-color, var(--mat-app-on-background));background-color:var(--mat-sidenav-content-background-color, var(--mat-app-background));box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible;background-color:var(--mat-sidenav-scrim-color)}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;color:var(--mat-sidenav-container-text-color, var(--mat-app-on-surface-variant));box-shadow:var(--mat-sidenav-container-elevation-shadow);background-color:var(--mat-sidenav-container-background-color, var(--mat-app-surface));border-top-right-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));border-bottom-right-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));width:var(--mat-sidenav-container-width);display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0);border-top-left-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));border-bottom-left-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));border-top-right-radius:0;border-bottom-right-radius:0}[dir=rtl] .mat-drawer{border-top-left-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));border-bottom-left-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));border-top-right-radius:0;border-bottom-right-radius:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{border-top-right-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));border-bottom-right-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));border-top-left-radius:0;border-bottom-left-radius:0;left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-side{box-shadow:none;border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid}.mat-drawer-side.mat-drawer-end{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side.mat-drawer-end{border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid;border-left:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}'],encapsulation:2,changeDetection:0})}}return o})(),_n=(()=>{class o extends He{constructor(t,e,i,n,r){super(t,e,i,n,r)}static{this.\u0275fac=function(e){return new(e||o)(d(L),d(ai(()=>rr)),d(It),d(xi),d(pe))}}static{this.\u0275cmp=k({type:o,selectors:[["mat-sidenav-content"]],hostAttrs:[1,"mat-drawer-content","mat-sidenav-content"],hostVars:4,hostBindings:function(e,i){e&2&&Wt("margin-left",i._container._contentMargins.left,"px")("margin-right",i._container._contentMargins.right,"px")},standalone:!0,features:[vt([{provide:te,useExisting:o}]),me,P],ngContentSelectors:Ge,decls:1,vars:0,template:function(e,i){e&1&&(mt(),q(0))},encapsulation:2,changeDetection:0})}}return o})(),nr=(()=>{class o extends Cn{constructor(){super(...arguments),this._fixedInViewport=!1,this._fixedTopGap=0,this._fixedBottomGap=0}get fixedInViewport(){return this._fixedInViewport}set fixedInViewport(t){this._fixedInViewport=Rt(t)}get fixedTopGap(){return this._fixedTopGap}set fixedTopGap(t){this._fixedTopGap=zt(t)}get fixedBottomGap(){return this._fixedBottomGap}set fixedBottomGap(t){this._fixedBottomGap=zt(t)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=si(o)))(i||o)}})()}static{this.\u0275cmp=k({type:o,selectors:[["mat-sidenav"]],hostAttrs:["tabIndex","-1",1,"mat-drawer","mat-sidenav"],hostVars:17,hostBindings:function(e,i){e&2&&(Gt("align",null),Wt("top",i.fixedInViewport?i.fixedTopGap:null,"px")("bottom",i.fixedInViewport?i.fixedBottomGap:null,"px"),ht("mat-drawer-end",i.position==="end")("mat-drawer-over",i.mode==="over")("mat-drawer-push",i.mode==="push")("mat-drawer-side",i.mode==="side")("mat-drawer-opened",i.opened)("mat-sidenav-fixed",i.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],standalone:!0,features:[me,P],ngContentSelectors:Ge,decls:3,vars:0,consts:[["content",""],["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(e,i){e&1&&(mt(),c(0,"div",1,0),q(2),p())},dependencies:[te],encapsulation:2,data:{animation:[vn.transformDrawer]},changeDetection:0})}}return o})(),rr=(()=>{class o extends bn{constructor(){super(...arguments),this._allDrawers=void 0,this._content=void 0}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=si(o)))(i||o)}})()}static{this.\u0275cmp=k({type:o,selectors:[["mat-sidenav-container"]],contentQueries:function(e,i,n){if(e&1&&(At(n,_n,5),At(n,nr,5)),e&2){let r;xt(r=_t())&&(i._content=r.first),xt(r=_t())&&(i._allDrawers=r)}},hostAttrs:[1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(e,i){e&2&&ht("mat-drawer-container-explicit-backdrop",i._backdropOverride)},exportAs:["matSidenavContainer"],standalone:!0,features:[vt([{provide:yi,useExisting:o}]),me,P],ngContentSelectors:Yn,decls:4,vars:2,consts:[[1,"mat-drawer-backdrop",3,"mat-drawer-shown"],[1,"mat-drawer-backdrop",3,"click"]],template:function(e,i){e&1&&(mt(Jn),b(0,Xn,1,2,"div",0),q(1),q(2,1),b(3,tr,2,0,"mat-sidenav-content")),e&2&&(de(i.hasBackdrop?0:-1),s(3),de(i._content?-1:3))},dependencies:[_n],styles:[er],encapsulation:2,changeDetection:0})}}return o})(),fs=(()=>{class o{static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275mod=Me({type:o})}static{this.\u0275inj=ye({imports:[Jt,_i,_i,Jt]})}}return o})();var Sn=["*"];var ar=".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-header{font-size:var(--mat-grid-list-tile-header-primary-text-size, var(--mat-app-body-large))}.mat-grid-tile-header .mat-line{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-grid-tile-header .mat-line:nth-child(n+2){font-size:var(--mat-grid-list-tile-header-secondary-text-size, var(--mat-app-body-medium))}.mat-grid-tile-footer{font-size:var(--mat-grid-list-tile-footer-primary-text-size, var(--mat-app-body-large))}.mat-grid-tile-footer .mat-line{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-grid-tile-footer .mat-line:nth-child(n+2){font-size:var(--mat-grid-list-tile-footer-secondary-text-size, var(--mat-app-body-medium))}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}",wi=class{constructor(){this.columnIndex=0,this.rowIndex=0}get rowCount(){return this.rowIndex+1}get rowspan(){let a=Math.max(...this.tracker);return a>1?this.rowCount+a-1:this.rowCount}update(a,t){this.columnIndex=0,this.rowIndex=0,this.tracker=new Array(a),this.tracker.fill(0,0,this.tracker.length),this.positions=t.map(e=>this._trackTile(e))}_trackTile(a){let t=this._findMatchingGap(a.colspan);return this._markTilePosition(t,a),this.columnIndex=t+a.colspan,new Mi(this.rowIndex,t)}_findMatchingGap(a){a>this.tracker.length;let t=-1,e=-1;do{if(this.columnIndex+a>this.tracker.length){this._nextRow(),t=this.tracker.indexOf(0,this.columnIndex),e=this._findGapEndIndex(t);continue}if(t=this.tracker.indexOf(0,this.columnIndex),t==-1){this._nextRow(),t=this.tracker.indexOf(0,this.columnIndex),e=this._findGapEndIndex(t);continue}e=this._findGapEndIndex(t),this.columnIndex=t+1}while(e-t<a||e==0);return Math.max(t,0)}_nextRow(){this.columnIndex=0,this.rowIndex++;for(let a=0;a<this.tracker.length;a++)this.tracker[a]=Math.max(0,this.tracker[a]-1)}_findGapEndIndex(a){for(let t=a+1;t<this.tracker.length;t++)if(this.tracker[t]!=0)return t;return this.tracker.length}_markTilePosition(a,t){for(let e=0;e<t.colspan;e++)this.tracker[a+e]=t.rowspan}},Mi=class{constructor(a,t){this.row=a,this.col=t}},yn=new le("MAT_GRID_LIST"),sr=(()=>{class o{constructor(t,e){this._element=t,this._gridList=e,this._rowspan=1,this._colspan=1}get rowspan(){return this._rowspan}set rowspan(t){this._rowspan=Math.round(zt(t))}get colspan(){return this._colspan}set colspan(t){this._colspan=Math.round(zt(t))}_setStyle(t,e){this._element.nativeElement.style[t]=e}static{this.\u0275fac=function(e){return new(e||o)(d(It),d(yn,8))}}static{this.\u0275cmp=k({type:o,selectors:[["mat-grid-tile"]],hostAttrs:[1,"mat-grid-tile"],hostVars:2,hostBindings:function(e,i){e&2&&Gt("rowspan",i.rowspan)("colspan",i.colspan)},inputs:{rowspan:"rowspan",colspan:"colspan"},exportAs:["matGridTile"],standalone:!0,features:[P],ngContentSelectors:Sn,decls:2,vars:0,consts:[[1,"mat-grid-tile-content"]],template:function(e,i){e&1&&(mt(),c(0,"div",0),q(1),p())},styles:[".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-header{font-size:var(--mat-grid-list-tile-header-primary-text-size, var(--mat-app-body-large))}.mat-grid-tile-header .mat-line{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-grid-tile-header .mat-line:nth-child(n+2){font-size:var(--mat-grid-list-tile-header-secondary-text-size, var(--mat-app-body-medium))}.mat-grid-tile-footer{font-size:var(--mat-grid-list-tile-footer-primary-text-size, var(--mat-app-body-large))}.mat-grid-tile-footer .mat-line{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-grid-tile-footer .mat-line:nth-child(n+2){font-size:var(--mat-grid-list-tile-footer-secondary-text-size, var(--mat-app-body-medium))}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}"],encapsulation:2,changeDetection:0})}}return o})();var cr=/^-?\d+((\.\d+)?[A-Za-z%$]?)+$/,ge=class{constructor(){this._rows=0,this._rowspan=0}init(a,t,e,i){this._gutterSize=wn(a),this._rows=t.rowCount,this._rowspan=t.rowspan,this._cols=e,this._direction=i}getBaseTileSize(a,t){return`(${a}% - (${this._gutterSize} * ${t}))`}getTilePosition(a,t){return t===0?"0":Ut(`(${a} + ${this._gutterSize}) * ${t}`)}getTileSize(a,t){return`(${a} * ${t}) + (${t-1} * ${this._gutterSize})`}setStyle(a,t,e){let i=100/this._cols,n=(this._cols-1)/this._cols;this.setColStyles(a,e,i,n),this.setRowStyles(a,t,i,n)}setColStyles(a,t,e,i){let n=this.getBaseTileSize(e,i),r=this._direction==="rtl"?"right":"left";a._setStyle(r,this.getTilePosition(n,t)),a._setStyle("width",Ut(this.getTileSize(n,a.colspan)))}getGutterSpan(){return`${this._gutterSize} * (${this._rowspan} - 1)`}getTileSpan(a){return`${this._rowspan} * ${this.getTileSize(a,1)}`}getComputedHeight(){return null}},Ii=class extends ge{constructor(a){super(),this.fixedRowHeight=a}init(a,t,e,i){super.init(a,t,e,i),this.fixedRowHeight=wn(this.fixedRowHeight),cr.test(this.fixedRowHeight)}setRowStyles(a,t){a._setStyle("top",this.getTilePosition(this.fixedRowHeight,t)),a._setStyle("height",Ut(this.getTileSize(this.fixedRowHeight,a.rowspan)))}getComputedHeight(){return["height",Ut(`${this.getTileSpan(this.fixedRowHeight)} + ${this.getGutterSpan()}`)]}reset(a){a._setListStyle(["height",null]),a._tiles&&a._tiles.forEach(t=>{t._setStyle("top",null),t._setStyle("height",null)})}},Ti=class extends ge{constructor(a){super(),this._parseRatio(a)}setRowStyles(a,t,e,i){let n=e/this.rowHeightRatio;this.baseTileHeight=this.getBaseTileSize(n,i),a._setStyle("marginTop",this.getTilePosition(this.baseTileHeight,t)),a._setStyle("paddingTop",Ut(this.getTileSize(this.baseTileHeight,a.rowspan)))}getComputedHeight(){return["paddingBottom",Ut(`${this.getTileSpan(this.baseTileHeight)} + ${this.getGutterSpan()}`)]}reset(a){a._setListStyle(["paddingBottom",null]),a._tiles.forEach(t=>{t._setStyle("marginTop",null),t._setStyle("paddingTop",null)})}_parseRatio(a){let t=a.split(":");t.length,this.rowHeightRatio=parseFloat(t[0])/parseFloat(t[1])}},ki=class extends ge{setRowStyles(a,t){let e=100/this._rowspan,i=(this._rows-1)/this._rows,n=this.getBaseTileSize(e,i);a._setStyle("top",this.getTilePosition(n,t)),a._setStyle("height",Ut(this.getTileSize(n,a.rowspan)))}reset(a){a._tiles&&a._tiles.forEach(t=>{t._setStyle("top",null),t._setStyle("height",null)})}};function Ut(o){return`calc(${o})`}function wn(o){return o.match(/([A-Za-z%]+)$/)?o:`${o}px`}var lr="fit",Es=(()=>{class o{constructor(t,e){this._element=t,this._dir=e,this._gutter="1px"}get cols(){return this._cols}set cols(t){this._cols=Math.max(1,Math.round(zt(t)))}get gutterSize(){return this._gutter}set gutterSize(t){this._gutter=`${t??""}`}get rowHeight(){return this._rowHeight}set rowHeight(t){let e=`${t??""}`;e!==this._rowHeight&&(this._rowHeight=e,this._setTileStyler(this._rowHeight))}ngOnInit(){this._checkCols(),this._checkRowHeight()}ngAfterContentChecked(){this._layoutTiles()}_checkCols(){this.cols}_checkRowHeight(){this._rowHeight||this._setTileStyler("1:1")}_setTileStyler(t){this._tileStyler&&this._tileStyler.reset(this),t===lr?this._tileStyler=new ki:t&&t.indexOf(":")>-1?this._tileStyler=new Ti(t):this._tileStyler=new Ii(t)}_layoutTiles(){this._tileCoordinator||(this._tileCoordinator=new wi);let t=this._tileCoordinator,e=this._tiles.filter(n=>!n._gridList||n._gridList===this),i=this._dir?this._dir.value:"ltr";this._tileCoordinator.update(this.cols,e),this._tileStyler.init(this.gutterSize,t,this.cols,i),e.forEach((n,r)=>{let m=t.positions[r];this._tileStyler.setStyle(n,m.row,m.col)}),this._setListStyle(this._tileStyler.getComputedHeight())}_setListStyle(t){t&&(this._element.nativeElement.style[t[0]]=t[1])}static{this.\u0275fac=function(e){return new(e||o)(d(It),d(Ee,8))}}static{this.\u0275cmp=k({type:o,selectors:[["mat-grid-list"]],contentQueries:function(e,i,n){if(e&1&&At(n,sr,5),e&2){let r;xt(r=_t())&&(i._tiles=r)}},hostAttrs:[1,"mat-grid-list"],hostVars:1,hostBindings:function(e,i){e&2&&Gt("cols",i.cols)},inputs:{cols:"cols",gutterSize:"gutterSize",rowHeight:"rowHeight"},exportAs:["matGridList"],standalone:!0,features:[vt([{provide:yn,useExisting:o}]),P],ngContentSelectors:Sn,decls:2,vars:0,template:function(e,i){e&1&&(mt(),c(0,"div"),q(1),p())},styles:[ar],encapsulation:2,changeDetection:0})}}return o})(),Fs=(()=>{class o{static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275mod=Me({type:o})}static{this.\u0275inj=ye({imports:[mi,Jt,mi,Jt]})}}return o})();var H=function(o){return o[o.null=0]="null",o[o.read=1]="read",o[o.write=2]="write",o}(H||{});var G=(()=>{class o{http;authService;languageService;config;messageService;storageService;exportService;route;context$=new gt(void 0);contexts$=new gt({ours:[]});defaultContextId$=new gt(void 0);editedContext$=new gt(void 0);importedContext=[];toolsChanged$=new pt;mapViewFromRoute={};options;baseUrl;tools;toolbar;get defaultContextUri(){return this.storageService.get("favorite.context.uri")||this._defaultContextUri||this.options.defaultContextUri}set defaultContextUri(t){this._defaultContextUri=t}_defaultContextUri;constructor(t,e,i,n,r,m,_,y){this.http=t,this.authService=e,this.languageService=i,this.config=n,this.messageService=r,this.storageService=m,this.exportService=_,this.route=y,this.options=Object.assign({basePath:"contexts",contextListFile:"_contexts.json",defaultContextUri:"_default"},this.config.getConfig("context")),this.baseUrl=this.options.url??"",this.readParamsFromRoute(),this.authService.hasAuthService?this.authService.logged$.subscribe(h=>{h&&(this.contexts$.pipe(Qi(1),Ht()).subscribe(()=>{this.handleContextsChange()}),this.loadContexts())}):(this.loadContexts(),this.handleContextsChange(!1))}get(t,e){let i=this.baseUrl+"/contexts";return t&&this.authService.authenticated&&(i+="?permission="+t.join(),e&&(i+="&hidden=true")),this.http.get(i)}getById(t){let e=this.baseUrl+"/contexts/"+t;return this.http.get(e)}getDetails(t){let e=`${this.baseUrl}/contexts/${t}/details`;return this.http.get(e).pipe(ce(i=>{throw this.handleError(i,t),i}))}getDefault(){if(this.authService.authenticated){let t=this.baseUrl+"/contexts/default";return this.http.get(t).pipe(ri(e=>{this.defaultContextId$.next(e.id)}))}else{let t=this.storageService.get("favorite.context.uri");return this.defaultContextId$.next(t),this.getContextByUri(t)}}getProfilByUser(){if(this.baseUrl){let t=this.baseUrl+"/profils?";return this.http.get(t)}return jt([])}setDefault(t){if(this.authService.authenticated){let e=this.baseUrl+"/contexts/default";return this.http.post(e,{defaultContextId:t})}else return this.storageService.set("favorite.context.uri",t),jt(void 0)}hideContext(t){let e=this.baseUrl+"/contexts/"+t+"/hide";return this.http.post(e,{})}showContext(t){let e=this.baseUrl+"/contexts/"+t+"/show";return this.http.post(e,{})}delete(t,e=!1){let i={ours:[]};if(Object.keys(this.contexts$.value).forEach(r=>i[r]=this.contexts$.value[r].filter(m=>m.id!==t)),e)return this.importedContext=this.importedContext.filter(r=>r.id!==t),jt(this.contexts$.next(i));let n=this.baseUrl+"/contexts/"+t;return this.http.delete(n).pipe(ri(()=>{this.contexts$.next(i)}))}create(t){let e=this.baseUrl+"/contexts";return this.http.post(e,t).pipe(yt(i=>(this.authService.authenticated?i.permission=H[H.write]:i.permission=H[H.read],this.contexts$.value.ours.unshift(i),this.contexts$.next(this.contexts$.value),i)))}clone(t,e={}){let i=this.baseUrl+"/contexts/"+t+"/clone";return this.http.post(i,e).pipe(yt(n=>(n.permission=H[H.write],this.contexts$.value.ours.unshift(n),this.contexts$.next(this.contexts$.value),n)))}update(t,e){let i=this.baseUrl+"/contexts/"+t;return this.http.patch(i,e)}addToolAssociation(t,e){let i=`${this.baseUrl}/contexts/${t}/tools`,n={toolId:e};return this.http.post(i,n)}deleteToolAssociation(t,e){let i=`${this.baseUrl}/contexts/${t}/tools/${e}`;return this.http.delete(i)}getPermissions(t){let e=this.baseUrl+"/contexts/"+t+"/permissions";return this.http.get(e)}addPermissionAssociation(t,e,i){let n=`${this.baseUrl}/contexts/${t}/permissions`,r={profil:e,typePermission:i};return this.http.post(n,r).pipe(ce(m=>{throw this.handleError(m,void 0,!0),[m]}))}deletePermissionAssociation(t,e){let i=`${this.baseUrl}/contexts/${t}/permissions/${e}`;return this.http.delete(i)}getLocalContexts(){let t=this.getPath(this.options.contextListFile);return this.http.get(t).pipe(yt(e=>({ours:e})))}getLocalContext(t){let e=this.getPath(`${t}.json`);return this.http.get(e).pipe(Hi(i=>{if(!i.base)return jt(i);let n=this.getPath(`${i.base}.json`);return this.http.get(n).pipe(yt(r=>{let m=i;return m.map=ie.mergeDeep(r.map,i.map),m.layers=(r.layers||[]).concat(i.layers||[]).reverse().filter((_,y,h)=>!_.id||h.findIndex(M=>M.id===_.id)===y).reverse(),m.toolbar=i.toolbar||r.toolbar,m.message=i.message||r.message,m.messages=i.messages||r.messages,m.tools=(i.tools||[]).concat(r.tools||[]).filter((_,y,h)=>h.findIndex(M=>M.name===_.name)===y),m}),ce(r=>{throw this.handleError(r,t),r}))}),ce(i=>{throw this.handleError(i,t),i}))}loadContexts(t,e){let i;this.baseUrl?i=this.get(t,e):i=this.getLocalContexts(),i.subscribe(n=>{n.ours=this.importedContext.concat(n.ours),this.contexts$.next(n)})}loadDefaultContext(){let t=(e=!1)=>{!e&&this.baseUrl&&this.authService.authenticated?this.getDefault().subscribe(i=>{this.defaultContextUri=i.uri,this.addContextToList(i),this.setContext(i)},()=>{this.defaultContextId$.next(void 0),this.loadContext(this.defaultContextUri)}):this.loadContext(this.defaultContextUri)};this.route&&this.route.options.contextKey?this.route.queryParams.pipe(wt(100)).subscribe(e=>{let i=e[this.route.options.contextKey],n=!1;i&&(this.defaultContextUri=i,n=!0),t(n)}):t()}loadContext(t){let e=this.context$.value;e&&e.uri===t||this.getContextByUri(t).pipe(Ht()).subscribe(i=>{this.addContextToList(i),this.setContext(i)},()=>{t!==this.options.defaultContextUri&&this.loadContext(this.options.defaultContextUri)})}setContext(t){this.handleContextMessage(t);let e=this.context$.value;if(e&&t&&t.id===e.id){t.map.view.keepCurrentView===void 0&&(t.map.view.keepCurrentView=!0),this.context$.next(t);return}t.map||(t.map={view:{}}),Object.assign(t.map.view,this.mapViewFromRoute),this.context$.next(t)}loadEditedContext(t){this.getContextByUri(t).subscribe(e=>{this.setEditedContext(e)})}setEditedContext(t){this.editedContext$.next(t)}getContextFromMap(t,e){let i=t.ol.getView(),n=i.getProjection().getCode(),r=new vi(i.getCenter()).transform(n,"EPSG:4326"),m={uri:Ae(),title:"",scope:"private",map:{view:{center:r.getCoordinates(),zoom:i.getZoom(),projection:n,maxZoomOnExtent:t.viewController.maxZoomOnExtent}},layers:[],tools:[]},_=e?[]:[...t.layerController.treeLayers],y=t.layerController.baseLayer;return y&&_.unshift(y),m.layers=_.map(h=>h.saveableOptions).filter(Boolean),m.tools=this.tools.map(h=>({id:String(h.id),global:h.global})),m}getContextFromLayers(t,e,i,n){let r=t.ol.getView(),m=r.getProjection().getCode(),_=new vi(r.getCenter()).transform(m,"EPSG:4326"),y={uri:i,title:i,map:{view:{center:_.getCoordinates(),zoom:r.getZoom(),projection:m,keepCurrentView:n}},layers:[],toolbar:[],tools:[],extraFeatures:[]};return y.layers=t.layerController.baseLayers.map(h=>({baseLayer:!0,sourceOptions:h.options.sourceOptions,title:h.options.title,visible:h.visible})),e.forEach(h=>{if(Io(h))return y.layers.push(h.options);if(h.ol.getSource()instanceof Ci)if(h.ol.getSource()instanceof Ci){let M=this.getExtraFeatures(h);M.name=h.options.title,M.opacity=h.opacity,M.visible=h.visible,y.extraFeatures.push(M)}else{let M=h.options;M.zIndex=h.zIndex,M.visible=h.visible,M.opacity=h.opacity,delete M.source,y.layers.push(M)}else{let M=h.options;M.zIndex=h.zIndex,M.visible=h.visible,M.opacity=h.opacity,delete M.source,y.layers.push(M)}}),y.toolbar=this.toolbar,y.tools=this.tools,y}getExtraFeatures(t){let e=new Re,i;t.ol.getSource()instanceof Po?(i=t.ol.getSource().getFeatures(),i=i.flatMap(_=>_.get("features"))):i=t.ol.getSource().getFeatures();let n=this.exportService.cleanFeatures(i,"GeoJSON","_featureStore"),r=e.writeFeatures(n,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"});return JSON.parse(r)}setTools(t){this.tools=t}setToolbar(t){this.toolbar=t}handleContextMessage(t){this.context$.value&&t.uri&&this.context$.value.uri!==t.uri&&this.messageService.removeAllAreNotError(),t.messages=t.messages?t.messages:[],t.messages.push(t.message),t.messages.map(e=>{e&&this.messageService.message(e)})}getContextByUri(t){if(this.baseUrl){let i;for(let r of Object.keys(this.contexts$.value))if(i=this.contexts$.value[r].find(m=>m.uri===t),i)break;if(i&&i.imported)return jt(i);let n=i?i.id:t;return this.getDetails(n)}let e=this.contexts$.value.ours.find(i=>i.uri===t&&i.imported===!0);return e?jt(e):this.getLocalContext(t)}getContextLayers(t){return t.layerController.treeLayers}readParamsFromRoute(){this.route&&this.route.queryParams.subscribe(t=>{let e=this.route.options.centerKey;if(e&&t[e]){let r=t[e];this.mapViewFromRoute.center=r.split(",").map(Number)}let i=this.route.options.projectionKey;if(i&&t[i]){let r=t[i];this.mapViewFromRoute.projection=r}let n=this.route.options.zoomKey;if(n&&t[n]){let r=t[n];this.mapViewFromRoute.zoom=Number(r)}})}getPath(t){return`${this.options.basePath.replace(/\/$/,"")}/${t}`}handleError(t,e,i){let n=this.contexts$.value.ours.find(m=>m.uri===e),r=n?n.title:e;t.error.title=this.languageService.translate.instant("igo.context.contextManager.invalid.title"),t.error.message=this.languageService.translate.instant("igo.context.contextManager.invalid.text",{value:r}),t.error.toDisplay=!0,i&&(t.error.title=this.languageService.translate.instant("igo.context.contextManager.errors.addPermissionTitle"),t.error.message=this.languageService.translate.instant("igo.context.contextManager.errors.addPermission")),this.messageService.error("igo.context.contextManager.errors.addPermission","igo.context.contextManager.errors.addPermissionTitle")}handleContextsChange(t=!0){let e=this.context$.value,i=this.editedContext$.value;(!e||e.uri===this.options.defaultContextUri)&&(t=!1),!t||!this.findContext(e)?(this.defaultContextUri=void 0,this.loadDefaultContext()):(this.getContextByUri(e.uri).pipe(Ht()).subscribe(r=>{this.toolsChanged$.next(r)}),this.baseUrl&&this.authService.authenticated&&this.getDefault().subscribe());let n=this.findContext(i);(!n||n.permission!=="write")&&this.setEditedContext(void 0)}addContextToList(t){if(!this.findContext(t)){let i={id:t.id,uri:t.uri,title:t.title,scope:t.scope,permission:H[H.read]};this.contexts$.value&&this.contexts$.value.public&&(this.contexts$.value.public.push(i),this.contexts$.next(this.contexts$.value))}}findContext(t){if(!t)return!1;let e=this.contexts$.value,i;for(let n of Object.keys(e))if(i=e[n].find(m=>t.id&&m.id===t.id||t.uri&&m.uri===t.uri),i)break;return i}static \u0275fac=function(e){return new(e||o)(K(Pe),K(N),K(lt),K(z),K(j),K(Ct),K(fn),K(oe,8))};static \u0275prov=Mt({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var Ei=class extends Error{};var ne=class o extends Ei{constructor(){super("Nothing to export"),Object.setPrototypeOf(this,o.prototype)}};var In=(()=>{class o{export(t){return this.exportAsync(t)}exportAsync(t){let e=i=>{if(this.nothingToExport(t)===!0){i.error(new ne);return}let r=JSON.stringify(t);wo(r,"text/json;charset=utf-8",`${t.uri}.json`),i.complete()};return new Se(e)}nothingToExport(t){return t.map===void 0}static \u0275fac=function(e){return new(e||o)};static \u0275prov=Mt({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();function Tn(o,a){if(o instanceof ne){this.handleNothingToExportError(a);return}a.error("igo.context.contextImportExport.export.failed.text","igo.context.contextImportExport.export.failed.title")}function kn(o){o.success("igo.context.contextImportExport.export.success.text","igo.context.contextImportExport.export.success.title")}var re=class extends Error{},Ke=class o extends re{constructor(){super("Invalid file"),Object.setPrototypeOf(this,o.prototype)}},xe=class o extends re{constructor(){super("Failed to read file"),Object.setPrototypeOf(this,o.prototype)}},Fi=class o extends re{constructor(){super("Nothing to import"),Object.setPrototypeOf(this,o.prototype)}},qe=class extends re{constructor(){super("File is too large"),Object.setPrototypeOf(this,Fi.prototype)}};function Pn(o,a,t,e){if(Object.keys(a).length<=0){gr(o,t);return}let i=xr(o);hr(a,i,e),t.success("igo.context.contextImportExport.import.success.text","igo.context.contextImportExport.import.success.title",void 0,{value:i})}function En(o,a,t,e){e=e||30,{"Invalid file":dr,"File is too large":ur,"Failed to read file":fr}[a.message](o,a,t,e)}function dr(o,a,t){t.error("igo.context.contextImportExport.import.invalid.text","igo.context.contextImportExport.import.invalid.title",void 0,{value:o.name,mimeType:o.type})}function ur(o,a,t,e){t.error("igo.context.contextImportExport.import.tooLarge.text","igo.context.contextImportExport.import.tooLarge.title",void 0,{value:o.name,size:e})}function fr(o,a,t){t.error("igo.context.contextImportExport.import.unreadable.text","igo.context.contextImportExport.import.unreadable.title",void 0,{value:o.name})}function gr(o,a){a.error("igo.context.contextImportExport.import.empty.text","igo.context.contextImportExport.import.empty.title",void 0,{value:o.name})}function hr(o,a,t){o.title=a,o.imported=!0,t.contexts$.value.ours.unshift(o),t.contexts$.next(t.contexts$.value),t.importedContext.unshift(o),t.loadContext(o.uri)}function Fn(o){return o.name.split(".").pop().toLowerCase()}function xr(o){return o.name.substr(0,o.name.lastIndexOf("."))}function Bn(o,a){let t={type:"vector",queryable:!0},e=On(o),i=new bi(t);i.ol.addFeatures(e);let n,r=!1,m=e[0]?.getKeys()??[];m.includes("_style")||m.includes("_mapTitle")?n=tn():(n=en(),r=!0);let _=new Si({title:o.name,isIgoInternalLayer:!0,source:i,igoStyle:{editable:r},style:n,visible:o.visible,opacity:o.opacity});return a.layerController.add(_),_}function Dn(o,a,t,e){let i,n;if(t.getStyleList(o.name+".styleByAttribute")){let y=t.getStyleList(o.name+".styleByAttribute");i=(h,M)=>e.createStyleByAttribute(h,y,M)}else if(t.getStyleList(o.name+".clusterStyle")){let y=t.getStyleList(o.name+".clusterParam");n=t.getStyleList(o.name+".distance"),i=(h,M)=>{let W=e.createStyle(t.getStyleList(o.name+".clusterStyle"),h,M);return e.createClusterStyle(h,M,y,W)}}else t.getStyleList(o.name+".style")?i=(y,h)=>e.createStyle(t.getStyleList(o.name+".style"),y,h):i=(y,h)=>e.createStyle(t.getStyleList("default.style"),y,h);let r,m=On(o);if(t.getStyleList(o.name+".clusterStyle")){let y={distance:n,type:"cluster",queryable:!0};r=new Eo(y),r.ol.source.addFeatures(m)}else{let y={type:"vector",queryable:!0};r=new bi(y),r.ol.addFeatures(m)}let _=new Si({title:o.name,isIgoInternalLayer:!0,source:r,style:i,opacity:o.opacity,visible:o.visible});return a.layerController.add(_),_}function On(o){return new Re().readFeatures(o,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"})}var Ln=(()=>{class o{config;static allowedMimeTypes=["application/json"];static allowedExtensions="json";clientSideFileSizeMax;constructor(t){this.config=t;let e=this.config.getConfig("importExport.clientSideFileSizeMaxMb");this.clientSideFileSizeMax=(e||30)*Math.pow(1024,2)}import(t){return this.importAsync(t)}getFileImporter(t){let e=Fn(t),i=t.type,n=[...o.allowedMimeTypes],r=o.allowedExtensions;if(!(n.indexOf(i)<0&&r.indexOf(e)<0)&&(i==="application/json"||e===o.allowedExtensions))return this.importFile}importAsync(t){let e=i=>{if(t.size>=this.clientSideFileSizeMax){i.error(new qe);return}let n=this.getFileImporter(t);if(n===void 0){i.error(new Ke);return}n.call(this,t,i)};return new Se(e)}importFile(t,e){let i=new FileReader;i.onload=n=>{try{let r=this.parseContextFromFile(t,n.target.result);e.next(r)}catch{e.error(new xe)}e.complete()},i.onerror=()=>{e.error(new xe)},i.readAsText(t,"UTF-8")}parseContextFromFile(t,e){return JSON.parse(e)}static \u0275fac=function(e){return new(e||o)(K(z))};static \u0275prov=Mt({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var Cr=o=>({size:o});function br(o,a){if(o&1){let t=T();c(0,"div")(1,"form",7)(2,"div",8)(3,"button",9),u(4,"async"),S("click",function(){v(t);let i=A(10);return C(i.click())}),x(5),u(6,"translate"),p(),E(7,"igo-spinner",10),u(8,"async"),c(9,"input",11,0),S("click",function(){v(t);let i=A(10);return C(i.value=null)})("change",function(i){v(t);let n=g();return C(n.importFiles(i.target.files))}),p()()(),c(11,"section",12)(12,"h4"),x(13),u(14,"translate"),p(),c(15,"ul")(16,"li"),x(17),u(18,"translate"),p()()()()}if(o&2){let t=g();s(3),l("disabled",f(4,7,t.loading$)),s(2),w(" ",f(6,9,"igo.geo.importExportForm.importButton")," "),s(2),l("shown",f(8,11,t.loading$)),s(2),Wt("display","none"),s(4),V(f(14,13,"igo.geo.importExportForm.importClarifications")),s(4),w(" ",no(18,15,"igo.geo.importExportForm.importSizeMax",Ie(18,Cr,t.fileSizeMb))," ")}}function Sr(o,a){if(o&1&&(c(0,"mat-option",4),x(1),p()),o&2){let t=a.$implicit;l("value",t),s(),V(t.title)}}function yr(o,a){if(o&1){let t=T();c(0,"form",13)(1,"div",14)(2,"mat-form-field",15)(3,"mat-label"),x(4),u(5,"translate"),p(),E(6,"input",16),p()(),c(7,"div",14)(8,"mat-form-field")(9,"mat-label"),x(10),u(11,"translate"),p(),c(12,"mat-select",17)(13,"mat-option",18,1),S("click",function(){v(t);let i=A(14),n=g();return C(n.selectAll(i))}),x(15),u(16,"translate"),p(),E(17,"mat-divider"),b(18,Sr,2,2,"mat-option",19),p()()(),c(19,"div",8)(20,"button",9),u(21,"async"),S("click",function(){v(t);let i=g();return C(i.handleExportFormSubmit(i.form.value))}),x(22),u(23,"translate"),p(),E(24,"igo-spinner",10),u(25,"async"),p()()}if(o&2){let t=g();l("formGroup",t.form),s(4),V(f(5,9,"igo.context.contextImportExport.export.exportContextName")),s(6),V(f(11,11,"igo.context.contextImportExport.export.exportPlaceHolder")),s(3),l("value",1),s(2),w(" ",f(16,13,"igo.context.contextImportExport.export.exportSelectAll")," "),s(3),l("ngForOf",t.userControlledLayerList),s(2),l("disabled",!t.form.valid||f(21,15,t.loading$)),s(2),w(" ",f(23,17,"igo.geo.importExportForm.exportButton")," "),s(2),l("shown",f(25,19,t.loading$))}}var wr=(()=>{class o{contextImportService;contextExportService;messageService;formBuilder;config;contextService;form;layers;inputProj="EPSG:4326";loading$=new gt(!1);forceNaming=!1;layerList;userControlledLayerList;res;clientSideFileSizeMax;fileSizeMb;activeImportExport="import";map;constructor(t,e,i,n,r,m){this.contextImportService=t,this.contextExportService=e,this.messageService=i,this.formBuilder=n,this.config=r,this.contextService=m,this.buildForm()}ngOnInit(){let t=this.config.getConfig("importExport.clientSideFileSizeMaxMb");this.clientSideFileSizeMax=(t||30)*Math.pow(1024,2),this.fileSizeMb=this.clientSideFileSizeMax/Math.pow(1024,2),this.layerList=this.map.layerController.all,this.userControlledLayerList=this.map.layerController.treeLayers}importFiles(t){this.loading$.next(!0);for(let e of t)this.contextImportService.import(e).pipe(Vt(1)).subscribe(i=>this.onFileImportSuccess(e,i),i=>this.onFileImportError(e,i),()=>{this.loading$.next(!1)})}handleExportFormSubmit(t){this.loading$.next(!0),this.res=this.contextService.getContextFromLayers(this.map,t.layers,t.name,!1),this.res.imported=!0,this.contextExportService.export(this.res).pipe(Vt(1)).subscribe({error:e=>this.onFileExportError(e),complete:()=>{this.onFileExportSuccess(),this.loading$.next(!1)}})}buildForm(){this.form=this.formBuilder.group({layers:["",[hi.required]],name:["",[hi.required]]})}onFileImportSuccess(t,e){Pn(t,e,this.messageService,this.contextService)}onFileImportError(t,e){this.loading$.next(!1),En(t,e,this.messageService,this.fileSizeMb)}onFileExportError(t){this.loading$.next(!1),Tn(t,this.messageService)}onFileExportSuccess(){kn(this.messageService)}selectAll(t){t._selected&&(this.form.controls.layers.setValue(this.userControlledLayerList),t._selected=!0),t._selected===!1&&this.form.controls.layers.setValue([])}onImportExportChange(t){this.activeImportExport=t.value}static \u0275fac=function(e){return new(e||o)(d(Ln),d(In),d(j),d(Bt),d(z),d(G))};static \u0275cmp=k({type:o,selectors:[["igo-context-import-export"]],inputs:{map:"map"},standalone:!0,features:[P],decls:10,vars:11,consts:[["fileInput",""],["e",""],[1,"import-export-toggle","mat-typography"],[3,"change","value"],[3,"value"],[4,"ngIf"],["class","igo-form",3,"formGroup",4,"ngIf"],[1,"igo-form"],[1,"igo-form-button-group"],["mat-raised-button","","type","button",3,"click","disabled"],[3,"shown"],["type","file",3,"click","change"],[1,"mat-typography"],[1,"igo-form",3,"formGroup"],[1,"igo-input-container"],[1,"example-full-width"],["formControlName","name","matInput","",3,"value"],["formControlName","layers","multiple",""],[3,"click","value"],[3,"value",4,"ngFor","ngForOf"]],template:function(e,i){e&1&&(c(0,"div",2)(1,"mat-button-toggle-group",3),S("change",function(r){return i.onImportExportChange(r)}),c(2,"mat-button-toggle",4),x(3),u(4,"translate"),p(),c(5,"mat-button-toggle",4),x(6),u(7,"translate"),p()()(),b(8,br,19,20,"div",5)(9,yr,26,21,"form",6)),e&2&&(s(),l("value",i.activeImportExport),s(),l("value","import"),s(),w(" ",f(4,7,"igo.geo.importExportForm.importTabTitle")," "),s(2),l("value","export"),s(),w(" ",f(7,9,"igo.geo.importExportForm.exportTabTitle")," "),s(2),l("ngIf",i.activeImportExport==="import"),s(),l("ngIf",i.activeImportExport==="export"))},dependencies:[rn,on,nn,$,rt,kt,ot,nt,Tt,_o,R,tt,dn,Dt,Pt,Et,Z,Q,De,Y,J,Bo,Fo,Fe,Be,xo,ho,Zt,Te,F,B],styles:[`.import-export-toggle[_ngcontent-%COMP%]{padding:10px;text-align:center}.import-export-toggle[_ngcontent-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%]{width:100%}.import-export-toggle[_ngcontent-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%]   mat-button-toggle[_ngcontent-%COMP%]{width:50%}.igo-input-container[_ngcontent-%COMP%]{padding:10px}.igo-input-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}h4[_ngcontent-%COMP%]{padding:0 5px}.igo-form[_ngcontent-%COMP%]{padding:15px 5px}.igo-form-button-group[_ngcontent-%COMP%]{text-align:center;padding-top:10px}igo-spinner[_ngcontent-%COMP%]{position:absolute;padding-left:10px}
/*# sourceMappingURL=context-import-export.component-M4W4QXLR.css.map */`]})}return o})();var ve=(()=>{class o{dialogRef;title;constructor(t){this.dialogRef=t}static \u0275fac=function(e){return new(e||o)(d(Ko))};static \u0275cmp=k({type:o,selectors:[["igo-bookmark-dialog"]],standalone:!0,features:[P],decls:14,vars:14,consts:[["mat-dialog-title","",1,"mat-typography"],["mat-dialog-content","",1,"mat-typography"],["matInput","","required","","autocomplete","off","maxlength","128",3,"ngModelChange","placeholder","ngModel"],["mat-dialog-actions",""],["mat-button","","color","primary",3,"click","disabled"],["mat-button","",3,"click"]],template:function(e,i){e&1&&(c(0,"h1",0),x(1),u(2,"translate"),p(),c(3,"div",1)(4,"mat-form-field")(5,"input",2),u(6,"translate"),Qt("ngModelChange",function(r){return qt(i.title,r)||(i.title=r),r}),p()()(),c(7,"div",3)(8,"button",4),S("click",function(){return i.dialogRef.close(i.title)}),x(9),u(10,"translate"),p(),c(11,"button",5),S("click",function(){return i.dialogRef.close(!1)}),x(12),u(13,"translate"),p()()),e&2&&(s(),w(" ",f(2,6,"igo.context.bookmarkButton.dialog.title"),`
`),s(4),l("placeholder",f(6,8,"igo.context.bookmarkButton.dialog.placeholder")),Kt("ngModel",i.title),s(3),l("disabled",!i.title),s(),w(" ",f(10,10,"igo.common.confirmDialog.confirmBtn")," "),s(3),w(" ",f(13,12,"igo.common.confirmDialog.cancelBtn")," "))},dependencies:[Qo,Zo,Z,Q,Y,J,rt,ot,nt,Ft,Oe,Xt,Jo,R,tt,F,B],encapsulation:2})}return o})();var Tr=o=>({"mat-list-item-light":o});function kr(o,a){if(o&1&&(c(0,"mat-icon"),x(1),p()),o&2){let t=g(2);s(),V(t.context.icon?t.context.icon:t.context.scope==="public"?"public":"star")}}function Pr(o,a){if(o&1&&E(0,"img",8),o&2){let t=g(2);l("src",t.context.iconImage,Yi)}}function Er(o,a){if(o&1){let t=T();c(0,"button",5),u(1,"translate"),S("click",function(){v(t);let i=g();return C(i.favoriteClick(i.context))}),b(2,kr,2,1,"mat-icon",6)(3,Pr,1,1,"img",7),p()}if(o&2){let t=g();l("matTooltip",t.auth.authenticated?f(1,4,"igo.context.contextManager.favorite"):"")("color",t.default?"primary":"default"),s(2),l("ngIf",!t.context.iconImage),s(),l("ngIf",t.context.iconImage)}}function Fr(o,a){if(o&1){let t=T();c(0,"button",5),u(1,"translate"),S("click",function(){v(t);let i=g();return C(i.favoriteClick(i.context))}),c(2,"mat-icon"),x(3,"star"),p()()}if(o&2){let t=g();l("matTooltip",f(1,2,"igo.context.contextManager.favorite"))("color",t.default?"primary":"default")}}function Br(o,a){if(o&1){let t=T();c(0,"button",18),u(1,"translate"),S("click",function(){v(t);let i=g(2);return C(i.save.emit(i.context))}),c(2,"mat-icon"),x(3,"save"),p()()}if(o&2){let t=g(2);l("matTooltip",f(1,2,"igo.context.contextManager.save"))("color",t.color)}}function Dr(o,a){if(o&1){let t=T();c(0,"button",19),u(1,"translate"),S("click",function(){v(t);let i=g(2);return C(i.managePermissions.emit(i.context))}),c(2,"mat-icon"),x(3,"manage_accounts"),p()()}if(o&2){let t=g(2);l("matTooltip",f(1,2,"igo.context.contextManager.managePermissions"))("color",t.color)}}function Or(o,a){if(o&1){let t=T();c(0,"button",20),u(1,"translate"),S("click",function(){v(t);let i=g(2);return C(i.clone.emit(i.context))}),c(2,"mat-icon"),x(3,"content_copy"),p()()}if(o&2){let t=g(2);l("matTooltip",f(1,2,"igo.context.contextManager.clone"))("color",t.color)}}function Lr(o,a){if(o&1){let t=T();c(0,"button",21),u(1,"translate"),S("click",function(){v(t);let i=g(2);return C(i.edit.emit(i.context))}),c(2,"mat-icon"),x(3,"edit"),p()()}if(o&2){let t=g(2);l("color",t.color)("matTooltip",f(1,2,"igo.context.contextManager.edit"))}}function $r(o,a){if(o&1){let t=T();c(0,"button",22),u(1,"translate"),S("click",function(){v(t);let i=g(2);return C(i.hide.emit(i.context))}),c(2,"mat-icon"),x(3,"visibility"),p()()}if(o&2){let t=g(2);l("color",t.color)("matTooltip",f(1,2,"igo.context.contextManager.hide"))}}function jr(o,a){if(o&1){let t=T();c(0,"button",22),u(1,"translate"),S("click",function(){v(t);let i=g(2);return C(i.show.emit(i.context))}),c(2,"mat-icon"),x(3,"visibility_off"),p()()}if(o&2){let t=g(2);l("color",t.color)("matTooltip",f(1,2,"igo.context.contextManager.show"))}}function Vr(o,a){if(o&1){let t=T();c(0,"button",23),u(1,"translate"),S("click",function(){v(t);let i=g(2);return C(i.delete.emit(i.context))}),c(2,"mat-icon"),x(3,"delete"),p()()}o&2&&l("matTooltip",f(1,1,"igo.context.contextManager.delete"))}function Ar(o,a){if(o&1){let t=T();c(0,"div",9),b(1,Br,4,4,"button",10),c(2,"div",11,0),b(4,Dr,4,4,"button",12)(5,Or,4,4,"button",13)(6,Lr,4,4,"button",14)(7,$r,4,4,"button",15)(8,jr,4,4,"button",15)(9,Vr,4,3,"button",16),p(),c(10,"button",17),S("click",function(){v(t);let i=g();return C(i.collapsed=!i.collapsed)}),c(11,"mat-icon"),x(12,"more_horiz"),p()()()}if(o&2){let t=A(3),e=g();s(),l("ngIf",e.collapsed&&e.selected&&(e.context.permission===e.typePermission[e.typePermission.write]||e.context.imported)),s(3),l("ngIf",e.canShare&&!e.context.imported),s(),l("ngIf",!e.context.imported),s(),l("ngIf",e.context.permission===e.typePermission[e.typePermission.write]&&!e.context.imported),s(),l("ngIf",!e.context.hidden&&!e.context.imported),s(),l("ngIf",e.context.hidden&&!e.context.imported),s(),l("ngIf",e.context.permission===e.typePermission[e.typePermission.write]||e.context.imported),s(),l("color",e.color)("target",t)("collapsed",e.collapsed)}}var Ze=(()=>{class o{auth;storageService;typePermission=H;color="primary";collapsed=!0;showFavorite=!0;context;default;selected;edit=new I;delete=new I;save=new I;clone=new I;hide=new I;show=new I;favorite=new I;managePermissions=new I;manageTools=new I;get hidden(){return this.context.hidden}get canShare(){return this.storageService.get("canShare")===!0}constructor(t,e){this.auth=t,this.storageService=e}favoriteClick(t){this.favorite.emit(t)}static \u0275fac=function(e){return new(e||o)(d(N),d(Ct))};static \u0275cmp=k({type:o,selectors:[["igo-context-item"]],inputs:{showFavorite:"showFavorite",context:"context",default:"default",selected:"selected"},outputs:{edit:"edit",delete:"delete",save:"save",clone:"clone",hide:"hide",show:"show",favorite:"favorite",managePermissions:"managePermissions",manageTools:"manageTools"},standalone:!0,features:[P],decls:6,vars:7,consts:[["actions",""],[1,"mat-list-item",3,"ngClass"],["matListItemAvatar","","mat-icon-button","","igoStopPropagation","","matTooltipShowDelay","500",3,"matTooltip","color","click",4,"ngIf"],["matListItemTitle",""],["matListItemMeta","","igoStopPropagation","","class","igo-actions-container",4,"ngIf"],["matListItemAvatar","","mat-icon-button","","igoStopPropagation","","matTooltipShowDelay","500",3,"click","matTooltip","color"],[4,"ngIf"],[3,"src",4,"ngIf"],[3,"src"],["matListItemMeta","","igoStopPropagation","",1,"igo-actions-container"],["class","save-button","mat-icon-button","","matTooltipShowDelay","500",3,"matTooltip","color","click",4,"ngIf"],[1,"igo-actions-expand-container"],["mat-icon-button","","matTooltipShowDelay","500",3,"matTooltip","color","click",4,"ngIf"],["class","clone-button","mat-icon-button","","matTooltipShowDelay","500",3,"matTooltip","color","click",4,"ngIf"],["class","edit-button","mat-icon-button","","matTooltipShowDelay","500",3,"color","matTooltip","click",4,"ngIf"],["class","hide-button","mat-icon-button","","matTooltipShowDelay","500",3,"color","matTooltip","click",4,"ngIf"],["class","delete-button","mat-icon-button","","color","warn","matTooltipShowDelay","500",3,"matTooltip","click",4,"ngIf"],["mat-icon-button","","igoCollapse","",1,"actions-button",3,"click","color","target","collapsed"],["mat-icon-button","","matTooltipShowDelay","500",1,"save-button",3,"click","matTooltip","color"],["mat-icon-button","","matTooltipShowDelay","500",3,"click","matTooltip","color"],["mat-icon-button","","matTooltipShowDelay","500",1,"clone-button",3,"click","matTooltip","color"],["mat-icon-button","","matTooltipShowDelay","500",1,"edit-button",3,"click","color","matTooltip"],["mat-icon-button","","matTooltipShowDelay","500",1,"hide-button",3,"click","color","matTooltip"],["mat-icon-button","","color","warn","matTooltipShowDelay","500",1,"delete-button",3,"click","matTooltip"]],template:function(e,i){e&1&&(c(0,"mat-list-item",1),b(1,Er,4,6,"button",2)(2,Fr,4,4,"button",2),c(3,"span",3),x(4),p(),b(5,Ar,13,10,"div",4),p()),e&2&&(l("ngClass",Ie(5,Tr,i.hidden)),s(),l("ngIf",i.auth.authenticated),s(),l("ngIf",!i.auth.authenticated&&i.showFavorite),s(2),V(i.context.title),s(),l("ngIf",i.auth.authenticated))},dependencies:[Ve,je,bo,Le,$e,so,$,R,dt,ue,ft,ut,it,et,Ro,F,B],styles:[`[_nghost-%COMP%]{overflow:hidden}[_nghost-%COMP%]   .igo-actions-container[_ngcontent-%COMP%]{flex-shrink:0}[_nghost-%COMP%]   .igo-actions-expand-container[_ngcontent-%COMP%]{display:inline-flex}[_nghost-%COMP%]   mat-icon.disabled[_ngcontent-%COMP%]{color:#00000061}[_nghost-%COMP%]   button[matlistitemavatar][_ngcontent-%COMP%]{margin-right:8px}
/*# sourceMappingURL=context-item.component-3KAN67AM.css.map */`],changeDetection:0})}return o})();var be=function(o){return o.always="always",o.never="never",o.default="default",o}(be||{});function Rr(o,a){if(o&1){let t=T();c(0,"button",19),S("click",function(){v(t);let i=g(2);return C(i.clearFilter())}),c(1,"mat-icon"),x(2,"close"),p()()}}function zr(o,a){if(o&1){let t=T();c(0,"mat-form-field",16)(1,"mat-label"),x(2),u(3,"translate"),p(),c(4,"input",17),u(5,"translate"),Qt("ngModelChange",function(i){v(t);let n=g();return qt(n.term,i)||(n.term=i),C(i)}),p(),b(6,Rr,3,0,"button",18),p()}if(o&2){let t=g();s(2),V(f(3,4,"igo.context.contextManager.filterPlaceHolder")),s(2),l("placeholder",f(5,6,"igo.context.contextManager.filterPlaceHolder")),Kt("ngModel",t.term),s(2),l("ngIf",t.term.length)}}function Ur(o,a){if(o&1&&E(0,"igo-actionbar",20),o&2){let t=g();l("iconColor",t.color)("store",t.actionStore)("withIcon",!0)("withTitle",t.actionbarMode==="overlay")("horizontal",!1)("mode",t.actionbarMode)}}function Nr(o,a){if(o&1&&(c(0,"button",21),u(1,"translate"),c(2,"mat-icon",8),x(3,"fitler_alt"),p()()),o&2){g();let t=A(11);l("matTooltip",f(1,2,"igo.context.contextManager.filterUser"))("matMenuTriggerFor",t)}}function Hr(o,a){if(o&1){let t=T();c(0,"button",12)(1,"mat-checkbox",23),S("click",function(i){return v(t),C(i.stopPropagation())})("change",function(){v(t);let i=g().$implicit,n=g();return C(n.handleToggleCategory(i))}),p(),c(2,"span"),x(3),p()()}if(o&2){let t=g().$implicit,e=g();s(),l("checked",e.getPermission(t).checked)("indeterminate",e.getPermission(t).indeterminate),s(2),V(t.title)}}function Gr(o,a){if(o&1){let t=T();c(0,"button",12)(1,"mat-checkbox",13),S("click",function(i){return v(t),C(i.stopPropagation())})("change",function(){let i=v(t).$implicit,n=g(2).$implicit,r=g();return C(r.handleToggleCategory(i,n))}),x(2),p()()}if(o&2){let t=a.$implicit,e=g(3);s(),l("checked",e.getPermission(t).checked),s(),w(" ",t.title," ")}}function Wr(o,a){if(o&1){let t=T();c(0,"button",24)(1,"mat-checkbox",23),S("click",function(i){return v(t),C(i.stopPropagation())})("change",function(){v(t);let i=g().$implicit,n=g();return C(n.handleToggleCategory(i))}),p(),c(2,"span"),x(3),p()(),c(4,"mat-menu",null,2),b(6,Gr,3,2,"button",25),p()}if(o&2){let t=A(5),e=g().$implicit,i=g();l("matMenuTriggerFor",t),s(),l("checked",i.getPermission(e).checked)("indeterminate",i.getPermission(e).indeterminate),s(2),V(e.title),s(3),l("ngForOf",e.childs)}}function Kr(o,a){if(o&1&&(to(0),b(1,Hr,4,3,"button",22)(2,Wr,7,5,"ng-template",null,1,ro),eo()),o&2){let t=a.$implicit,e=A(3);s(),l("ngIf",!t.childs)("ngIfElse",e)}}function qr(o,a){if(o&1){let t=T();c(0,"igo-context-item",29),S("edit",function(){let i=v(t).$implicit,n=g(3);return C(n.edit.emit(i))})("delete",function(){let i=v(t).$implicit,n=g(3);return C(n.delete.emit(i))})("clone",function(){let i=v(t).$implicit,n=g(3);return C(n.clone.emit(i))})("save",function(){let i=v(t).$implicit,n=g(3);return C(n.save.emit(i))})("hide",function(){let i=v(t).$implicit,n=g(3);return C(n.hideContext(i))})("show",function(){let i=v(t).$implicit,n=g(3);return C(n.showContext(i))})("favorite",function(){let i=v(t).$implicit,n=g(3);return C(n.favorite.emit(i))})("manageTools",function(){let i=v(t).$implicit,n=g(3);return C(n.manageTools.emit(i))})("managePermissions",function(){let i=v(t).$implicit,n=g(3);return C(n.managePermissions.emit(i))})("select",function(){let i=v(t).$implicit,n=g(3);return C(n.select.emit(i))})("unselect",function(){let i=v(t).$implicit,n=g(3);return C(n.unselect.emit(i))}),p()}if(o&2){let t=a.$implicit,e=g(3);l("selected",e.selectedContext&&e.selectedContext.uri===t.uri)("context",t)("default",t.id&&e.defaultContextId&&e.defaultContextId===t.id)}}function Qr(o,a){if(o&1){let t=T();c(0,"igo-collapsible",28),u(1,"translate"),S("toggle",function(i){v(t);let n=g().$implicit,r=g();return C(r.collapsed[r.titleMapping[n.key]]=i)}),b(2,qr,1,3,"ng-template",14),p()}if(o&2){let t=g().$implicit,e=g();l("title",f(1,3,e.titleMapping[t.key]))("collapsed",e.collapsed[e.titleMapping[t.key]]),s(2),l("ngForOf",t.value)}}function Zr(o,a){if(o&1){let t=T();c(0,"igo-context-item",30),S("favorite",function(){let i=v(t).$implicit,n=g(3);return C(n.favorite.emit(i))})("select",function(){let i=v(t).$implicit,n=g(3);return C(n.select.emit(i))})("unselect",function(){let i=v(t).$implicit,n=g(3);return C(n.unselect.emit(i))}),p()}if(o&2){let t=a.$implicit,e=g(3);l("showFavorite",e.configService.getConfig("favoriteContext4NonAuthenticated"))("selected",e.selectedContext&&e.selectedContext.uri===t.uri)("context",t)("default",e.contextConfigs?e.defaultContextId===t.id:e.defaultContextId===t.uri)}}function Jr(o,a){if(o&1&&b(0,Zr,1,4,"ng-template",14),o&2){let t=g().$implicit;l("ngForOf",t.value)}}function Yr(o,a){if(o&1&&b(0,Qr,3,5,"igo-collapsible",26)(1,Jr,1,1,null,27),o&2){let t=a.$implicit,e=g();l("ngIf",t.value.length&&e.auth.authenticated),s(),l("ngIf",t.value.length&&!e.auth.authenticated)}}function Xr(o,a){o&1&&(c(0,"div",31),x(1),u(2,"translate"),p()),o&2&&(s(),w(" ",f(2,1,"igo.context.contextManager.noResult")," "))}var Je=(()=>{class o{cdRef;configService;auth;dialog;languageService;storageService;contextConfigs;contextsInitial={ours:[]};contexts$=new gt(this.contextsInitial);change$=new Ui(1);change$$;get contexts(){return this._contexts}set contexts(t){this._contexts=t,this.next()}_contexts={ours:[]};selectedContext;map;get defaultContextId(){return this.contextConfigs?this._defaultContextId:this.storageService.get("favorite.context.uri")||this._defaultContextId}set defaultContextId(t){this._defaultContextId=t}_defaultContextId;collapsed=[];select=new I;unselect=new I;edit=new I;delete=new I;save=new I;clone=new I;create=new I;hide=new I;show=new I;showHiddenContexts=new I;favorite=new I;managePermissions=new I;manageTools=new I;filterPermissionsChanged=new I;titleMapping={ours:"igo.context.contextManager.ourContexts",shared:"igo.context.contextManager.sharedContexts",public:"igo.context.contextManager.publicContexts"};users;permissions=[];actionStore=new hn([]);actionbarMode=gn.Overlay;color="primary";showHidden=!1;set term(t){this._term=t,this.next()}get term(){return this._term}_term="";get sortedAlpha(){return this._sortedAlpha}set sortedAlpha(t){this._sortedAlpha=t,this.next()}_sortedAlpha=void 0;showContextFilter=be.always;thresholdToFilter=5;get isEmpty(){return!this.contexts.ours.length&&!this.contexts.public?.length&&!this.contexts.shared?.length}constructor(t,e,i,n,r,m){this.cdRef=t,this.configService=e,this.auth=i,this.dialog=n,this.languageService=r,this.storageService=m,this.contextConfigs=this.configService.getConfig("context")}ngOnInit(){this.change$$=this.change$.pipe(qi(()=>Wi(50))).subscribe(()=>{this.contexts$.next(this.filterContextsList(this.contexts))}),this.actionStore.load([{id:"emptyContext",title:this.languageService.translate.instant("igo.context.contextManager.emptyContext"),icon:"star",tooltip:this.languageService.translate.instant("igo.context.contextManager.emptyContextTooltip"),handler:()=>{this.createContext(!0)}},{id:"contextFromMap",title:this.languageService.translate.instant("igo.context.contextManager.contextMap"),icon:"map",tooltip:this.languageService.translate.instant("igo.context.contextManager.contextMapTooltip"),handler:()=>{this.createContext(!1)}}])}next(){this.change$.next()}filterContextsList(t){if(this.term==="")return this.sortedAlpha&&(t=this.sortContextsList(t)),t;{let i={ours:t.ours.filter(n=>{let r=this.term.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return n.title.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(r)})};if(this.contexts.public){let n=t.public.filter(r=>{let m=this.term.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return r.title.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(m)});i.public=n}if(this.contexts.shared){let n=t.shared.filter(r=>{let m=this.term.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return r.title.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").includes(m)});i.shared=n}return this.sortedAlpha&&(i=this.sortContextsList(i)),i}}ngOnDestroy(){this.change$$.unsubscribe()}showFilter(){switch(this.showContextFilter){case be.always:return!0;case be.never:return!1;default:{let t=this.contexts.ours.length;return this.contexts.public?t+=this.contexts.public.length:t+=0,this.contexts.shared?t+=this.contexts.shared.length:t+=0,t>=this.thresholdToFilter}}}sortContextsList(t){if(t){let e=JSON.parse(JSON.stringify(t));return e.ours.sort((i,n)=>this.normalize(i.title)<this.normalize(n.title)?-1:this.normalize(i.title)>this.normalize(n.title)?1:0),e.shared?e.shared.sort((i,n)=>this.normalize(i.title)<this.normalize(n.title)?-1:this.normalize(i.title)>this.normalize(n.title)?1:0):e.public&&e.public.sort((i,n)=>this.normalize(i.title)<this.normalize(n.title)?-1:this.normalize(i.title)>this.normalize(n.title)?1:0),e}}normalize(t){return t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()}toggleSort(){this.sortedAlpha=!this.sortedAlpha}clearFilter(){this.term=""}createContext(t){this.dialog.open(ve,{disableClose:!1}).afterClosed().pipe(Vt(1)).subscribe(e=>{e&&this.create.emit({title:e,empty:t})})}getPermission(t){if(t)return this.permissions.find(i=>i.name===t.name)}handleToggleCategory(t,e){let i=this.getPermission(t);if(i&&(i.checked=!i.checked,this.storageService.set("contexts.permissions."+i.name,i.checked),i.indeterminate=!1),e){let n=!1;for(let m of e.childs)if(this.getPermission(m).checked!==i.checked){n=!0;break}let r=this.getPermission(e);r&&(r.checked=i.checked,this.storageService.set("contexts.permissions."+r.name,i.checked),r.indeterminate=n)}if(t.childs)for(let n of t.childs){let r=this.getPermission(n);r&&r.checked!==i.checked&&(r.checked=i.checked,this.storageService.set("contexts.permissions."+r.name,i.checked))}this.filterPermissionsChanged.emit(this.permissions)}hideContext(t){if(t.hidden=!0,!this.showHidden){let e={ours:[],shared:[],public:[]};e.ours=this.contexts.ours.filter(i=>i.id!==t.id),e.shared=this.contexts.shared.filter(i=>i.id!==t.id),e.public=this.contexts.public.filter(i=>i.id!==t.id),this.contexts=e}this.hide.emit(t)}showContext(t){t.hidden=!1,this.show.emit(t)}static \u0275fac=function(e){return new(e||o)(d(L),d(z),d(N),d(qo),d(lt),d(Ct))};static \u0275cmp=k({type:o,selectors:[["igo-context-list"]],inputs:{contexts:"contexts",selectedContext:"selectedContext",map:"map",defaultContextId:"defaultContextId",term:"term"},outputs:{select:"select",unselect:"unselect",edit:"edit",delete:"delete",save:"save",clone:"clone",create:"create",hide:"hide",show:"show",showHiddenContexts:"showHiddenContexts",favorite:"favorite",managePermissions:"managePermissions",manageTools:"manageTools",filterPermissionsChanged:"filterPermissionsChanged"},standalone:!0,features:[P],decls:22,vars:20,consts:[["accountMenu","matMenu"],["withSubMenu",""],["subAccountMenu","matMenu"],[3,"navigation"],[1,"context-filter-container"],["floatLabel","always",4,"ngIf"],[1,"actions-container"],["mat-icon-button","","matTooltipShowDelay","500",1,"sort-alpha",3,"click","matTooltip"],["color","primary"],["class","add-context-button","icon","add",3,"iconColor","store","withIcon","withTitle","horizontal","mode",4,"ngIf"],["class","users-filter","mat-icon-button","","matTooltipShowDelay","500",3,"matTooltip","matMenuTriggerFor",4,"ngIf"],[4,"ngFor","ngForOf"],["mat-menu-item","",1,"profil-menu"],[3,"click","change","checked"],["ngFor","",3,"ngForOf"],["class","no-result",4,"ngIf"],["floatLabel","always"],["matInput","","type","text",3,"ngModelChange","placeholder","ngModel"],["mat-icon-button","","matSuffix","","class","clear-button","aria-label","Clear","color","warn",3,"click",4,"ngIf"],["mat-icon-button","","matSuffix","","aria-label","Clear","color","warn",1,"clear-button",3,"click"],["icon","add",1,"add-context-button",3,"iconColor","store","withIcon","withTitle","horizontal","mode"],["mat-icon-button","","matTooltipShowDelay","500",1,"users-filter",3,"matTooltip","matMenuTriggerFor"],["mat-menu-item","","class","profil-menu",4,"ngIf","ngIfElse"],[3,"click","change","checked","indeterminate"],["mat-menu-item","",1,"profil-menu",3,"matMenuTriggerFor"],["mat-menu-item","","class","profil-menu",4,"ngFor","ngForOf"],[3,"title","collapsed","toggle",4,"ngIf"],[4,"ngIf"],[3,"toggle","title","collapsed"],["igoListItem","","color","accent",3,"edit","delete","clone","save","hide","show","favorite","manageTools","managePermissions","select","unselect","selected","context","default"],["igoListItem","","color","accent",3,"favorite","select","unselect","showFavorite","selected","context","default"],[1,"no-result"]],template:function(e,i){if(e&1){let n=T();c(0,"igo-list",3)(1,"div",4),b(2,zr,7,8,"mat-form-field",5),c(3,"div",6)(4,"button",7),u(5,"translate"),S("click",function(){return v(n),C(i.toggleSort())}),c(6,"mat-icon",8),x(7,"sort_by_alpha"),p()(),b(8,Ur,1,6,"igo-actionbar",9)(9,Nr,4,4,"button",10),c(10,"mat-menu",null,0),b(12,Kr,4,2,"ng-container",11),c(13,"button",12)(14,"mat-checkbox",13),S("click",function(m){return v(n),C(m.stopPropagation())})("change",function(){return v(n),C(i.showHiddenContexts.emit())}),p(),c(15,"span"),x(16),u(17,"translate"),p()()()()(),b(18,Yr,2,2,"ng-template",14),u(19,"async"),u(20,"keyvalue"),b(21,Xr,3,3,"div",15),p()}e&2&&(l("navigation",!0),s(2),l("ngIf",i.showFilter()),s(2),ht("--active",i.sortedAlpha),l("matTooltip",f(5,12,"igo.context.contextManager.sortAlphabetically")),s(4),l("ngIf",i.auth.authenticated&&i.contextConfigs),s(),l("ngIf",i.auth.authenticated&&i.contextConfigs),s(3),l("ngForOf",i.users),s(2),l("checked",i.showHidden),s(2),w(" ",f(17,14,"igo.context.contextManager.showHidden")," "),s(2),l("ngForOf",f(20,18,f(19,16,i.contexts$))),s(3),l("ngIf",i.isEmpty))},dependencies:[Ue,$,Z,Q,De,go,Y,J,rt,ot,nt,Xt,R,dt,it,et,ft,ut,xn,Wo,Ho,No,Go,Zt,jo,$o,ze,Ze,Uo,Te,ke,F,B],styles:[`[_nghost-%COMP%]     mat-form-field .mat-mdc-form-field-subscript-wrapper{display:none}.context-filter-container[_ngcontent-%COMP%]{display:flex;align-items:center;padding:8px 4px}.context-filter-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex:1}.sort-alpha.--active[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:red}.context-filter-min-width[_ngcontent-%COMP%]{width:calc(100% - 135px);margin:5px;padding-left:6px}.profil-menu[_ngcontent-%COMP%]{padding-left:8px}.profil-menu[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{margin-right:8px}.add-context-button[_ngcontent-%COMP%]{margin:0;width:40px;display:inline-flex;overflow:hidden}.actions-container[_ngcontent-%COMP%]{margin-left:4px}.no-result[_ngcontent-%COMP%]{padding:16px}
/*# sourceMappingURL=context-list.component-7DD7S235.css.map */`],changeDetection:0})}return o})();var ia=(()=>{class o{contextService;mapService;languageService;confirmDialogService;messageService;auth;storageService;cdRef;component;contexts$$;selectedContext$$;defaultContextId$$;previousMessageId;onSelect(t){this.contextService.loadContext(t.uri)}onEdit(t){this.contextService.loadEditedContext(t.uri)}onSave(t){let e=this.mapService.getMap(),i=this.contextService.getContextFromMap(e),n=()=>{this.messageService.success("igo.context.contextManager.dialog.saveMsg","igo.context.contextManager.dialog.saveTitle",void 0,{value:t.title})};if(t.imported){i.title=t.title,this.contextService.delete(t.id,!0),this.contextService.create(i).subscribe(m=>{this.contextService.loadContext(m.uri),n()});return}let r={layers:i.layers,map:{view:i.map.view}};this.contextService.update(t.id,r).subscribe(()=>{n()})}onFavorite(t){t.id||(t.id=t.uri),this.contextService.setDefault(t.id).subscribe(()=>{this.previousMessageId&&this.messageService.remove(this.previousMessageId),this.contextService.defaultContextId$.next(t.id);let e=this.messageService.success("igo.context.contextManager.dialog.favoriteMsg","igo.context.contextManager.dialog.favoriteTitle",void 0,{value:t.title});this.previousMessageId=e.toastId,this.cdRef.detectChanges()})}onManageTools(t){this.contextService.loadEditedContext(t.uri)}onManagePermissions(t){this.contextService.loadEditedContext(t.uri)}onDelete(t){let e=this.languageService.translate;this.confirmDialogService.open(e.instant("igo.context.contextManager.dialog.confirmDelete")).subscribe(i=>{i&&this.contextService.delete(t.id,t.imported).subscribe(()=>{this.messageService.info("igo.context.contextManager.dialog.deleteMsg","igo.context.contextManager.dialog.deleteTitle",void 0,{value:t.title})})})}onClone(t){let e={title:t.title+"-copy",uri:t.uri+"-copy"};this.contextService.clone(t.id,e).subscribe(()=>{this.messageService.success("igo.context.contextManager.dialog.cloneMsg","igo.context.contextManager.dialog.cloneTitle",void 0,{value:t.title})})}onCreate(t){let{title:e,empty:i}=t,n=this.contextService.getContextFromMap(this.component.map,i);n.title=e,this.contextService.create(n).subscribe(()=>{this.messageService.success("igo.context.bookmarkButton.dialog.createMsg","igo.context.bookmarkButton.dialog.createTitle",void 0,{value:n.title}),this.contextService.loadContext(n.uri)})}loadContexts(){let t=["none"];for(let e of this.component.permissions)(e.checked===!0||e.indeterminate===!0)&&t.push(e.name);this.contextService.loadContexts(t,this.component.showHidden)}showHiddenContexts(){this.component.showHidden=!this.component.showHidden,this.storageService.set("contexts.showHidden",this.component.showHidden),this.loadContexts()}onShowContext(t){this.contextService.showContext(t.id).subscribe()}onHideContext(t){this.contextService.hideContext(t.id).subscribe()}constructor(t,e,i,n,r,m,_,y,h){this.contextService=e,this.mapService=i,this.languageService=n,this.confirmDialogService=r,this.messageService=m,this.auth=_,this.storageService=y,this.cdRef=h,this.component=t}ngOnInit(){this.component.contexts={ours:[]},this.component.showHidden=this.storageService.get("contexts.showHidden"),this.contexts$$=this.contextService.contexts$.subscribe(e=>this.handleContextsChange(e)),this.defaultContextId$$=this.contextService.defaultContextId$.subscribe(e=>{this.component.defaultContextId=e});let t=this.storageService.get("favorite.context.uri");t&&!this.auth.authenticated&&this.contextService.defaultContextId$.next(t),this.selectedContext$$=this.contextService.context$.pipe(wt(100)).subscribe(e=>this.component.selectedContext=e),this.auth.authenticate$.subscribe(e=>{e&&this.contextService.getProfilByUser().subscribe(i=>{this.component.users=i,this.component.permissions=[];let n=this.component.users.reduce((m,_)=>(m=m.concat(_),m=_.childs?m.concat(_.childs):m,m),[]);for(let m of n){let _={name:m.name,checked:this.storageService.get("contexts.permissions."+m.name)};_.checked===null&&(_.checked=!0),this.component.permissions.push(_)}let r=["none"];for(let m of this.component.permissions)(m.checked===!0||m.indeterminate===!0)&&r.push(m.name);this.contextService.loadContexts(r,this.component.showHidden)})})}ngOnDestroy(){this.contexts$$.unsubscribe(),this.selectedContext$$.unsubscribe(),this.defaultContextId$$.unsubscribe()}handleContextsChange(t){this.component.contexts=t}static \u0275fac=function(e){return new(e||o)(d(Je,2),d(G),d(zo),d(lt),d(fe),d(j),d(N),d(Ct),d(L))};static \u0275dir=ct({type:o,selectors:[["","igoContextListBinding",""]],hostBindings:function(e,i){e&1&&S("select",function(r){return i.onSelect(r)})("edit",function(r){return i.onEdit(r)})("save",function(r){return i.onSave(r)})("favorite",function(r){return i.onFavorite(r)})("manageTools",function(r){return i.onManageTools(r)})("managePermissions",function(r){return i.onManagePermissions(r)})("delete",function(r){return i.onDelete(r)})("clone",function(r){return i.onClone(r)})("create",function(r){return i.onCreate(r)})("filterPermissionsChanged",function(){return i.loadContexts()})("showHiddenContexts",function(){return i.showHiddenContexts()})("show",function(r){return i.onShowContext(r)})("hide",function(r){return i.onHideContext(r)})},standalone:!0,features:[vt([fe])]})}return o})();var oa=(()=>{class o{component;contextService;layerService;configService;styleListService;styleService;route;context$$;queryParams;contextLayers=[];removeLayersOnContextChange=!0;get map(){return this.component.map}constructor(t,e,i,n,r,m,_){this.component=t,this.contextService=e,this.layerService=i,this.configService=n,this.styleListService=r,this.styleService=m,this.route=_}ngOnInit(){this.context$$=this.contextService.context$.pipe(at(t=>t!==void 0)).subscribe(t=>this.handleContextChange(t)),this.route&&this.route.options.visibleOnLayersKey&&this.route.options.visibleOffLayersKey&&this.route.options.contextKey&&this.route.queryParams.pipe(Ht(t=>!ie.isEmpty(t))).subscribe(t=>{this.queryParams=t})}ngOnDestroy(){this.context$$.unsubscribe()}handleContextChange(t){if(t.layers===void 0)return;this.removeLayersOnContextChange===!0?this.map.layerController.reset():this.map.layerController.remove(...this.contextLayers),this.contextLayers=[],this.layerService.unavailableLayers=[];let e=this.configService.getConfig("importExport");this.layerService.createLayers(t.layers,t.uri).subscribe(i=>{this.handleAddLayers(i),t.extraFeatures&&t.extraFeatures.forEach(n=>{e?.importWithStyle?Dn(n,this.map,this.styleListService,this.styleService):Bn(n,this.map)})}),this.configService.getConfig("importExport.allowToStoreLayer",!1)&&this.layerService.createAsyncIdbLayers(t.uri).pipe(wt(500)).subscribe(i=>this.handleAddLayers(i))}getFlattenOptions(t){return t.reduce((e,i)=>{if(Mo(i)){let n=i.children?this.getFlattenOptions(i.children):[];e.push(i,...n)}else e.push(i);return e},[])}handleAddLayers(t){let e=t.filter(n=>n).map(n=>(n.visible=this.computeLayerVisibilityFromUrl(n),n)),i=ko(e,"asc");this.contextLayers.concat(i),this.map.layerController.add(...i)}computeLayerVisibilityFromUrl(t){let e=this.queryParams,i=this.contextService.context$.value.uri,n=t.id,r=t.visible;if(!e||!n)return r;let m=e[this.route.options.contextKey];if(m===i||!m){let _="",y="",h=[],M=[];this.route.options.visibleOnLayersKey&&e[this.route.options.visibleOnLayersKey]&&(_=e[this.route.options.visibleOnLayersKey]),this.route.options.visibleOffLayersKey&&e[this.route.options.visibleOffLayersKey]&&(y=e[this.route.options.visibleOffLayersKey]),_==="*"&&(r=!0),y==="*"&&(r=!1),h=_.split(","),M=y.split(","),(h.indexOf(n)>-1||h.indexOf(n.toString())>-1)&&(r=!0),(M.indexOf(n)>-1||M.indexOf(n.toString())>-1)&&(r=!1)}return r}static \u0275fac=function(e){return new(e||o)(d(Ne),d(G),d(Xo),d(z),d(un),d(Yo),d(oe,8))};static \u0275dir=ct({type:o,selectors:[["","igoLayerContext",""]],inputs:{removeLayersOnContextChange:"removeLayersOnContextChange"},standalone:!0})}return o})();var na=(()=>{class o{contextService;mediaService;component;context$$;get map(){return this.component.map}constructor(t,e,i){this.contextService=e,this.mediaService=i,this.component=t}ngOnInit(){this.context$$=this.contextService.context$.pipe(at(t=>t!==void 0)).subscribe(t=>this.handleContextChange(t))}ngOnDestroy(){this.context$$.unsubscribe()}handleContextChange(t){if(t.map===void 0)return;let e=t.map.view;(!this.component.view||e.keepCurrentView!==!0||t.map.view.projection!==this.map.projection)&&(this.component.view=e),this.component.map.geolocationController&&this.component.map.geolocationController.updateGeolocationOptions(e);let i=t.map.controls;if(!this.component.controls&&i){if(this.mediaService.isMobile()&&typeof i.scaleLine!="boolean"){let n=i.scaleLine;n.minWidth||(n.minWidth=Math.min(64,n.minWidth),i.scaleLine=n)}this.component.controls=i}}static \u0275fac=function(e){return new(e||o)(d(Ne),d(G),d(Ao))};static \u0275dir=ct({type:o,selectors:[["","igoMapContext",""]],standalone:!0})}return o})();function ra(o,a){if(o&1&&(c(0,"span",10),x(1),p()),o&2){let t=g();s(),w("",t.prefix,"-")}}var Ye=(()=>{class o{formBuilder;messageService;form;prefix;get btnSubmitText(){return this._btnSubmitText}set btnSubmitText(t){this._btnSubmitText=t}_btnSubmitText;get context(){return this._context}set context(t){this._context=t,this.buildForm()}_context;get disabled(){return this._disabled}set disabled(t){this._disabled=t}_disabled=!1;submitForm=new I;clone=new I;delete=new I;constructor(t,e){this.formBuilder=t,this.messageService=e}ngOnInit(){this.buildForm()}handleFormSubmit(t){let e=Object.assign({},t);e=ie.removeNull(e),e.uri=e.uri.replace(" ",""),e.uri?e.uri=this.prefix+"-"+e.uri:e.uri=this.prefix,this.submitForm.emit(e)}copyTextToClipboard(){let t=this.prefix+"-"+this.form.value.uri.replace(" ","");ee.copy(t)&&this.messageService.success("igo.context.contextManager.dialog.copyMsg","igo.context.contextManager.dialog.copyTitle")}buildForm(){let t=this.context||{},e=t.uri.split("-");this.prefix=e.shift();let i=e.join("-");this.form=this.formBuilder.group({title:[t.title],uri:[i||" "]})}static \u0275fac=function(e){return new(e||o)(d(Bt),d(j))};static \u0275cmp=k({type:o,selectors:[["igo-context-form"]],inputs:{btnSubmitText:"btnSubmitText",context:"context",disabled:"disabled"},outputs:{submitForm:"submitForm",clone:"clone",delete:"delete"},standalone:!0,features:[P],decls:20,vars:18,consts:[[1,"igo-form",3,"ngSubmit","formGroup"],[1,"full-width"],["matInput","","required","","maxlength","128","formControlName","title",3,"placeholder"],["id","uriInput",1,"full-width"],["class","prefix",4,"ngIf"],[1,"fieldWrapper"],["matInput","","maxlength","64","floatLabel","always","formControlName","uri",3,"placeholder"],["id","copyButton","type","button","mat-icon-button","","tooltip-position","below","matTooltipShowDelay","500","color","primary",3,"click","matTooltip"],[1,"igo-form-button-group"],["mat-raised-button","","type","submit",3,"disabled"],[1,"prefix"]],template:function(e,i){e&1&&(c(0,"form",0),S("ngSubmit",function(){return i.handleFormSubmit(i.form.value)}),c(1,"mat-form-field",1),E(2,"input",2),u(3,"translate"),c(4,"mat-error"),x(5),u(6,"translate"),p()(),c(7,"mat-form-field",3),b(8,ra,2,1,"span",4),c(9,"span",5),E(10,"input",6),u(11,"translate"),p()(),c(12,"button",7),u(13,"translate"),S("click",function(){return i.copyTextToClipboard()}),c(14,"mat-icon"),x(15,"content_copy"),p()(),c(16,"div",8)(17,"button",9),x(18),u(19,"translate"),p()()()),e&2&&(l("formGroup",i.form),s(2),l("placeholder",f(3,8,"igo.context.contextManager.form.title")),s(3),w(" ",f(6,10,"igo.context.contextManager.form.titleRequired")," "),s(3),l("ngIf",i.prefix),s(2),l("placeholder",f(11,12,"igo.context.contextManager.form.uri")),s(2),l("matTooltip",f(13,14,"igo.context.contextManager.form.copy")),s(5),l("disabled",!i.form.valid||i.disabled),s(),w(" ",f(19,16,"igo.context.contextManager.form.edit")," "))},dependencies:[rt,kt,ot,nt,Tt,Ft,Oe,Dt,Pt,Et,Z,Q,Yt,Y,J,$,R,tt,dt,ft,ut,it,et,F,B],styles:[`form[_ngcontent-%COMP%]{margin:10px}.full-width[_ngcontent-%COMP%]{width:100%}#uriInput[_ngcontent-%COMP%]   .fieldWrapper[_ngcontent-%COMP%]{display:block;overflow:hidden}#uriInput[_ngcontent-%COMP%]   .prefix[_ngcontent-%COMP%]{float:left}#copyButton[_ngcontent-%COMP%]{width:24px;float:right;position:relative;top:-58px;left:5px}
/*# sourceMappingURL=context-form.component-4FV4TFK3.css.map */`]})}return o})();function aa(o,a){if(o&1){let t=T();c(0,"igo-context-form",1),u(1,"translate"),S("submitForm",function(i){v(t);let n=g();return C(n.submitForm.emit(i))}),p()}if(o&2){let t=g();l("btnSubmitText",f(1,2,"igo.context.contextManager.save"))("context",t.context)}}var Xe=(()=>{class o{cd;get context(){return this._context}set context(t){this._context=t,this.refresh()}_context;submitForm=new I;constructor(t){this.cd=t}refresh(){this.cd.detectChanges()}static \u0275fac=function(e){return new(e||o)(d(L))};static \u0275cmp=k({type:o,selectors:[["igo-context-edit"]],inputs:{context:"context"},outputs:{submitForm:"submitForm"},standalone:!0,features:[P],decls:1,vars:1,consts:[[3,"btnSubmitText","context","submitForm",4,"ngIf"],[3,"submitForm","btnSubmitText","context"]],template:function(e,i){e&1&&b(0,aa,2,4,"igo-context-form",0),e&2&&l("ngIf",i.context)},dependencies:[$,Ye,F,B],encapsulation:2})}return o})();var ca=(()=>{class o{contextService;messageService;component;editedContext$$;submitSuccessed=new I;onEdit(t){let e=this.component.context.id;this.contextService.update(e,t).subscribe(()=>{this.messageService.success("igo.context.contextManager.dialog.saveMsg","igo.context.contextManager.dialog.saveTitle",void 0,{value:t.title||this.component.context.title}),this.contextService.setEditedContext(void 0),this.submitSuccessed.emit(t)})}constructor(t,e,i){this.contextService=e,this.messageService=i,this.component=t}ngOnInit(){this.editedContext$$=this.contextService.editedContext$.subscribe(t=>this.handleEditedContextChange(t))}ngOnDestroy(){this.editedContext$$.unsubscribe()}handleEditedContextChange(t){this.component.context=t}static \u0275fac=function(e){return new(e||o)(d(Xe,2),d(G),d(j))};static \u0275dir=ct({type:o,selectors:[["","igoContextEditBinding",""]],hostBindings:function(e,i){e&1&&S("submitForm",function(r){return i.onEdit(r)})},outputs:{submitSuccessed:"submitSuccessed"},standalone:!0})}return o})();function la(o,a){o&1&&(c(0,"div",4)(1,"h4"),x(2),u(3,"translate"),p(),c(4,"p"),x(5),u(6,"translate"),p()()),o&2&&(s(2),V(f(3,2,"igo.context.permission.readOnlyTitle")),s(3),V(f(6,4,"igo.context.permission.readOnlyMsg")))}function pa(o,a){o&1&&(c(0,"mat-radio-button",9),x(1),u(2,"translate"),p()),o&2&&(s(),w(" ",f(2,1,"igo.context.permission.scope.public")," "))}function ma(o,a){if(o&1){let t=T();c(0,"div",4)(1,"mat-radio-group",5),Qt("ngModelChange",function(i){v(t);let n=g(2);return qt(n.context.scope,i)||(n.context.scope=i),C(i)}),S("change",function(){v(t);let i=g(2);return C(i.scopeChanged.emit(i.context))}),c(2,"mat-radio-button",6),x(3),u(4,"translate"),p(),c(5,"mat-radio-button",7),x(6),u(7,"translate"),p(),b(8,pa,3,3,"mat-radio-button",8),p()()}if(o&2){let t=g(2);s(),Kt("ngModel",t.context.scope),s(2),w(" ",f(4,4,"igo.context.permission.scope.private")," "),s(3),w(" ",f(7,6,"igo.context.permission.scope.shared")," "),s(2),l("ngIf",t.authService.isAdmin)}}function da(o,a){if(o&1&&(c(0,"mat-option",20),x(1),E(2,"br"),c(3,"small",21),x(4),p()()),o&2){let t=a.$implicit;l("value",t),s(),w(" ",t.title,""),s(3),V(t.name)}}function ua(o,a){if(o&1){let t=T();c(0,"form",10),S("ngSubmit",function(){v(t);let i=g(2);return C(i.handleFormSubmit(i.form.value))}),c(1,"mat-form-field",11),E(2,"input",12),u(3,"translate"),c(4,"mat-autocomplete",13,0),S("optionSelected",function(i){v(t);let n=g(2);return C(n.onProfilSelected(i.option.value))}),b(6,da,5,3,"mat-option",14),p(),c(7,"mat-error"),x(8),u(9,"translate"),p()(),c(10,"mat-radio-group",15)(11,"mat-radio-button",16),x(12),u(13,"translate"),p(),c(14,"mat-radio-button",17),x(15),u(16,"translate"),p()(),c(17,"div",18)(18,"button",19),x(19),u(20,"translate"),p()()()}if(o&2){let t=A(5),e=g(2);l("formGroup",e.form),s(2),l("placeholder",f(3,11,"igo.context.permission.user"))("formControl",e.formControl)("matAutocomplete",t),s(2),l("displayWith",e.displayFn),s(2),l("ngForOf",e.profils),s(2),w(" ",f(9,13,"igo.context.permission.profilRequired")," "),s(4),w(" ",f(13,15,"igo.context.permission.read")," "),s(3),w(" ",f(16,17,"igo.context.permission.write")," "),s(3),l("disabled",!e.form.valid),s(),w(" ",f(20,19,"igo.context.permission.addBtn")," ")}}function fa(o,a){if(o&1){let t=T();c(0,"button",29),u(1,"translate"),S("click",function(){v(t);let i=g().$implicit,n=g(5);return C(n.removePermission.emit(i))}),c(2,"mat-icon"),x(3,"delete"),p()()}o&2&&l("matTooltip",f(1,1,"igo.context.permission.delete"))}function ga(o,a){if(o&1&&(c(0,"mat-list-item")(1,"mat-icon",25),x(2,"person"),p(),c(3,"h4",26),x(4),c(5,"small",21),x(6),p()(),c(7,"div",27),b(8,fa,4,3,"button",28),p()()),o&2){let t=a.$implicit,e=g(5);s(4),w(" ",t.profilTitle," "),s(2),V(t.profil),s(2),l("ngIf",e.canWrite||t.profil===e.authService.decodeToken().user.sourceId)}}function ha(o,a){if(o&1&&(c(0,"igo-collapsible",24),u(1,"translate"),b(2,ga,9,3,"ng-template",22),p()),o&2){let t=g().$implicit;l("title",f(1,2,"igo.context.permission."+t.key)),s(2),l("ngForOf",t.value)}}function xa(o,a){if(o&1&&b(0,ha,3,4,"igo-collapsible",23),o&2){let t=a.$implicit;l("ngIf",t.value.length)}}function _a(o,a){if(o&1&&(c(0,"igo-list"),b(1,xa,1,1,"ng-template",22),u(2,"keyvalue"),p()),o&2){let t=g(2);s(),l("ngForOf",f(2,1,t.permissions))}}function va(o,a){if(o&1&&(c(0,"div"),b(1,la,7,6,"div",2)(2,ma,9,8,"div",2)(3,ua,21,21,"form",3)(4,_a,3,3,"igo-list",1),p()),o&2){let t=g();s(),l("ngIf",!t.canWrite),s(),l("ngIf",t.canWrite),s(),l("ngIf",t.context.scope!=="private"&&t.canWrite),s(),l("ngIf",t.permissions&&t.context.scope!=="private")}}var ti=(()=>{class o{formBuilder;cd;http;authService;config;form;get context(){return this._context}set context(t){this._context=t,this.cd.detectChanges()}_context;get permissions(){return this._permissions}set permissions(t){this._permissions=t,this.cd.detectChanges()}_permissions;get profils(){return this._profils}set profils(t){this._profils=t,this.cd.detectChanges()}_profils=[];get canWrite(){return this.context.permission===H[H.write]}baseUrlProfils;formControl=new vo;formValueChanges$$;addPermission=new I;removePermission=new I;scopeChanged=new I;constructor(t,e,i,n,r){this.formBuilder=t,this.cd=e,this.http=i,this.authService=n,this.config=r}ngOnInit(){this.buildForm(),this.baseUrlProfils=this.config.getConfig("context.url")+"/profils-users?",this.formValueChanges$$=this.formControl.valueChanges.subscribe(t=>{t.length?(this.http.get(this.baseUrlProfils+"q="+t).subscribe(e=>{this.profils=e}),this.profils.filter(e=>{let i=t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),n=e.title.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return(e.name.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")+n).includes(i)})):this.profils=[]})}displayFn(t){return t?t.title:void 0}handleFormSubmit(t){this.addPermission.emit(t)}buildForm(){this.form=this.formBuilder.group({profil:[],typePermission:["read"]})}onProfilSelected(t){this.form.setValue({profil:t.name,typePermission:this.form.value.typePermission})}static \u0275fac=function(e){return new(e||o)(d(Bt),d(L),d(Pe),d(N),d(z))};static \u0275cmp=k({type:o,selectors:[["igo-context-permissions"]],inputs:{context:"context",permissions:"permissions"},outputs:{addPermission:"addPermission",removePermission:"removePermission",scopeChanged:"scopeChanged"},standalone:!0,features:[P],decls:1,vars:1,consts:[["auto","matAutocomplete"],[4,"ngIf"],["class","scopeForm",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],[1,"scopeForm"],[3,"ngModelChange","change","ngModel"],["value","private"],["value","protected"],["value","public",4,"ngIf"],["value","public"],[3,"ngSubmit","formGroup"],[1,"full-width"],["matInput","","required","",3,"placeholder","formControl","matAutocomplete"],[3,"optionSelected","displayWith"],[3,"value",4,"ngFor","ngForOf"],["formControlName","typePermission"],["value","read"],["value","write"],[1,"igo-form-button-group"],["mat-raised-button","","type","submit",3,"disabled"],[3,"value"],[1,"mat-typography"],["ngFor","",3,"ngForOf"],[3,"title",4,"ngIf"],[3,"title"],["matListItemIcon",""],["matListItemTitle",""],["matListItemMeta","","igoStopPropagation","",1,"igo-actions-container"],["mat-icon-button","","matTooltipShowDelay","500","color","warn",3,"matTooltip","click",4,"ngIf"],["mat-icon-button","","matTooltipShowDelay","500","color","warn",3,"click","matTooltip"]],template:function(e,i){e&1&&b(0,va,5,4,"div",1),e&2&&l("ngIf",i.context)},dependencies:[$,cn,an,sn,rt,kt,ot,nt,Tt,Ft,Xt,Dt,Co,Pt,Et,Z,Q,Yt,Y,J,Lo,Do,Fe,Oo,Zt,Be,R,tt,dt,Ue,ze,Ve,je,So,Le,$e,it,et,ue,ft,ut,ke,F,B],styles:[`[_nghost-%COMP%]{margin:10px}.full-width[_ngcontent-%COMP%]{width:100%}mat-radio-button[_ngcontent-%COMP%]{padding:14px 14px 14px 0}.scopeForm[_ngcontent-%COMP%], form[_ngcontent-%COMP%]{padding:5px}
/*# sourceMappingURL=context-permissions.component-E4NZSM6U.css.map */`]})}return o})();var ba=(()=>{class o{contextService;languageService;messageService;cd;component;editedContext$$;onAddPermission(t){if(!t.profil){this.messageService.error("igo.context.contextManager.errors.addPermissionEmpty","igo.context.contextManager.errors.addPermissionTitle");return}let e=this.component.context.id;this.contextService.addPermissionAssociation(e,t.profil,t.typePermission).subscribe(i=>{for(let r of i)this.component.permissions[t.typePermission].push(r);let n=t.profil;this.messageService.success("igo.context.permission.dialog.addMsg","igo.context.permission.dialog.addTitle",void 0,{value:n}),this.cd.detectChanges()})}onRemovePermission(t){let e=this.component.context.id;this.contextService.deletePermissionAssociation(e,t.id).subscribe(()=>{let i=this.component.permissions[t.typePermission].findIndex(r=>r.id===t.id);this.component.permissions[t.typePermission].splice(i,1);let n=t.profil;this.messageService.success("igo.context.permission.dialog.deleteMsg","igo.context.permission.dialog.deleteTitle",void 0,{value:n}),this.cd.detectChanges()})}onScopeChanged(t){let e=t.scope;this.contextService.update(t.id,{scope:e}).subscribe(()=>{this.messageService.success("igo.context.permission.dialog.scopeChangedMsg","igo.context.permission.dialog.scopeChangedTitle",void 0,{value:"igo.context.permission.scope."+e})})}constructor(t,e,i,n,r){this.contextService=e,this.languageService=i,this.messageService=n,this.cd=r,this.component=t}ngOnInit(){this.editedContext$$=this.contextService.editedContext$.subscribe(t=>this.handleEditedContextChange(t))}ngOnDestroy(){this.editedContext$$.unsubscribe(),this.contextService.editedContext$.next(void 0)}handleEditedContextChange(t){this.component.context=t,t&&this.contextService.getPermissions(t.id).subscribe(e=>{e=e||[];let i={read:e.filter(n=>n.typePermission.toString()==="read"),write:e.filter(n=>n.typePermission.toString()==="write")};return this.component.permissions=i})}static \u0275fac=function(e){return new(e||o)(d(ti,2),d(G),d(lt),d(j),d(L))};static \u0275dir=ct({type:o,selectors:[["","igoContextPermissionsBinding",""]],hostBindings:function(e,i){e&1&&S("addPermission",function(r){return i.onAddPermission(r)})("removePermission",function(r){return i.onRemovePermission(r)})("scopeChanged",function(r){return i.onScopeChanged(r)})},standalone:!0})}return o})();var ei=(()=>{class o{contextService;route;language="";constructor(t,e){this.contextService=t,this.route=e,this.route.queryParams.subscribe(i=>{i.lang&&(this.language=i.lang)})}getUrlWithApi(t){return this.language?`${location.origin+location.pathname}?context=${t.uri}&lang=${this.language}`:`${location.origin+location.pathname}?context=${t.uri}`}createContextShared(t,e){let i=this.contextService.getContextFromMap(t);return i.scope="public",i.title=e.title,i.uri=e.uri,this.contextService.create(i)}updateContextShared(t,e,i){let n=this.contextService.getContextFromMap(t);return this.contextService.update(i,{title:e.title,map:n.map})}getUrlWithoutApi(t,e){if(!this.route||!this.route.options.visibleOnLayersKey||!this.route.options.visibleOffLayersKey||!t.viewController.getZoom())return;let i=e.layerlistControls.querystring,n=this.route.options.visibleOnLayersKey,r=this.route.options.visibleOffLayersKey,m=t.layerController.all.filter(O=>To(O)),_=m.filter(O=>O.visible&&!O.isIgoInternalLayer),y=m.filter(O=>!O.visible&&!O.isIgoInternalLayer);_.length===0&&(n=""),y.length===0&&(r="");let h="",M=[];_.length>y.length?(h=`${n}=*&${r}=`,M=y):(h=`${r}=*&${n}=`,M=_);for(let O of M)O.id&&(h+=O.id+",");let W=[],X=this.contextService.context$.value.layers;for(let O of X)(typeof O.id<"u"||typeof O.source<"u")&&W.push(O.id||O.source.id);let Oi=this.makeLayersByService(m,W,"wms"),Li=this.makeLayersByService(m,W,"wmts"),$i=this.makeLayersByService(m,W,"arcgisrest"),ji=this.makeLayersByService(m,W,"imagearcgisrest"),Vi=this.makeLayersByService(m,W,"tilearcgisrest");h=h.substr(0,h.length-1);let An=this.route.options.zoomKey,Rn=this.route.options.centerKey,zn=this.route.options.contextKey,Ai=`${An}=${t.viewController.getZoom()}`,Ri=t.viewController.getCenter("EPSG:4326")||[],Un=Ri[0].toFixed(5).replace(/\.([^0]+)0+$/,".$1"),Nn=Ri[1].toFixed(5).replace(/\.([^0]+)0+$/,".$1"),zi=`${Rn}=${Un},${Nn}`.replace(/.00000/g,""),ii="";this.contextService.context$.value&&(ii=`${zn}=${this.contextService.context$.value.uri}`);let U=this.language?`${location.origin}${location.pathname}?${ii}&${Ai}&${zi}&${h}&${i}&${Oi}&${i}&${Li}&${$i}&${ji}&${Vi}&lang=${this.language}`:`${location.origin}${location.pathname}?${ii}&${Ai}&${zi}&${h}&${i}&${Oi}&${i}&${Li}&${$i}&${ji}&${Vi}`;for(let O=0;O<5;O++)U=U.replace(/&&/g,"&"),U=U.endsWith("&")?U.slice(0,-1):U;return U=U.endsWith("&")?U.slice(0,-1):U,U=U.replace("?&wm","&wm"),U=U.replace("?&","?"),U}makeLayersByService(t,e,i){let n=[];for(let m of t.filter(_=>_.dataSource.options?.type===i))if(e.indexOf(m.id)===-1){let _=encodeURIComponent(m.dataSource.options.url),y="",h;switch(m.dataSource.options.type.toLowerCase()){case"wms":{let X=m.dataSource.options;y=encodeURIComponent(X.params.LAYERS),h=X.params.VERSION==="1.3.0"?h:X.params.VERSION;break}case"wmts":case"arcgisrest":case"imagearcgisrest":case"tilearcgisrest":y=encodeURIComponent(m.dataSource.options.layer);break}let M=`${y}:igoz${m.zIndex}`,W="";if(h){let X=m.dataSource.options.url.indexOf("?")===-1?"?":"&";W=encodeURIComponent(`${X}VERSION=${h}`)}_=`${_}${W}`,n.find(X=>X.url===_)?n.forEach(X=>{X.url===_&&X.layers.push(M)}):n.push({url:_,layers:[M]})}let r="";if(n.length>=1){let m,_;switch(i.toLowerCase()){case"wms":m=this.route.options.wmsUrlKey,_=this.route.options.wmsLayersKey;break;case"wmts":m=this.route.options.wmtsUrlKey,_=this.route.options.wmtsLayersKey;break;case"arcgisrest":m=this.route.options.arcgisUrlKey,_=this.route.options.arcgisLayersKey;break;case"imagearcgisrest":m=this.route.options.iarcgisUrlKey,_=this.route.options.iarcgisLayersKey;break;case"tilearcgisrest":m=this.route.options.tarcgisUrlKey,_=this.route.options.tarcgisLayersKey;break;default:m="",_=""}let y="",h="";n.forEach(M=>{y+=`${M.url},`,h+=`(${M.layers.join(",")}),`}),y=y.endsWith(",")?y.slice(0,-1):y,h=h.endsWith(",")?h.slice(0,-1):h,r=`${m}=${y}&${_}=${h}`}return r}static \u0275fac=function(e){return new(e||o)(K(G),K(oe,8))};static \u0275prov=Mt({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();function Ma(o,a){if(o&1&&(c(0,"span",12),x(1),p()),o&2){let t=g();s(),w("",t.userId,"-")}}function Ia(o,a){if(o&1&&(c(0,"button",13),x(1),u(2,"translate"),p()),o&2){let t=g();l("disabled",!t.form.valid),s(),w(" ",f(2,2,"igo.context.shareMap.button")," ")}}function Ta(o,a){if(o&1){let t=T();c(0,"button",14),S("click",function(){v(t);let i=g();return C(i.updateContextShared(i.form.value))}),x(1),u(2,"translate"),p()}o&2&&(s(),w(" ",f(2,1,"igo.context.shareMap.refreshBtn")," "))}function ka(o,a){if(o&1){let t=T();c(0,"div",15)(1,"mat-form-field"),E(2,"textarea",16,0),u(4,"translate"),c(5,"button",17),u(6,"translate"),S("click",function(){v(t);let i=A(3),n=g();return C(n.copyTextToClipboard(i))}),c(7,"mat-icon"),x(8,"content_copy"),p()()(),E(9,"div"),p()}if(o&2){let t=g();s(2),l("placeholder",f(4,3,"igo.context.shareMap.placeholderLink"))("value",t.url),s(3),l("matTooltip",f(6,5,"igo.context.shareMap.copy"))}}var Bi=(()=>{class o{languageService;messageService;auth;shareMapService;formBuilder;form;map;url;userId;idContextShared;constructor(t,e,i,n,r){this.languageService=t,this.messageService=e,this.auth=i,this.shareMapService=n,this.formBuilder=r}ngOnInit(){this.auth.authenticate$.subscribe(()=>{let t=this.auth.decodeToken();this.userId=t?.user?.id.toString(),this.buildForm()})}createUrl(t={}){let e=Object.assign({},t);e.uri=this.userId?`${this.userId}-${t.uri}`:t.uri,this.url=this.shareMapService.getUrlWithApi(e),this.shareMapService.createContextShared(this.map,e).subscribe(i=>{this.idContextShared=i.id,this.messageService.success("igo.context.contextManager.dialog.saveMsg","igo.context.contextManager.dialog.saveTitle",void 0,{value:e.title})},i=>{i.error.title=this.languageService.translate.instant("igo.context.shareMap.errorTitle"),this.messageService.showError(i)})}updateContextShared(t={}){let e=Object.assign({},t);e.uri=this.userId?`${this.userId}-${t.uri}`:t.uri,this.shareMapService.updateContextShared(this.map,e,this.idContextShared).subscribe(()=>{this.messageService.success("igo.context.contextManager.dialog.saveMsg","igo.context.contextManager.dialog.saveTitle",void 0,{value:e.title})},i=>{i.error.title=this.languageService.translate.instant("igo.context.shareMap.errorTitle"),this.messageService.showError(i)})}copyTextToClipboard(t){ee.copy(t)&&this.messageService.success("igo.context.shareMap.dialog.copyMsg","igo.context.shareMap.dialog.copyTitle")}buildForm(){this.url=void 0;let t=Ae(),e="Partage ";e+=this.userId?`(${this.userId}-${t})`:`(${t})`,this.form=this.formBuilder.group({title:[e],uri:[t]})}static \u0275fac=function(e){return new(e||o)(d(lt),d(j),d(N),d(ei),d(Bt))};static \u0275cmp=k({type:o,selectors:[["igo-share-map-api"]],inputs:{map:"map"},standalone:!0,features:[P],decls:21,vars:18,consts:[["textArea",""],[1,"igo-form",3,"ngSubmit","formGroup"],[1,"igo-input-container"],["matInput","","required","","formControlName","title",3,"placeholder"],["id","uriInput",1,"igo-input-container"],["class","prefix",4,"ngIf"],[1,"fieldWrapper"],["matInput","","required","","formControlName","uri",3,"readonly","placeholder"],[1,"igo-form-button-group"],["mat-raised-button","","type","submit",3,"disabled",4,"ngIf"],["mat-raised-button","","type","button",3,"click",4,"ngIf"],["class","igo-input-container linkToShare",4,"ngIf"],[1,"prefix"],["mat-raised-button","","type","submit",3,"disabled"],["mat-raised-button","","type","button",3,"click"],[1,"igo-input-container","linkToShare"],["matInput","","readonly","","rows","3",1,"textAreaWithButton",3,"placeholder","value"],["mat-icon-button","","tooltip-position","below","matTooltipShowDelay","500","color","primary",3,"click","matTooltip"]],template:function(e,i){e&1&&(c(0,"form",1),S("ngSubmit",function(){return i.createUrl(i.form.value)}),c(1,"div",2)(2,"mat-form-field"),E(3,"input",3),u(4,"translate"),c(5,"mat-error"),x(6),u(7,"translate"),p()()(),c(8,"div",4)(9,"mat-form-field"),b(10,Ma,2,1,"span",5),c(11,"span",6),E(12,"input",7),u(13,"translate"),p(),c(14,"mat-error"),x(15),u(16,"translate"),p()()(),c(17,"div",8),b(18,Ia,3,4,"button",9)(19,Ta,3,3,"button",10),p()(),b(20,ka,10,7,"div",11)),e&2&&(l("formGroup",i.form),s(3),l("placeholder",f(4,10,"igo.context.contextManager.form.title")),s(3),w(" ",f(7,12,"igo.context.contextManager.form.titleRequired")," "),s(4),l("ngIf",i.userId),s(2),l("readonly",!i.userId)("placeholder",f(13,14,"igo.context.contextManager.form.uri")),s(3),w(" ",f(16,16,"igo.context.contextManager.form.uriRequired")," "),s(3),l("ngIf",!i.url),s(),l("ngIf",i.url),s(),l("ngIf",i.url))},dependencies:[rt,kt,ot,nt,Tt,Ft,Dt,Pt,Et,Z,Q,Yt,Y,J,$,R,tt,dt,ft,ut,it,et,F,B],styles:[`@charset "UTF-8";mat-form-field[_ngcontent-%COMP%]{width:100%}#uriInput[_ngcontent-%COMP%]   .fieldWrapper[_ngcontent-%COMP%]{display:block;overflow:hidden}#uriInput[_ngcontent-%COMP%]   .prefix[_ngcontent-%COMP%]{float:left}.linkToShare\\a0[_ngcontent-%COMP%] {padding:25px 5px 5px}.linkToShare\\a0[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:none;width:100%;line-height:1.3;height:40px;overflow-y:hidden;word-wrap:normal;word-break:break-all}.linkToShare\\a0[_ngcontent-%COMP%]   textarea.textAreaWithButton[_ngcontent-%COMP%]{width:calc(100% - 60px)}.linkToShare\\a0[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{float:right;margin:-10px 0}.igo-form[_ngcontent-%COMP%]{padding:20px 5px 5px}.igo-form-button-group[_ngcontent-%COMP%]{text-align:center;padding-top:10px}
/*# sourceMappingURL=share-map-api.component-KHLSFMVZ.css.map */`]})}return o})();function Pa(o,a){o&1&&(c(0,"h4"),x(1),u(2,"translate"),p()),o&2&&(s(),w(" ",f(2,1,"igo.context.shareMap.included")," "))}function Ea(o,a){o&1&&(c(0,"li"),x(1),u(2,"translate"),p()),o&2&&(s(),w(" ",f(2,1,"igo.context.shareMap.context")," "))}function Fa(o,a){o&1&&(c(0,"li"),x(1),u(2,"translate"),p()),o&2&&(s(),w(" ",f(2,1,"igo.context.shareMap.center")," "))}function Ba(o,a){o&1&&(c(0,"li"),x(1),u(2,"translate"),p()),o&2&&(s(),w(" ",f(2,1,"igo.context.shareMap.zoom")," "))}function Da(o,a){o&1&&(c(0,"li"),x(1),u(2,"translate"),p()),o&2&&(s(),w(" ",f(2,1,"igo.context.shareMap.addedLayers")," "))}function Oa(o,a){o&1&&(c(0,"li"),x(1),u(2,"translate"),p()),o&2&&(s(),w(" ",f(2,1,"igo.context.shareMap.visibleInvisible")," "))}function La(o,a){o&1&&(c(0,"h4"),x(1),u(2,"translate"),p()),o&2&&(s(),w(" ",f(2,1,"igo.context.shareMap.excluded")," "))}function $a(o,a){o&1&&(c(0,"li"),x(1),u(2,"translate"),p()),o&2&&(s(),w(" ",f(2,1,"igo.context.shareMap.order")," "))}function ja(o,a){o&1&&(c(0,"li"),x(1),u(2,"translate"),p()),o&2&&(s(),w(" ",f(2,1,"igo.context.shareMap.opacity")," "))}function Va(o,a){o&1&&(c(0,"li"),x(1),u(2,"translate"),p()),o&2&&(s(),w(" ",f(2,1,"igo.context.shareMap.filterOgc")," "))}function Aa(o,a){o&1&&(c(0,"li"),x(1),u(2,"translate"),p()),o&2&&(s(),w(" ",f(2,1,"igo.context.shareMap.filterTime")," "))}function Ra(o,a){o&1&&(c(0,"div"),b(1,Pa,3,3,"h4",6),u(2,"translate"),c(3,"ul"),b(4,Ea,3,3,"li",6),u(5,"translate"),b(6,Fa,3,3,"li",6),u(7,"translate"),b(8,Ba,3,3,"li",6),u(9,"translate"),b(10,Da,3,3,"li",6),u(11,"translate"),b(12,Oa,3,3,"li",6),u(13,"translate"),p(),b(14,La,3,3,"h4",6),u(15,"translate"),c(16,"ul"),b(17,$a,3,3,"li",6),u(18,"translate"),b(19,ja,3,3,"li",6),u(20,"translate"),b(21,Va,3,3,"li",6),u(22,"translate"),b(23,Aa,3,3,"li",6),u(24,"translate"),p()()),o&2&&(s(),l("ngIf",f(2,11,"igo.context.shareMap.included")!==""),s(3),l("ngIf",f(5,13,"igo.context.shareMap.context")!==""),s(2),l("ngIf",f(7,15,"igo.context.shareMap.center")!==""),s(2),l("ngIf",f(9,17,"igo.context.shareMap.zoom")!==""),s(2),l("ngIf",f(11,19,"igo.context.shareMap.addedLayers")!==""),s(2),l("ngIf",f(13,21,"igo.context.shareMap.visibleInvisible")!==""),s(2),l("ngIf",f(15,23,"igo.context.shareMap.excluded")!==""),s(3),l("ngIf",f(18,25,"igo.context.shareMap.order")!==""),s(2),l("ngIf",f(20,27,"igo.context.shareMap.opacity")!==""),s(2),l("ngIf",f(22,29,"igo.context.shareMap.filterOgc")!==""),s(2),l("ngIf",f(24,31,"igo.context.shareMap.filterTime")!==""))}function za(o,a){o&1&&(E(0,"igo-custom-html",8),u(1,"translate")),o&2&&l("html",f(1,1,"igo.context.shareMap.htmlClarifications"))}var Di=(()=>{class o{messageService;shareMapService;cdRef;mapState$$;map;url;publicShareOption={layerlistControls:{querystring:""}};constructor(t,e,i){this.messageService=t,this.shareMapService=e,this.cdRef=i}ngOnInit(){this.resetUrl(),this.mapState$$=Ni([this.map.viewController.state$,this.map.status$]).subscribe(()=>{this.resetUrl(),this.cdRef.detectChanges()})}ngAfterViewInit(){this.resetUrl()}ngOnDestroy(){this.mapState$$.unsubscribe()}resetUrl(){this.url=this.shareMapService.getUrlWithoutApi(this.map,this.publicShareOption)}copyTextToClipboard(t){ee.copy(t)&&this.messageService.success("igo.context.shareMap.dialog.copyMsg","igo.context.shareMap.dialog.copyTitle")}static \u0275fac=function(e){return new(e||o)(d(j),d(ei),d(L))};static \u0275cmp=k({type:o,selectors:[["igo-share-map-url"]],inputs:{map:"map"},standalone:!0,features:[P],decls:18,vars:13,consts:[["textArea",""],[1,"igo-input-container","linkToShare"],["matInput","","readonly","","rows","3",3,"placeholder","value"],[1,"igo-form-button-group"],["mat-raised-button","",3,"click"],[1,"mat-typography"],[4,"ngIf"],["class","mat-typography",3,"html",4,"ngIf"],[1,"mat-typography",3,"html"]],template:function(e,i){if(e&1){let n=T();c(0,"div",1)(1,"mat-form-field"),E(2,"textarea",2,0),u(4,"translate"),p(),c(5,"div",3)(6,"button",4),S("click",function(){v(n);let m=A(3);return C(i.copyTextToClipboard(m))}),c(7,"mat-icon"),x(8,"content_copy"),p(),x(9),u(10,"translate"),p()(),c(11,"div"),E(12,"br"),c(13,"section",5),b(14,Ra,25,33,"div",6),u(15,"translate"),b(16,za,2,3,"igo-custom-html",7),u(17,"translate"),p()()()}e&2&&(s(2),l("placeholder",f(4,5,"igo.context.shareMap.placeholderLink"))("value",i.url),s(7),w(" ",f(10,7,"igo.context.shareMap.copy")," "),s(5),l("ngIf",f(15,9,"igo.context.shareMap.htmlClarifications")===""),s(2),l("ngIf",f(17,11,"igo.context.shareMap.htmlClarifications")!==""))},dependencies:[Z,Q,Y,J,R,tt,it,et,$,Vo,F,B],styles:[`@charset "UTF-8";mat-form-field[_ngcontent-%COMP%]{width:100%}.linkToShare\\a0[_ngcontent-%COMP%] {padding:25px 5px 5px}.linkToShare\\a0[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:none;width:100%;line-height:1.3;height:40px;overflow-y:hidden;word-wrap:normal;word-break:break-all}.linkToShare\\a0[_ngcontent-%COMP%]   textarea.textAreaWithButton[_ngcontent-%COMP%]{width:calc(100% - 60px)}.linkToShare\\a0[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{float:right;margin:-10px 0}.igo-form-button-group[_ngcontent-%COMP%]{text-align:center;padding-top:10px}igo-custom-html.shareCustomPadding[_ngcontent-%COMP%]{padding:0}
/*# sourceMappingURL=share-map-url.component-4GFUMLFT.css.map */`]})}return o})();function Ua(o,a){if(o&1&&(c(0,"mat-tab-group")(1,"mat-tab",2),u(2,"translate"),E(3,"igo-share-map-api",3),p(),c(4,"mat-tab",2),u(5,"translate"),E(6,"igo-share-map-url",3),p()()),o&2){let t=g();s(),l("label",f(2,4,"igo.context.shareMap.shareWithApi")),s(2),l("map",t.map),s(),l("label",f(5,6,"igo.context.shareMap.shareWithUrl")),s(2),l("map",t.map)}}function Na(o,a){if(o&1&&E(0,"igo-share-map-url",3),o&2){let t=g();l("map",t.map)}}var Ha=(()=>{class o{config;map;hasApi=!1;constructor(t){this.config=t,this.hasApi=!!this.config.getConfig("context.url")}static \u0275fac=function(e){return new(e||o)(d(z))};static \u0275cmp=k({type:o,selectors:[["igo-share-map"]],inputs:{map:"map"},standalone:!0,features:[P],decls:2,vars:2,consts:[[4,"ngIf"],[3,"map",4,"ngIf"],[3,"label"],[3,"map"]],template:function(e,i){e&1&&b(0,Ua,7,8,"mat-tab-group",0)(1,Na,1,1,"igo-share-map-url",1),e&2&&(l("ngIf",i.hasApi),s(),l("ngIf",!i.hasApi))},dependencies:[$,mn,ln,pn,Bi,Di,F,B]})}return o})();export{_n as a,nr as b,rr as c,fs as d,sr as e,Es as f,Fs as g,G as h,wr as i,Xe as j,ca as k,Je as l,ia as m,ti as n,ba as o,oa as p,na as q,Ha as r};
//# sourceMappingURL=chunk-XYGSGAO3.js.map
