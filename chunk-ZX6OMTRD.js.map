{"version":3,"sources":["projects/demo/src/app/geo/catalog/catalog.component.ts","projects/demo/src/app/geo/catalog/catalog.component.html","projects/demo/src/app/geo/directions/directions.component.ts","projects/demo/src/app/geo/directions/directions.component.html","projects/demo/src/app/geo/draw/draw.component.ts","projects/demo/src/app/geo/draw/draw.component.html","projects/demo/src/app/geo/feature/feature.component.ts","projects/demo/src/app/geo/feature/feature.component.html","projects/demo/src/app/geo/geometry/geometry.component.ts","projects/demo/src/app/geo/geometry/geometry.component.html","projects/demo/src/app/geo/hover/hover.component.ts","projects/demo/src/app/geo/hover/hover.component.html","projects/demo/src/app/geo/import-export/import-export.component.ts","projects/demo/src/app/geo/import-export/import-export.component.html","projects/demo/src/app/geo/layer/layer.component.ts","projects/demo/src/app/geo/layer/layer.component.html","projects/demo/src/app/geo/legend/legend.component.ts","projects/demo/src/app/geo/legend/legend.component.html","projects/demo/src/app/geo/measure/measure.component.ts","projects/demo/src/app/geo/measure/measure.component.html","projects/demo/src/app/geo/ogc-filter/ogc-filter.component.ts","projects/demo/src/app/geo/ogc-filter/ogc-filter.component.html","projects/demo/src/app/geo/overlay/overlay.component.ts","projects/demo/src/app/geo/overlay/overlay.component.html","projects/demo/src/app/geo/print/print.component.ts","projects/demo/src/app/geo/print/print.component.html","projects/demo/src/app/geo/query/query.component.ts","projects/demo/src/app/geo/query/query.component.html","packages/common/context-menu/src/context-menu.directive.ts","packages/common/context-menu/src/long-press.directive.ts","node_modules/@floating-ui/utils/dist/floating-ui.utils.mjs","node_modules/@floating-ui/core/dist/floating-ui.core.mjs","node_modules/@floating-ui/dom/dist/floating-ui.dom.mjs","node_modules/shepherd.js/dist/js/shepherd.esm.js","node_modules/angular-shepherd/fesm2022/angular-shepherd.mjs","packages/common/interactive-tour/src/interactive-tour.loader.ts","packages/common/interactive-tour/src/interactive-tour.service.ts","packages/common/interactive-tour/src/interactive-tour.component.ts","packages/common/interactive-tour/src/interactive-tour.component.html","packages/common/interactive-tour/src/interactive-tour.module.ts","packages/integration/src/lib/about/about-tool/about-tool.component.ts","packages/integration/src/lib/about/about-tool/about-tool.component.html","packages/integration/src/lib/map/map.state.ts","packages/integration/src/lib/catalog/catalog.state.ts","packages/integration/src/lib/catalog/catalog-browser-tool/catalog-browser-tool.component.ts","packages/integration/src/lib/catalog/catalog-browser-tool/catalog-browser-tool.component.html","packages/integration/src/lib/import-export/import-export.state.ts","packages/integration/src/lib/tool/tool.state.ts","packages/integration/src/lib/catalog/catalog-library-tool/catalog-library-tool.component.ts","packages/integration/src/lib/catalog/catalog-library-tool/catalog-library-tool.component.html","packages/integration/src/lib/context/context-editor-tool/context-editor-tool.component.ts","packages/integration/src/lib/context/context-editor-tool/context-editor-tool.component.html","packages/integration/src/lib/context/context-manager-tool/context-manager-tool.component.ts","packages/integration/src/lib/context/context-manager-tool/context-manager-tool.component.html","packages/integration/src/lib/context/context-permission-manager-tool/context-permission-manager-tool.component.ts","packages/integration/src/lib/context/context-permission-manager-tool/context-permission-manager-tool.component.html","packages/integration/src/lib/map/layer-list-tool.state.ts","packages/integration/src/lib/context/context-share-tool/context-share-tool.component.ts","packages/integration/src/lib/context/context-share-tool/context-share-tool.component.html","packages/integration/src/lib/context/context.state.ts","packages/integration/src/lib/directions/directions.state.ts","packages/integration/src/lib/directions/directions-tool/directions-tool.component.ts","packages/integration/src/lib/directions/directions-tool/directions-tool.component.html","packages/integration/src/lib/draw/draw.state.ts","packages/integration/src/lib/draw/drawing-tool/drawing-tool.component.ts","packages/integration/src/lib/draw/drawing-tool/drawing-tool.component.html","packages/integration/src/lib/filter/active-ogc-filter-tool/active-ogc-filter-tool.animation.ts","packages/integration/src/lib/filter/active-ogc-filter-tool/active-ogc-filter-tool.component.ts","packages/integration/src/lib/filter/active-ogc-filter-tool/active-ogc-filter-tool.component.html","packages/integration/src/lib/filter/active-time-filter-tool/active-time-filter-tool.animation.ts","packages/integration/src/lib/filter/active-time-filter-tool/active-time-filter-tool.component.ts","packages/integration/src/lib/filter/active-time-filter-tool/active-time-filter-tool.component.html","packages/integration/src/lib/filter/ogc-filter-tool/ogc-filter-tool.component.ts","packages/integration/src/lib/filter/ogc-filter-tool/ogc-filter-tool.component.html","packages/integration/src/lib/storage/storage.state.ts","packages/integration/src/lib/workspace/shared/workspace.utils.ts","packages/integration/src/lib/workspace/shared/edition-actions.service.ts","packages/integration/src/lib/workspace/shared/feature-actions.service.ts","packages/integration/src/lib/workspace/shared/wfs-actions.service.ts","packages/integration/src/lib/workspace/workspace.state.ts","packages/integration/src/lib/filter/spatial-filter-tool/spatial-filter-tool.component.ts","packages/integration/src/lib/filter/spatial-filter-tool/spatial-filter-tool.component.html","packages/integration/src/lib/filter/time-filter-tool/time-filter-tool.component.ts","packages/integration/src/lib/filter/time-filter-tool/time-filter-tool.component.html","packages/integration/src/lib/geometry-form/data-issue-reporter-tool/data-issue-reporter-tool.component.ts","packages/integration/src/lib/geometry-form/data-issue-reporter-tool/data-issue-reporter-tool.component.html","packages/integration/src/lib/import-export/import-export-tool/import-export-tool.component.ts","packages/integration/src/lib/import-export/import-export-tool/import-export-tool.component.html","packages/integration/src/lib/map/advanced-map-tool/advanced-coordinates/advanced-coordinates.component.ts","packages/integration/src/lib/map/advanced-map-tool/advanced-coordinates/advanced-coordinates.component.html","packages/integration/src/lib/map/advanced-map-tool/advanced-swipe/advanced-swipe.component.ts","packages/integration/src/lib/map/advanced-map-tool/advanced-swipe/advanced-swipe.component.html","packages/integration/src/lib/map/advanced-map-tool/advanced-map-tool.component.ts","packages/integration/src/lib/map/advanced-map-tool/advanced-map-tool.component.html","packages/integration/src/lib/workspace/workspace-button/workspace-button.component.ts","packages/integration/src/lib/workspace/workspace-button/workspace-button.component.html","packages/integration/src/lib/map/map-details-tool/map-details-tool.component.ts","packages/integration/src/lib/map/map-details-tool/map-details-tool.component.html","packages/integration/src/lib/map/map-legend/map-legend-tool.component.ts","packages/integration/src/lib/map/map-legend/map-legend-tool.component.html","packages/integration/src/lib/map/map-proximity.state.ts","packages/integration/src/lib/map/map-proximity-tool/map-proximity-tool.component.ts","packages/integration/src/lib/map/map-proximity-tool/map-proximity-tool.component.html","packages/integration/src/lib/map/map-tool/map-tool.component.ts","packages/integration/src/lib/map/map-tool/map-tool.component.html","packages/integration/src/lib/map/map-tools/map-tools.component.ts","packages/integration/src/lib/map/map-tools/map-tools.component.html","packages/integration/src/lib/measure/measure.state.ts","packages/integration/src/lib/measure/measurer-tool/measurer-tool.component.ts","packages/integration/src/lib/measure/measurer-tool/measurer-tool.component.html","packages/integration/src/lib/print/print-tool/print-tool.component.ts","packages/integration/src/lib/print/print-tool/print-tool.component.html","packages/integration/src/lib/search/search.state.ts","packages/integration/src/lib/search/search-results-tool/search-results-tool.component.ts","packages/integration/src/lib/search/search-results-tool/search-results-tool.component.html","projects/demo/src/app/geo/search/search.component.ts","projects/demo/src/app/geo/search/search.component.html","projects/demo/src/app/geo/simple-map/simple-map.component.ts","projects/demo/src/app/geo/simple-map/simple-map.component.html","projects/demo/src/app/geo/spatial-filter/spatial-filter.component.ts","projects/demo/src/app/geo/spatial-filter/spatial-filter.component.html","projects/demo/src/app/geo/time-filter/time-filter.component.ts","projects/demo/src/app/geo/time-filter/time-filter.component.html","projects/demo/src/app/geo/workspace/workspace.component.ts","projects/demo/src/app/geo/workspace/workspace.component.html","projects/demo/src/app/geo/geo.routing.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\n\nimport { EntityRecord, EntityStore } from '@igo2/common/entity';\nimport { PanelComponent } from '@igo2/common/panel';\nimport { StorageService } from '@igo2/core/storage';\nimport {\n  AnyLayerOptions,\n  Catalog,\n  CatalogBrowserComponent,\n  CatalogItem,\n  CatalogLibaryComponent,\n  CatalogService,\n  IgoMap,\n  LayerService,\n  MAP_DIRECTIVES,\n  MapService,\n  MapViewOptions\n} from '@igo2/geo';\n\nimport { DocViewerComponent } from '../../components/doc-viewer/doc-viewer.component';\nimport { ExampleViewerComponent } from '../../components/example/example-viewer/example-viewer.component';\n\n@Component({\n  selector: 'app-catalog',\n  templateUrl: './catalog.component.html',\n  styleUrls: ['./catalog.component.scss'],\n  standalone: true,\n  imports: [\n    DocViewerComponent,\n    ExampleViewerComponent,\n    MAP_DIRECTIVES,\n    PanelComponent,\n    CatalogLibaryComponent,\n    CatalogBrowserComponent\n  ]\n})\nexport class AppCatalogComponent implements OnInit {\n  catalog: Catalog;\n  public map: IgoMap = new IgoMap({\n    controls: {\n      attribution: {\n        collapsed: true\n      }\n    }\n  });\n\n  public view: MapViewOptions = {\n    center: [-73, 47.2],\n    zoom: 7\n  };\n\n  public catalogStore: EntityStore = new EntityStore<Catalog>([]);\n\n  public catalogItemStore: EntityStore = new EntityStore<CatalogItem>([]);\n\n  constructor(\n    private layerService: LayerService,\n    private catalogService: CatalogService,\n    private storageService: StorageService,\n    private mapService: MapService\n  ) {}\n\n  /**\n   * @internal\n   */\n  ngOnInit(): void {\n    const layers: AnyLayerOptions[] = [\n      {\n        title: 'OSM',\n        sourceOptions: {\n          type: 'osm'\n        },\n        baseLayer: true,\n        visible: true\n      }\n    ];\n\n    this.layerService\n      .createLayers(layers)\n      .subscribe((layers) => this.map.layerController.add(...layers));\n\n    this.loadCatalogs();\n\n    this.mapService.setMap(this.map);\n    this.catalogStore.stateView\n      .firstBy$(\n        (record: EntityRecord<Catalog>) => record.state.selected === true\n      )\n      .subscribe((record: EntityRecord<Catalog>) => {\n        if (record && record.entity) {\n          const catalog: Catalog = record.entity;\n          this.catalog = catalog;\n        }\n      });\n  }\n\n  /**\n   * When the selected catalog changes, toggle the CatalogBrowser tool.\n   * @internal\n   * @param event Select event\n   */\n  onCatalogSelectChange(event: { selected: boolean; catalog: Catalog }): void {\n    this.loadCatalogItems(event.catalog);\n  }\n\n  /**\n   * Get all the available catalogs from the CatalogService and\n   * load them into the store.\n   */\n  private loadCatalogs(): void {\n    this.catalogService.loadCatalogs().subscribe((catalogs: Catalog[]) => {\n      this.catalogStore.clear();\n      this.catalogStore.load(\n        catalogs.concat(\n          (this.storageService.get('addedCatalogs') || []) as Catalog[]\n        )\n      );\n    });\n  }\n\n  /**\n   * Get the selected catalog's items from the CatalogService and\n   * load them into the store.\n   * @param catalog Selected catalog\n   */\n  private loadCatalogItems(catalog: Catalog): void {\n    this.catalogService\n      .loadCatalogItems(catalog)\n      .subscribe((items: CatalogItem[]) => {\n        this.catalogItemStore.clear();\n        this.catalogItemStore.load(items);\n      });\n  }\n}\n","<app-doc-viewer\n  title=\"Catalog\"\n  subtitle=\"Geo\"\n  [dependencies]=\"['ConfigService', 'LanguageService']\"\n>\n  <app-example-viewer codeFolder=\"geo/catalog\">\n    <igo-map-browser [map]=\"map\" [view]=\"view\">\n      <div class=\"map-actions --vertical --bottom --right\">\n        <igo-zoom-button [map]=\"map\" color=\"primary\"> </igo-zoom-button>\n      </div>\n    </igo-map-browser>\n\n    <igo-panel title=\"Catalog Library\">\n      <igo-catalog-library\n        [store]=\"$any(catalogStore)\"\n        (catalogSelectChange)=\"onCatalogSelectChange($event)\"\n      >\n      </igo-catalog-library>\n    </igo-panel>\n\n    <igo-panel title=\"Catalog Browser\">\n      <igo-catalog-browser\n        [catalog]=\"catalog\"\n        [store]=\"$any(catalogItemStore)\"\n        [map]=\"map\"\n      >\n      </igo-catalog-browser>\n    </igo-panel>\n  </app-example-viewer>\n</app-doc-viewer>\n","import { Component } from '@angular/core';\nimport { MatGridListModule } from '@angular/material/grid-list';\n\nimport { AuthService } from '@igo2/auth';\nimport {\n  AnyLayerOptions,\n  DirectionsComponent,\n  IgoMap,\n  LayerService,\n  MAP_DIRECTIVES,\n  MapService,\n  MapViewOptions,\n  RoutesFeatureStore,\n  StepsFeatureStore,\n  StopsFeatureStore,\n  StopsStore,\n  TileLayerOptions,\n  provideDirection,\n  provideSearch,\n  withIChercheSource,\n  withOsrmSource\n} from '@igo2/geo';\n\nimport { BehaviorSubject, Subject } from 'rxjs';\n\nimport { DocViewerComponent } from '../../components/doc-viewer/doc-viewer.component';\nimport { ExampleViewerComponent } from '../../components/example/example-viewer/example-viewer.component';\n\n@Component({\n  selector: 'app-directions',\n  templateUrl: './directions.component.html',\n  styleUrls: ['./directions.component.scss'],\n  standalone: true,\n  imports: [\n    DocViewerComponent,\n    ExampleViewerComponent,\n    MatGridListModule,\n    MAP_DIRECTIVES,\n    DirectionsComponent\n  ],\n  providers: [\n    provideDirection(withOsrmSource()),\n    provideSearch([withIChercheSource()])\n  ]\n})\nexport class AppDirectionsComponent {\n  public map: IgoMap = new IgoMap({\n    controls: {\n      attribution: {\n        collapsed: true\n      }\n    }\n  });\n\n  public view: MapViewOptions = {\n    center: [-73, 47.2],\n    zoom: 9,\n    geolocate: false\n  };\n\n  public stopsStore: StopsStore = new StopsStore([]);\n  public stopsFeatureStore: StopsFeatureStore = new StopsFeatureStore([], {\n    map: this.map\n  });\n  public stepsFeatureStore: StepsFeatureStore = new StepsFeatureStore([], {\n    map: this.map\n  });\n  public routesFeatureStore: RoutesFeatureStore = new RoutesFeatureStore([], {\n    map: this.map\n  });\n  public zoomOnActiveRoute$ = new Subject<void>();\n\n  public authenticated$: BehaviorSubject<boolean>;\n\n  constructor(\n    private layerService: LayerService,\n    private mapService: MapService,\n    private authService: AuthService\n  ) {\n    this.authenticated$ = this.authService.authenticate$;\n    this.mapService.setMap(this.map);\n\n    const layers: AnyLayerOptions[] = [\n      {\n        title: 'Quebec Base Map',\n        baseLayer: true,\n        visible: true,\n        sourceOptions: {\n          type: 'xyz',\n          url: '/carto/tms/1.0.0/carte_gouv_qc_public@EPSG_3857/{z}/{x}/{-y}.png',\n          crossOrigin: 'anonymous'\n        }\n      } satisfies TileLayerOptions\n    ];\n\n    this.layerService\n      .createLayers(layers)\n      .subscribe((layers) => this.map.layerController.add(...layers));\n  }\n}\n","<app-doc-viewer\n  title=\"Directions\"\n  subtitle=\"Geo\"\n  [dependencies]=\"['LanguageService']\"\n>\n  <app-example-viewer codeFolder=\"geo/directions\">\n    <mat-grid-list cols=\"2\" rowHeight=\"600px\" gutterSize=\"16px\">\n      <mat-grid-tile\n        ><igo-map-browser [map]=\"map\" [view]=\"view\">\n          <div class=\"map-actions --vertical --top --right\">\n            <div class=\"spinner-spacer\"></div>\n            <igo-rotation-button\n              class=\"mat-elevation-z2\"\n              [showIfNoRotation]=\"true\"\n              [map]=\"map\"\n              color=\"primary\"\n            ></igo-rotation-button>\n          </div>\n          <div class=\"map-actions --vertical --bottom --right\">\n            <igo-home-extent-button\n              class=\"mat-elevation-z2\"\n              [map]=\"map\"\n              color=\"primary\"\n            >\n            </igo-home-extent-button>\n            <igo-geolocate-button\n              class=\"mat-elevation-z2\"\n              [map]=\"map\"\n              color=\"primary\"\n            >\n            </igo-geolocate-button>\n            <igo-zoom-button [map]=\"map\" color=\"primary\"> </igo-zoom-button>\n          </div> </igo-map-browser\n      ></mat-grid-tile>\n      <mat-grid-tile>\n        <div class=\"flex align-start h-100 w-100 overflow-y-auto\">\n          <igo-directions\n            class=\"w-100\"\n            [stopsStore]=\"stopsStore\"\n            [stopsFeatureStore]=\"stopsFeatureStore\"\n            [stepsFeatureStore]=\"stepsFeatureStore\"\n            [routesFeatureStore]=\"routesFeatureStore\"\n            [zoomOnActiveRoute$]=\"zoomOnActiveRoute$\"\n            [authenticated$]=\"authenticated$\"\n          >\n          </igo-directions>\n        </div>\n      </mat-grid-tile>\n    </mat-grid-list>\n  </app-example-viewer>\n</app-doc-viewer>\n","import { Component } from '@angular/core';\n\nimport {\n  AnyLayerOptions,\n  DrawComponent,\n  FeatureStore,\n  FeatureWithDraw,\n  IgoMap,\n  LayerService,\n  MapBrowserComponent,\n  MapService,\n  MapViewOptions,\n  ZoomButtonComponent\n} from '@igo2/geo';\n\nimport { DocViewerComponent } from '../../components/doc-viewer/doc-viewer.component';\nimport { ExampleViewerComponent } from '../../components/example/example-viewer/example-viewer.component';\n\n@Component({\n  selector: 'app-draw',\n  templateUrl: './draw.component.html',\n  styleUrls: ['./draw.component.scss'],\n  standalone: true,\n  imports: [\n    MapBrowserComponent,\n    ZoomButtonComponent,\n    DrawComponent,\n    DocViewerComponent,\n    ExampleViewerComponent\n  ]\n})\nexport class AppDrawComponent {\n  public map: IgoMap = new IgoMap({\n    controls: {\n      attribution: {\n        collapsed: true\n      },\n      scaleLine: true\n    }\n  });\n\n  public view: MapViewOptions = {\n    center: [-73, 47.2],\n    zoom: 6,\n    projection: 'EPSG:3857'\n  };\n\n  public stores: FeatureStore<FeatureWithDraw>[] = [];\n\n  constructor(\n    private layerService: LayerService,\n    private mapService: MapService\n  ) {\n    this.mapService.setMap(this.map);\n\n    const layers: AnyLayerOptions[] = [\n      {\n        title: 'OSM',\n        sourceOptions: {\n          type: 'osm'\n        },\n        baseLayer: true,\n        visible: true\n      }\n    ];\n\n    this.layerService\n      .createLayers(layers)\n      .subscribe((layers) => this.map.layerController.add(...layers));\n  }\n}\n","<app-doc-viewer\n  title=\"Draw\"\n  subtitle=\"Geo\"\n  [dependencies]=\"['LanguageService']\"\n>\n  <app-example-viewer codeFolder=\"geo/draw\">\n    <igo-map-browser [map]=\"map\" [view]=\"view\">\n      <div class=\"map-actions --vertical --bottom --right\">\n        <igo-zoom-button [map]=\"map\" color=\"primary\"></igo-zoom-button>\n      </div>\n    </igo-map-browser>\n\n    <igo-draw [stores]=\"stores\" [map]=\"map\"></igo-draw>\n  </app-example-viewer>\n</app-doc-viewer>\n","import { Component, OnDestroy, OnInit } from '@angular/core';\n\nimport { EntityTableComponent, EntityTableTemplate } from '@igo2/common/entity';\nimport {\n  DataSourceService,\n  FeatureDataSourceOptions,\n  FeatureMotion,\n  FeatureStore,\n  FeatureStoreLoadingStrategy,\n  FeatureStoreSelectionStrategy,\n  IgoMap,\n  LayerService,\n  MAP_DIRECTIVES,\n  MapViewOptions,\n  OSMDataSourceOptions,\n  VectorLayer\n} from '@igo2/geo';\n\nimport { DocViewerComponent } from '../../components/doc-viewer/doc-viewer.component';\nimport { ExampleViewerComponent } from '../../components/example/example-viewer/example-viewer.component';\n\n@Component({\n  selector: 'app-feature',\n  templateUrl: './feature.component.html',\n  styleUrls: ['./feature.component.scss'],\n  standalone: true,\n  imports: [\n    DocViewerComponent,\n    ExampleViewerComponent,\n    MAP_DIRECTIVES,\n    EntityTableComponent\n  ]\n})\nexport class AppFeatureComponent implements OnInit, OnDestroy {\n  public map: IgoMap = new IgoMap({\n    controls: {\n      attribution: {\n        collapsed: true\n      }\n    }\n  });\n\n  public view: MapViewOptions = {\n    center: [-73, 47.2],\n    zoom: 6\n  };\n\n  public tableTemplate: EntityTableTemplate = {\n    selection: true,\n    selectMany: true,\n    sort: true,\n    columns: [\n      {\n        name: 'properties.id',\n        title: 'ID'\n      },\n      {\n        name: 'properties.name',\n        title: 'Name'\n      },\n      {\n        name: 'properties.description',\n        title: 'Description'\n      }\n    ]\n  };\n\n  public store: FeatureStore = new FeatureStore([], { map: this.map });\n\n  constructor(\n    private dataSourceService: DataSourceService,\n    private layerService: LayerService\n  ) {}\n\n  ngOnInit(): void {\n    const loadingStrategy: FeatureStoreLoadingStrategy =\n      new FeatureStoreLoadingStrategy({});\n    this.store.addStrategy(loadingStrategy);\n\n    const selectionStrategy: FeatureStoreSelectionStrategy =\n      new FeatureStoreSelectionStrategy({\n        map: this.map,\n        motion: FeatureMotion.Default\n      });\n    this.store.addStrategy(selectionStrategy);\n\n    this.store.load([\n      {\n        meta: { id: 1 },\n        type: 'Feature',\n        geometry: {\n          type: 'Point',\n          coordinates: [-72, 47.8]\n        },\n        projection: 'EPSG:4326',\n        properties: {\n          id: 1,\n          name: 'Name 1',\n          description: 'Description 1'\n        }\n      },\n      {\n        meta: { id: 4 },\n        type: 'Feature',\n        geometry: {\n          type: 'Point',\n          coordinates: [-71, 46.8]\n        },\n        projection: 'EPSG:4326',\n        properties: {\n          id: 4,\n          name: 'Name 4',\n          description: 'Description 4'\n        }\n      },\n      {\n        meta: { id: 5 },\n        type: 'Feature',\n        geometry: {\n          type: 'Point',\n          coordinates: [-73, 45.8]\n        },\n        projection: 'EPSG:4326',\n        properties: {\n          id: 5,\n          name: 'Name 5',\n          description: 'Description 5'\n        }\n      },\n      {\n        meta: { id: 2 },\n        type: 'Feature',\n        geometry: {\n          type: 'LineString',\n          coordinates: [\n            [-72, 47.8],\n            [-73.5, 47.4],\n            [-72.4, 48.6]\n          ]\n        },\n        projection: 'EPSG:4326',\n        properties: {\n          id: 2,\n          name: 'Name 2',\n          description: 'Description 2'\n        }\n      },\n      {\n        meta: { id: 3 },\n        type: 'Feature',\n        geometry: {\n          type: 'Polygon',\n          coordinates: [\n            [\n              [-71, 46.8],\n              [-73, 47],\n              [-71.2, 46.6]\n            ]\n          ]\n        },\n        projection: 'EPSG:4326',\n        properties: {\n          id: 3,\n          name: 'Name 3',\n          description: 'Description 3'\n        }\n      }\n    ]);\n\n    this.layerService\n      .createAsyncLayer({\n        title: 'OSM',\n        baseLayer: true,\n        visible: true,\n        sourceOptions: {\n          type: 'osm'\n        } satisfies OSMDataSourceOptions\n      })\n      .subscribe((layer) => {\n        this.map.layerController.add(layer);\n      });\n\n    this.layerService\n      .createAsyncLayer({\n        title: 'Vector Layer',\n        sourceOptions: {\n          type: 'vector'\n        } satisfies FeatureDataSourceOptions,\n        animation: {\n          duration: 2000\n        },\n        igoStyle: {\n          mapboxStyle: {\n            url: 'assets/mapboxStyleExample-feature.json',\n            source: 'source_nameX'\n          }\n        }\n      })\n      .subscribe((layer: VectorLayer) => {\n        this.map.layerController.add(layer);\n        this.store.bindLayer(layer);\n        loadingStrategy.activate();\n        selectionStrategy.activate();\n      });\n  }\n\n  ngOnDestroy(): void {\n    this.store.destroy();\n  }\n}\n","<app-doc-viewer title=\"Feature\" subtitle=\"Geo\">\n  <app-example-viewer codeFolder=\"geo/feature\">\n    <igo-map-browser [map]=\"map\" [view]=\"view\">\n      <div class=\"map-actions --vertical --bottom --right\">\n        <igo-zoom-button [map]=\"map\" color=\"primary\"> </igo-zoom-button>\n      </div>\n    </igo-map-browser>\n\n    <igo-entity-table [store]=\"store\" [template]=\"tableTemplate\">\n    </igo-entity-table>\n  </app-example-viewer>\n</app-doc-viewer>\n","import { AsyncPipe, NgIf } from '@angular/common';\nimport { Component, OnDestroy, OnInit } from '@angular/core';\nimport { Validators } from '@angular/forms';\nimport { MatButtonModule } from '@angular/material/button';\n\nimport {\n  Form,\n  FormComponent,\n  FormField,\n  FormFieldConfig,\n  FormGroupComponent,\n  FormService\n} from '@igo2/common/form';\nimport {\n  DataSourceService,\n  IgoMap,\n  LayerOptions,\n  LayerService,\n  MAP_DIRECTIVES,\n  MapViewOptions,\n  OSMDataSource,\n  OSMDataSourceOptions\n} from '@igo2/geo';\n\nimport * as olstyle from 'ol/style';\n\nimport { BehaviorSubject, Subscription } from 'rxjs';\n\nimport { DocViewerComponent } from '../../components/doc-viewer/doc-viewer.component';\nimport { ExampleViewerComponent } from '../../components/example/example-viewer/example-viewer.component';\n\n@Component({\n  selector: 'app-geometry',\n  templateUrl: './geometry.component.html',\n  styleUrls: ['./geometry.component.scss'],\n  standalone: true,\n  imports: [\n    DocViewerComponent,\n    ExampleViewerComponent,\n    MAP_DIRECTIVES,\n    NgIf,\n    FormComponent,\n    FormGroupComponent,\n    MatButtonModule,\n    AsyncPipe\n  ]\n})\nexport class AppGeometryComponent implements OnInit, OnDestroy {\n  map: IgoMap = new IgoMap({\n    controls: {\n      attribution: {\n        collapsed: true\n      },\n      scaleLine: true\n    }\n  });\n\n  view: MapViewOptions = {\n    center: [-73, 47.2],\n    zoom: 15\n  };\n\n  form$: BehaviorSubject<Form> = new BehaviorSubject<Form>(undefined);\n\n  data$ = new BehaviorSubject<Record<string, any>>(undefined);\n\n  submitDisabled = true;\n\n  private valueChanges$$: Subscription;\n\n  constructor(\n    private formService: FormService,\n    private dataSourceService: DataSourceService,\n    private layerService: LayerService\n  ) {}\n\n  ngOnInit(): void {\n    this.dataSourceService\n      .createAsyncDataSource({\n        type: 'osm'\n      } satisfies OSMDataSourceOptions)\n      .subscribe((dataSource: OSMDataSource) => {\n        this.map.layerController.add(\n          this.layerService.createLayer({\n            title: 'OSM',\n            source: dataSource,\n            baseLayer: true,\n            visible: true\n          } satisfies LayerOptions)\n        );\n      });\n\n    const fieldConfigs: FormFieldConfig[] = [\n      {\n        name: 'geometry',\n        title: 'Geometry',\n        options: {\n          validator: Validators.required\n        },\n        type: 'geometry',\n        inputs: {\n          map: this.map,\n          geometryTypeField: true,\n          geometryType: 'Polygon',\n          drawGuideField: true,\n          drawGuide: 50,\n          drawGuidePlaceholder: 'Draw Guide',\n          drawStyle: new olstyle.Style({\n            stroke: new olstyle.Stroke({\n              color: [255, 0, 0, 1],\n              width: 2\n            }),\n            fill: new olstyle.Fill({\n              color: [255, 0, 0, 0.2]\n            }),\n            image: new olstyle.Circle({\n              radius: 8,\n              stroke: new olstyle.Stroke({\n                color: [255, 0, 0, 1]\n              }),\n              fill: new olstyle.Fill({\n                color: [255, 0, 0, 0.2]\n              })\n            })\n          })\n        }\n      },\n      {\n        name: 'name',\n        title: 'Name',\n        options: {\n          validator: Validators.required\n        }\n      }\n    ];\n\n    const fields: FormField[] = fieldConfigs.map((config: FormFieldConfig) =>\n      this.formService.field(config)\n    );\n    const form: Form = this.formService.form(\n      [],\n      [this.formService.group({ name: 'info' }, fields)]\n    );\n\n    this.valueChanges$$ = form.control.valueChanges.subscribe(() => {\n      this.submitDisabled = !form.control.valid;\n    });\n\n    this.form$.next(form);\n  }\n\n  ngOnDestroy(): void {\n    this.valueChanges$$.unsubscribe();\n  }\n\n  fillForm(): void {\n    this.data$.next({\n      name: 'Place',\n      geometry: JSON.stringify({\n        type: 'Polygon',\n        coordinates: [\n          [\n            [-106, 42],\n            [-107, 31],\n            [-81, 32],\n            [-82, 42],\n            [-106, 42]\n          ]\n        ]\n      })\n    });\n  }\n\n  clearForm(): void {\n    this.form$.value.control.reset();\n  }\n\n  onSubmit(data: Record<string, any>): void {\n    alert(JSON.stringify(data));\n  }\n}\n","<app-doc-viewer title=\"Geometry Form\" subtitle=\"Geo\">\n  <app-example-viewer codeFolder=\"geo/geometry\">\n    <div class=\"container\">\n      <igo-map-browser [map]=\"map\" [view]=\"view\">\n        <div class=\"map-actions --vertical --bottom --right\">\n          <igo-zoom-button [map]=\"map\" color=\"primary\"> </igo-zoom-button>\n        </div>\n      </igo-map-browser>\n\n      <igo-form\n        *ngIf=\"form$ | async as form\"\n        [form]=\"form\"\n        [formData]=\"data$ | async\"\n        (submitForm)=\"onSubmit($event)\"\n      >\n        <igo-form-group [group]=\"form.groups[0]\"></igo-form-group>\n\n        <div formButtons class=\"actions-container\">\n          <button\n            mat-stroked-button\n            type=\"button\"\n            color=\"primary\"\n            (click)=\"fillForm()\"\n          >\n            Fill Form\n          </button>\n          <button\n            mat-stroked-button\n            type=\"button\"\n            color=\"primary\"\n            (click)=\"clearForm()\"\n          >\n            Clear Form\n          </button>\n          <button\n            mat-flat-button\n            type=\"submit\"\n            color=\"primary\"\n            [disabled]=\"submitDisabled\"\n          >\n            Submit\n          </button>\n        </div>\n      </igo-form>\n    </div>\n  </app-example-viewer>\n</app-doc-viewer>\n","import { Component } from '@angular/core';\n\nimport { Media, MediaService } from '@igo2/core/media';\nimport {\n  DataSourceService,\n  IgoMap,\n  IgoMapModule,\n  LayerService,\n  MapViewOptions,\n  TileLayer,\n  TileLayerOptions,\n  VectorLayerOptions,\n  WFSDataSource,\n  WFSDataSourceOptions\n} from '@igo2/geo';\n\nimport { DocViewerComponent } from '../../components/doc-viewer/doc-viewer.component';\nimport { ExampleViewerComponent } from '../../components/example/example-viewer/example-viewer.component';\n\n@Component({\n  selector: 'app-hover',\n  templateUrl: './hover.component.html',\n  styleUrls: ['./hover.component.scss'],\n  standalone: true,\n  imports: [DocViewerComponent, ExampleViewerComponent, IgoMapModule]\n})\nexport class AppHoverComponent {\n  public pointerCoordDelay = 0;\n  public pointerHoverFeatureDelay = 0;\n  public map: IgoMap = new IgoMap({\n    controls: {\n      attribution: {\n        collapsed: true\n      },\n      scaleLine: true\n    }\n  });\n\n  public view: MapViewOptions = {\n    center: [-73, 47.2],\n    zoom: 8,\n    projection: 'EPSG:3857'\n  };\n\n  get media(): Media {\n    return this.mediaService.getMedia();\n  }\n\n  get isTouchScreen(): boolean {\n    return this.mediaService.isTouchScreen();\n  }\n\n  constructor(\n    private dataSourceService: DataSourceService,\n    private layerService: LayerService,\n    private mediaService: MediaService\n  ) {\n    this.layerService\n      .createAsyncLayer({\n        title: 'Quebec Base Map',\n        baseLayer: true,\n        visible: true,\n        sourceOptions: {\n          type: 'xyz',\n          url: 'https://geoegl.msp.gouv.qc.ca/carto/tms/1.0.0/carte_gouv_qc_public@EPSG_3857/{z}/{x}/{-y}.png'\n        }\n      } satisfies TileLayerOptions)\n      .subscribe((layer: TileLayer) => this.map.layerController.add(layer));\n\n    const wfsDatasourcePoint: WFSDataSourceOptions = {\n      type: 'wfs',\n      url: 'https://geoegl.msp.gouv.qc.ca/apis/wss/all.fcgi',\n      params: {\n        featureTypes: 'MSP_CASERNE_PUBLIC',\n        fieldNameGeometry: 'geometry',\n        maxFeatures: 10000,\n        version: '2.0.0',\n        outputFormat: undefined,\n        outputFormatDownload: 'shp'\n      }\n    };\n\n    this.dataSourceService\n      .createAsyncDataSource(wfsDatasourcePoint)\n      .subscribe((dataSource: WFSDataSource) => {\n        const layerOptions: VectorLayerOptions = {\n          title: 'Casernes',\n          visible: true,\n          source: dataSource,\n          igoStyle: {\n            styleByAttribute: {\n              attribute: 'en_caserne',\n              data: ['true', 'false'],\n              stroke: ['red', 'blue'],\n              fill: ['#ffffff', '#ffffff'],\n              radius: [7, 7],\n              width: [2, 2]\n            },\n            hoverStyle: {\n              label: {\n                attribute: 'Caserne: ${no_caserne} \\nMun: ${nom_ssi}',\n                style: {\n                  textAlign: 'left',\n                  textBaseline: 'top',\n                  font: '12px Calibri,sans-serif',\n                  fill: { color: '#000' },\n                  backgroundFill: { color: 'rgba(255, 255, 255, 0.5)' },\n                  backgroundStroke: {\n                    color: 'rgba(200, 200, 200, 0.75)',\n                    width: 2\n                  },\n                  stroke: { color: '#fff', width: 3 },\n                  overflow: true,\n                  offsetX: 20,\n                  offsetY: 10,\n                  padding: [2.5, 2.5, 2.5, 2.5]\n                }\n              },\n              baseStyle: {\n                circle: {\n                  stroke: {\n                    color: 'orange',\n                    width: 5\n                  },\n                  radius: 15\n                }\n              }\n            }\n          }\n        };\n        this.map.layerController.add(\n          this.layerService.createLayer(layerOptions)\n        );\n      });\n  }\n}\n","<app-doc-viewer\n  title=\"Hover\"\n  subtitle=\"Geo\"\n  [dependencies]=\"['LanguageService']\"\n>\n  <app-example-viewer codeFolder=\"geo/hover\">\n    <igo-map-browser\n      [map]=\"map\"\n      [view]=\"view\"\n      igoHoverFeature\n      [igoHoverFeatureDelay]=\"pointerHoverFeatureDelay\"\n      [igoHoverFeatureEnabled]=\"true\"\n    >\n      <div class=\"map-actions --vertical --top --right\">\n        <div class=\"spinner-spacer\"></div>\n        <igo-rotation-button\n          class=\"mat-elevation-z2\"\n          [showIfNoRotation]=\"true\"\n          [map]=\"map\"\n          color=\"primary\"\n        ></igo-rotation-button>\n      </div>\n      <div class=\"map-actions --vertical --bottom --right\">\n        <igo-home-extent-button\n          class=\"mat-elevation-z2\"\n          [map]=\"map\"\n          color=\"primary\"\n        >\n        </igo-home-extent-button>\n        <igo-geolocate-button\n          class=\"mat-elevation-z2\"\n          [map]=\"map\"\n          color=\"primary\"\n        >\n        </igo-geolocate-button>\n        <igo-zoom-button [map]=\"map\" color=\"primary\"> </igo-zoom-button>\n      </div>\n    </igo-map-browser>\n  </app-example-viewer>\n</app-doc-viewer>\n","import { Component } from '@angular/core';\nimport { MatGridListModule } from '@angular/material/grid-list';\n\nimport { WorkspaceStore } from '@igo2/common/workspace';\nimport {\n  IMPORT_EXPORT_DIRECTIVES,\n  IgoMap,\n  LayerOptions,\n  LayerService,\n  MAP_DIRECTIVES,\n  MapViewOptions,\n  TileLayer\n} from '@igo2/geo';\n\nimport { DocViewerComponent } from '../../components/doc-viewer/doc-viewer.component';\nimport { ExampleViewerComponent } from '../../components/example/example-viewer/example-viewer.component';\n\n@Component({\n  selector: 'app-import-export',\n  templateUrl: './import-export.component.html',\n  styleUrls: ['./import-export.component.scss'],\n  standalone: true,\n  imports: [\n    DocViewerComponent,\n    ExampleViewerComponent,\n    MatGridListModule,\n    MAP_DIRECTIVES,\n    IMPORT_EXPORT_DIRECTIVES\n  ]\n})\nexport class AppImportExportComponent {\n  public map: IgoMap = new IgoMap({\n    controls: {\n      attribution: {\n        collapsed: true\n      }\n    }\n  });\n\n  public view: MapViewOptions = {\n    center: [-73, 47.2],\n    zoom: 9\n  };\n\n  public store: WorkspaceStore = new WorkspaceStore([]);\n\n  constructor(private layerService: LayerService) {\n    this.layerService\n      .createAsyncLayer({\n        title: 'OSM',\n        baseLayer: true,\n        visible: true,\n        sourceOptions: {\n          type: 'osm'\n        }\n      } satisfies LayerOptions)\n      .subscribe((layer: TileLayer) => this.map.layerController.add(layer));\n  }\n}\n","<app-doc-viewer\n  title=\"Import / Export\"\n  subtitle=\"Geo\"\n  [dependencies]=\"['LanguageService']\"\n>\n  <app-example-viewer codeFolder=\"geo/import-export\">\n    <mat-grid-list cols=\"2\" rowHeight=\"500px\" gutterSize=\"16px\">\n      <mat-grid-tile>\n        <igo-map-browser [map]=\"map\" [view]=\"view\">\n          <div class=\"map-actions --vertical --bottom --right\">\n            <igo-zoom-button [map]=\"map\" color=\"primary\"> </igo-zoom-button>\n          </div>\n        </igo-map-browser>\n      </mat-grid-tile>\n      <mat-grid-tile>\n        <div class=\"flex align-start h-100 w-100\">\n          <igo-import-export\n            class=\"w-100\"\n            [store]=\"store\"\n            [map]=\"map\"\n          ></igo-import-export>\n        </div>\n      </mat-grid-tile>\n    </mat-grid-list>\n  </app-example-viewer>\n</app-doc-viewer>\n","import { Component } from '@angular/core';\nimport { MatGridListModule } from '@angular/material/grid-list';\n\nimport { PanelComponent } from '@igo2/common/panel';\nimport {\n  AnyLayerOptions,\n  DownloadButtonComponent,\n  FILTER_DIRECTIVES,\n  FeatureDataSourceOptions,\n  IgoMap,\n  ImageLayerOptions,\n  LAYER_DIRECTIVES,\n  LayerService,\n  LayerViewerComponent,\n  LayerViewerOptions,\n  MAP_DIRECTIVES,\n  METADATA_DIRECTIVES,\n  MapViewOptions,\n  VectorLayerOptions,\n  WFSDataSourceOptions\n} from '@igo2/geo';\n\nimport { DocViewerComponent } from '../../components/doc-viewer/doc-viewer.component';\nimport { ExampleViewerComponent } from '../../components/example/example-viewer/example-viewer.component';\n\n@Component({\n  selector: 'app-layer',\n  templateUrl: './layer.component.html',\n  styleUrls: ['./layer.component.scss'],\n  standalone: true,\n  imports: [\n    DocViewerComponent,\n    ExampleViewerComponent,\n    MatGridListModule,\n    MAP_DIRECTIVES,\n    LayerViewerComponent,\n    PanelComponent,\n    LAYER_DIRECTIVES,\n    METADATA_DIRECTIVES,\n    DownloadButtonComponent,\n    FILTER_DIRECTIVES\n  ]\n})\nexport class AppLayerComponent {\n  public map: IgoMap = new IgoMap({\n    controls: {\n      attribution: {\n        collapsed: true\n      }\n    }\n  });\n\n  public view: MapViewOptions = {\n    center: [-73, 47.2],\n    maxLayerZoomExtent: [-11000000, 4500000, -4500000, 10000000],\n    zoom: 7\n  };\n\n  get layerViewerOptions(): LayerViewerOptions {\n    return {\n      legend: {\n        showForVisibleLayers: false\n      },\n      queryBadge: true\n    };\n  }\n\n  constructor(private layerService: LayerService) {\n    const layers: AnyLayerOptions[] = [\n      {\n        title: 'OSM',\n        baseLayer: true,\n        visible: true,\n        sourceOptions: {\n          type: 'osm'\n        }\n      },\n      {\n        title: 'WFS (Custom EPSG)',\n        visible: true,\n        sourceOptions: {\n          type: 'wfs',\n          url: 'https://geoegl.msp.gouv.qc.ca/apis/wss/complet.fcgi',\n          params: {\n            featureTypes: 'vg_observation_v_autre_wmst',\n            fieldNameGeometry: 'geometry',\n            maxFeatures: 10000,\n            version: '2.0.0',\n            outputFormat: 'geojson',\n            srsName: 'EPSG:32198',\n            outputFormatDownload: 'shp'\n          },\n          ogcFilters: {\n            enabled: true,\n            editable: false,\n            filters: {\n              operator: 'PropertyIsEqualTo',\n              propertyName: 'code_municipalite',\n              expression: '12072'\n            }\n          },\n          formatOptions: {\n            dataProjection: 'EPSG:32198'\n          }\n        } as WFSDataSourceOptions\n      },\n      {\n        title: 'Parcs routiers',\n        sourceOptions: {\n          type: 'wms',\n          url: 'https://ws.mapserver.transports.gouv.qc.ca/swtq',\n          params: {\n            LAYERS: 'parc_routier',\n            VERSION: '1.3.0'\n          }\n        }\n      } satisfies ImageLayerOptions,\n      {\n        title: 'Réseau routier',\n        visible: false,\n        sourceOptions: {\n          type: 'wms',\n          url: 'https://ws.mapserver.transports.gouv.qc.ca/swtq',\n          params: {\n            LAYERS: 'bgr_v_sous_route_res_sup_act',\n            VERSION: '1.3.0'\n          }\n        }\n      } satisfies ImageLayerOptions,\n      {\n        title: 'Lieux habités',\n        visible: false,\n        sourceOptions: {\n          type: 'wms',\n          url: 'https://ws.mapserver.transports.gouv.qc.ca/swtq',\n          params: {\n            LAYERS: 'lieuhabite',\n            VERSION: '1.3.0'\n          }\n        }\n      } satisfies ImageLayerOptions,\n      {\n        title: 'Direction du vent',\n        visible: false,\n        legendOptions: {\n          stylesAvailable: [\n            { name: 'WDIR6-LINEAR', title: 'WDIR6-LINEAR' },\n            { name: 'WDIR6', title: 'WDIR6' },\n            { name: 'WDIR3-LINEAR', title: 'WDIR3-LINEAR' },\n            { name: 'WDIR3', title: 'WDIR3' }\n          ]\n        },\n        sourceOptions: {\n          type: 'wms',\n          url: 'https://geo.weather.gc.ca/geomet?lang=fr',\n          params: {\n            LAYERS: 'HRDPS.CONTINENTAL_WD',\n            VERSION: '1.3.0'\n          }\n        }\n      } satisfies ImageLayerOptions,\n      {\n        title: 'District écologique',\n        visible: false,\n        sourceOptions: {\n          type: 'wms',\n          url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/mffpecofor.fcgi',\n          params: {\n            LAYERS: 'sh_dis_eco',\n            VERSION: '1.3.0'\n          }\n        }\n      } satisfies ImageLayerOptions,\n      {\n        title: 'Avertissements routiers',\n        visible: false,\n        sourceOptions: {\n          type: 'wms',\n          url: 'https://ws.mapserver.transports.gouv.qc.ca/swtq',\n          params: {\n            LAYERS: 'evenements',\n            VERSION: '1.3.0'\n          }\n        }\n      } satisfies ImageLayerOptions,\n      {\n        title: 'Embâcles',\n        sourceOptions: {\n          type: 'wms',\n          url: 'https://geoegl.msp.gouv.qc.ca/apis/wss/complet.fcgi',\n          refreshIntervalSec: 15,\n          params: {\n            LAYERS: 'vg_observation_v_inondation_embacle_wmst',\n            VERSION: '1.3.0'\n          }\n        },\n        metadata: {\n          url: 'https://www.donneesquebec.ca/recherche/fr/dataset/historique-publique-d-embacles-repertories-au-msp',\n          extern: true\n        }\n      },\n      {\n        id: 'mandatory_to_retrieve_layerData_in_IDB',\n        title: \"Aéroport préloadé et chargé dans l'Indexed-db\",\n        visible: false,\n        idbInfo: { storeToIdb: true },\n        sourceOptions: {\n          preload: { bypassResolution: true, bypassVisible: true },\n          type: 'vector',\n          url: 'https://ws.mapserver.transports.gouv.qc.ca/swtq?service=wfs&version=2.0.0&request=getfeature&typename=aeroport&srsname=EPSG:4326&outputformat=geojson'\n        } satisfies FeatureDataSourceOptions\n      } satisfies VectorLayerOptions\n    ];\n\n    this.layerService\n      .createLayers(layers)\n      .subscribe((layers) => this.map.layerController.add(...layers));\n  }\n}\n","<app-doc-viewer\n  title=\"Layer\"\n  subtitle=\"Geo\"\n  [dependencies]=\"['LanguageService']\"\n>\n  <app-example-viewer codeFolder=\"geo/layer\">\n    <mat-grid-list cols=\"2\" rowHeight=\"600px\" gutterSize=\"16px\">\n      <mat-grid-tile>\n        <igo-map-browser [map]=\"map\" [view]=\"view\">\n          <div class=\"map-actions --vertical --bottom --right\">\n            <igo-zoom-button [map]=\"map\" color=\"primary\"> </igo-zoom-button>\n          </div>\n        </igo-map-browser>\n      </mat-grid-tile>\n      <mat-grid-tile>\n        <div class=\"flex align-start h-100 w-100\">\n          <igo-panel title=\"Layers\" class=\"w-100\">\n            <igo-layer-viewer [map]=\"map\" [options]=\"layerViewerOptions\">\n              <ng-template #customBottomActions let-layer=\"layer\">\n                <igo-metadata-button [layer]=\"layer\"></igo-metadata-button>\n                <igo-download-button [layer]=\"layer\"></igo-download-button>\n                <igo-ogc-filter-button\n                  [header]=\"true\"\n                  [layer]=\"layer\"\n                ></igo-ogc-filter-button>\n                <igo-time-filter-button\n                  [header]=\"true\"\n                  [layer]=\"layer\"\n                ></igo-time-filter-button>\n                <igo-track-feature-button\n                  [layer]=\"layer\"\n                  [trackFeature]=\"true\"\n                ></igo-track-feature-button>\n              </ng-template>\n            </igo-layer-viewer>\n          </igo-panel>\n        </div>\n      </mat-grid-tile>\n    </mat-grid-list>\n  </app-example-viewer>\n</app-doc-viewer>\n","import { Component } from '@angular/core';\n\nimport { PanelComponent } from '@igo2/common/panel';\nimport {\n  DataSourceService,\n  IgoMap,\n  ImageLayer,\n  ImageLayerOptions,\n  LAYER_DIRECTIVES,\n  LayerOptions,\n  LayerService,\n  MAP_DIRECTIVES,\n  MapViewOptions,\n  MetadataLayerOptions,\n  OSMDataSource,\n  OSMDataSourceOptions,\n  WMSDataSource,\n  WMSDataSourceOptions\n} from '@igo2/geo';\n\nimport { DocViewerComponent } from '../../components/doc-viewer/doc-viewer.component';\nimport { ExampleViewerComponent } from '../../components/example/example-viewer/example-viewer.component';\n\n@Component({\n  selector: 'app-legend',\n  templateUrl: './legend.component.html',\n  styleUrls: ['./legend.component.scss'],\n  standalone: true,\n  imports: [\n    DocViewerComponent,\n    ExampleViewerComponent,\n    MAP_DIRECTIVES,\n    PanelComponent,\n    LAYER_DIRECTIVES\n  ]\n})\nexport class AppLegendComponent {\n  public map: IgoMap = new IgoMap({\n    controls: {\n      attribution: {\n        collapsed: true\n      }\n    }\n  });\n\n  public view: MapViewOptions = {\n    center: [-73, 47.2],\n    zoom: 7\n  };\n\n  constructor(\n    private dataSourceService: DataSourceService,\n    private layerService: LayerService\n  ) {\n    this.dataSourceService\n      .createAsyncDataSource({\n        type: 'osm'\n      } satisfies OSMDataSourceOptions)\n      .subscribe((dataSource: OSMDataSource) => {\n        this.map.layerController.add(\n          this.layerService.createLayer({\n            title: 'OSM',\n            visible: true,\n            baseLayer: true,\n            source: dataSource\n          } satisfies LayerOptions)\n        );\n      });\n\n    this.layerService\n      .createAsyncLayer({\n        title: 'Legend with display: false',\n        legendOptions: {\n          display: false\n        },\n        sourceOptions: {\n          type: 'wms',\n          url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/mffpecofor.fcgi',\n          params: {\n            LAYERS: 'sh_dis_eco',\n            VERSION: '1.3.0'\n          }\n        }\n      } satisfies ImageLayerOptions)\n      .subscribe((layer: ImageLayer) => this.map.layerController.add(layer));\n\n    this.layerService\n      .createAsyncLayer({\n        title: 'Legend with html param',\n        legendOptions: {\n          html: '<h2 style=\"background-color: blue;\">HTML legend</h2>'\n        },\n        sourceOptions: {\n          type: 'wms',\n          url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/mffpecofor.fcgi',\n          params: {\n            LAYERS: 'sh_sreg_eco',\n            VERSION: '1.3.0'\n          }\n        }\n      } satisfies ImageLayerOptions)\n      .subscribe((layer: ImageLayer) => this.map.layerController.add(layer));\n\n    this.layerService\n      .createAsyncLayer({\n        title: 'Legend with url param',\n        legendOptions: {\n          url: `data:image/jpeg;base64,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`\n        },\n        sourceOptions: {\n          type: 'wms',\n          url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/mffpecofor.fcgi',\n          params: {\n            LAYERS: 'sh_reg_eco',\n            VERSION: '1.3.0'\n          }\n        }\n      } satisfies ImageLayerOptions)\n      .subscribe((layer: ImageLayer) => this.map.layerController.add(layer));\n\n    this.layerService\n      .createAsyncLayer({\n        title: 'Commissions scolaires anglophones',\n        sourceOptions: {\n          type: 'wms',\n          url: 'https://geoegl.msp.gouv.qc.ca/apis/wss/all.fcgi',\n          params: {\n            LAYERS: 'WMS_MEQ_CS_ANGLO',\n            VERSION: '1.3.0'\n          }\n        }\n      } satisfies ImageLayerOptions)\n      .subscribe((layer: ImageLayer) => this.map.layerController.add(layer));\n\n    this.layerService\n      .createAsyncLayer({\n        title: 'Réseau routier',\n        sourceOptions: {\n          type: 'wms',\n          url: 'https://ws.mapserver.transports.gouv.qc.ca/swtq',\n          params: {\n            LAYERS: 'bgr_v_sous_route_res_sup_act',\n            VERSION: '1.3.0'\n          }\n        }\n      } satisfies ImageLayerOptions)\n      .subscribe((layer: ImageLayer) => this.map.layerController.add(layer));\n\n    this.layerService\n      .createAsyncLayer({\n        title: 'Lieux habités',\n        sourceOptions: {\n          type: 'wms',\n          url: 'https://ws.mapserver.transports.gouv.qc.ca/swtq',\n          params: {\n            LAYERS: 'lieuhabite',\n            VERSION: '1.3.0'\n          }\n        }\n      } satisfies ImageLayerOptions)\n      .subscribe((layer: ImageLayer) => this.map.layerController.add(layer));\n\n    this.layerService\n      .createAsyncLayer({\n        title: 'Avertissements routiers',\n        sourceOptions: {\n          type: 'wms',\n          url: 'https://ws.mapserver.transports.gouv.qc.ca/swtq',\n          params: {\n            LAYERS: 'evenements',\n            VERSION: '1.3.0'\n          }\n        }\n      } satisfies ImageLayerOptions)\n      .subscribe((layer: ImageLayer) => this.map.layerController.add(layer));\n\n    const datasource: WMSDataSourceOptions = {\n      type: 'wms',\n      url: 'https://geoegl.msp.gouv.qc.ca/apis/wss/complet.fcgi',\n      refreshIntervalSec: 15,\n      params: {\n        LAYERS: 'vg_observation_v_inondation_embacle_wmst',\n        VERSION: '1.3.0'\n      }\n    };\n\n    interface LayerOptionsWithMetadata\n      extends LayerOptions, MetadataLayerOptions {}\n\n    this.dataSourceService\n      .createAsyncDataSource(datasource)\n      .subscribe((dataSource: WMSDataSource) => {\n        const layerOptions: LayerOptionsWithMetadata = {\n          title: 'Embâcles',\n          source: dataSource,\n          metadata: {\n            url: 'https://www.donneesquebec.ca/recherche/fr/dataset/historique-publique-d-embacles-repertories-au-msp',\n            extern: true\n          }\n        };\n        this.map.layerController.add(\n          this.layerService.createLayer(layerOptions)\n        );\n      });\n  }\n}\n","<app-doc-viewer\n  title=\"Simple Map with a legend list\"\n  subtitle=\"Geo\"\n  [dependencies]=\"['LanguageService']\"\n>\n  <app-example-viewer codeFolder=\"geo/legend\">\n    <igo-map-browser [map]=\"map\" [view]=\"view\">\n      <div class=\"map-actions --vertical --bottom --right\">\n        <igo-zoom-button [map]=\"map\" color=\"primary\"> </igo-zoom-button>\n      </div>\n    </igo-map-browser>\n\n    <igo-panel title=\"Legends\">\n      <igo-layer-legend-list\n        [layers]=\"map.layerController.all\"\n        [excludeBaseLayers]=\"true\"\n        [allowShowAllLegends]=\"true\"\n        [updateLegendOnResolutionChange]=\"false\"\n        [showAllLegendsValue]=\"false\"\n      >\n      </igo-layer-legend-list>\n    </igo-panel>\n  </app-example-viewer>\n</app-doc-viewer>\n","import { Component } from '@angular/core';\n\nimport {\n  DataSourceService,\n  FeatureStore,\n  FeatureWithMeasure,\n  IgoMap,\n  LayerOptions,\n  LayerService,\n  MapBrowserComponent,\n  MapViewOptions,\n  MeasurerComponent,\n  OSMDataSource,\n  OSMDataSourceOptions,\n  ZoomButtonComponent\n} from '@igo2/geo';\n\nimport { DocViewerComponent } from '../../components/doc-viewer/doc-viewer.component';\nimport { ExampleViewerComponent } from '../../components/example/example-viewer/example-viewer.component';\n\n@Component({\n  selector: 'app-measure',\n  templateUrl: './measure.component.html',\n  styleUrls: ['./measure.component.scss'],\n  standalone: true,\n  imports: [\n    DocViewerComponent,\n    ExampleViewerComponent,\n    MapBrowserComponent,\n    ZoomButtonComponent,\n    MeasurerComponent\n  ]\n})\nexport class AppMeasureComponent {\n  public map: IgoMap = new IgoMap({\n    controls: {\n      attribution: {\n        collapsed: true\n      },\n      scaleLine: true\n    }\n  });\n\n  public view: MapViewOptions = {\n    center: [-73, 47.2],\n    zoom: 6,\n    projection: 'EPSG:3857'\n  };\n\n  public store: FeatureStore = new FeatureStore<FeatureWithMeasure>([], {\n    map: this.map\n  });\n\n  constructor(\n    private dataSourceService: DataSourceService,\n    private layerService: LayerService\n  ) {\n    this.dataSourceService\n      .createAsyncDataSource({\n        type: 'osm'\n      } satisfies OSMDataSourceOptions)\n      .subscribe((dataSource: OSMDataSource) => {\n        this.map.layerController.add(\n          this.layerService.createLayer({\n            title: 'OSM',\n            source: dataSource,\n            baseLayer: true,\n            visible: true\n          } satisfies LayerOptions)\n        );\n      });\n  }\n}\n","<app-doc-viewer\n  title=\"Measure\"\n  subtitle=\"Geo\"\n  [dependencies]=\"['LanguageService']\"\n>\n  <app-example-viewer codeFolder=\"geo/measure\">\n    <igo-map-browser [map]=\"map\" [view]=\"view\">\n      <div class=\"map-actions --vertical --bottom --right\">\n        <igo-zoom-button [map]=\"map\" color=\"primary\"> </igo-zoom-button>\n      </div>\n    </igo-map-browser>\n\n    <igo-measurer [store]=\"$any(store)\" [map]=\"map\"></igo-measurer>\n  </app-example-viewer>\n</app-doc-viewer>\n","import { Component } from '@angular/core';\nimport { MatGridListModule } from '@angular/material/grid-list';\n\nimport { PanelComponent } from '@igo2/common/panel';\nimport {\n  AnyBaseOgcFilterOptions,\n  DataSourceService,\n  FILTER_DIRECTIVES,\n  IgoMap,\n  ImageLayerOptions,\n  LayerOptions,\n  LayerService,\n  MAP_DIRECTIVES,\n  MapViewOptions,\n  OSMDataSource,\n  OSMDataSourceOptions,\n  OgcFilterAttributeOptions,\n  OgcFilterDuringOptions,\n  OgcFilterEqualToOptions,\n  OgcFilterOperatorType,\n  OgcFilterableDataSourceOptions,\n  VectorLayerOptions,\n  WFSDataSource,\n  WFSDataSourceOptions,\n  WMSDataSource,\n  WMSDataSourceOptions\n} from '@igo2/geo';\n\nimport { Circle, Fill, Stroke, Style } from 'ol/style';\n\nimport { DocViewerComponent } from '../../components/doc-viewer/doc-viewer.component';\nimport { ExampleViewerComponent } from '../../components/example/example-viewer/example-viewer.component';\n\n@Component({\n  selector: 'app-ogc-filter',\n  templateUrl: './ogc-filter.component.html',\n  styleUrls: ['./ogc-filter.component.scss'],\n  standalone: true,\n  imports: [\n    DocViewerComponent,\n    ExampleViewerComponent,\n    MatGridListModule,\n    MAP_DIRECTIVES,\n    PanelComponent,\n    FILTER_DIRECTIVES\n  ]\n})\nexport class AppOgcFilterComponent {\n  public map: IgoMap = new IgoMap({\n    controls: {\n      attribution: {\n        collapsed: true\n      }\n    }\n  });\n\n  public view: MapViewOptions = {\n    center: [-73, 47.2],\n    zoom: 7\n  };\n\n  constructor(\n    private dataSourceService: DataSourceService,\n    private layerService: LayerService\n  ) {\n    this.dataSourceService\n      .createAsyncDataSource({\n        type: 'osm'\n      } satisfies OSMDataSourceOptions)\n      .subscribe((dataSource: OSMDataSource) => {\n        this.map.layerController.add(\n          this.layerService.createLayer({\n            title: 'OSM',\n            source: dataSource,\n            baseLayer: true,\n            visible: true\n          } satisfies LayerOptions)\n        );\n      });\n\n    interface WFSOptions\n      extends WFSDataSourceOptions, OgcFilterableDataSourceOptions {}\n\n    const datasource: WFSOptions = {\n      type: 'wfs',\n      url: 'https://geoegl.msp.gouv.qc.ca/apis/wss/complet.fcgi',\n      params: {\n        featureTypes: 'vg_observation_v_autre_wmst',\n        fieldNameGeometry: 'geometry',\n        maxFeatures: 10000,\n        version: '2.0.0',\n        outputFormat: undefined,\n        outputFormatDownload: 'SHP' // based on service capabilities\n      },\n      sourceFields: [\n        { name: 'code_municipalite', alias: '# de la municipalitée' },\n        { name: 'date_observation', excludeFromOgcFilters: true },\n        { name: 'urgence', values: ['immédiate', 'inconnue'] }\n      ],\n      ogcFilters: {\n        enabled: true,\n        editable: true,\n        allowedOperatorsType: OgcFilterOperatorType.All,\n        filters: {\n          logical: 'Or',\n          filters: [\n            {\n              operator: 'PropertyIsEqualTo',\n              propertyName: 'code_municipalite',\n              expression: '10043'\n            } satisfies OgcFilterEqualToOptions,\n            {\n              operator: 'Intersects',\n              geometryName: 'the_geom',\n              wkt_geometry: `MULTIPOLYGON(((\n              -8379441.158019895 5844447.897707146,\n              -8379441.158019895 5936172.331649357,\n              -8134842.66750733 5936172.331649357,\n              -8134842.66750733 5844447.897707146,\n              -8379441.158019895 5844447.897707146\n            ), (\n              -8015003 5942074,\n              -8015003 5780349,\n              -7792364 5780349,\n              -7792364 5942074,\n              -8015003 5942074\n            )))`\n            }\n          ] as AnyBaseOgcFilterOptions[]\n        }\n      }\n    };\n\n    this.dataSourceService\n      .createAsyncDataSource(datasource)\n      .subscribe((dataSource: WFSDataSource) => {\n        this.map.layerController.add(\n          this.layerService.createLayer({\n            title: 'Embâcles (PropertyIsEqualTo OR Intersects polygon)',\n            source: dataSource,\n            style: new Style({\n              image: new Circle({\n                radius: 5,\n                fill: new Fill({\n                  color: 'white'\n                }),\n                stroke: new Stroke({\n                  color: 'orange',\n                  width: 1\n                })\n              })\n            })\n          } satisfies VectorLayerOptions)\n        );\n      });\n\n    const datasourceDuringFilter: WFSOptions = {\n      type: 'wfs',\n      url: 'https://geoegl.msp.gouv.qc.ca/apis/wss/complet.fcgi',\n      params: {\n        featureTypes: 'vg_observation_v_autre_wmst',\n        fieldNameGeometry: 'geometry',\n        maxFeatures: 10000,\n        version: '2.0.0',\n        outputFormat: undefined,\n        outputFormatDownload: 'SHP' // based on service capabilities\n      },\n      ogcFilters: {\n        enabled: true,\n        editable: true,\n        allowedOperatorsType: OgcFilterOperatorType.All,\n        filters: {\n          operator: 'During',\n          propertyName: 'date_observation',\n          begin: '2016-01-21T00:00:00-05:00',\n          end: '2016-01-26T00:00:00-05:00'\n        } satisfies OgcFilterDuringOptions | OgcFilterAttributeOptions\n      },\n      minDate: '2016-01-01T00:00:00-05:00',\n      maxDate: '2016-02-10T00:00:00-05:00',\n      stepDate: 'P2D'\n    };\n\n    this.dataSourceService\n      .createAsyncDataSource(datasourceDuringFilter)\n      .subscribe((dataSource: WFSDataSource) => {\n        this.map.layerController.add(\n          this.layerService.createLayer({\n            title: 'Embâcles (During, Step: P2D)',\n            id: '1',\n            source: dataSource,\n            style: new Style({\n              image: new Circle({\n                radius: 5,\n                fill: new Fill({\n                  color: 'white'\n                }),\n                stroke: new Stroke({\n                  color: 'red',\n                  width: 1\n                })\n              })\n            })\n          } satisfies VectorLayerOptions)\n        );\n      });\n\n    const datasourceDuringFilterTime: WFSOptions = {\n      type: 'wfs',\n      url: 'https://geoegl.msp.gouv.qc.ca/apis/wss/complet.fcgi',\n      params: {\n        featureTypes: 'vg_observation_v_autre_wmst',\n        fieldNameGeometry: 'geometry',\n        maxFeatures: 10000,\n        version: '2.0.0',\n        outputFormat: undefined,\n        outputFormatDownload: 'SHP' // based on service capabilities\n      },\n      sourceFields: [\n        {\n          name: 'date_observation',\n          alias: \"Date de l'observation\",\n          allowedOperatorsType: OgcFilterOperatorType.Time\n        }\n      ],\n      ogcFilters: {\n        enabled: true,\n        editable: true,\n        allowedOperatorsType: OgcFilterOperatorType.All,\n        filters: {\n          operator: 'During',\n          propertyName: 'date_observation',\n          begin: '2016-01-01T04:00:00-05:00',\n          end: '2016-01-12T16:00:00-05:00'\n        } satisfies OgcFilterDuringOptions | OgcFilterAttributeOptions\n      },\n      minDate: '2016-01-01T00:00:00-05:00',\n      maxDate: '2016-02-14T20:00:00-05:00',\n      stepDate: 'PT4H'\n    };\n\n    this.dataSourceService\n      .createAsyncDataSource(datasourceDuringFilterTime)\n      .subscribe((dataSource: WFSDataSource) => {\n        this.map.layerController.add(\n          this.layerService.createLayer({\n            title: 'Embâcles (During, Step: PT4H)',\n            id: '2',\n            source: dataSource,\n            style: new Style({\n              image: new Circle({\n                radius: 5,\n                fill: new Fill({\n                  color: 'white'\n                }),\n                stroke: new Stroke({\n                  color: 'blue',\n                  width: 1\n                })\n              })\n            })\n          } satisfies VectorLayerOptions)\n        );\n      });\n\n    const datasourceDuringFilterTimeMonth: WFSOptions = {\n      type: 'wfs',\n      url: 'https://geoegl.msp.gouv.qc.ca/apis/wss/complet.fcgi',\n      params: {\n        featureTypes: 'vg_observation_v_autre_wmst',\n        fieldNameGeometry: 'geometry',\n        maxFeatures: 10000,\n        version: '2.0.0',\n        outputFormat: undefined,\n        outputFormatDownload: 'SHP' // based on service capabilities\n      },\n      sourceFields: [\n        {\n          name: 'date_observation',\n          alias: \"Date de l'observation\",\n          allowedOperatorsType: OgcFilterOperatorType.Time\n        }\n      ],\n      ogcFilters: {\n        enabled: true,\n        editable: true,\n        allowedOperatorsType: OgcFilterOperatorType.All,\n        filters: {\n          operator: 'During',\n          propertyName: 'date_observation',\n          begin: '2016-01-01T00:00:00-05:00',\n          end: '2016-03-31T00:00:00-05:00',\n          displayFormat: 'MMMM'\n        } satisfies OgcFilterDuringOptions | OgcFilterAttributeOptions\n      },\n      minDate: '2016-01-01T00:00:00-05:00',\n      maxDate: '2018-12-31T00:00:00-05:00',\n      stepDate: 'P1M'\n    };\n\n    this.dataSourceService\n      .createAsyncDataSource(datasourceDuringFilterTimeMonth)\n      .subscribe((dataSource: WFSDataSource) => {\n        this.map.layerController.add(\n          this.layerService.createLayer({\n            title: 'Embâcles (During, Step: P1M)',\n            id: '3',\n            source: dataSource,\n            style: new Style({\n              image: new Circle({\n                radius: 5,\n                fill: new Fill({\n                  color: 'white'\n                }),\n                stroke: new Stroke({\n                  color: 'yellow',\n                  width: 1\n                })\n              })\n            })\n          } satisfies VectorLayerOptions)\n        );\n      });\n\n    const datasourceDuringFilterTimeYear: WFSOptions = {\n      type: 'wfs',\n      url: 'https://geoegl.msp.gouv.qc.ca/apis/wss/complet.fcgi',\n      params: {\n        featureTypes: 'vg_observation_v_autre_wmst',\n        fieldNameGeometry: 'geometry',\n        maxFeatures: 10000,\n        version: '2.0.0',\n        outputFormat: undefined,\n        outputFormatDownload: 'SHP' // based on service capabilities\n      },\n      sourceFields: [\n        {\n          name: 'date_observation',\n          alias: \"Date de l'observation\",\n          allowedOperatorsType: OgcFilterOperatorType.Time\n        }\n      ],\n      ogcFilters: {\n        enabled: true,\n        editable: true,\n        allowedOperatorsType: OgcFilterOperatorType.All,\n        filters: {\n          operator: 'During',\n          propertyName: 'date_observation',\n          begin: '2014-01-01T00:00:00-05:00',\n          end: '2019-12-31T00:00:00-05:00',\n          displayFormat: 'YYYY'\n        } satisfies OgcFilterDuringOptions | OgcFilterAttributeOptions\n      },\n      minDate: '2014-01-01T00:00:00-05:00',\n      maxDate: '2019-12-31T00:00:00-05:00',\n      stepDate: 'P1Y'\n    };\n\n    this.dataSourceService\n      .createAsyncDataSource(datasourceDuringFilterTimeYear)\n      .subscribe((dataSource: WFSDataSource) => {\n        this.map.layerController.add(\n          this.layerService.createLayer({\n            title: 'Embâcles (During, Step: P1Y)',\n            id: '4',\n            source: dataSource,\n            style: new Style({\n              image: new Circle({\n                radius: 5,\n                fill: new Fill({\n                  color: 'white'\n                }),\n                stroke: new Stroke({\n                  color: 'green',\n                  width: 1\n                })\n              })\n            })\n          } satisfies VectorLayerOptions)\n        );\n      });\n\n    const datasourceDuringFilterTimeInterval: WFSOptions = {\n      type: 'wfs',\n      url: 'https://geoegl.msp.gouv.qc.ca/apis/wss/complet.fcgi',\n      params: {\n        featureTypes: 'vg_observation_v_autre_wmst',\n        fieldNameGeometry: 'geometry',\n        maxFeatures: 10000,\n        version: '2.0.0',\n        outputFormat: undefined,\n        outputFormatDownload: 'SHP' // based on service capabilities\n      },\n      sourceFields: [\n        {\n          name: 'date_observation',\n          alias: \"Date de l'observation\",\n          allowedOperatorsType: OgcFilterOperatorType.Time\n        }\n      ],\n      ogcFilters: {\n        enabled: true,\n        editable: true,\n        allowedOperatorsType: OgcFilterOperatorType.All,\n        filters: {\n          operator: 'During',\n          propertyName: 'date_observation',\n          begin: 'today - 2 days', // \"now\" can also be used. Instead of midnight, the current time will be used\n          end: 'today' // \"now\" can also be used. Instead of midnight, the current time will be used\n        } satisfies OgcFilterDuringOptions | OgcFilterAttributeOptions\n      },\n      minDate: '2016-01-01T00:00:00-05:00',\n      maxDate: '2025-12-31T00:00:00-05:00',\n      stepDate: 'P1D'\n    };\n\n    this.dataSourceService\n      .createAsyncDataSource(datasourceDuringFilterTimeInterval)\n      .subscribe((dataSource: WFSDataSource) => {\n        this.map.layerController.add(\n          this.layerService.createLayer({\n            title: 'Embâcles (During, Interval from Now, Step: P1D)',\n            id: '5',\n            source: dataSource,\n            style: new Style({\n              image: new Circle({\n                radius: 5,\n                fill: new Fill({\n                  color: 'white'\n                }),\n                stroke: new Stroke({\n                  color: 'black',\n                  width: 1\n                })\n              })\n            })\n          } satisfies VectorLayerOptions)\n        );\n      });\n\n    const datasourceDuringFilterTimeRestrictedToStep: WFSOptions = {\n      type: 'wfs',\n      url: 'https://geoegl.msp.gouv.qc.ca/apis/wss/complet.fcgi',\n      params: {\n        featureTypes: 'vg_observation_v_autre_wmst',\n        fieldNameGeometry: 'geometry',\n        maxFeatures: 10000,\n        version: '2.0.0',\n        outputFormat: undefined,\n        outputFormatDownload: 'SHP' // based on service capabilities\n      },\n      sourceFields: [\n        {\n          name: 'date_observation',\n          alias: \"Date de l'observation\",\n          allowedOperatorsType: OgcFilterOperatorType.Time\n        }\n      ],\n      ogcFilters: {\n        enabled: true,\n        editable: true,\n        allowedOperatorsType: OgcFilterOperatorType.All,\n        filters: {\n          operator: 'During',\n          propertyName: 'date_observation',\n          begin: '2019-01-01 00:00:00',\n          restrictToStep: true\n        } satisfies OgcFilterDuringOptions | OgcFilterAttributeOptions\n      },\n      minDate: '2016-01-01T00:00:00-05:00',\n      maxDate: '2025-12-31T00:00:00-05:00',\n      stepDate: 'P1M'\n    };\n\n    this.dataSourceService\n      .createAsyncDataSource(datasourceDuringFilterTimeRestrictedToStep)\n      .subscribe((dataSource: WFSDataSource) => {\n        this.map.layerController.add(\n          this.layerService.createLayer({\n            title: 'Embâcles (During, RestrictToStep, Step: P1M)',\n            id: '6',\n            source: dataSource,\n            style: new Style({\n              image: new Circle({\n                radius: 5,\n                fill: new Fill({\n                  color: 'black'\n                }),\n                stroke: new Stroke({\n                  color: 'red',\n                  width: 1\n                })\n              })\n            })\n          } satisfies VectorLayerOptions)\n        );\n      });\n\n    const wmsOgcFilterOptions: WMSDataSourceOptions = {\n      type: 'wms',\n      url: 'https://geoegl.msp.gouv.qc.ca/apis/wss/complet.fcgi',\n      optionsFromCapabilities: false,\n      params: {\n        LAYERS: 'vg_observation_v_autre_wmst',\n        VERSION: '1.3.0'\n      },\n      sourceFields: [\n        {\n          name: 'date_observation',\n          alias: \"Date de l'observation\",\n          allowedOperatorsType: OgcFilterOperatorType.Time\n        }\n      ],\n      ogcFilters: {\n        enabled: true,\n        editable: true,\n        filters: {\n          operator: 'During',\n          propertyName: 'date_observation',\n          begin: '2016-01-01 00:00:00',\n          end: '2020-01-01 00:00:00'\n        } satisfies OgcFilterDuringOptions | OgcFilterAttributeOptions,\n        allowedOperatorsType: OgcFilterOperatorType.Time\n      }\n    };\n\n    this.dataSourceService\n      .createAsyncDataSource(wmsOgcFilterOptions)\n      .subscribe((dataSource: WMSDataSource) => {\n        this.map.layerController.add(\n          this.layerService.createLayer({\n            title: 'Inondations (During)',\n            source: dataSource\n          } satisfies ImageLayerOptions)\n        );\n      });\n\n    const filterableWMSwithPushButtons: WMSDataSourceOptions = {\n      type: 'wms',\n      url: 'https://ws.mapserver.transports.gouv.qc.ca/swtq',\n      urlWfs: 'https://ws.mapserver.transports.gouv.qc.ca/swtq',\n      params: {\n        LAYERS: 'radars_photos',\n        VERSION: '1.3.0'\n      },\n      ogcFilters: {\n        enabled: true,\n        editable: true,\n        pushButtons: {\n          selectorType: 'pushButton',\n          order: 2,\n          groups: [\n            { title: 'Nom du group1 - push', name: '1 - push', ids: ['id1'] }\n          ],\n          bundles: [\n            {\n              id: 'id1',\n              title: 'Régions',\n              logical: 'Or',\n              vertical: true,\n              selectors: [\n                {\n                  title: 'Montréal & Laval',\n                  enabled: false,\n                  tooltip: 'Here a tooltip explaining ...',\n                  filters: {\n                    logical: 'Or',\n                    filters: [\n                      {\n                        operator: 'PropertyIsEqualTo',\n                        propertyName: 'region',\n                        expression: 'Montréal'\n                      },\n                      {\n                        operator: 'PropertyIsEqualTo',\n                        propertyName: 'region',\n                        expression: 'Laval'\n                      }\n                    ]\n                  }\n                },\n                {\n                  title: 'Outside Montréal & Laval',\n                  enabled: false,\n                  tooltip: 'Here a tooltip explaining ...',\n                  filters: {\n                    logical: 'And',\n                    filters: [\n                      {\n                        operator: 'PropertyIsNotEqualTo',\n                        propertyName: 'region',\n                        expression: 'Montréal'\n                      },\n                      {\n                        operator: 'PropertyIsNotEqualTo',\n                        propertyName: 'region',\n                        expression: 'Laval'\n                      }\n                    ]\n                  }\n                }\n              ]\n            }\n          ]\n        },\n        checkboxes: {\n          selectorType: 'checkbox',\n          order: 1,\n          groups: [\n            {\n              title: 'Nom du group1 - checkbox',\n              name: '1 - checkbox',\n              ids: ['id1']\n            }\n          ],\n          bundles: [\n            {\n              id: 'id1',\n              title: 'Type de radar photo',\n              logical: 'Or',\n              selectors: [\n                {\n                  title: 'Radar photo fixe',\n                  enabled: true,\n                  tooltip: 'Here a tooltip explaining ...',\n                  filters: {\n                    operator: 'PropertyIsEqualTo',\n                    propertyName: 'typeAppareil',\n                    expression: 'Radar photo fixe'\n                  }\n                },\n                {\n                  title: 'Radar photo mobile',\n                  enabled: false,\n                  tooltip: 'Here a tooltip explaining ...',\n                  filters: {\n                    operator: 'PropertyIsEqualTo',\n                    propertyName: 'typeAppareil',\n                    expression: 'Radar photo mobile'\n                  }\n                },\n                {\n                  title: 'Radar photo fixe + feu rouge',\n                  enabled: false,\n                  color: '0,200,0',\n                  tooltip: 'Here a tooltip explaining ...',\n                  filters: {\n                    operator: 'PropertyIsEqualTo',\n                    propertyName: 'typeAppareil',\n                    expression: 'Radar photo fixe et surveillance au feu rouge'\n                  }\n                },\n                {\n                  title: 'Radar feu rouge',\n                  enabled: false,\n                  color: '255,0,0',\n                  tooltip: 'Here a tooltip explaining ...',\n                  filters: {\n                    operator: 'PropertyIsEqualTo',\n                    propertyName: 'typeAppareil',\n                    expression: 'Appareil de surveillance au feu rouge'\n                  }\n                }\n              ]\n            }\n          ]\n        },\n        allowedOperatorsType: OgcFilterOperatorType.Basic\n      },\n      paramsWFS: {\n        featureTypes: 'radars_photos',\n        fieldNameGeometry: 'geometry',\n        maxFeatures: 10000,\n        version: '1.1.0',\n        outputFormat: 'geojson',\n        outputFormatDownload: 'shp'\n      }\n    };\n\n    this.dataSourceService\n      .createAsyncDataSource(filterableWMSwithPushButtons)\n      .subscribe((dataSource: WMSDataSource) => {\n        this.map.layerController.add(\n          this.layerService.createLayer({\n            title:\n              'Filterable WMS layers with predefined filters (push buttons)',\n            source: dataSource\n          } satisfies ImageLayerOptions)\n        );\n      });\n  }\n}\n","<app-doc-viewer\n  title=\"Ogc filter\"\n  subtitle=\"Geo\"\n  [dependencies]=\"['LanguageService']\"\n>\n  <app-example-viewer codeFolder=\"geo/ogc-filter\">\n    <mat-grid-list cols=\"2\" rowHeight=\"600px\" gutterSize=\"16px\">\n      <mat-grid-tile>\n        <igo-map-browser [map]=\"map\" [view]=\"view\">\n          <div class=\"map-actions --vertical --bottom --right\">\n            <igo-zoom-button [map]=\"map\" color=\"primary\"> </igo-zoom-button>\n          </div>\n        </igo-map-browser>\n      </mat-grid-tile>\n      <mat-grid-tile>\n        <div class=\"flex align-start h-100 w-100 overflow-y-auto\">\n          <igo-panel title=\"Layers\">\n            <igo-ogc-filterable-list\n              [map]=\"map\"\n              [layers]=\"map.layerController.all\"\n            >\n            </igo-ogc-filterable-list>\n          </igo-panel>\n        </div>\n      </mat-grid-tile>\n    </mat-grid-list>\n  </app-example-viewer>\n</app-doc-viewer>\n","import { AfterViewInit, Component, OnInit } from '@angular/core';\n\nimport {\n  DataSourceService,\n  FEATURE,\n  Feature,\n  FeatureMotion,\n  IgoMap,\n  LayerOptions,\n  LayerService,\n  MAP_DIRECTIVES,\n  MapViewOptions,\n  OSMDataSource,\n  OSMDataSourceOptions\n} from '@igo2/geo';\n\nimport { DocViewerComponent } from '../../components/doc-viewer/doc-viewer.component';\nimport { ExampleViewerComponent } from '../../components/example/example-viewer/example-viewer.component';\n\n@Component({\n  selector: 'app-overlay',\n  templateUrl: './overlay.component.html',\n  styleUrls: ['./overlay.component.scss'],\n  standalone: true,\n  imports: [DocViewerComponent, ExampleViewerComponent, MAP_DIRECTIVES]\n})\nexport class AppOverlayComponent implements OnInit, AfterViewInit {\n  public map: IgoMap = new IgoMap({\n    overlay: true,\n    controls: {\n      attribution: {\n        collapsed: true\n      }\n    }\n  });\n\n  public view: MapViewOptions = {\n    center: [-73, 47.2],\n    zoom: 6\n  };\n\n  constructor(\n    private dataSourceService: DataSourceService,\n    private layerService: LayerService\n  ) {}\n\n  ngOnInit(): void {\n    this.dataSourceService\n      .createAsyncDataSource({\n        type: 'osm'\n      } satisfies OSMDataSourceOptions)\n      .subscribe((dataSource: OSMDataSource) => {\n        this.map.layerController.add(\n          this.layerService.createLayer({\n            title: 'OSM',\n            source: dataSource,\n            baseLayer: true,\n            visible: true\n          } satisfies LayerOptions)\n        );\n      });\n  }\n\n  ngAfterViewInit(): void {\n    const feature1: Feature = {\n      type: FEATURE,\n      projection: 'EPSG:4326',\n      meta: {\n        id: 1\n      },\n      properties: {},\n      geometry: {\n        type: 'Point',\n        coordinates: [-73, 46.6]\n      }\n    };\n\n    const feature2: Feature = {\n      type: FEATURE,\n      projection: 'EPSG:4326',\n      meta: {\n        id: 2\n      },\n      properties: {},\n      geometry: {\n        type: 'LineString',\n        coordinates: [\n          [-72, 47.8],\n          [-73.5, 47.4],\n          [-72.4, 48.6]\n        ]\n      }\n    };\n\n    const feature3: Feature = {\n      type: FEATURE,\n      projection: 'EPSG:4326',\n      meta: {\n        id: 3\n      },\n      properties: {},\n      geometry: {\n        type: 'Polygon',\n        coordinates: [\n          [\n            [-71, 46.8],\n            [-73, 47],\n            [-71.2, 46.6]\n          ]\n        ]\n      }\n    };\n\n    this.map.overlay.setFeatures(\n      [feature1, feature2, feature3] satisfies Feature[],\n      FeatureMotion.None\n    );\n  }\n}\n","<app-doc-viewer title=\"Overlay\" subtitle=\"Geo\">\n  <app-example-viewer codeFolder=\"geo/overlay\">\n    <igo-map-browser [map]=\"map\" [view]=\"view\">\n      <div class=\"map-actions --vertical --bottom --right\">\n        <igo-zoom-button [map]=\"map\" color=\"primary\"> </igo-zoom-button>\n      </div>\n    </igo-map-browser>\n  </app-example-viewer>\n</app-doc-viewer>\n","import { Component } from '@angular/core';\nimport { MatGridListModule } from '@angular/material/grid-list';\n\nimport {\n  IgoMap,\n  ImageLayer,\n  ImageLayerOptions,\n  LayerService,\n  MAP_DIRECTIVES,\n  MapViewOptions,\n  PrintComponent,\n  TileLayer,\n  TileLayerOptions\n} from '@igo2/geo';\n\nimport { DocViewerComponent } from '../../components/doc-viewer/doc-viewer.component';\nimport { ExampleViewerComponent } from '../../components/example/example-viewer/example-viewer.component';\n\n@Component({\n  selector: 'app-print',\n  templateUrl: './print.component.html',\n  styleUrls: ['./print.component.scss'],\n  standalone: true,\n  imports: [\n    DocViewerComponent,\n    ExampleViewerComponent,\n    MatGridListModule,\n    MAP_DIRECTIVES,\n    PrintComponent\n  ]\n})\nexport class AppPrintComponent {\n  public map: IgoMap = new IgoMap({\n    controls: {\n      attribution: {\n        collapsed: false\n      }\n    }\n  });\n\n  public view: MapViewOptions = {\n    center: [-73, 47.2],\n    zoom: 9\n  };\n\n  constructor(private layerService: LayerService) {\n    this.layerService\n      .createAsyncLayer({\n        title: 'Quebec Base Map',\n        baseLayer: true,\n        visible: true,\n        sourceOptions: {\n          type: 'xyz',\n          url: 'https://geoegl.msp.gouv.qc.ca/carto/tms/1.0.0/carte_gouv_qc_public@EPSG_3857/{z}/{x}/{-y}.png',\n          crossOrigin: 'anonymous'\n        }\n      } satisfies TileLayerOptions)\n      .subscribe((layer: TileLayer) => this.map.layerController.add(layer));\n\n    this.layerService\n      .createAsyncLayer({\n        title: 'Embâcles',\n        sourceOptions: {\n          type: 'wms',\n          url: 'https://geoegl.msp.gouv.qc.ca/apis/wss/complet.fcgi',\n          params: {\n            LAYERS: 'vg_observation_v_inondation_embacle_wmst',\n            VERSION: '1.3.0'\n          },\n          crossOrigin: 'anonymous'\n        }\n      } satisfies ImageLayerOptions)\n      .subscribe((layer: ImageLayer) => this.map.layerController.add(layer));\n\n    this.layerService\n      .createAsyncLayer({\n        title: 'Radar météo',\n        sourceOptions: {\n          type: 'wms',\n          url: 'https://geo.meteo.gc.ca/geomet?lang=fr', // https://geo.meteo.gc.ca/geomet?lang=fr\n          params: {\n            LAYERS: 'RADAR_1KM_RRAI',\n            VERSION: '1.3.0'\n          },\n          crossOrigin: 'anonymous'\n        }\n      } satisfies ImageLayerOptions)\n      .subscribe((layer: ImageLayer) => this.map.layerController.add(layer));\n\n    this.layerService\n      .createAsyncLayer({\n        title: 'Aéroports',\n        sourceOptions: {\n          type: 'wms',\n          url: 'https://ws.mapserver.transports.gouv.qc.ca/swtq?',\n          params: {\n            layers: 'aeroport',\n            version: '1.3.0'\n          },\n          crossOrigin: 'anonymous'\n        }\n      } satisfies ImageLayerOptions)\n      .subscribe((layer: ImageLayer) => this.map.layerController.add(layer));\n  }\n}\n","<app-doc-viewer\n  title=\"Print\"\n  subtitle=\"Geo\"\n  [dependencies]=\"['LanguageService']\"\n>\n  <app-example-viewer codeFolder=\"geo/print\">\n    <mat-grid-list cols=\"2\" rowHeight=\"800px\" gutterSize=\"16px\">\n      <mat-grid-tile\n        ><igo-map-browser [map]=\"map\" [view]=\"view\">\n          <div class=\"map-actions --vertical --top --right\">\n            <div class=\"spinner-spacer\"></div>\n            <igo-rotation-button\n              class=\"mat-elevation-z2\"\n              [showIfNoRotation]=\"true\"\n              [map]=\"map\"\n              color=\"primary\"\n            ></igo-rotation-button>\n          </div>\n          <div class=\"map-actions --vertical --bottom --right\">\n            <igo-home-extent-button\n              class=\"mat-elevation-z2\"\n              [map]=\"map\"\n              color=\"primary\"\n            >\n            </igo-home-extent-button>\n            <igo-geolocate-button\n              class=\"mat-elevation-z2\"\n              [map]=\"map\"\n              color=\"primary\"\n            >\n            </igo-geolocate-button>\n            <igo-zoom-button [map]=\"map\" color=\"primary\"> </igo-zoom-button>\n          </div> </igo-map-browser\n      ></mat-grid-tile>\n      <mat-grid-tile> <igo-print [map]=\"map\"></igo-print></mat-grid-tile>\n    </mat-grid-list>\n  </app-example-viewer>\n</app-doc-viewer>\n","import { AsyncPipe, NgFor, NgIf } from '@angular/common';\nimport { Component } from '@angular/core';\n\nimport { getEntityTitle } from '@igo2/common/entity';\nimport { PanelComponent } from '@igo2/common/panel';\nimport {\n  DataSource,\n  DataSourceService,\n  FEATURE_DETAILS_DIRECTIVES,\n  Feature,\n  FeatureDataSource,\n  FeatureDataSourceOptions,\n  FeatureMotion,\n  IgoMap,\n  IgoQueryModule,\n  ImageLayer,\n  ImageLayerOptions,\n  LayerOptions,\n  LayerService,\n  MAP_DIRECTIVES,\n  MapViewOptions,\n  OSMDataSource,\n  OSMDataSourceOptions,\n  QueryFormat,\n  QueryHtmlTarget,\n  QueryableDataSourceOptions,\n  SearchResult,\n  VectorLayerOptions,\n  VectorTileLayer,\n  VectorTileLayerOptions\n} from '@igo2/geo';\n\nimport olFeature from 'ol/Feature';\nimport olLineString from 'ol/geom/LineString';\nimport olPoint from 'ol/geom/Point';\nimport olPolygon from 'ol/geom/Polygon';\nimport * as olproj from 'ol/proj';\n\nimport { BehaviorSubject } from 'rxjs';\n\nimport { DocViewerComponent } from '../../components/doc-viewer/doc-viewer.component';\nimport { ExampleViewerComponent } from '../../components/example/example-viewer/example-viewer.component';\n\n@Component({\n  selector: 'app-query',\n  templateUrl: './query.component.html',\n  styleUrls: ['./query.component.scss'],\n  standalone: true,\n  imports: [\n    DocViewerComponent,\n    ExampleViewerComponent,\n    MAP_DIRECTIVES,\n    IgoQueryModule,\n    PanelComponent,\n    NgIf,\n    NgFor,\n    FEATURE_DETAILS_DIRECTIVES,\n    AsyncPipe\n  ]\n})\nexport class AppQueryComponent {\n  public features$: BehaviorSubject<Feature[]> = new BehaviorSubject<Feature[]>(\n    []\n  );\n\n  public map: IgoMap = new IgoMap({\n    controls: {\n      attribution: {\n        collapsed: true\n      }\n    }\n  });\n\n  public view: MapViewOptions = {\n    center: [-73, 47.2],\n    zoom: 6\n  };\n\n  constructor(\n    private dataSourceService: DataSourceService,\n    private layerService: LayerService\n  ) {\n    this.dataSourceService\n      .createAsyncDataSource({\n        type: 'osm'\n      } satisfies OSMDataSourceOptions)\n      .subscribe((dataSource: OSMDataSource) => {\n        this.map.layerController.add(\n          this.layerService.createLayer({\n            title: 'OSM',\n            source: dataSource,\n            baseLayer: true,\n            visible: true\n          } satisfies LayerOptions)\n        );\n      });\n\n    this.dataSourceService\n      .createAsyncDataSource({\n        type: 'wms',\n        url: 'https://ws.mapserver.transports.gouv.qc.ca/swtq',\n        queryable: true,\n        params: {\n          layers: 'bgr_v_sous_route_res_sup_act',\n          version: '1.3.0'\n        }\n      } as QueryableDataSourceOptions)\n      .subscribe((dataSource: DataSource) => {\n        this.map.layerController.add(\n          this.layerService.createLayer({\n            title: 'WMS',\n            source: dataSource\n          } satisfies LayerOptions)\n        );\n      });\n\n    this.dataSourceService\n      .createAsyncDataSource({\n        type: 'wms',\n        url: 'https://ws.mapserver.transports.gouv.qc.ca/swtq',\n        queryable: true,\n        queryFormat: QueryFormat.HTMLGML2,\n        queryHtmlTarget: QueryHtmlTarget.IFRAME,\n        params: {\n          layers: 'aeroport',\n          version: '1.3.0'\n        }\n      } as QueryableDataSourceOptions)\n      .subscribe((dataSource: DataSource) => {\n        this.map.layerController.add(\n          this.layerService.createLayer({\n            title: 'WMS html with a pre call in GML',\n            source: dataSource\n          } satisfies LayerOptions)\n        );\n      });\n\n    this.layerService\n      .createAsyncLayer({\n        title: 'WMS with different query url',\n        sourceOptions: {\n          type: 'wms',\n          url: 'https://geoegl.msp.gouv.qc.ca/apis/wss/all.fcgi',\n          queryable: true,\n          queryFormat: QueryFormat.HTMLGML2,\n          queryHtmlTarget: QueryHtmlTarget.IFRAME,\n          queryUrls: [\n            {\n              url: 'https://geoegl.msp.gouv.qc.ca/apis/wss/complet.fcgi?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&BBOX={bbox}&CRS=EPSG%3A3857&WIDTH=900&HEIGHT=632&LAYERS=SDA_REGION_S_20K&STYLES=&FORMAT=image%2Fpng&QUERY_LAYERS=SDA_REGION_S_20K&INFO_FORMAT=text%2Fhtml&I=467&J=493'\n            }\n          ],\n          queryLayerFeatures: false,\n          params: {\n            layers: 'SDA_MUNIC_S_20K',\n            version: '1.3.0'\n          }\n        }\n      } as ImageLayerOptions)\n      .subscribe((layer: ImageLayer) => this.map.layerController.add(layer));\n\n    this.dataSourceService\n      .createAsyncDataSource({\n        type: 'vector',\n        queryable: true,\n        sourceFields: [\n          { name: 'name', alias: 'Alias name' },\n          { name: 'description', alias: 'Alias description' }\n        ]\n      } as FeatureDataSourceOptions)\n      .subscribe((dataSource: FeatureDataSource) => {\n        this.map.layerController.add(\n          this.layerService.createLayer({\n            title: 'Vector layer',\n            source: dataSource\n          } satisfies VectorLayerOptions)\n        );\n        this.addFeatures(dataSource);\n      });\n\n    this.layerService\n      .createAsyncLayer({\n        title: 'Vector tile with different query url',\n        sourceOptions: {\n          type: 'mvt',\n          url: 'https://ahocevar.com/geoserver/gwc/service/tms/1.0.0/ne:ne_10m_admin_0_countries@EPSG:900913@pbf/{z}/{x}/{-y}.pbf',\n          queryable: true,\n          queryFormat: QueryFormat.HTMLGML2,\n          queryHtmlTarget: QueryHtmlTarget.IFRAME,\n          queryUrls: [\n            {\n              url: 'https://geoegl.msp.gouv.qc.ca/apis/wss/complet.fcgi?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&BBOX={bbox}&CRS=EPSG%3A3857&WIDTH=900&HEIGHT=632&LAYERS=SDA_REGION_S_20K&STYLES=&FORMAT=image%2Fpng&QUERY_LAYERS=SDA_REGION_S_20K&INFO_FORMAT=text%2Fhtml&I=467&J=493'\n            }\n          ],\n          queryLayerFeatures: false\n        },\n        mapboxStyle: {\n          url: 'assets/mapboxStyleExample-vectortile.json',\n          source: 'ahocevar'\n        }\n      } as VectorTileLayerOptions)\n      .subscribe((layer: VectorTileLayer) =>\n        this.map.layerController.add(layer)\n      );\n  }\n\n  addFeatures(dataSource: FeatureDataSource): void {\n    const feature1 = new olFeature<olLineString>({\n      name: 'feature1',\n      geometry: new olLineString([\n        olproj.transform([-72, 47.8], 'EPSG:4326', 'EPSG:3857'),\n        olproj.transform([-73.5, 47.4], 'EPSG:4326', 'EPSG:3857'),\n        olproj.transform([-72.4, 48.6], 'EPSG:4326', 'EPSG:3857')\n      ])\n    });\n\n    const feature2 = new olFeature<olPoint>({\n      name: 'feature2',\n      geometry: new olPoint(\n        olproj.transform([-73, 46.6], 'EPSG:4326', 'EPSG:3857')\n      )\n    });\n\n    const feature3 = new olFeature<olPolygon>({\n      name: 'feature3',\n      geometry: new olPolygon([\n        [\n          olproj.transform([-71, 46.8], 'EPSG:4326', 'EPSG:3857'),\n          olproj.transform([-73, 47], 'EPSG:4326', 'EPSG:3857'),\n          olproj.transform([-71.2, 46.6], 'EPSG:4326', 'EPSG:3857')\n        ]\n      ])\n    });\n\n    dataSource.ol.addFeatures([feature1, feature2, feature3]);\n  }\n\n  handleQueryResults(results: any): void {\n    const features: Feature[] = results.features;\n    if (features.length && features[0]) {\n      this.features$.next(features);\n      this.map.queryResultsOverlay.setFeatures(features, FeatureMotion.None);\n    }\n  }\n\n  getTitle(result: SearchResult): string {\n    return getEntityTitle(result);\n  }\n}\n","<app-doc-viewer title=\"Query\" subtitle=\"Geo\" [dependencies]=\"[]\">\n  <app-example-viewer codeFolder=\"geo/query\">\n    <igo-map-browser\n      [map]=\"map\"\n      [view]=\"view\"\n      igoQuery\n      [queryFeatures]=\"true\"\n      (query)=\"handleQueryResults($event)\"\n    >\n      <div class=\"map-actions --vertical --bottom --right\">\n        <igo-zoom-button [map]=\"map\" color=\"primary\"> </igo-zoom-button>\n      </div>\n    </igo-map-browser>\n\n    <igo-panel title=\"Details\">\n      <ng-container *ngIf=\"features$ | async as features\">\n        <div *ngFor=\"let feature of features\">\n          <h1>\n            Query Title :\n            <span style=\"background-color: #e0e0e0\">{{\n              getTitle($any(feature))\n            }}</span>\n          </h1>\n          <igo-feature-details [feature]=\"feature\"></igo-feature-details>\n        </div>\n      </ng-container>\n    </igo-panel>\n  </app-example-viewer>\n</app-doc-viewer>\n","import { Overlay, OverlayRef } from '@angular/cdk/overlay';\nimport { TemplatePortal } from '@angular/cdk/portal';\nimport {\n  Directive,\n  ElementRef,\n  EventEmitter,\n  HostListener,\n  Input,\n  Output,\n  ViewContainerRef\n} from '@angular/core';\nimport type { TemplateRef } from '@angular/core';\n\nimport { Subscription, fromEvent } from 'rxjs';\nimport { filter, take } from 'rxjs/operators';\n\n@Directive({\n  selector: '[igoContextMenu]',\n  standalone: true\n})\nexport class ContextMenuDirective {\n  private overlayRef: OverlayRef | null;\n  private sub: Subscription;\n\n  @Input('igoContextMenu') menuContext: TemplateRef<any>;\n  @Output() menuPosition = new EventEmitter<{ x: number; y: number }>();\n\n  constructor(\n    public overlay: Overlay,\n    public viewContainerRef: ViewContainerRef,\n    private elementRef: ElementRef\n  ) {}\n\n  @HostListener('longpress', ['$event'])\n  @HostListener('contextmenu', ['$event'])\n  public onContextMenu(e: MouseEvent | TouchEvent): void {\n    let x;\n    let y;\n    if (e instanceof MouseEvent) {\n      x = e.x;\n      y = e.y;\n    } else if (e instanceof TouchEvent) {\n      x = e.touches[0].pageX;\n      y = e.touches[0].pageY;\n    }\n    if (!x || !y) {\n      return;\n    }\n\n    this.close();\n    e.preventDefault();\n    this.menuPosition.emit({ x, y });\n    this.overlayRef = null;\n    const positionStrategy = this.overlay\n      .position()\n      .flexibleConnectedTo({ x, y })\n      .withPositions([\n        {\n          originX: 'end',\n          originY: 'bottom',\n          overlayX: 'start',\n          overlayY: 'top'\n        }\n      ]);\n    this.overlayRef = this.overlay.create({\n      positionStrategy,\n      scrollStrategy: this.overlay.scrollStrategies.close()\n    });\n    this.overlayRef.attach(\n      new TemplatePortal(this.menuContext, this.viewContainerRef, {\n        $implicit: undefined\n      })\n    );\n\n    this.sub = fromEvent<MouseEvent>(document, 'click')\n      .pipe(\n        filter((event) => {\n          const clickTarget = event.target as HTMLElement;\n          this.close();\n          return (\n            !!this.overlayRef &&\n            !this.overlayRef.overlayElement.contains(clickTarget)\n          );\n        }),\n        take(1)\n      )\n      .subscribe(() => this.close());\n\n    this.sub = fromEvent<MouseEvent>(document, 'contextmenu')\n      .pipe(\n        filter((event) => {\n          const clickTarget = event.target as HTMLElement;\n          if (\n            clickTarget &&\n            !this.elementRef.nativeElement.contains(clickTarget) &&\n            !this.overlayRef.overlayElement.contains(clickTarget)\n          ) {\n            return true;\n          } else {\n            event.preventDefault();\n          }\n        }),\n        take(1)\n      )\n      .subscribe(() => this.close());\n  }\n\n  close() {\n    if (this.overlayRef) {\n      this.overlayRef.dispose();\n      this.overlayRef = null;\n    }\n    if (this.sub) {\n      this.sub.unsubscribe();\n    }\n  }\n}\n","import {\n  Directive,\n  EventEmitter,\n  HostListener,\n  Input,\n  Output\n} from '@angular/core';\n\nimport { userAgent } from '@igo2/utils';\n\n/**\n * IgoLongPress trigger longpress event after a define duration.\n * This directive exist to patch the unavailable contextmenu event on iOS.\n * @param touchDuration touch duration in ms, default value is 400ms\n * @param iOSOnly define if longpress is triggered only for iOS, default value = true\n */\n@Directive({\n  selector: '[igoLongPress]',\n  standalone: true\n})\nexport class LongPressDirective {\n  private touchTimeout: any;\n  @Input() touchDuration = 400;\n  @Input() onlyIOS = true;\n  @Output() longpress = new EventEmitter();\n\n  @HostListener('touchstart', ['$event'])\n  public touchstart(e: TouchEvent) {\n    if (e.touches.length > 1) {\n      this.touchEnd();\n      return;\n    }\n    this.touchTimeout = setTimeout(() => {\n      if (this.onlyIOS) {\n        if (userAgent.getOSName() === 'iOS') {\n          this.longpress.emit(e);\n        }\n      } else {\n        this.longpress.emit(e);\n      }\n    }, this.touchDuration);\n  }\n  @HostListener('touchmove')\n  @HostListener('touchcancel')\n  @HostListener('touchend')\n  public touchend() {\n    this.touchEnd();\n  }\n\n  private touchEnd() {\n    clearTimeout(this.touchTimeout);\n  }\n}\n","/**\n * Custom positioning reference element.\n * @see https://floating-ui.com/docs/virtual-elements\n */\n\nconst sides = ['top', 'right', 'bottom', 'left'];\nconst alignments = ['start', 'end'];\nconst placements = /*#__PURE__*/sides.reduce((acc, side) => acc.concat(side, side + \"-\" + alignments[0], side + \"-\" + alignments[1]), []);\nconst min = Math.min;\nconst max = Math.max;\nconst round = Math.round;\nconst floor = Math.floor;\nconst createCoords = v => ({\n  x: v,\n  y: v\n});\nconst oppositeSideMap = {\n  left: 'right',\n  right: 'left',\n  bottom: 'top',\n  top: 'bottom'\n};\nconst oppositeAlignmentMap = {\n  start: 'end',\n  end: 'start'\n};\nfunction clamp(start, value, end) {\n  return max(start, min(value, end));\n}\nfunction evaluate(value, param) {\n  return typeof value === 'function' ? value(param) : value;\n}\nfunction getSide(placement) {\n  return placement.split('-')[0];\n}\nfunction getAlignment(placement) {\n  return placement.split('-')[1];\n}\nfunction getOppositeAxis(axis) {\n  return axis === 'x' ? 'y' : 'x';\n}\nfunction getAxisLength(axis) {\n  return axis === 'y' ? 'height' : 'width';\n}\nconst yAxisSides = /*#__PURE__*/new Set(['top', 'bottom']);\nfunction getSideAxis(placement) {\n  return yAxisSides.has(getSide(placement)) ? 'y' : 'x';\n}\nfunction getAlignmentAxis(placement) {\n  return getOppositeAxis(getSideAxis(placement));\n}\nfunction getAlignmentSides(placement, rects, rtl) {\n  if (rtl === void 0) {\n    rtl = false;\n  }\n  const alignment = getAlignment(placement);\n  const alignmentAxis = getAlignmentAxis(placement);\n  const length = getAxisLength(alignmentAxis);\n  let mainAlignmentSide = alignmentAxis === 'x' ? alignment === (rtl ? 'end' : 'start') ? 'right' : 'left' : alignment === 'start' ? 'bottom' : 'top';\n  if (rects.reference[length] > rects.floating[length]) {\n    mainAlignmentSide = getOppositePlacement(mainAlignmentSide);\n  }\n  return [mainAlignmentSide, getOppositePlacement(mainAlignmentSide)];\n}\nfunction getExpandedPlacements(placement) {\n  const oppositePlacement = getOppositePlacement(placement);\n  return [getOppositeAlignmentPlacement(placement), oppositePlacement, getOppositeAlignmentPlacement(oppositePlacement)];\n}\nfunction getOppositeAlignmentPlacement(placement) {\n  return placement.replace(/start|end/g, alignment => oppositeAlignmentMap[alignment]);\n}\nconst lrPlacement = ['left', 'right'];\nconst rlPlacement = ['right', 'left'];\nconst tbPlacement = ['top', 'bottom'];\nconst btPlacement = ['bottom', 'top'];\nfunction getSideList(side, isStart, rtl) {\n  switch (side) {\n    case 'top':\n    case 'bottom':\n      if (rtl) return isStart ? rlPlacement : lrPlacement;\n      return isStart ? lrPlacement : rlPlacement;\n    case 'left':\n    case 'right':\n      return isStart ? tbPlacement : btPlacement;\n    default:\n      return [];\n  }\n}\nfunction getOppositeAxisPlacements(placement, flipAlignment, direction, rtl) {\n  const alignment = getAlignment(placement);\n  let list = getSideList(getSide(placement), direction === 'start', rtl);\n  if (alignment) {\n    list = list.map(side => side + \"-\" + alignment);\n    if (flipAlignment) {\n      list = list.concat(list.map(getOppositeAlignmentPlacement));\n    }\n  }\n  return list;\n}\nfunction getOppositePlacement(placement) {\n  return placement.replace(/left|right|bottom|top/g, side => oppositeSideMap[side]);\n}\nfunction expandPaddingObject(padding) {\n  return {\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0,\n    ...padding\n  };\n}\nfunction getPaddingObject(padding) {\n  return typeof padding !== 'number' ? expandPaddingObject(padding) : {\n    top: padding,\n    right: padding,\n    bottom: padding,\n    left: padding\n  };\n}\nfunction rectToClientRect(rect) {\n  const {\n    x,\n    y,\n    width,\n    height\n  } = rect;\n  return {\n    width,\n    height,\n    top: y,\n    left: x,\n    right: x + width,\n    bottom: y + height,\n    x,\n    y\n  };\n}\nexport { alignments, clamp, createCoords, evaluate, expandPaddingObject, floor, getAlignment, getAlignmentAxis, getAlignmentSides, getAxisLength, getExpandedPlacements, getOppositeAlignmentPlacement, getOppositeAxis, getOppositeAxisPlacements, getOppositePlacement, getPaddingObject, getSide, getSideAxis, max, min, placements, rectToClientRect, round, sides };","import { getSideAxis, getAlignmentAxis, getAxisLength, getSide, getAlignment, evaluate, getPaddingObject, rectToClientRect, min, clamp, placements, getAlignmentSides, getOppositeAlignmentPlacement, getOppositePlacement, getExpandedPlacements, getOppositeAxisPlacements, sides, max, getOppositeAxis } from '@floating-ui/utils';\nexport { rectToClientRect } from '@floating-ui/utils';\nfunction computeCoordsFromPlacement(_ref, placement, rtl) {\n  let {\n    reference,\n    floating\n  } = _ref;\n  const sideAxis = getSideAxis(placement);\n  const alignmentAxis = getAlignmentAxis(placement);\n  const alignLength = getAxisLength(alignmentAxis);\n  const side = getSide(placement);\n  const isVertical = sideAxis === 'y';\n  const commonX = reference.x + reference.width / 2 - floating.width / 2;\n  const commonY = reference.y + reference.height / 2 - floating.height / 2;\n  const commonAlign = reference[alignLength] / 2 - floating[alignLength] / 2;\n  let coords;\n  switch (side) {\n    case 'top':\n      coords = {\n        x: commonX,\n        y: reference.y - floating.height\n      };\n      break;\n    case 'bottom':\n      coords = {\n        x: commonX,\n        y: reference.y + reference.height\n      };\n      break;\n    case 'right':\n      coords = {\n        x: reference.x + reference.width,\n        y: commonY\n      };\n      break;\n    case 'left':\n      coords = {\n        x: reference.x - floating.width,\n        y: commonY\n      };\n      break;\n    default:\n      coords = {\n        x: reference.x,\n        y: reference.y\n      };\n  }\n  switch (getAlignment(placement)) {\n    case 'start':\n      coords[alignmentAxis] -= commonAlign * (rtl && isVertical ? -1 : 1);\n      break;\n    case 'end':\n      coords[alignmentAxis] += commonAlign * (rtl && isVertical ? -1 : 1);\n      break;\n  }\n  return coords;\n}\n\n/**\n * Computes the `x` and `y` coordinates that will place the floating element\n * next to a given reference element.\n *\n * This export does not have any `platform` interface logic. You will need to\n * write one for the platform you are using Floating UI with.\n */\nconst computePosition = async (reference, floating, config) => {\n  const {\n    placement = 'bottom',\n    strategy = 'absolute',\n    middleware = [],\n    platform\n  } = config;\n  const validMiddleware = middleware.filter(Boolean);\n  const rtl = await (platform.isRTL == null ? void 0 : platform.isRTL(floating));\n  let rects = await platform.getElementRects({\n    reference,\n    floating,\n    strategy\n  });\n  let {\n    x,\n    y\n  } = computeCoordsFromPlacement(rects, placement, rtl);\n  let statefulPlacement = placement;\n  let middlewareData = {};\n  let resetCount = 0;\n  for (let i = 0; i < validMiddleware.length; i++) {\n    const {\n      name,\n      fn\n    } = validMiddleware[i];\n    const {\n      x: nextX,\n      y: nextY,\n      data,\n      reset\n    } = await fn({\n      x,\n      y,\n      initialPlacement: placement,\n      placement: statefulPlacement,\n      strategy,\n      middlewareData,\n      rects,\n      platform,\n      elements: {\n        reference,\n        floating\n      }\n    });\n    x = nextX != null ? nextX : x;\n    y = nextY != null ? nextY : y;\n    middlewareData = {\n      ...middlewareData,\n      [name]: {\n        ...middlewareData[name],\n        ...data\n      }\n    };\n    if (reset && resetCount <= 50) {\n      resetCount++;\n      if (typeof reset === 'object') {\n        if (reset.placement) {\n          statefulPlacement = reset.placement;\n        }\n        if (reset.rects) {\n          rects = reset.rects === true ? await platform.getElementRects({\n            reference,\n            floating,\n            strategy\n          }) : reset.rects;\n        }\n        ({\n          x,\n          y\n        } = computeCoordsFromPlacement(rects, statefulPlacement, rtl));\n      }\n      i = -1;\n    }\n  }\n  return {\n    x,\n    y,\n    placement: statefulPlacement,\n    strategy,\n    middlewareData\n  };\n};\n\n/**\n * Resolves with an object of overflow side offsets that determine how much the\n * element is overflowing a given clipping boundary on each side.\n * - positive = overflowing the boundary by that number of pixels\n * - negative = how many pixels left before it will overflow\n * - 0 = lies flush with the boundary\n * @see https://floating-ui.com/docs/detectOverflow\n */\nasync function detectOverflow(state, options) {\n  var _await$platform$isEle;\n  if (options === void 0) {\n    options = {};\n  }\n  const {\n    x,\n    y,\n    platform,\n    rects,\n    elements,\n    strategy\n  } = state;\n  const {\n    boundary = 'clippingAncestors',\n    rootBoundary = 'viewport',\n    elementContext = 'floating',\n    altBoundary = false,\n    padding = 0\n  } = evaluate(options, state);\n  const paddingObject = getPaddingObject(padding);\n  const altContext = elementContext === 'floating' ? 'reference' : 'floating';\n  const element = elements[altBoundary ? altContext : elementContext];\n  const clippingClientRect = rectToClientRect(await platform.getClippingRect({\n    element: ((_await$platform$isEle = await (platform.isElement == null ? void 0 : platform.isElement(element))) != null ? _await$platform$isEle : true) ? element : element.contextElement || (await (platform.getDocumentElement == null ? void 0 : platform.getDocumentElement(elements.floating))),\n    boundary,\n    rootBoundary,\n    strategy\n  }));\n  const rect = elementContext === 'floating' ? {\n    x,\n    y,\n    width: rects.floating.width,\n    height: rects.floating.height\n  } : rects.reference;\n  const offsetParent = await (platform.getOffsetParent == null ? void 0 : platform.getOffsetParent(elements.floating));\n  const offsetScale = (await (platform.isElement == null ? void 0 : platform.isElement(offsetParent))) ? (await (platform.getScale == null ? void 0 : platform.getScale(offsetParent))) || {\n    x: 1,\n    y: 1\n  } : {\n    x: 1,\n    y: 1\n  };\n  const elementClientRect = rectToClientRect(platform.convertOffsetParentRelativeRectToViewportRelativeRect ? await platform.convertOffsetParentRelativeRectToViewportRelativeRect({\n    elements,\n    rect,\n    offsetParent,\n    strategy\n  }) : rect);\n  return {\n    top: (clippingClientRect.top - elementClientRect.top + paddingObject.top) / offsetScale.y,\n    bottom: (elementClientRect.bottom - clippingClientRect.bottom + paddingObject.bottom) / offsetScale.y,\n    left: (clippingClientRect.left - elementClientRect.left + paddingObject.left) / offsetScale.x,\n    right: (elementClientRect.right - clippingClientRect.right + paddingObject.right) / offsetScale.x\n  };\n}\n\n/**\n * Provides data to position an inner element of the floating element so that it\n * appears centered to the reference element.\n * @see https://floating-ui.com/docs/arrow\n */\nconst arrow = options => ({\n  name: 'arrow',\n  options,\n  async fn(state) {\n    const {\n      x,\n      y,\n      placement,\n      rects,\n      platform,\n      elements,\n      middlewareData\n    } = state;\n    // Since `element` is required, we don't Partial<> the type.\n    const {\n      element,\n      padding = 0\n    } = evaluate(options, state) || {};\n    if (element == null) {\n      return {};\n    }\n    const paddingObject = getPaddingObject(padding);\n    const coords = {\n      x,\n      y\n    };\n    const axis = getAlignmentAxis(placement);\n    const length = getAxisLength(axis);\n    const arrowDimensions = await platform.getDimensions(element);\n    const isYAxis = axis === 'y';\n    const minProp = isYAxis ? 'top' : 'left';\n    const maxProp = isYAxis ? 'bottom' : 'right';\n    const clientProp = isYAxis ? 'clientHeight' : 'clientWidth';\n    const endDiff = rects.reference[length] + rects.reference[axis] - coords[axis] - rects.floating[length];\n    const startDiff = coords[axis] - rects.reference[axis];\n    const arrowOffsetParent = await (platform.getOffsetParent == null ? void 0 : platform.getOffsetParent(element));\n    let clientSize = arrowOffsetParent ? arrowOffsetParent[clientProp] : 0;\n\n    // DOM platform can return `window` as the `offsetParent`.\n    if (!clientSize || !(await (platform.isElement == null ? void 0 : platform.isElement(arrowOffsetParent)))) {\n      clientSize = elements.floating[clientProp] || rects.floating[length];\n    }\n    const centerToReference = endDiff / 2 - startDiff / 2;\n\n    // If the padding is large enough that it causes the arrow to no longer be\n    // centered, modify the padding so that it is centered.\n    const largestPossiblePadding = clientSize / 2 - arrowDimensions[length] / 2 - 1;\n    const minPadding = min(paddingObject[minProp], largestPossiblePadding);\n    const maxPadding = min(paddingObject[maxProp], largestPossiblePadding);\n\n    // Make sure the arrow doesn't overflow the floating element if the center\n    // point is outside the floating element's bounds.\n    const min$1 = minPadding;\n    const max = clientSize - arrowDimensions[length] - maxPadding;\n    const center = clientSize / 2 - arrowDimensions[length] / 2 + centerToReference;\n    const offset = clamp(min$1, center, max);\n\n    // If the reference is small enough that the arrow's padding causes it to\n    // to point to nothing for an aligned placement, adjust the offset of the\n    // floating element itself. To ensure `shift()` continues to take action,\n    // a single reset is performed when this is true.\n    const shouldAddOffset = !middlewareData.arrow && getAlignment(placement) != null && center !== offset && rects.reference[length] / 2 - (center < min$1 ? minPadding : maxPadding) - arrowDimensions[length] / 2 < 0;\n    const alignmentOffset = shouldAddOffset ? center < min$1 ? center - min$1 : center - max : 0;\n    return {\n      [axis]: coords[axis] + alignmentOffset,\n      data: {\n        [axis]: offset,\n        centerOffset: center - offset - alignmentOffset,\n        ...(shouldAddOffset && {\n          alignmentOffset\n        })\n      },\n      reset: shouldAddOffset\n    };\n  }\n});\nfunction getPlacementList(alignment, autoAlignment, allowedPlacements) {\n  const allowedPlacementsSortedByAlignment = alignment ? [...allowedPlacements.filter(placement => getAlignment(placement) === alignment), ...allowedPlacements.filter(placement => getAlignment(placement) !== alignment)] : allowedPlacements.filter(placement => getSide(placement) === placement);\n  return allowedPlacementsSortedByAlignment.filter(placement => {\n    if (alignment) {\n      return getAlignment(placement) === alignment || (autoAlignment ? getOppositeAlignmentPlacement(placement) !== placement : false);\n    }\n    return true;\n  });\n}\n/**\n * Optimizes the visibility of the floating element by choosing the placement\n * that has the most space available automatically, without needing to specify a\n * preferred placement. Alternative to `flip`.\n * @see https://floating-ui.com/docs/autoPlacement\n */\nconst autoPlacement = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'autoPlacement',\n    options,\n    async fn(state) {\n      var _middlewareData$autoP, _middlewareData$autoP2, _placementsThatFitOnE;\n      const {\n        rects,\n        middlewareData,\n        placement,\n        platform,\n        elements\n      } = state;\n      const {\n        crossAxis = false,\n        alignment,\n        allowedPlacements = placements,\n        autoAlignment = true,\n        ...detectOverflowOptions\n      } = evaluate(options, state);\n      const placements$1 = alignment !== undefined || allowedPlacements === placements ? getPlacementList(alignment || null, autoAlignment, allowedPlacements) : allowedPlacements;\n      const overflow = await detectOverflow(state, detectOverflowOptions);\n      const currentIndex = ((_middlewareData$autoP = middlewareData.autoPlacement) == null ? void 0 : _middlewareData$autoP.index) || 0;\n      const currentPlacement = placements$1[currentIndex];\n      if (currentPlacement == null) {\n        return {};\n      }\n      const alignmentSides = getAlignmentSides(currentPlacement, rects, await (platform.isRTL == null ? void 0 : platform.isRTL(elements.floating)));\n\n      // Make `computeCoords` start from the right place.\n      if (placement !== currentPlacement) {\n        return {\n          reset: {\n            placement: placements$1[0]\n          }\n        };\n      }\n      const currentOverflows = [overflow[getSide(currentPlacement)], overflow[alignmentSides[0]], overflow[alignmentSides[1]]];\n      const allOverflows = [...(((_middlewareData$autoP2 = middlewareData.autoPlacement) == null ? void 0 : _middlewareData$autoP2.overflows) || []), {\n        placement: currentPlacement,\n        overflows: currentOverflows\n      }];\n      const nextPlacement = placements$1[currentIndex + 1];\n\n      // There are more placements to check.\n      if (nextPlacement) {\n        return {\n          data: {\n            index: currentIndex + 1,\n            overflows: allOverflows\n          },\n          reset: {\n            placement: nextPlacement\n          }\n        };\n      }\n      const placementsSortedByMostSpace = allOverflows.map(d => {\n        const alignment = getAlignment(d.placement);\n        return [d.placement, alignment && crossAxis ?\n        // Check along the mainAxis and main crossAxis side.\n        d.overflows.slice(0, 2).reduce((acc, v) => acc + v, 0) :\n        // Check only the mainAxis.\n        d.overflows[0], d.overflows];\n      }).sort((a, b) => a[1] - b[1]);\n      const placementsThatFitOnEachSide = placementsSortedByMostSpace.filter(d => d[2].slice(0,\n      // Aligned placements should not check their opposite crossAxis\n      // side.\n      getAlignment(d[0]) ? 2 : 3).every(v => v <= 0));\n      const resetPlacement = ((_placementsThatFitOnE = placementsThatFitOnEachSide[0]) == null ? void 0 : _placementsThatFitOnE[0]) || placementsSortedByMostSpace[0][0];\n      if (resetPlacement !== placement) {\n        return {\n          data: {\n            index: currentIndex + 1,\n            overflows: allOverflows\n          },\n          reset: {\n            placement: resetPlacement\n          }\n        };\n      }\n      return {};\n    }\n  };\n};\n\n/**\n * Optimizes the visibility of the floating element by flipping the `placement`\n * in order to keep it in view when the preferred placement(s) will overflow the\n * clipping boundary. Alternative to `autoPlacement`.\n * @see https://floating-ui.com/docs/flip\n */\nconst flip = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'flip',\n    options,\n    async fn(state) {\n      var _middlewareData$arrow, _middlewareData$flip;\n      const {\n        placement,\n        middlewareData,\n        rects,\n        initialPlacement,\n        platform,\n        elements\n      } = state;\n      const {\n        mainAxis: checkMainAxis = true,\n        crossAxis: checkCrossAxis = true,\n        fallbackPlacements: specifiedFallbackPlacements,\n        fallbackStrategy = 'bestFit',\n        fallbackAxisSideDirection = 'none',\n        flipAlignment = true,\n        ...detectOverflowOptions\n      } = evaluate(options, state);\n\n      // If a reset by the arrow was caused due to an alignment offset being\n      // added, we should skip any logic now since `flip()` has already done its\n      // work.\n      // https://github.com/floating-ui/floating-ui/issues/2549#issuecomment-1719601643\n      if ((_middlewareData$arrow = middlewareData.arrow) != null && _middlewareData$arrow.alignmentOffset) {\n        return {};\n      }\n      const side = getSide(placement);\n      const initialSideAxis = getSideAxis(initialPlacement);\n      const isBasePlacement = getSide(initialPlacement) === initialPlacement;\n      const rtl = await (platform.isRTL == null ? void 0 : platform.isRTL(elements.floating));\n      const fallbackPlacements = specifiedFallbackPlacements || (isBasePlacement || !flipAlignment ? [getOppositePlacement(initialPlacement)] : getExpandedPlacements(initialPlacement));\n      const hasFallbackAxisSideDirection = fallbackAxisSideDirection !== 'none';\n      if (!specifiedFallbackPlacements && hasFallbackAxisSideDirection) {\n        fallbackPlacements.push(...getOppositeAxisPlacements(initialPlacement, flipAlignment, fallbackAxisSideDirection, rtl));\n      }\n      const placements = [initialPlacement, ...fallbackPlacements];\n      const overflow = await detectOverflow(state, detectOverflowOptions);\n      const overflows = [];\n      let overflowsData = ((_middlewareData$flip = middlewareData.flip) == null ? void 0 : _middlewareData$flip.overflows) || [];\n      if (checkMainAxis) {\n        overflows.push(overflow[side]);\n      }\n      if (checkCrossAxis) {\n        const sides = getAlignmentSides(placement, rects, rtl);\n        overflows.push(overflow[sides[0]], overflow[sides[1]]);\n      }\n      overflowsData = [...overflowsData, {\n        placement,\n        overflows\n      }];\n\n      // One or more sides is overflowing.\n      if (!overflows.every(side => side <= 0)) {\n        var _middlewareData$flip2, _overflowsData$filter;\n        const nextIndex = (((_middlewareData$flip2 = middlewareData.flip) == null ? void 0 : _middlewareData$flip2.index) || 0) + 1;\n        const nextPlacement = placements[nextIndex];\n        if (nextPlacement) {\n          const ignoreCrossAxisOverflow = checkCrossAxis === 'alignment' ? initialSideAxis !== getSideAxis(nextPlacement) : false;\n          if (!ignoreCrossAxisOverflow ||\n          // We leave the current main axis only if every placement on that axis\n          // overflows the main axis.\n          overflowsData.every(d => getSideAxis(d.placement) === initialSideAxis ? d.overflows[0] > 0 : true)) {\n            // Try next placement and re-run the lifecycle.\n            return {\n              data: {\n                index: nextIndex,\n                overflows: overflowsData\n              },\n              reset: {\n                placement: nextPlacement\n              }\n            };\n          }\n        }\n\n        // First, find the candidates that fit on the mainAxis side of overflow,\n        // then find the placement that fits the best on the main crossAxis side.\n        let resetPlacement = (_overflowsData$filter = overflowsData.filter(d => d.overflows[0] <= 0).sort((a, b) => a.overflows[1] - b.overflows[1])[0]) == null ? void 0 : _overflowsData$filter.placement;\n\n        // Otherwise fallback.\n        if (!resetPlacement) {\n          switch (fallbackStrategy) {\n            case 'bestFit':\n              {\n                var _overflowsData$filter2;\n                const placement = (_overflowsData$filter2 = overflowsData.filter(d => {\n                  if (hasFallbackAxisSideDirection) {\n                    const currentSideAxis = getSideAxis(d.placement);\n                    return currentSideAxis === initialSideAxis ||\n                    // Create a bias to the `y` side axis due to horizontal\n                    // reading directions favoring greater width.\n                    currentSideAxis === 'y';\n                  }\n                  return true;\n                }).map(d => [d.placement, d.overflows.filter(overflow => overflow > 0).reduce((acc, overflow) => acc + overflow, 0)]).sort((a, b) => a[1] - b[1])[0]) == null ? void 0 : _overflowsData$filter2[0];\n                if (placement) {\n                  resetPlacement = placement;\n                }\n                break;\n              }\n            case 'initialPlacement':\n              resetPlacement = initialPlacement;\n              break;\n          }\n        }\n        if (placement !== resetPlacement) {\n          return {\n            reset: {\n              placement: resetPlacement\n            }\n          };\n        }\n      }\n      return {};\n    }\n  };\n};\nfunction getSideOffsets(overflow, rect) {\n  return {\n    top: overflow.top - rect.height,\n    right: overflow.right - rect.width,\n    bottom: overflow.bottom - rect.height,\n    left: overflow.left - rect.width\n  };\n}\nfunction isAnySideFullyClipped(overflow) {\n  return sides.some(side => overflow[side] >= 0);\n}\n/**\n * Provides data to hide the floating element in applicable situations, such as\n * when it is not in the same clipping context as the reference element.\n * @see https://floating-ui.com/docs/hide\n */\nconst hide = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'hide',\n    options,\n    async fn(state) {\n      const {\n        rects\n      } = state;\n      const {\n        strategy = 'referenceHidden',\n        ...detectOverflowOptions\n      } = evaluate(options, state);\n      switch (strategy) {\n        case 'referenceHidden':\n          {\n            const overflow = await detectOverflow(state, {\n              ...detectOverflowOptions,\n              elementContext: 'reference'\n            });\n            const offsets = getSideOffsets(overflow, rects.reference);\n            return {\n              data: {\n                referenceHiddenOffsets: offsets,\n                referenceHidden: isAnySideFullyClipped(offsets)\n              }\n            };\n          }\n        case 'escaped':\n          {\n            const overflow = await detectOverflow(state, {\n              ...detectOverflowOptions,\n              altBoundary: true\n            });\n            const offsets = getSideOffsets(overflow, rects.floating);\n            return {\n              data: {\n                escapedOffsets: offsets,\n                escaped: isAnySideFullyClipped(offsets)\n              }\n            };\n          }\n        default:\n          {\n            return {};\n          }\n      }\n    }\n  };\n};\nfunction getBoundingRect(rects) {\n  const minX = min(...rects.map(rect => rect.left));\n  const minY = min(...rects.map(rect => rect.top));\n  const maxX = max(...rects.map(rect => rect.right));\n  const maxY = max(...rects.map(rect => rect.bottom));\n  return {\n    x: minX,\n    y: minY,\n    width: maxX - minX,\n    height: maxY - minY\n  };\n}\nfunction getRectsByLine(rects) {\n  const sortedRects = rects.slice().sort((a, b) => a.y - b.y);\n  const groups = [];\n  let prevRect = null;\n  for (let i = 0; i < sortedRects.length; i++) {\n    const rect = sortedRects[i];\n    if (!prevRect || rect.y - prevRect.y > prevRect.height / 2) {\n      groups.push([rect]);\n    } else {\n      groups[groups.length - 1].push(rect);\n    }\n    prevRect = rect;\n  }\n  return groups.map(rect => rectToClientRect(getBoundingRect(rect)));\n}\n/**\n * Provides improved positioning for inline reference elements that can span\n * over multiple lines, such as hyperlinks or range selections.\n * @see https://floating-ui.com/docs/inline\n */\nconst inline = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'inline',\n    options,\n    async fn(state) {\n      const {\n        placement,\n        elements,\n        rects,\n        platform,\n        strategy\n      } = state;\n      // A MouseEvent's client{X,Y} coords can be up to 2 pixels off a\n      // ClientRect's bounds, despite the event listener being triggered. A\n      // padding of 2 seems to handle this issue.\n      const {\n        padding = 2,\n        x,\n        y\n      } = evaluate(options, state);\n      const nativeClientRects = Array.from((await (platform.getClientRects == null ? void 0 : platform.getClientRects(elements.reference))) || []);\n      const clientRects = getRectsByLine(nativeClientRects);\n      const fallback = rectToClientRect(getBoundingRect(nativeClientRects));\n      const paddingObject = getPaddingObject(padding);\n      function getBoundingClientRect() {\n        // There are two rects and they are disjoined.\n        if (clientRects.length === 2 && clientRects[0].left > clientRects[1].right && x != null && y != null) {\n          // Find the first rect in which the point is fully inside.\n          return clientRects.find(rect => x > rect.left - paddingObject.left && x < rect.right + paddingObject.right && y > rect.top - paddingObject.top && y < rect.bottom + paddingObject.bottom) || fallback;\n        }\n\n        // There are 2 or more connected rects.\n        if (clientRects.length >= 2) {\n          if (getSideAxis(placement) === 'y') {\n            const firstRect = clientRects[0];\n            const lastRect = clientRects[clientRects.length - 1];\n            const isTop = getSide(placement) === 'top';\n            const top = firstRect.top;\n            const bottom = lastRect.bottom;\n            const left = isTop ? firstRect.left : lastRect.left;\n            const right = isTop ? firstRect.right : lastRect.right;\n            const width = right - left;\n            const height = bottom - top;\n            return {\n              top,\n              bottom,\n              left,\n              right,\n              width,\n              height,\n              x: left,\n              y: top\n            };\n          }\n          const isLeftSide = getSide(placement) === 'left';\n          const maxRight = max(...clientRects.map(rect => rect.right));\n          const minLeft = min(...clientRects.map(rect => rect.left));\n          const measureRects = clientRects.filter(rect => isLeftSide ? rect.left === minLeft : rect.right === maxRight);\n          const top = measureRects[0].top;\n          const bottom = measureRects[measureRects.length - 1].bottom;\n          const left = minLeft;\n          const right = maxRight;\n          const width = right - left;\n          const height = bottom - top;\n          return {\n            top,\n            bottom,\n            left,\n            right,\n            width,\n            height,\n            x: left,\n            y: top\n          };\n        }\n        return fallback;\n      }\n      const resetRects = await platform.getElementRects({\n        reference: {\n          getBoundingClientRect\n        },\n        floating: elements.floating,\n        strategy\n      });\n      if (rects.reference.x !== resetRects.reference.x || rects.reference.y !== resetRects.reference.y || rects.reference.width !== resetRects.reference.width || rects.reference.height !== resetRects.reference.height) {\n        return {\n          reset: {\n            rects: resetRects\n          }\n        };\n      }\n      return {};\n    }\n  };\n};\nconst originSides = /*#__PURE__*/new Set(['left', 'top']);\n\n// For type backwards-compatibility, the `OffsetOptions` type was also\n// Derivable.\n\nasync function convertValueToCoords(state, options) {\n  const {\n    placement,\n    platform,\n    elements\n  } = state;\n  const rtl = await (platform.isRTL == null ? void 0 : platform.isRTL(elements.floating));\n  const side = getSide(placement);\n  const alignment = getAlignment(placement);\n  const isVertical = getSideAxis(placement) === 'y';\n  const mainAxisMulti = originSides.has(side) ? -1 : 1;\n  const crossAxisMulti = rtl && isVertical ? -1 : 1;\n  const rawValue = evaluate(options, state);\n\n  // eslint-disable-next-line prefer-const\n  let {\n    mainAxis,\n    crossAxis,\n    alignmentAxis\n  } = typeof rawValue === 'number' ? {\n    mainAxis: rawValue,\n    crossAxis: 0,\n    alignmentAxis: null\n  } : {\n    mainAxis: rawValue.mainAxis || 0,\n    crossAxis: rawValue.crossAxis || 0,\n    alignmentAxis: rawValue.alignmentAxis\n  };\n  if (alignment && typeof alignmentAxis === 'number') {\n    crossAxis = alignment === 'end' ? alignmentAxis * -1 : alignmentAxis;\n  }\n  return isVertical ? {\n    x: crossAxis * crossAxisMulti,\n    y: mainAxis * mainAxisMulti\n  } : {\n    x: mainAxis * mainAxisMulti,\n    y: crossAxis * crossAxisMulti\n  };\n}\n\n/**\n * Modifies the placement by translating the floating element along the\n * specified axes.\n * A number (shorthand for `mainAxis` or distance), or an axes configuration\n * object may be passed.\n * @see https://floating-ui.com/docs/offset\n */\nconst offset = function (options) {\n  if (options === void 0) {\n    options = 0;\n  }\n  return {\n    name: 'offset',\n    options,\n    async fn(state) {\n      var _middlewareData$offse, _middlewareData$arrow;\n      const {\n        x,\n        y,\n        placement,\n        middlewareData\n      } = state;\n      const diffCoords = await convertValueToCoords(state, options);\n\n      // If the placement is the same and the arrow caused an alignment offset\n      // then we don't need to change the positioning coordinates.\n      if (placement === ((_middlewareData$offse = middlewareData.offset) == null ? void 0 : _middlewareData$offse.placement) && (_middlewareData$arrow = middlewareData.arrow) != null && _middlewareData$arrow.alignmentOffset) {\n        return {};\n      }\n      return {\n        x: x + diffCoords.x,\n        y: y + diffCoords.y,\n        data: {\n          ...diffCoords,\n          placement\n        }\n      };\n    }\n  };\n};\n\n/**\n * Optimizes the visibility of the floating element by shifting it in order to\n * keep it in view when it will overflow the clipping boundary.\n * @see https://floating-ui.com/docs/shift\n */\nconst shift = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'shift',\n    options,\n    async fn(state) {\n      const {\n        x,\n        y,\n        placement\n      } = state;\n      const {\n        mainAxis: checkMainAxis = true,\n        crossAxis: checkCrossAxis = false,\n        limiter = {\n          fn: _ref => {\n            let {\n              x,\n              y\n            } = _ref;\n            return {\n              x,\n              y\n            };\n          }\n        },\n        ...detectOverflowOptions\n      } = evaluate(options, state);\n      const coords = {\n        x,\n        y\n      };\n      const overflow = await detectOverflow(state, detectOverflowOptions);\n      const crossAxis = getSideAxis(getSide(placement));\n      const mainAxis = getOppositeAxis(crossAxis);\n      let mainAxisCoord = coords[mainAxis];\n      let crossAxisCoord = coords[crossAxis];\n      if (checkMainAxis) {\n        const minSide = mainAxis === 'y' ? 'top' : 'left';\n        const maxSide = mainAxis === 'y' ? 'bottom' : 'right';\n        const min = mainAxisCoord + overflow[minSide];\n        const max = mainAxisCoord - overflow[maxSide];\n        mainAxisCoord = clamp(min, mainAxisCoord, max);\n      }\n      if (checkCrossAxis) {\n        const minSide = crossAxis === 'y' ? 'top' : 'left';\n        const maxSide = crossAxis === 'y' ? 'bottom' : 'right';\n        const min = crossAxisCoord + overflow[minSide];\n        const max = crossAxisCoord - overflow[maxSide];\n        crossAxisCoord = clamp(min, crossAxisCoord, max);\n      }\n      const limitedCoords = limiter.fn({\n        ...state,\n        [mainAxis]: mainAxisCoord,\n        [crossAxis]: crossAxisCoord\n      });\n      return {\n        ...limitedCoords,\n        data: {\n          x: limitedCoords.x - x,\n          y: limitedCoords.y - y,\n          enabled: {\n            [mainAxis]: checkMainAxis,\n            [crossAxis]: checkCrossAxis\n          }\n        }\n      };\n    }\n  };\n};\n/**\n * Built-in `limiter` that will stop `shift()` at a certain point.\n */\nconst limitShift = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    options,\n    fn(state) {\n      const {\n        x,\n        y,\n        placement,\n        rects,\n        middlewareData\n      } = state;\n      const {\n        offset = 0,\n        mainAxis: checkMainAxis = true,\n        crossAxis: checkCrossAxis = true\n      } = evaluate(options, state);\n      const coords = {\n        x,\n        y\n      };\n      const crossAxis = getSideAxis(placement);\n      const mainAxis = getOppositeAxis(crossAxis);\n      let mainAxisCoord = coords[mainAxis];\n      let crossAxisCoord = coords[crossAxis];\n      const rawOffset = evaluate(offset, state);\n      const computedOffset = typeof rawOffset === 'number' ? {\n        mainAxis: rawOffset,\n        crossAxis: 0\n      } : {\n        mainAxis: 0,\n        crossAxis: 0,\n        ...rawOffset\n      };\n      if (checkMainAxis) {\n        const len = mainAxis === 'y' ? 'height' : 'width';\n        const limitMin = rects.reference[mainAxis] - rects.floating[len] + computedOffset.mainAxis;\n        const limitMax = rects.reference[mainAxis] + rects.reference[len] - computedOffset.mainAxis;\n        if (mainAxisCoord < limitMin) {\n          mainAxisCoord = limitMin;\n        } else if (mainAxisCoord > limitMax) {\n          mainAxisCoord = limitMax;\n        }\n      }\n      if (checkCrossAxis) {\n        var _middlewareData$offse, _middlewareData$offse2;\n        const len = mainAxis === 'y' ? 'width' : 'height';\n        const isOriginSide = originSides.has(getSide(placement));\n        const limitMin = rects.reference[crossAxis] - rects.floating[len] + (isOriginSide ? ((_middlewareData$offse = middlewareData.offset) == null ? void 0 : _middlewareData$offse[crossAxis]) || 0 : 0) + (isOriginSide ? 0 : computedOffset.crossAxis);\n        const limitMax = rects.reference[crossAxis] + rects.reference[len] + (isOriginSide ? 0 : ((_middlewareData$offse2 = middlewareData.offset) == null ? void 0 : _middlewareData$offse2[crossAxis]) || 0) - (isOriginSide ? computedOffset.crossAxis : 0);\n        if (crossAxisCoord < limitMin) {\n          crossAxisCoord = limitMin;\n        } else if (crossAxisCoord > limitMax) {\n          crossAxisCoord = limitMax;\n        }\n      }\n      return {\n        [mainAxis]: mainAxisCoord,\n        [crossAxis]: crossAxisCoord\n      };\n    }\n  };\n};\n\n/**\n * Provides data that allows you to change the size of the floating element —\n * for instance, prevent it from overflowing the clipping boundary or match the\n * width of the reference element.\n * @see https://floating-ui.com/docs/size\n */\nconst size = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'size',\n    options,\n    async fn(state) {\n      var _state$middlewareData, _state$middlewareData2;\n      const {\n        placement,\n        rects,\n        platform,\n        elements\n      } = state;\n      const {\n        apply = () => {},\n        ...detectOverflowOptions\n      } = evaluate(options, state);\n      const overflow = await detectOverflow(state, detectOverflowOptions);\n      const side = getSide(placement);\n      const alignment = getAlignment(placement);\n      const isYAxis = getSideAxis(placement) === 'y';\n      const {\n        width,\n        height\n      } = rects.floating;\n      let heightSide;\n      let widthSide;\n      if (side === 'top' || side === 'bottom') {\n        heightSide = side;\n        widthSide = alignment === ((await (platform.isRTL == null ? void 0 : platform.isRTL(elements.floating))) ? 'start' : 'end') ? 'left' : 'right';\n      } else {\n        widthSide = side;\n        heightSide = alignment === 'end' ? 'top' : 'bottom';\n      }\n      const maximumClippingHeight = height - overflow.top - overflow.bottom;\n      const maximumClippingWidth = width - overflow.left - overflow.right;\n      const overflowAvailableHeight = min(height - overflow[heightSide], maximumClippingHeight);\n      const overflowAvailableWidth = min(width - overflow[widthSide], maximumClippingWidth);\n      const noShift = !state.middlewareData.shift;\n      let availableHeight = overflowAvailableHeight;\n      let availableWidth = overflowAvailableWidth;\n      if ((_state$middlewareData = state.middlewareData.shift) != null && _state$middlewareData.enabled.x) {\n        availableWidth = maximumClippingWidth;\n      }\n      if ((_state$middlewareData2 = state.middlewareData.shift) != null && _state$middlewareData2.enabled.y) {\n        availableHeight = maximumClippingHeight;\n      }\n      if (noShift && !alignment) {\n        const xMin = max(overflow.left, 0);\n        const xMax = max(overflow.right, 0);\n        const yMin = max(overflow.top, 0);\n        const yMax = max(overflow.bottom, 0);\n        if (isYAxis) {\n          availableWidth = width - 2 * (xMin !== 0 || xMax !== 0 ? xMin + xMax : max(overflow.left, overflow.right));\n        } else {\n          availableHeight = height - 2 * (yMin !== 0 || yMax !== 0 ? yMin + yMax : max(overflow.top, overflow.bottom));\n        }\n      }\n      await apply({\n        ...state,\n        availableWidth,\n        availableHeight\n      });\n      const nextDimensions = await platform.getDimensions(elements.floating);\n      if (width !== nextDimensions.width || height !== nextDimensions.height) {\n        return {\n          reset: {\n            rects: true\n          }\n        };\n      }\n      return {};\n    }\n  };\n};\nexport { arrow, autoPlacement, computePosition, detectOverflow, flip, hide, inline, limitShift, offset, shift, size };","import { rectToClientRect, arrow as arrow$1, autoPlacement as autoPlacement$1, detectOverflow as detectOverflow$1, flip as flip$1, hide as hide$1, inline as inline$1, limitShift as limitShift$1, offset as offset$1, shift as shift$1, size as size$1, computePosition as computePosition$1 } from '@floating-ui/core';\nimport { round, createCoords, max, min, floor } from '@floating-ui/utils';\nimport { getComputedStyle as getComputedStyle$1, isHTMLElement, isElement, getWindow, isWebKit, getFrameElement, getNodeScroll, getDocumentElement, isTopLayer, getNodeName, isOverflowElement, getOverflowAncestors, getParentNode, isLastTraversableNode, isContainingBlock, isTableElement, getContainingBlock } from '@floating-ui/utils/dom';\nexport { getOverflowAncestors } from '@floating-ui/utils/dom';\nfunction getCssDimensions(element) {\n  const css = getComputedStyle$1(element);\n  // In testing environments, the `width` and `height` properties are empty\n  // strings for SVG elements, returning NaN. Fallback to `0` in this case.\n  let width = parseFloat(css.width) || 0;\n  let height = parseFloat(css.height) || 0;\n  const hasOffset = isHTMLElement(element);\n  const offsetWidth = hasOffset ? element.offsetWidth : width;\n  const offsetHeight = hasOffset ? element.offsetHeight : height;\n  const shouldFallback = round(width) !== offsetWidth || round(height) !== offsetHeight;\n  if (shouldFallback) {\n    width = offsetWidth;\n    height = offsetHeight;\n  }\n  return {\n    width,\n    height,\n    $: shouldFallback\n  };\n}\nfunction unwrapElement(element) {\n  return !isElement(element) ? element.contextElement : element;\n}\nfunction getScale(element) {\n  const domElement = unwrapElement(element);\n  if (!isHTMLElement(domElement)) {\n    return createCoords(1);\n  }\n  const rect = domElement.getBoundingClientRect();\n  const {\n    width,\n    height,\n    $\n  } = getCssDimensions(domElement);\n  let x = ($ ? round(rect.width) : rect.width) / width;\n  let y = ($ ? round(rect.height) : rect.height) / height;\n\n  // 0, NaN, or Infinity should always fallback to 1.\n\n  if (!x || !Number.isFinite(x)) {\n    x = 1;\n  }\n  if (!y || !Number.isFinite(y)) {\n    y = 1;\n  }\n  return {\n    x,\n    y\n  };\n}\nconst noOffsets = /*#__PURE__*/createCoords(0);\nfunction getVisualOffsets(element) {\n  const win = getWindow(element);\n  if (!isWebKit() || !win.visualViewport) {\n    return noOffsets;\n  }\n  return {\n    x: win.visualViewport.offsetLeft,\n    y: win.visualViewport.offsetTop\n  };\n}\nfunction shouldAddVisualOffsets(element, isFixed, floatingOffsetParent) {\n  if (isFixed === void 0) {\n    isFixed = false;\n  }\n  if (!floatingOffsetParent || isFixed && floatingOffsetParent !== getWindow(element)) {\n    return false;\n  }\n  return isFixed;\n}\nfunction getBoundingClientRect(element, includeScale, isFixedStrategy, offsetParent) {\n  if (includeScale === void 0) {\n    includeScale = false;\n  }\n  if (isFixedStrategy === void 0) {\n    isFixedStrategy = false;\n  }\n  const clientRect = element.getBoundingClientRect();\n  const domElement = unwrapElement(element);\n  let scale = createCoords(1);\n  if (includeScale) {\n    if (offsetParent) {\n      if (isElement(offsetParent)) {\n        scale = getScale(offsetParent);\n      }\n    } else {\n      scale = getScale(element);\n    }\n  }\n  const visualOffsets = shouldAddVisualOffsets(domElement, isFixedStrategy, offsetParent) ? getVisualOffsets(domElement) : createCoords(0);\n  let x = (clientRect.left + visualOffsets.x) / scale.x;\n  let y = (clientRect.top + visualOffsets.y) / scale.y;\n  let width = clientRect.width / scale.x;\n  let height = clientRect.height / scale.y;\n  if (domElement) {\n    const win = getWindow(domElement);\n    const offsetWin = offsetParent && isElement(offsetParent) ? getWindow(offsetParent) : offsetParent;\n    let currentWin = win;\n    let currentIFrame = getFrameElement(currentWin);\n    while (currentIFrame && offsetParent && offsetWin !== currentWin) {\n      const iframeScale = getScale(currentIFrame);\n      const iframeRect = currentIFrame.getBoundingClientRect();\n      const css = getComputedStyle$1(currentIFrame);\n      const left = iframeRect.left + (currentIFrame.clientLeft + parseFloat(css.paddingLeft)) * iframeScale.x;\n      const top = iframeRect.top + (currentIFrame.clientTop + parseFloat(css.paddingTop)) * iframeScale.y;\n      x *= iframeScale.x;\n      y *= iframeScale.y;\n      width *= iframeScale.x;\n      height *= iframeScale.y;\n      x += left;\n      y += top;\n      currentWin = getWindow(currentIFrame);\n      currentIFrame = getFrameElement(currentWin);\n    }\n  }\n  return rectToClientRect({\n    width,\n    height,\n    x,\n    y\n  });\n}\n\n// If <html> has a CSS width greater than the viewport, then this will be\n// incorrect for RTL.\nfunction getWindowScrollBarX(element, rect) {\n  const leftScroll = getNodeScroll(element).scrollLeft;\n  if (!rect) {\n    return getBoundingClientRect(getDocumentElement(element)).left + leftScroll;\n  }\n  return rect.left + leftScroll;\n}\nfunction getHTMLOffset(documentElement, scroll) {\n  const htmlRect = documentElement.getBoundingClientRect();\n  const x = htmlRect.left + scroll.scrollLeft - getWindowScrollBarX(documentElement, htmlRect);\n  const y = htmlRect.top + scroll.scrollTop;\n  return {\n    x,\n    y\n  };\n}\nfunction convertOffsetParentRelativeRectToViewportRelativeRect(_ref) {\n  let {\n    elements,\n    rect,\n    offsetParent,\n    strategy\n  } = _ref;\n  const isFixed = strategy === 'fixed';\n  const documentElement = getDocumentElement(offsetParent);\n  const topLayer = elements ? isTopLayer(elements.floating) : false;\n  if (offsetParent === documentElement || topLayer && isFixed) {\n    return rect;\n  }\n  let scroll = {\n    scrollLeft: 0,\n    scrollTop: 0\n  };\n  let scale = createCoords(1);\n  const offsets = createCoords(0);\n  const isOffsetParentAnElement = isHTMLElement(offsetParent);\n  if (isOffsetParentAnElement || !isOffsetParentAnElement && !isFixed) {\n    if (getNodeName(offsetParent) !== 'body' || isOverflowElement(documentElement)) {\n      scroll = getNodeScroll(offsetParent);\n    }\n    if (isHTMLElement(offsetParent)) {\n      const offsetRect = getBoundingClientRect(offsetParent);\n      scale = getScale(offsetParent);\n      offsets.x = offsetRect.x + offsetParent.clientLeft;\n      offsets.y = offsetRect.y + offsetParent.clientTop;\n    }\n  }\n  const htmlOffset = documentElement && !isOffsetParentAnElement && !isFixed ? getHTMLOffset(documentElement, scroll) : createCoords(0);\n  return {\n    width: rect.width * scale.x,\n    height: rect.height * scale.y,\n    x: rect.x * scale.x - scroll.scrollLeft * scale.x + offsets.x + htmlOffset.x,\n    y: rect.y * scale.y - scroll.scrollTop * scale.y + offsets.y + htmlOffset.y\n  };\n}\nfunction getClientRects(element) {\n  return Array.from(element.getClientRects());\n}\n\n// Gets the entire size of the scrollable document area, even extending outside\n// of the `<html>` and `<body>` rect bounds if horizontally scrollable.\nfunction getDocumentRect(element) {\n  const html = getDocumentElement(element);\n  const scroll = getNodeScroll(element);\n  const body = element.ownerDocument.body;\n  const width = max(html.scrollWidth, html.clientWidth, body.scrollWidth, body.clientWidth);\n  const height = max(html.scrollHeight, html.clientHeight, body.scrollHeight, body.clientHeight);\n  let x = -scroll.scrollLeft + getWindowScrollBarX(element);\n  const y = -scroll.scrollTop;\n  if (getComputedStyle$1(body).direction === 'rtl') {\n    x += max(html.clientWidth, body.clientWidth) - width;\n  }\n  return {\n    width,\n    height,\n    x,\n    y\n  };\n}\n\n// Safety check: ensure the scrollbar space is reasonable in case this\n// calculation is affected by unusual styles.\n// Most scrollbars leave 15-18px of space.\nconst SCROLLBAR_MAX = 25;\nfunction getViewportRect(element, strategy) {\n  const win = getWindow(element);\n  const html = getDocumentElement(element);\n  const visualViewport = win.visualViewport;\n  let width = html.clientWidth;\n  let height = html.clientHeight;\n  let x = 0;\n  let y = 0;\n  if (visualViewport) {\n    width = visualViewport.width;\n    height = visualViewport.height;\n    const visualViewportBased = isWebKit();\n    if (!visualViewportBased || visualViewportBased && strategy === 'fixed') {\n      x = visualViewport.offsetLeft;\n      y = visualViewport.offsetTop;\n    }\n  }\n  const windowScrollbarX = getWindowScrollBarX(html);\n  // <html> `overflow: hidden` + `scrollbar-gutter: stable` reduces the\n  // visual width of the <html> but this is not considered in the size\n  // of `html.clientWidth`.\n  if (windowScrollbarX <= 0) {\n    const doc = html.ownerDocument;\n    const body = doc.body;\n    const bodyStyles = getComputedStyle(body);\n    const bodyMarginInline = doc.compatMode === 'CSS1Compat' ? parseFloat(bodyStyles.marginLeft) + parseFloat(bodyStyles.marginRight) || 0 : 0;\n    const clippingStableScrollbarWidth = Math.abs(html.clientWidth - body.clientWidth - bodyMarginInline);\n    if (clippingStableScrollbarWidth <= SCROLLBAR_MAX) {\n      width -= clippingStableScrollbarWidth;\n    }\n  } else if (windowScrollbarX <= SCROLLBAR_MAX) {\n    // If the <body> scrollbar is on the left, the width needs to be extended\n    // by the scrollbar amount so there isn't extra space on the right.\n    width += windowScrollbarX;\n  }\n  return {\n    width,\n    height,\n    x,\n    y\n  };\n}\nconst absoluteOrFixed = /*#__PURE__*/new Set(['absolute', 'fixed']);\n// Returns the inner client rect, subtracting scrollbars if present.\nfunction getInnerBoundingClientRect(element, strategy) {\n  const clientRect = getBoundingClientRect(element, true, strategy === 'fixed');\n  const top = clientRect.top + element.clientTop;\n  const left = clientRect.left + element.clientLeft;\n  const scale = isHTMLElement(element) ? getScale(element) : createCoords(1);\n  const width = element.clientWidth * scale.x;\n  const height = element.clientHeight * scale.y;\n  const x = left * scale.x;\n  const y = top * scale.y;\n  return {\n    width,\n    height,\n    x,\n    y\n  };\n}\nfunction getClientRectFromClippingAncestor(element, clippingAncestor, strategy) {\n  let rect;\n  if (clippingAncestor === 'viewport') {\n    rect = getViewportRect(element, strategy);\n  } else if (clippingAncestor === 'document') {\n    rect = getDocumentRect(getDocumentElement(element));\n  } else if (isElement(clippingAncestor)) {\n    rect = getInnerBoundingClientRect(clippingAncestor, strategy);\n  } else {\n    const visualOffsets = getVisualOffsets(element);\n    rect = {\n      x: clippingAncestor.x - visualOffsets.x,\n      y: clippingAncestor.y - visualOffsets.y,\n      width: clippingAncestor.width,\n      height: clippingAncestor.height\n    };\n  }\n  return rectToClientRect(rect);\n}\nfunction hasFixedPositionAncestor(element, stopNode) {\n  const parentNode = getParentNode(element);\n  if (parentNode === stopNode || !isElement(parentNode) || isLastTraversableNode(parentNode)) {\n    return false;\n  }\n  return getComputedStyle$1(parentNode).position === 'fixed' || hasFixedPositionAncestor(parentNode, stopNode);\n}\n\n// A \"clipping ancestor\" is an `overflow` element with the characteristic of\n// clipping (or hiding) child elements. This returns all clipping ancestors\n// of the given element up the tree.\nfunction getClippingElementAncestors(element, cache) {\n  const cachedResult = cache.get(element);\n  if (cachedResult) {\n    return cachedResult;\n  }\n  let result = getOverflowAncestors(element, [], false).filter(el => isElement(el) && getNodeName(el) !== 'body');\n  let currentContainingBlockComputedStyle = null;\n  const elementIsFixed = getComputedStyle$1(element).position === 'fixed';\n  let currentNode = elementIsFixed ? getParentNode(element) : element;\n\n  // https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_block#identifying_the_containing_block\n  while (isElement(currentNode) && !isLastTraversableNode(currentNode)) {\n    const computedStyle = getComputedStyle$1(currentNode);\n    const currentNodeIsContaining = isContainingBlock(currentNode);\n    if (!currentNodeIsContaining && computedStyle.position === 'fixed') {\n      currentContainingBlockComputedStyle = null;\n    }\n    const shouldDropCurrentNode = elementIsFixed ? !currentNodeIsContaining && !currentContainingBlockComputedStyle : !currentNodeIsContaining && computedStyle.position === 'static' && !!currentContainingBlockComputedStyle && absoluteOrFixed.has(currentContainingBlockComputedStyle.position) || isOverflowElement(currentNode) && !currentNodeIsContaining && hasFixedPositionAncestor(element, currentNode);\n    if (shouldDropCurrentNode) {\n      // Drop non-containing blocks.\n      result = result.filter(ancestor => ancestor !== currentNode);\n    } else {\n      // Record last containing block for next iteration.\n      currentContainingBlockComputedStyle = computedStyle;\n    }\n    currentNode = getParentNode(currentNode);\n  }\n  cache.set(element, result);\n  return result;\n}\n\n// Gets the maximum area that the element is visible in due to any number of\n// clipping ancestors.\nfunction getClippingRect(_ref) {\n  let {\n    element,\n    boundary,\n    rootBoundary,\n    strategy\n  } = _ref;\n  const elementClippingAncestors = boundary === 'clippingAncestors' ? isTopLayer(element) ? [] : getClippingElementAncestors(element, this._c) : [].concat(boundary);\n  const clippingAncestors = [...elementClippingAncestors, rootBoundary];\n  const firstClippingAncestor = clippingAncestors[0];\n  const clippingRect = clippingAncestors.reduce((accRect, clippingAncestor) => {\n    const rect = getClientRectFromClippingAncestor(element, clippingAncestor, strategy);\n    accRect.top = max(rect.top, accRect.top);\n    accRect.right = min(rect.right, accRect.right);\n    accRect.bottom = min(rect.bottom, accRect.bottom);\n    accRect.left = max(rect.left, accRect.left);\n    return accRect;\n  }, getClientRectFromClippingAncestor(element, firstClippingAncestor, strategy));\n  return {\n    width: clippingRect.right - clippingRect.left,\n    height: clippingRect.bottom - clippingRect.top,\n    x: clippingRect.left,\n    y: clippingRect.top\n  };\n}\nfunction getDimensions(element) {\n  const {\n    width,\n    height\n  } = getCssDimensions(element);\n  return {\n    width,\n    height\n  };\n}\nfunction getRectRelativeToOffsetParent(element, offsetParent, strategy) {\n  const isOffsetParentAnElement = isHTMLElement(offsetParent);\n  const documentElement = getDocumentElement(offsetParent);\n  const isFixed = strategy === 'fixed';\n  const rect = getBoundingClientRect(element, true, isFixed, offsetParent);\n  let scroll = {\n    scrollLeft: 0,\n    scrollTop: 0\n  };\n  const offsets = createCoords(0);\n\n  // If the <body> scrollbar appears on the left (e.g. RTL systems). Use\n  // Firefox with layout.scrollbar.side = 3 in about:config to test this.\n  function setLeftRTLScrollbarOffset() {\n    offsets.x = getWindowScrollBarX(documentElement);\n  }\n  if (isOffsetParentAnElement || !isOffsetParentAnElement && !isFixed) {\n    if (getNodeName(offsetParent) !== 'body' || isOverflowElement(documentElement)) {\n      scroll = getNodeScroll(offsetParent);\n    }\n    if (isOffsetParentAnElement) {\n      const offsetRect = getBoundingClientRect(offsetParent, true, isFixed, offsetParent);\n      offsets.x = offsetRect.x + offsetParent.clientLeft;\n      offsets.y = offsetRect.y + offsetParent.clientTop;\n    } else if (documentElement) {\n      setLeftRTLScrollbarOffset();\n    }\n  }\n  if (isFixed && !isOffsetParentAnElement && documentElement) {\n    setLeftRTLScrollbarOffset();\n  }\n  const htmlOffset = documentElement && !isOffsetParentAnElement && !isFixed ? getHTMLOffset(documentElement, scroll) : createCoords(0);\n  const x = rect.left + scroll.scrollLeft - offsets.x - htmlOffset.x;\n  const y = rect.top + scroll.scrollTop - offsets.y - htmlOffset.y;\n  return {\n    x,\n    y,\n    width: rect.width,\n    height: rect.height\n  };\n}\nfunction isStaticPositioned(element) {\n  return getComputedStyle$1(element).position === 'static';\n}\nfunction getTrueOffsetParent(element, polyfill) {\n  if (!isHTMLElement(element) || getComputedStyle$1(element).position === 'fixed') {\n    return null;\n  }\n  if (polyfill) {\n    return polyfill(element);\n  }\n  let rawOffsetParent = element.offsetParent;\n\n  // Firefox returns the <html> element as the offsetParent if it's non-static,\n  // while Chrome and Safari return the <body> element. The <body> element must\n  // be used to perform the correct calculations even if the <html> element is\n  // non-static.\n  if (getDocumentElement(element) === rawOffsetParent) {\n    rawOffsetParent = rawOffsetParent.ownerDocument.body;\n  }\n  return rawOffsetParent;\n}\n\n// Gets the closest ancestor positioned element. Handles some edge cases,\n// such as table ancestors and cross browser bugs.\nfunction getOffsetParent(element, polyfill) {\n  const win = getWindow(element);\n  if (isTopLayer(element)) {\n    return win;\n  }\n  if (!isHTMLElement(element)) {\n    let svgOffsetParent = getParentNode(element);\n    while (svgOffsetParent && !isLastTraversableNode(svgOffsetParent)) {\n      if (isElement(svgOffsetParent) && !isStaticPositioned(svgOffsetParent)) {\n        return svgOffsetParent;\n      }\n      svgOffsetParent = getParentNode(svgOffsetParent);\n    }\n    return win;\n  }\n  let offsetParent = getTrueOffsetParent(element, polyfill);\n  while (offsetParent && isTableElement(offsetParent) && isStaticPositioned(offsetParent)) {\n    offsetParent = getTrueOffsetParent(offsetParent, polyfill);\n  }\n  if (offsetParent && isLastTraversableNode(offsetParent) && isStaticPositioned(offsetParent) && !isContainingBlock(offsetParent)) {\n    return win;\n  }\n  return offsetParent || getContainingBlock(element) || win;\n}\nconst getElementRects = async function (data) {\n  const getOffsetParentFn = this.getOffsetParent || getOffsetParent;\n  const getDimensionsFn = this.getDimensions;\n  const floatingDimensions = await getDimensionsFn(data.floating);\n  return {\n    reference: getRectRelativeToOffsetParent(data.reference, await getOffsetParentFn(data.floating), data.strategy),\n    floating: {\n      x: 0,\n      y: 0,\n      width: floatingDimensions.width,\n      height: floatingDimensions.height\n    }\n  };\n};\nfunction isRTL(element) {\n  return getComputedStyle$1(element).direction === 'rtl';\n}\nconst platform = {\n  convertOffsetParentRelativeRectToViewportRelativeRect,\n  getDocumentElement,\n  getClippingRect,\n  getOffsetParent,\n  getElementRects,\n  getClientRects,\n  getDimensions,\n  getScale,\n  isElement,\n  isRTL\n};\nfunction rectsAreEqual(a, b) {\n  return a.x === b.x && a.y === b.y && a.width === b.width && a.height === b.height;\n}\n\n// https://samthor.au/2021/observing-dom/\nfunction observeMove(element, onMove) {\n  let io = null;\n  let timeoutId;\n  const root = getDocumentElement(element);\n  function cleanup() {\n    var _io;\n    clearTimeout(timeoutId);\n    (_io = io) == null || _io.disconnect();\n    io = null;\n  }\n  function refresh(skip, threshold) {\n    if (skip === void 0) {\n      skip = false;\n    }\n    if (threshold === void 0) {\n      threshold = 1;\n    }\n    cleanup();\n    const elementRectForRootMargin = element.getBoundingClientRect();\n    const {\n      left,\n      top,\n      width,\n      height\n    } = elementRectForRootMargin;\n    if (!skip) {\n      onMove();\n    }\n    if (!width || !height) {\n      return;\n    }\n    const insetTop = floor(top);\n    const insetRight = floor(root.clientWidth - (left + width));\n    const insetBottom = floor(root.clientHeight - (top + height));\n    const insetLeft = floor(left);\n    const rootMargin = -insetTop + \"px \" + -insetRight + \"px \" + -insetBottom + \"px \" + -insetLeft + \"px\";\n    const options = {\n      rootMargin,\n      threshold: max(0, min(1, threshold)) || 1\n    };\n    let isFirstUpdate = true;\n    function handleObserve(entries) {\n      const ratio = entries[0].intersectionRatio;\n      if (ratio !== threshold) {\n        if (!isFirstUpdate) {\n          return refresh();\n        }\n        if (!ratio) {\n          // If the reference is clipped, the ratio is 0. Throttle the refresh\n          // to prevent an infinite loop of updates.\n          timeoutId = setTimeout(() => {\n            refresh(false, 1e-7);\n          }, 1000);\n        } else {\n          refresh(false, ratio);\n        }\n      }\n      if (ratio === 1 && !rectsAreEqual(elementRectForRootMargin, element.getBoundingClientRect())) {\n        // It's possible that even though the ratio is reported as 1, the\n        // element is not actually fully within the IntersectionObserver's root\n        // area anymore. This can happen under performance constraints. This may\n        // be a bug in the browser's IntersectionObserver implementation. To\n        // work around this, we compare the element's bounding rect now with\n        // what it was at the time we created the IntersectionObserver. If they\n        // are not equal then the element moved, so we refresh.\n        refresh();\n      }\n      isFirstUpdate = false;\n    }\n\n    // Older browsers don't support a `document` as the root and will throw an\n    // error.\n    try {\n      io = new IntersectionObserver(handleObserve, {\n        ...options,\n        // Handle <iframe>s\n        root: root.ownerDocument\n      });\n    } catch (_e) {\n      io = new IntersectionObserver(handleObserve, options);\n    }\n    io.observe(element);\n  }\n  refresh(true);\n  return cleanup;\n}\n\n/**\n * Automatically updates the position of the floating element when necessary.\n * Should only be called when the floating element is mounted on the DOM or\n * visible on the screen.\n * @returns cleanup function that should be invoked when the floating element is\n * removed from the DOM or hidden from the screen.\n * @see https://floating-ui.com/docs/autoUpdate\n */\nfunction autoUpdate(reference, floating, update, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  const {\n    ancestorScroll = true,\n    ancestorResize = true,\n    elementResize = typeof ResizeObserver === 'function',\n    layoutShift = typeof IntersectionObserver === 'function',\n    animationFrame = false\n  } = options;\n  const referenceEl = unwrapElement(reference);\n  const ancestors = ancestorScroll || ancestorResize ? [...(referenceEl ? getOverflowAncestors(referenceEl) : []), ...getOverflowAncestors(floating)] : [];\n  ancestors.forEach(ancestor => {\n    ancestorScroll && ancestor.addEventListener('scroll', update, {\n      passive: true\n    });\n    ancestorResize && ancestor.addEventListener('resize', update);\n  });\n  const cleanupIo = referenceEl && layoutShift ? observeMove(referenceEl, update) : null;\n  let reobserveFrame = -1;\n  let resizeObserver = null;\n  if (elementResize) {\n    resizeObserver = new ResizeObserver(_ref => {\n      let [firstEntry] = _ref;\n      if (firstEntry && firstEntry.target === referenceEl && resizeObserver) {\n        // Prevent update loops when using the `size` middleware.\n        // https://github.com/floating-ui/floating-ui/issues/1740\n        resizeObserver.unobserve(floating);\n        cancelAnimationFrame(reobserveFrame);\n        reobserveFrame = requestAnimationFrame(() => {\n          var _resizeObserver;\n          (_resizeObserver = resizeObserver) == null || _resizeObserver.observe(floating);\n        });\n      }\n      update();\n    });\n    if (referenceEl && !animationFrame) {\n      resizeObserver.observe(referenceEl);\n    }\n    resizeObserver.observe(floating);\n  }\n  let frameId;\n  let prevRefRect = animationFrame ? getBoundingClientRect(reference) : null;\n  if (animationFrame) {\n    frameLoop();\n  }\n  function frameLoop() {\n    const nextRefRect = getBoundingClientRect(reference);\n    if (prevRefRect && !rectsAreEqual(prevRefRect, nextRefRect)) {\n      update();\n    }\n    prevRefRect = nextRefRect;\n    frameId = requestAnimationFrame(frameLoop);\n  }\n  update();\n  return () => {\n    var _resizeObserver2;\n    ancestors.forEach(ancestor => {\n      ancestorScroll && ancestor.removeEventListener('scroll', update);\n      ancestorResize && ancestor.removeEventListener('resize', update);\n    });\n    cleanupIo == null || cleanupIo();\n    (_resizeObserver2 = resizeObserver) == null || _resizeObserver2.disconnect();\n    resizeObserver = null;\n    if (animationFrame) {\n      cancelAnimationFrame(frameId);\n    }\n  };\n}\n\n/**\n * Resolves with an object of overflow side offsets that determine how much the\n * element is overflowing a given clipping boundary on each side.\n * - positive = overflowing the boundary by that number of pixels\n * - negative = how many pixels left before it will overflow\n * - 0 = lies flush with the boundary\n * @see https://floating-ui.com/docs/detectOverflow\n */\nconst detectOverflow = detectOverflow$1;\n\n/**\n * Modifies the placement by translating the floating element along the\n * specified axes.\n * A number (shorthand for `mainAxis` or distance), or an axes configuration\n * object may be passed.\n * @see https://floating-ui.com/docs/offset\n */\nconst offset = offset$1;\n\n/**\n * Optimizes the visibility of the floating element by choosing the placement\n * that has the most space available automatically, without needing to specify a\n * preferred placement. Alternative to `flip`.\n * @see https://floating-ui.com/docs/autoPlacement\n */\nconst autoPlacement = autoPlacement$1;\n\n/**\n * Optimizes the visibility of the floating element by shifting it in order to\n * keep it in view when it will overflow the clipping boundary.\n * @see https://floating-ui.com/docs/shift\n */\nconst shift = shift$1;\n\n/**\n * Optimizes the visibility of the floating element by flipping the `placement`\n * in order to keep it in view when the preferred placement(s) will overflow the\n * clipping boundary. Alternative to `autoPlacement`.\n * @see https://floating-ui.com/docs/flip\n */\nconst flip = flip$1;\n\n/**\n * Provides data that allows you to change the size of the floating element —\n * for instance, prevent it from overflowing the clipping boundary or match the\n * width of the reference element.\n * @see https://floating-ui.com/docs/size\n */\nconst size = size$1;\n\n/**\n * Provides data to hide the floating element in applicable situations, such as\n * when it is not in the same clipping context as the reference element.\n * @see https://floating-ui.com/docs/hide\n */\nconst hide = hide$1;\n\n/**\n * Provides data to position an inner element of the floating element so that it\n * appears centered to the reference element.\n * @see https://floating-ui.com/docs/arrow\n */\nconst arrow = arrow$1;\n\n/**\n * Provides improved positioning for inline reference elements that can span\n * over multiple lines, such as hyperlinks or range selections.\n * @see https://floating-ui.com/docs/inline\n */\nconst inline = inline$1;\n\n/**\n * Built-in `limiter` that will stop `shift()` at a certain point.\n */\nconst limitShift = limitShift$1;\n\n/**\n * Computes the `x` and `y` coordinates that will place the floating element\n * next to a given reference element.\n */\nconst computePosition = (reference, floating, options) => {\n  // This caches the expensive `getClippingElementAncestors` function so that\n  // multiple lifecycle resets re-use the same result. It only lives for a\n  // single call. If other functions become expensive, we can add them as well.\n  const cache = new Map();\n  const mergedOptions = {\n    platform,\n    ...options\n  };\n  const platformWithCache = {\n    ...mergedOptions.platform,\n    _c: cache\n  };\n  return computePosition$1(reference, floating, {\n    ...mergedOptions,\n    platform: platformWithCache\n  });\n};\nexport { arrow, autoPlacement, autoUpdate, computePosition, detectOverflow, flip, hide, inline, limitShift, offset, platform, shift, size };","/*! shepherd.js 11.2.0 */\n\nvar isMergeableObject = function isMergeableObject(value) {\n  return isNonNullObject(value) && !isSpecial(value);\n};\nfunction isNonNullObject(value) {\n  return !!value && typeof value === 'object';\n}\nfunction isSpecial(value) {\n  var stringValue = Object.prototype.toString.call(value);\n  return stringValue === '[object RegExp]' || stringValue === '[object Date]' || isReactElement(value);\n}\n\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\nfunction isReactElement(value) {\n  return value.$$typeof === REACT_ELEMENT_TYPE;\n}\nfunction emptyTarget(val) {\n  return Array.isArray(val) ? [] : {};\n}\nfunction cloneUnlessOtherwiseSpecified(value, options) {\n  return options.clone !== false && options.isMergeableObject(value) ? deepmerge(emptyTarget(value), value, options) : value;\n}\nfunction defaultArrayMerge(target, source, options) {\n  return target.concat(source).map(function (element) {\n    return cloneUnlessOtherwiseSpecified(element, options);\n  });\n}\nfunction getMergeFunction(key, options) {\n  if (!options.customMerge) {\n    return deepmerge;\n  }\n  var customMerge = options.customMerge(key);\n  return typeof customMerge === 'function' ? customMerge : deepmerge;\n}\nfunction getEnumerableOwnPropertySymbols(target) {\n  return Object.getOwnPropertySymbols ? Object.getOwnPropertySymbols(target).filter(function (symbol) {\n    return Object.propertyIsEnumerable.call(target, symbol);\n  }) : [];\n}\nfunction getKeys(target) {\n  return Object.keys(target).concat(getEnumerableOwnPropertySymbols(target));\n}\nfunction propertyIsOnObject(object, property) {\n  try {\n    return property in object;\n  } catch (_) {\n    return false;\n  }\n}\n\n// Protects from prototype poisoning and unexpected merging up the prototype chain.\nfunction propertyIsUnsafe(target, key) {\n  return propertyIsOnObject(target, key) // Properties are safe to merge if they don't exist in the target yet,\n  && !(Object.hasOwnProperty.call(target, key) // unsafe if they exist up the prototype chain,\n  && Object.propertyIsEnumerable.call(target, key)); // and also unsafe if they're nonenumerable.\n}\nfunction mergeObject(target, source, options) {\n  var destination = {};\n  if (options.isMergeableObject(target)) {\n    getKeys(target).forEach(function (key) {\n      destination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n    });\n  }\n  getKeys(source).forEach(function (key) {\n    if (propertyIsUnsafe(target, key)) {\n      return;\n    }\n    if (propertyIsOnObject(target, key) && options.isMergeableObject(source[key])) {\n      destination[key] = getMergeFunction(key, options)(target[key], source[key], options);\n    } else {\n      destination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n    }\n  });\n  return destination;\n}\nfunction deepmerge(target, source, options) {\n  options = options || {};\n  options.arrayMerge = options.arrayMerge || defaultArrayMerge;\n  options.isMergeableObject = options.isMergeableObject || isMergeableObject;\n  // cloneUnlessOtherwiseSpecified is added to `options` so that custom arrayMerge()\n  // implementations can use it. The caller may not replace it.\n  options.cloneUnlessOtherwiseSpecified = cloneUnlessOtherwiseSpecified;\n  var sourceIsArray = Array.isArray(source);\n  var targetIsArray = Array.isArray(target);\n  var sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n  if (!sourceAndTargetTypesMatch) {\n    return cloneUnlessOtherwiseSpecified(source, options);\n  } else if (sourceIsArray) {\n    return options.arrayMerge(target, source, options);\n  } else {\n    return mergeObject(target, source, options);\n  }\n}\ndeepmerge.all = function deepmergeAll(array, options) {\n  if (!Array.isArray(array)) {\n    throw new Error('first argument should be an array');\n  }\n  return array.reduce(function (prev, next) {\n    return deepmerge(prev, next, options);\n  }, {});\n};\nvar deepmerge_1 = deepmerge;\nvar cjs = deepmerge_1;\n\n/**\n * Checks if `value` is classified as an `Element`.\n * @param {*} value The param to check if it is an Element\n */\nfunction isElement$1(value) {\n  return value instanceof Element;\n}\n\n/**\n * Checks if `value` is classified as an `HTMLElement`.\n * @param {*} value The param to check if it is an HTMLElement\n */\nfunction isHTMLElement$1(value) {\n  return value instanceof HTMLElement;\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n * @param {*} value The param to check if it is a function\n */\nfunction isFunction(value) {\n  return typeof value === 'function';\n}\n\n/**\n * Checks if `value` is classified as a `String` object.\n * @param {*} value The param to check if it is a string\n */\nfunction isString(value) {\n  return typeof value === 'string';\n}\n\n/**\n * Checks if `value` is undefined.\n * @param {*} value The param to check if it is undefined\n */\nfunction isUndefined(value) {\n  return value === undefined;\n}\nclass Evented {\n  on(event, handler, ctx, once = false) {\n    if (isUndefined(this.bindings)) {\n      this.bindings = {};\n    }\n    if (isUndefined(this.bindings[event])) {\n      this.bindings[event] = [];\n    }\n    this.bindings[event].push({\n      handler,\n      ctx,\n      once\n    });\n    return this;\n  }\n  once(event, handler, ctx) {\n    return this.on(event, handler, ctx, true);\n  }\n  off(event, handler) {\n    if (isUndefined(this.bindings) || isUndefined(this.bindings[event])) {\n      return this;\n    }\n    if (isUndefined(handler)) {\n      delete this.bindings[event];\n    } else {\n      this.bindings[event].forEach((binding, index) => {\n        if (binding.handler === handler) {\n          this.bindings[event].splice(index, 1);\n        }\n      });\n    }\n    return this;\n  }\n  trigger(event, ...args) {\n    if (!isUndefined(this.bindings) && this.bindings[event]) {\n      this.bindings[event].forEach((binding, index) => {\n        const {\n          ctx,\n          handler,\n          once\n        } = binding;\n        const context = ctx || this;\n        handler.apply(context, args);\n        if (once) {\n          this.bindings[event].splice(index, 1);\n        }\n      });\n    }\n    return this;\n  }\n}\n\n/**\n * Binds all the methods on a JS Class to the `this` context of the class.\n * Adapted from https://github.com/sindresorhus/auto-bind\n * @param {object} self The `this` context of the class\n * @return {object} The `this` context of the class\n */\nfunction autoBind(self) {\n  const keys = Object.getOwnPropertyNames(self.constructor.prototype);\n  for (let i = 0; i < keys.length; i++) {\n    const key = keys[i];\n    const val = self[key];\n    if (key !== 'constructor' && typeof val === 'function') {\n      self[key] = val.bind(self);\n    }\n  }\n  return self;\n}\n\n/**\n * Sets up the handler to determine if we should advance the tour\n * @param {string} selector\n * @param {Step} step The step instance\n * @return {Function}\n * @private\n */\nfunction _setupAdvanceOnHandler(selector, step) {\n  return event => {\n    if (step.isOpen()) {\n      const targetIsEl = step.el && event.currentTarget === step.el;\n      const targetIsSelector = !isUndefined(selector) && event.currentTarget.matches(selector);\n      if (targetIsSelector || targetIsEl) {\n        step.tour.next();\n      }\n    }\n  };\n}\n\n/**\n * Bind the event handler for advanceOn\n * @param {Step} step The step instance\n */\nfunction bindAdvance(step) {\n  // An empty selector matches the step element\n  const {\n    event,\n    selector\n  } = step.options.advanceOn || {};\n  if (event) {\n    const handler = _setupAdvanceOnHandler(selector, step);\n\n    // TODO: this should also bind/unbind on show/hide\n    let el;\n    try {\n      el = document.querySelector(selector);\n    } catch (e) {\n      // TODO\n    }\n    if (!isUndefined(selector) && !el) {\n      return console.error(`No element was found for the selector supplied to advanceOn: ${selector}`);\n    } else if (el) {\n      el.addEventListener(event, handler);\n      step.on('destroy', () => {\n        return el.removeEventListener(event, handler);\n      });\n    } else {\n      document.body.addEventListener(event, handler, true);\n      step.on('destroy', () => {\n        return document.body.removeEventListener(event, handler, true);\n      });\n    }\n  } else {\n    return console.error('advanceOn was defined, but no event name was passed.');\n  }\n}\n\n/**\n * Ensure class prefix ends in `-`\n * @param {string} prefix The prefix to prepend to the class names generated by nano-css\n * @return {string} The prefix ending in `-`\n */\nfunction normalizePrefix(prefix) {\n  if (!isString(prefix) || prefix === '') {\n    return '';\n  }\n  return prefix.charAt(prefix.length - 1) !== '-' ? `${prefix}-` : prefix;\n}\n\n/**\n * Resolves attachTo options, converting element option value to a qualified HTMLElement.\n * @param {Step} step The step instance\n * @returns {{}|{element, on}}\n * `element` is a qualified HTML Element\n * `on` is a string position value\n */\nfunction parseAttachTo(step) {\n  const options = step.options.attachTo || {};\n  const returnOpts = Object.assign({}, options);\n  if (isFunction(returnOpts.element)) {\n    // Bind the callback to step so that it has access to the object, to enable running additional logic\n    returnOpts.element = returnOpts.element.call(step);\n  }\n  if (isString(returnOpts.element)) {\n    // Can't override the element in user opts reference because we can't\n    // guarantee that the element will exist in the future.\n    try {\n      returnOpts.element = document.querySelector(returnOpts.element);\n    } catch (e) {\n      // TODO\n    }\n    if (!returnOpts.element) {\n      console.error(`The element for this Shepherd step was not found ${options.element}`);\n    }\n  }\n  return returnOpts;\n}\n\n/**\n * Checks if the step should be centered or not. Does not trigger attachTo.element evaluation, making it a pure\n * alternative for the deprecated step.isCentered() method.\n * @param resolvedAttachToOptions\n * @returns {boolean}\n */\nfunction shouldCenterStep(resolvedAttachToOptions) {\n  if (resolvedAttachToOptions === undefined || resolvedAttachToOptions === null) {\n    return true;\n  }\n  return !resolvedAttachToOptions.element || !resolvedAttachToOptions.on;\n}\n\n/**\n * Create a unique id for steps, tours, modals, etc\n * @return {string}\n */\nfunction uuid() {\n  let d = Date.now();\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\n    const r = (d + Math.random() * 16) % 16 | 0;\n    d = Math.floor(d / 16);\n    return (c == 'x' ? r : r & 0x3 | 0x8).toString(16);\n  });\n}\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\nconst min = Math.min;\nconst max = Math.max;\nconst round = Math.round;\nconst floor = Math.floor;\nconst createCoords = v => ({\n  x: v,\n  y: v\n});\nconst oppositeSideMap = {\n  left: 'right',\n  right: 'left',\n  bottom: 'top',\n  top: 'bottom'\n};\nconst oppositeAlignmentMap = {\n  start: 'end',\n  end: 'start'\n};\nfunction clamp(start, value, end) {\n  return max(start, min(value, end));\n}\nfunction evaluate(value, param) {\n  return typeof value === 'function' ? value(param) : value;\n}\nfunction getSide(placement) {\n  return placement.split('-')[0];\n}\nfunction getAlignment(placement) {\n  return placement.split('-')[1];\n}\nfunction getOppositeAxis(axis) {\n  return axis === 'x' ? 'y' : 'x';\n}\nfunction getAxisLength(axis) {\n  return axis === 'y' ? 'height' : 'width';\n}\nfunction getSideAxis(placement) {\n  return ['top', 'bottom'].includes(getSide(placement)) ? 'y' : 'x';\n}\nfunction getAlignmentAxis(placement) {\n  return getOppositeAxis(getSideAxis(placement));\n}\nfunction getAlignmentSides(placement, rects, rtl) {\n  if (rtl === void 0) {\n    rtl = false;\n  }\n  const alignment = getAlignment(placement);\n  const alignmentAxis = getAlignmentAxis(placement);\n  const length = getAxisLength(alignmentAxis);\n  let mainAlignmentSide = alignmentAxis === 'x' ? alignment === (rtl ? 'end' : 'start') ? 'right' : 'left' : alignment === 'start' ? 'bottom' : 'top';\n  if (rects.reference[length] > rects.floating[length]) {\n    mainAlignmentSide = getOppositePlacement(mainAlignmentSide);\n  }\n  return [mainAlignmentSide, getOppositePlacement(mainAlignmentSide)];\n}\nfunction getExpandedPlacements(placement) {\n  const oppositePlacement = getOppositePlacement(placement);\n  return [getOppositeAlignmentPlacement(placement), oppositePlacement, getOppositeAlignmentPlacement(oppositePlacement)];\n}\nfunction getOppositeAlignmentPlacement(placement) {\n  return placement.replace(/start|end/g, alignment => oppositeAlignmentMap[alignment]);\n}\nfunction getSideList(side, isStart, rtl) {\n  const lr = ['left', 'right'];\n  const rl = ['right', 'left'];\n  const tb = ['top', 'bottom'];\n  const bt = ['bottom', 'top'];\n  switch (side) {\n    case 'top':\n    case 'bottom':\n      if (rtl) return isStart ? rl : lr;\n      return isStart ? lr : rl;\n    case 'left':\n    case 'right':\n      return isStart ? tb : bt;\n    default:\n      return [];\n  }\n}\nfunction getOppositeAxisPlacements(placement, flipAlignment, direction, rtl) {\n  const alignment = getAlignment(placement);\n  let list = getSideList(getSide(placement), direction === 'start', rtl);\n  if (alignment) {\n    list = list.map(side => side + \"-\" + alignment);\n    if (flipAlignment) {\n      list = list.concat(list.map(getOppositeAlignmentPlacement));\n    }\n  }\n  return list;\n}\nfunction getOppositePlacement(placement) {\n  return placement.replace(/left|right|bottom|top/g, side => oppositeSideMap[side]);\n}\nfunction expandPaddingObject(padding) {\n  return _extends({\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0\n  }, padding);\n}\nfunction getPaddingObject(padding) {\n  return typeof padding !== 'number' ? expandPaddingObject(padding) : {\n    top: padding,\n    right: padding,\n    bottom: padding,\n    left: padding\n  };\n}\nfunction rectToClientRect(rect) {\n  return _extends({}, rect, {\n    top: rect.y,\n    left: rect.x,\n    right: rect.x + rect.width,\n    bottom: rect.y + rect.height\n  });\n}\nconst _excluded2 = [\"mainAxis\", \"crossAxis\", \"fallbackPlacements\", \"fallbackStrategy\", \"fallbackAxisSideDirection\", \"flipAlignment\"],\n  _excluded4 = [\"mainAxis\", \"crossAxis\", \"limiter\"];\nfunction computeCoordsFromPlacement(_ref, placement, rtl) {\n  let {\n    reference,\n    floating\n  } = _ref;\n  const sideAxis = getSideAxis(placement);\n  const alignmentAxis = getAlignmentAxis(placement);\n  const alignLength = getAxisLength(alignmentAxis);\n  const side = getSide(placement);\n  const isVertical = sideAxis === 'y';\n  const commonX = reference.x + reference.width / 2 - floating.width / 2;\n  const commonY = reference.y + reference.height / 2 - floating.height / 2;\n  const commonAlign = reference[alignLength] / 2 - floating[alignLength] / 2;\n  let coords;\n  switch (side) {\n    case 'top':\n      coords = {\n        x: commonX,\n        y: reference.y - floating.height\n      };\n      break;\n    case 'bottom':\n      coords = {\n        x: commonX,\n        y: reference.y + reference.height\n      };\n      break;\n    case 'right':\n      coords = {\n        x: reference.x + reference.width,\n        y: commonY\n      };\n      break;\n    case 'left':\n      coords = {\n        x: reference.x - floating.width,\n        y: commonY\n      };\n      break;\n    default:\n      coords = {\n        x: reference.x,\n        y: reference.y\n      };\n  }\n  switch (getAlignment(placement)) {\n    case 'start':\n      coords[alignmentAxis] -= commonAlign * (rtl && isVertical ? -1 : 1);\n      break;\n    case 'end':\n      coords[alignmentAxis] += commonAlign * (rtl && isVertical ? -1 : 1);\n      break;\n  }\n  return coords;\n}\n\n/**\n * Computes the `x` and `y` coordinates that will place the floating element\n * next to a reference element when it is given a certain positioning strategy.\n *\n * This export does not have any `platform` interface logic. You will need to\n * write one for the platform you are using Floating UI with.\n */\nconst computePosition$1 = async (reference, floating, config) => {\n  const {\n    placement = 'bottom',\n    strategy = 'absolute',\n    middleware = [],\n    platform\n  } = config;\n  const validMiddleware = middleware.filter(Boolean);\n  const rtl = await (platform.isRTL == null ? void 0 : platform.isRTL(floating));\n  let rects = await platform.getElementRects({\n    reference,\n    floating,\n    strategy\n  });\n  let {\n    x,\n    y\n  } = computeCoordsFromPlacement(rects, placement, rtl);\n  let statefulPlacement = placement;\n  let middlewareData = {};\n  let resetCount = 0;\n  for (let i = 0; i < validMiddleware.length; i++) {\n    const {\n      name,\n      fn\n    } = validMiddleware[i];\n    const {\n      x: nextX,\n      y: nextY,\n      data,\n      reset\n    } = await fn({\n      x,\n      y,\n      initialPlacement: placement,\n      placement: statefulPlacement,\n      strategy,\n      middlewareData,\n      rects,\n      platform,\n      elements: {\n        reference,\n        floating\n      }\n    });\n    x = nextX != null ? nextX : x;\n    y = nextY != null ? nextY : y;\n    middlewareData = _extends({}, middlewareData, {\n      [name]: _extends({}, middlewareData[name], data)\n    });\n    if (reset && resetCount <= 50) {\n      resetCount++;\n      if (typeof reset === 'object') {\n        if (reset.placement) {\n          statefulPlacement = reset.placement;\n        }\n        if (reset.rects) {\n          rects = reset.rects === true ? await platform.getElementRects({\n            reference,\n            floating,\n            strategy\n          }) : reset.rects;\n        }\n        ({\n          x,\n          y\n        } = computeCoordsFromPlacement(rects, statefulPlacement, rtl));\n      }\n      i = -1;\n      continue;\n    }\n  }\n  return {\n    x,\n    y,\n    placement: statefulPlacement,\n    strategy,\n    middlewareData\n  };\n};\n\n/**\n * Resolves with an object of overflow side offsets that determine how much the\n * element is overflowing a given clipping boundary on each side.\n * - positive = overflowing the boundary by that number of pixels\n * - negative = how many pixels left before it will overflow\n * - 0 = lies flush with the boundary\n * @see https://floating-ui.com/docs/detectOverflow\n */\nasync function detectOverflow(state, options) {\n  var _await$platform$isEle;\n  if (options === void 0) {\n    options = {};\n  }\n  const {\n    x,\n    y,\n    platform,\n    rects,\n    elements,\n    strategy\n  } = state;\n  const {\n    boundary = 'clippingAncestors',\n    rootBoundary = 'viewport',\n    elementContext = 'floating',\n    altBoundary = false,\n    padding = 0\n  } = evaluate(options, state);\n  const paddingObject = getPaddingObject(padding);\n  const altContext = elementContext === 'floating' ? 'reference' : 'floating';\n  const element = elements[altBoundary ? altContext : elementContext];\n  const clippingClientRect = rectToClientRect(await platform.getClippingRect({\n    element: ((_await$platform$isEle = await (platform.isElement == null ? void 0 : platform.isElement(element))) != null ? _await$platform$isEle : true) ? element : element.contextElement || (await (platform.getDocumentElement == null ? void 0 : platform.getDocumentElement(elements.floating))),\n    boundary,\n    rootBoundary,\n    strategy\n  }));\n  const rect = elementContext === 'floating' ? _extends({}, rects.floating, {\n    x,\n    y\n  }) : rects.reference;\n  const offsetParent = await (platform.getOffsetParent == null ? void 0 : platform.getOffsetParent(elements.floating));\n  const offsetScale = (await (platform.isElement == null ? void 0 : platform.isElement(offsetParent))) ? (await (platform.getScale == null ? void 0 : platform.getScale(offsetParent))) || {\n    x: 1,\n    y: 1\n  } : {\n    x: 1,\n    y: 1\n  };\n  const elementClientRect = rectToClientRect(platform.convertOffsetParentRelativeRectToViewportRelativeRect ? await platform.convertOffsetParentRelativeRectToViewportRelativeRect({\n    rect,\n    offsetParent,\n    strategy\n  }) : rect);\n  return {\n    top: (clippingClientRect.top - elementClientRect.top + paddingObject.top) / offsetScale.y,\n    bottom: (elementClientRect.bottom - clippingClientRect.bottom + paddingObject.bottom) / offsetScale.y,\n    left: (clippingClientRect.left - elementClientRect.left + paddingObject.left) / offsetScale.x,\n    right: (elementClientRect.right - clippingClientRect.right + paddingObject.right) / offsetScale.x\n  };\n}\n\n/**\n * Provides data to position an inner element of the floating element so that it\n * appears centered to the reference element.\n * @see https://floating-ui.com/docs/arrow\n */\nconst arrow = options => ({\n  name: 'arrow',\n  options,\n  async fn(state) {\n    const {\n      x,\n      y,\n      placement,\n      rects,\n      platform,\n      elements\n    } = state;\n    // Since `element` is required, we don't Partial<> the type.\n    const {\n      element,\n      padding = 0\n    } = evaluate(options, state) || {};\n    if (element == null) {\n      return {};\n    }\n    const paddingObject = getPaddingObject(padding);\n    const coords = {\n      x,\n      y\n    };\n    const axis = getAlignmentAxis(placement);\n    const length = getAxisLength(axis);\n    const arrowDimensions = await platform.getDimensions(element);\n    const isYAxis = axis === 'y';\n    const minProp = isYAxis ? 'top' : 'left';\n    const maxProp = isYAxis ? 'bottom' : 'right';\n    const clientProp = isYAxis ? 'clientHeight' : 'clientWidth';\n    const endDiff = rects.reference[length] + rects.reference[axis] - coords[axis] - rects.floating[length];\n    const startDiff = coords[axis] - rects.reference[axis];\n    const arrowOffsetParent = await (platform.getOffsetParent == null ? void 0 : platform.getOffsetParent(element));\n    let clientSize = arrowOffsetParent ? arrowOffsetParent[clientProp] : 0;\n\n    // DOM platform can return `window` as the `offsetParent`.\n    if (!clientSize || !(await (platform.isElement == null ? void 0 : platform.isElement(arrowOffsetParent)))) {\n      clientSize = elements.floating[clientProp] || rects.floating[length];\n    }\n    const centerToReference = endDiff / 2 - startDiff / 2;\n\n    // If the padding is large enough that it causes the arrow to no longer be\n    // centered, modify the padding so that it is centered.\n    const largestPossiblePadding = clientSize / 2 - arrowDimensions[length] / 2 - 1;\n    const minPadding = min(paddingObject[minProp], largestPossiblePadding);\n    const maxPadding = min(paddingObject[maxProp], largestPossiblePadding);\n\n    // Make sure the arrow doesn't overflow the floating element if the center\n    // point is outside the floating element's bounds.\n    const min$1 = minPadding;\n    const max = clientSize - arrowDimensions[length] - maxPadding;\n    const center = clientSize / 2 - arrowDimensions[length] / 2 + centerToReference;\n    const offset = clamp(min$1, center, max);\n\n    // If the reference is small enough that the arrow's padding causes it to\n    // to point to nothing for an aligned placement, adjust the offset of the\n    // floating element itself. This stops `shift()` from taking action, but can\n    // be worked around by calling it again after the `arrow()` if desired.\n    const shouldAddOffset = getAlignment(placement) != null && center != offset && rects.reference[length] / 2 - (center < min$1 ? minPadding : maxPadding) - arrowDimensions[length] / 2 < 0;\n    const alignmentOffset = shouldAddOffset ? center < min$1 ? min$1 - center : max - center : 0;\n    return {\n      [axis]: coords[axis] - alignmentOffset,\n      data: {\n        [axis]: offset,\n        centerOffset: center - offset + alignmentOffset\n      }\n    };\n  }\n});\n\n/**\n * Optimizes the visibility of the floating element by flipping the `placement`\n * in order to keep it in view when the preferred placement(s) will overflow the\n * clipping boundary. Alternative to `autoPlacement`.\n * @see https://floating-ui.com/docs/flip\n */\nconst flip = function flip(options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'flip',\n    options,\n    async fn(state) {\n      var _middlewareData$flip;\n      const {\n        placement,\n        middlewareData,\n        rects,\n        initialPlacement,\n        platform,\n        elements\n      } = state;\n      const _evaluate2 = evaluate(options, state),\n        {\n          mainAxis: checkMainAxis = true,\n          crossAxis: checkCrossAxis = true,\n          fallbackPlacements: specifiedFallbackPlacements,\n          fallbackStrategy = 'bestFit',\n          fallbackAxisSideDirection = 'none',\n          flipAlignment = true\n        } = _evaluate2,\n        detectOverflowOptions = _objectWithoutPropertiesLoose(_evaluate2, _excluded2);\n      const side = getSide(placement);\n      const isBasePlacement = getSide(initialPlacement) === initialPlacement;\n      const rtl = await (platform.isRTL == null ? void 0 : platform.isRTL(elements.floating));\n      const fallbackPlacements = specifiedFallbackPlacements || (isBasePlacement || !flipAlignment ? [getOppositePlacement(initialPlacement)] : getExpandedPlacements(initialPlacement));\n      if (!specifiedFallbackPlacements && fallbackAxisSideDirection !== 'none') {\n        fallbackPlacements.push(...getOppositeAxisPlacements(initialPlacement, flipAlignment, fallbackAxisSideDirection, rtl));\n      }\n      const placements = [initialPlacement, ...fallbackPlacements];\n      const overflow = await detectOverflow(state, detectOverflowOptions);\n      const overflows = [];\n      let overflowsData = ((_middlewareData$flip = middlewareData.flip) == null ? void 0 : _middlewareData$flip.overflows) || [];\n      if (checkMainAxis) {\n        overflows.push(overflow[side]);\n      }\n      if (checkCrossAxis) {\n        const sides = getAlignmentSides(placement, rects, rtl);\n        overflows.push(overflow[sides[0]], overflow[sides[1]]);\n      }\n      overflowsData = [...overflowsData, {\n        placement,\n        overflows\n      }];\n\n      // One or more sides is overflowing.\n      if (!overflows.every(side => side <= 0)) {\n        var _middlewareData$flip2, _overflowsData$filter;\n        const nextIndex = (((_middlewareData$flip2 = middlewareData.flip) == null ? void 0 : _middlewareData$flip2.index) || 0) + 1;\n        const nextPlacement = placements[nextIndex];\n        if (nextPlacement) {\n          // Try next placement and re-run the lifecycle.\n          return {\n            data: {\n              index: nextIndex,\n              overflows: overflowsData\n            },\n            reset: {\n              placement: nextPlacement\n            }\n          };\n        }\n\n        // First, find the candidates that fit on the mainAxis side of overflow,\n        // then find the placement that fits the best on the main crossAxis side.\n        let resetPlacement = (_overflowsData$filter = overflowsData.filter(d => d.overflows[0] <= 0).sort((a, b) => a.overflows[1] - b.overflows[1])[0]) == null ? void 0 : _overflowsData$filter.placement;\n\n        // Otherwise fallback.\n        if (!resetPlacement) {\n          switch (fallbackStrategy) {\n            case 'bestFit':\n              {\n                var _overflowsData$map$so;\n                const placement = (_overflowsData$map$so = overflowsData.map(d => [d.placement, d.overflows.filter(overflow => overflow > 0).reduce((acc, overflow) => acc + overflow, 0)]).sort((a, b) => a[1] - b[1])[0]) == null ? void 0 : _overflowsData$map$so[0];\n                if (placement) {\n                  resetPlacement = placement;\n                }\n                break;\n              }\n            case 'initialPlacement':\n              resetPlacement = initialPlacement;\n              break;\n          }\n        }\n        if (placement !== resetPlacement) {\n          return {\n            reset: {\n              placement: resetPlacement\n            }\n          };\n        }\n      }\n      return {};\n    }\n  };\n};\n\n/**\n * Optimizes the visibility of the floating element by shifting it in order to\n * keep it in view when it will overflow the clipping boundary.\n * @see https://floating-ui.com/docs/shift\n */\nconst shift = function shift(options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'shift',\n    options,\n    async fn(state) {\n      const {\n        x,\n        y,\n        placement\n      } = state;\n      const _evaluate4 = evaluate(options, state),\n        {\n          mainAxis: checkMainAxis = true,\n          crossAxis: checkCrossAxis = false,\n          limiter = {\n            fn: _ref => {\n              let {\n                x,\n                y\n              } = _ref;\n              return {\n                x,\n                y\n              };\n            }\n          }\n        } = _evaluate4,\n        detectOverflowOptions = _objectWithoutPropertiesLoose(_evaluate4, _excluded4);\n      const coords = {\n        x,\n        y\n      };\n      const overflow = await detectOverflow(state, detectOverflowOptions);\n      const crossAxis = getSideAxis(getSide(placement));\n      const mainAxis = getOppositeAxis(crossAxis);\n      let mainAxisCoord = coords[mainAxis];\n      let crossAxisCoord = coords[crossAxis];\n      if (checkMainAxis) {\n        const minSide = mainAxis === 'y' ? 'top' : 'left';\n        const maxSide = mainAxis === 'y' ? 'bottom' : 'right';\n        const min = mainAxisCoord + overflow[minSide];\n        const max = mainAxisCoord - overflow[maxSide];\n        mainAxisCoord = clamp(min, mainAxisCoord, max);\n      }\n      if (checkCrossAxis) {\n        const minSide = crossAxis === 'y' ? 'top' : 'left';\n        const maxSide = crossAxis === 'y' ? 'bottom' : 'right';\n        const min = crossAxisCoord + overflow[minSide];\n        const max = crossAxisCoord - overflow[maxSide];\n        crossAxisCoord = clamp(min, crossAxisCoord, max);\n      }\n      const limitedCoords = limiter.fn(_extends({}, state, {\n        [mainAxis]: mainAxisCoord,\n        [crossAxis]: crossAxisCoord\n      }));\n      return _extends({}, limitedCoords, {\n        data: {\n          x: limitedCoords.x - x,\n          y: limitedCoords.y - y\n        }\n      });\n    }\n  };\n};\n/**\n * Built-in `limiter` that will stop `shift()` at a certain point.\n */\nconst limitShift = function limitShift(options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    options,\n    fn(state) {\n      const {\n        x,\n        y,\n        placement,\n        rects,\n        middlewareData\n      } = state;\n      const {\n        offset = 0,\n        mainAxis: checkMainAxis = true,\n        crossAxis: checkCrossAxis = true\n      } = evaluate(options, state);\n      const coords = {\n        x,\n        y\n      };\n      const crossAxis = getSideAxis(placement);\n      const mainAxis = getOppositeAxis(crossAxis);\n      let mainAxisCoord = coords[mainAxis];\n      let crossAxisCoord = coords[crossAxis];\n      const rawOffset = evaluate(offset, state);\n      const computedOffset = typeof rawOffset === 'number' ? {\n        mainAxis: rawOffset,\n        crossAxis: 0\n      } : _extends({\n        mainAxis: 0,\n        crossAxis: 0\n      }, rawOffset);\n      if (checkMainAxis) {\n        const len = mainAxis === 'y' ? 'height' : 'width';\n        const limitMin = rects.reference[mainAxis] - rects.floating[len] + computedOffset.mainAxis;\n        const limitMax = rects.reference[mainAxis] + rects.reference[len] - computedOffset.mainAxis;\n        if (mainAxisCoord < limitMin) {\n          mainAxisCoord = limitMin;\n        } else if (mainAxisCoord > limitMax) {\n          mainAxisCoord = limitMax;\n        }\n      }\n      if (checkCrossAxis) {\n        var _middlewareData$offse, _middlewareData$offse2;\n        const len = mainAxis === 'y' ? 'width' : 'height';\n        const isOriginSide = ['top', 'left'].includes(getSide(placement));\n        const limitMin = rects.reference[crossAxis] - rects.floating[len] + (isOriginSide ? ((_middlewareData$offse = middlewareData.offset) == null ? void 0 : _middlewareData$offse[crossAxis]) || 0 : 0) + (isOriginSide ? 0 : computedOffset.crossAxis);\n        const limitMax = rects.reference[crossAxis] + rects.reference[len] + (isOriginSide ? 0 : ((_middlewareData$offse2 = middlewareData.offset) == null ? void 0 : _middlewareData$offse2[crossAxis]) || 0) - (isOriginSide ? computedOffset.crossAxis : 0);\n        if (crossAxisCoord < limitMin) {\n          crossAxisCoord = limitMin;\n        } else if (crossAxisCoord > limitMax) {\n          crossAxisCoord = limitMax;\n        }\n      }\n      return {\n        [mainAxis]: mainAxisCoord,\n        [crossAxis]: crossAxisCoord\n      };\n    }\n  };\n};\nfunction getNodeName(node) {\n  if (isNode(node)) {\n    return (node.nodeName || '').toLowerCase();\n  }\n  // Mocked nodes in testing environments may not be instances of Node. By\n  // returning `#document` an infinite loop won't occur.\n  // https://github.com/floating-ui/floating-ui/issues/2317\n  return '#document';\n}\nfunction getWindow(node) {\n  var _node$ownerDocument;\n  return (node == null ? void 0 : (_node$ownerDocument = node.ownerDocument) == null ? void 0 : _node$ownerDocument.defaultView) || window;\n}\nfunction getDocumentElement(node) {\n  var _ref;\n  return (_ref = (isNode(node) ? node.ownerDocument : node.document) || window.document) == null ? void 0 : _ref.documentElement;\n}\nfunction isNode(value) {\n  return value instanceof Node || value instanceof getWindow(value).Node;\n}\nfunction isElement(value) {\n  return value instanceof Element || value instanceof getWindow(value).Element;\n}\nfunction isHTMLElement(value) {\n  return value instanceof HTMLElement || value instanceof getWindow(value).HTMLElement;\n}\nfunction isShadowRoot(value) {\n  // Browsers without `ShadowRoot` support.\n  if (typeof ShadowRoot === 'undefined') {\n    return false;\n  }\n  return value instanceof ShadowRoot || value instanceof getWindow(value).ShadowRoot;\n}\nfunction isOverflowElement(element) {\n  const {\n    overflow,\n    overflowX,\n    overflowY,\n    display\n  } = getComputedStyle(element);\n  return /auto|scroll|overlay|hidden|clip/.test(overflow + overflowY + overflowX) && !['inline', 'contents'].includes(display);\n}\nfunction isTableElement(element) {\n  return ['table', 'td', 'th'].includes(getNodeName(element));\n}\nfunction isContainingBlock(element) {\n  const webkit = isWebKit();\n  const css = getComputedStyle(element);\n\n  // https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_block#identifying_the_containing_block\n  return css.transform !== 'none' || css.perspective !== 'none' || (css.containerType ? css.containerType !== 'normal' : false) || !webkit && (css.backdropFilter ? css.backdropFilter !== 'none' : false) || !webkit && (css.filter ? css.filter !== 'none' : false) || ['transform', 'perspective', 'filter'].some(value => (css.willChange || '').includes(value)) || ['paint', 'layout', 'strict', 'content'].some(value => (css.contain || '').includes(value));\n}\nfunction getContainingBlock(element) {\n  let currentNode = getParentNode(element);\n  while (isHTMLElement(currentNode) && !isLastTraversableNode(currentNode)) {\n    if (isContainingBlock(currentNode)) {\n      return currentNode;\n    } else {\n      currentNode = getParentNode(currentNode);\n    }\n  }\n  return null;\n}\nfunction isWebKit() {\n  if (typeof CSS === 'undefined' || !CSS.supports) return false;\n  return CSS.supports('-webkit-backdrop-filter', 'none');\n}\nfunction isLastTraversableNode(node) {\n  return ['html', 'body', '#document'].includes(getNodeName(node));\n}\nfunction getComputedStyle(element) {\n  return getWindow(element).getComputedStyle(element);\n}\nfunction getNodeScroll(element) {\n  if (isElement(element)) {\n    return {\n      scrollLeft: element.scrollLeft,\n      scrollTop: element.scrollTop\n    };\n  }\n  return {\n    scrollLeft: element.pageXOffset,\n    scrollTop: element.pageYOffset\n  };\n}\nfunction getParentNode(node) {\n  if (getNodeName(node) === 'html') {\n    return node;\n  }\n  const result =\n  // Step into the shadow DOM of the parent of a slotted node.\n  node.assignedSlot ||\n  // DOM Element detected.\n  node.parentNode ||\n  // ShadowRoot detected.\n  isShadowRoot(node) && node.host ||\n  // Fallback.\n  getDocumentElement(node);\n  return isShadowRoot(result) ? result.host : result;\n}\nfunction getNearestOverflowAncestor(node) {\n  const parentNode = getParentNode(node);\n  if (isLastTraversableNode(parentNode)) {\n    return node.ownerDocument ? node.ownerDocument.body : node.body;\n  }\n  if (isHTMLElement(parentNode) && isOverflowElement(parentNode)) {\n    return parentNode;\n  }\n  return getNearestOverflowAncestor(parentNode);\n}\nfunction getOverflowAncestors(node, list) {\n  var _node$ownerDocument2;\n  if (list === void 0) {\n    list = [];\n  }\n  const scrollableAncestor = getNearestOverflowAncestor(node);\n  const isBody = scrollableAncestor === ((_node$ownerDocument2 = node.ownerDocument) == null ? void 0 : _node$ownerDocument2.body);\n  const win = getWindow(scrollableAncestor);\n  if (isBody) {\n    return list.concat(win, win.visualViewport || [], isOverflowElement(scrollableAncestor) ? scrollableAncestor : []);\n  }\n  return list.concat(scrollableAncestor, getOverflowAncestors(scrollableAncestor));\n}\nfunction getCssDimensions(element) {\n  const css = getComputedStyle(element);\n  // In testing environments, the `width` and `height` properties are empty\n  // strings for SVG elements, returning NaN. Fallback to `0` in this case.\n  let width = parseFloat(css.width) || 0;\n  let height = parseFloat(css.height) || 0;\n  const hasOffset = isHTMLElement(element);\n  const offsetWidth = hasOffset ? element.offsetWidth : width;\n  const offsetHeight = hasOffset ? element.offsetHeight : height;\n  const shouldFallback = round(width) !== offsetWidth || round(height) !== offsetHeight;\n  if (shouldFallback) {\n    width = offsetWidth;\n    height = offsetHeight;\n  }\n  return {\n    width,\n    height,\n    $: shouldFallback\n  };\n}\nfunction unwrapElement(element) {\n  return !isElement(element) ? element.contextElement : element;\n}\nfunction getScale(element) {\n  const domElement = unwrapElement(element);\n  if (!isHTMLElement(domElement)) {\n    return createCoords(1);\n  }\n  const rect = domElement.getBoundingClientRect();\n  const {\n    width,\n    height,\n    $\n  } = getCssDimensions(domElement);\n  let x = ($ ? round(rect.width) : rect.width) / width;\n  let y = ($ ? round(rect.height) : rect.height) / height;\n\n  // 0, NaN, or Infinity should always fallback to 1.\n\n  if (!x || !Number.isFinite(x)) {\n    x = 1;\n  }\n  if (!y || !Number.isFinite(y)) {\n    y = 1;\n  }\n  return {\n    x,\n    y\n  };\n}\nconst noOffsets = /*#__PURE__*/createCoords(0);\nfunction getVisualOffsets(element) {\n  const win = getWindow(element);\n  if (!isWebKit() || !win.visualViewport) {\n    return noOffsets;\n  }\n  return {\n    x: win.visualViewport.offsetLeft,\n    y: win.visualViewport.offsetTop\n  };\n}\nfunction shouldAddVisualOffsets(element, isFixed, floatingOffsetParent) {\n  if (isFixed === void 0) {\n    isFixed = false;\n  }\n  if (!floatingOffsetParent || isFixed && floatingOffsetParent !== getWindow(element)) {\n    return false;\n  }\n  return isFixed;\n}\nfunction getBoundingClientRect(element, includeScale, isFixedStrategy, offsetParent) {\n  if (includeScale === void 0) {\n    includeScale = false;\n  }\n  if (isFixedStrategy === void 0) {\n    isFixedStrategy = false;\n  }\n  const clientRect = element.getBoundingClientRect();\n  const domElement = unwrapElement(element);\n  let scale = createCoords(1);\n  if (includeScale) {\n    if (offsetParent) {\n      if (isElement(offsetParent)) {\n        scale = getScale(offsetParent);\n      }\n    } else {\n      scale = getScale(element);\n    }\n  }\n  const visualOffsets = shouldAddVisualOffsets(domElement, isFixedStrategy, offsetParent) ? getVisualOffsets(domElement) : createCoords(0);\n  let x = (clientRect.left + visualOffsets.x) / scale.x;\n  let y = (clientRect.top + visualOffsets.y) / scale.y;\n  let width = clientRect.width / scale.x;\n  let height = clientRect.height / scale.y;\n  if (domElement) {\n    const win = getWindow(domElement);\n    const offsetWin = offsetParent && isElement(offsetParent) ? getWindow(offsetParent) : offsetParent;\n    let currentIFrame = win.frameElement;\n    while (currentIFrame && offsetParent && offsetWin !== win) {\n      const iframeScale = getScale(currentIFrame);\n      const iframeRect = currentIFrame.getBoundingClientRect();\n      const css = getComputedStyle(currentIFrame);\n      const left = iframeRect.left + (currentIFrame.clientLeft + parseFloat(css.paddingLeft)) * iframeScale.x;\n      const top = iframeRect.top + (currentIFrame.clientTop + parseFloat(css.paddingTop)) * iframeScale.y;\n      x *= iframeScale.x;\n      y *= iframeScale.y;\n      width *= iframeScale.x;\n      height *= iframeScale.y;\n      x += left;\n      y += top;\n      currentIFrame = getWindow(currentIFrame).frameElement;\n    }\n  }\n  return rectToClientRect({\n    width,\n    height,\n    x,\n    y\n  });\n}\nfunction convertOffsetParentRelativeRectToViewportRelativeRect(_ref) {\n  let {\n    rect,\n    offsetParent,\n    strategy\n  } = _ref;\n  const isOffsetParentAnElement = isHTMLElement(offsetParent);\n  const documentElement = getDocumentElement(offsetParent);\n  if (offsetParent === documentElement) {\n    return rect;\n  }\n  let scroll = {\n    scrollLeft: 0,\n    scrollTop: 0\n  };\n  let scale = createCoords(1);\n  const offsets = createCoords(0);\n  if (isOffsetParentAnElement || !isOffsetParentAnElement && strategy !== 'fixed') {\n    if (getNodeName(offsetParent) !== 'body' || isOverflowElement(documentElement)) {\n      scroll = getNodeScroll(offsetParent);\n    }\n    if (isHTMLElement(offsetParent)) {\n      const offsetRect = getBoundingClientRect(offsetParent);\n      scale = getScale(offsetParent);\n      offsets.x = offsetRect.x + offsetParent.clientLeft;\n      offsets.y = offsetRect.y + offsetParent.clientTop;\n    }\n  }\n  return {\n    width: rect.width * scale.x,\n    height: rect.height * scale.y,\n    x: rect.x * scale.x - scroll.scrollLeft * scale.x + offsets.x,\n    y: rect.y * scale.y - scroll.scrollTop * scale.y + offsets.y\n  };\n}\nfunction getClientRects(element) {\n  return Array.from(element.getClientRects());\n}\nfunction getWindowScrollBarX(element) {\n  // If <html> has a CSS width greater than the viewport, then this will be\n  // incorrect for RTL.\n  return getBoundingClientRect(getDocumentElement(element)).left + getNodeScroll(element).scrollLeft;\n}\n\n// Gets the entire size of the scrollable document area, even extending outside\n// of the `<html>` and `<body>` rect bounds if horizontally scrollable.\nfunction getDocumentRect(element) {\n  const html = getDocumentElement(element);\n  const scroll = getNodeScroll(element);\n  const body = element.ownerDocument.body;\n  const width = max(html.scrollWidth, html.clientWidth, body.scrollWidth, body.clientWidth);\n  const height = max(html.scrollHeight, html.clientHeight, body.scrollHeight, body.clientHeight);\n  let x = -scroll.scrollLeft + getWindowScrollBarX(element);\n  const y = -scroll.scrollTop;\n  if (getComputedStyle(body).direction === 'rtl') {\n    x += max(html.clientWidth, body.clientWidth) - width;\n  }\n  return {\n    width,\n    height,\n    x,\n    y\n  };\n}\nfunction getViewportRect(element, strategy) {\n  const win = getWindow(element);\n  const html = getDocumentElement(element);\n  const visualViewport = win.visualViewport;\n  let width = html.clientWidth;\n  let height = html.clientHeight;\n  let x = 0;\n  let y = 0;\n  if (visualViewport) {\n    width = visualViewport.width;\n    height = visualViewport.height;\n    const visualViewportBased = isWebKit();\n    if (!visualViewportBased || visualViewportBased && strategy === 'fixed') {\n      x = visualViewport.offsetLeft;\n      y = visualViewport.offsetTop;\n    }\n  }\n  return {\n    width,\n    height,\n    x,\n    y\n  };\n}\n\n// Returns the inner client rect, subtracting scrollbars if present.\nfunction getInnerBoundingClientRect(element, strategy) {\n  const clientRect = getBoundingClientRect(element, true, strategy === 'fixed');\n  const top = clientRect.top + element.clientTop;\n  const left = clientRect.left + element.clientLeft;\n  const scale = isHTMLElement(element) ? getScale(element) : createCoords(1);\n  const width = element.clientWidth * scale.x;\n  const height = element.clientHeight * scale.y;\n  const x = left * scale.x;\n  const y = top * scale.y;\n  return {\n    width,\n    height,\n    x,\n    y\n  };\n}\nfunction getClientRectFromClippingAncestor(element, clippingAncestor, strategy) {\n  let rect;\n  if (clippingAncestor === 'viewport') {\n    rect = getViewportRect(element, strategy);\n  } else if (clippingAncestor === 'document') {\n    rect = getDocumentRect(getDocumentElement(element));\n  } else if (isElement(clippingAncestor)) {\n    rect = getInnerBoundingClientRect(clippingAncestor, strategy);\n  } else {\n    const visualOffsets = getVisualOffsets(element);\n    rect = _extends({}, clippingAncestor, {\n      x: clippingAncestor.x - visualOffsets.x,\n      y: clippingAncestor.y - visualOffsets.y\n    });\n  }\n  return rectToClientRect(rect);\n}\nfunction hasFixedPositionAncestor(element, stopNode) {\n  const parentNode = getParentNode(element);\n  if (parentNode === stopNode || !isElement(parentNode) || isLastTraversableNode(parentNode)) {\n    return false;\n  }\n  return getComputedStyle(parentNode).position === 'fixed' || hasFixedPositionAncestor(parentNode, stopNode);\n}\n\n// A \"clipping ancestor\" is an `overflow` element with the characteristic of\n// clipping (or hiding) child elements. This returns all clipping ancestors\n// of the given element up the tree.\nfunction getClippingElementAncestors(element, cache) {\n  const cachedResult = cache.get(element);\n  if (cachedResult) {\n    return cachedResult;\n  }\n  let result = getOverflowAncestors(element).filter(el => isElement(el) && getNodeName(el) !== 'body');\n  let currentContainingBlockComputedStyle = null;\n  const elementIsFixed = getComputedStyle(element).position === 'fixed';\n  let currentNode = elementIsFixed ? getParentNode(element) : element;\n\n  // https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_block#identifying_the_containing_block\n  while (isElement(currentNode) && !isLastTraversableNode(currentNode)) {\n    const computedStyle = getComputedStyle(currentNode);\n    const currentNodeIsContaining = isContainingBlock(currentNode);\n    if (!currentNodeIsContaining && computedStyle.position === 'fixed') {\n      currentContainingBlockComputedStyle = null;\n    }\n    const shouldDropCurrentNode = elementIsFixed ? !currentNodeIsContaining && !currentContainingBlockComputedStyle : !currentNodeIsContaining && computedStyle.position === 'static' && !!currentContainingBlockComputedStyle && ['absolute', 'fixed'].includes(currentContainingBlockComputedStyle.position) || isOverflowElement(currentNode) && !currentNodeIsContaining && hasFixedPositionAncestor(element, currentNode);\n    if (shouldDropCurrentNode) {\n      // Drop non-containing blocks.\n      result = result.filter(ancestor => ancestor !== currentNode);\n    } else {\n      // Record last containing block for next iteration.\n      currentContainingBlockComputedStyle = computedStyle;\n    }\n    currentNode = getParentNode(currentNode);\n  }\n  cache.set(element, result);\n  return result;\n}\n\n// Gets the maximum area that the element is visible in due to any number of\n// clipping ancestors.\nfunction getClippingRect(_ref) {\n  let {\n    element,\n    boundary,\n    rootBoundary,\n    strategy\n  } = _ref;\n  const elementClippingAncestors = boundary === 'clippingAncestors' ? getClippingElementAncestors(element, this._c) : [].concat(boundary);\n  const clippingAncestors = [...elementClippingAncestors, rootBoundary];\n  const firstClippingAncestor = clippingAncestors[0];\n  const clippingRect = clippingAncestors.reduce((accRect, clippingAncestor) => {\n    const rect = getClientRectFromClippingAncestor(element, clippingAncestor, strategy);\n    accRect.top = max(rect.top, accRect.top);\n    accRect.right = min(rect.right, accRect.right);\n    accRect.bottom = min(rect.bottom, accRect.bottom);\n    accRect.left = max(rect.left, accRect.left);\n    return accRect;\n  }, getClientRectFromClippingAncestor(element, firstClippingAncestor, strategy));\n  return {\n    width: clippingRect.right - clippingRect.left,\n    height: clippingRect.bottom - clippingRect.top,\n    x: clippingRect.left,\n    y: clippingRect.top\n  };\n}\nfunction getDimensions(element) {\n  return getCssDimensions(element);\n}\nfunction getRectRelativeToOffsetParent(element, offsetParent, strategy) {\n  const isOffsetParentAnElement = isHTMLElement(offsetParent);\n  const documentElement = getDocumentElement(offsetParent);\n  const isFixed = strategy === 'fixed';\n  const rect = getBoundingClientRect(element, true, isFixed, offsetParent);\n  let scroll = {\n    scrollLeft: 0,\n    scrollTop: 0\n  };\n  const offsets = createCoords(0);\n  if (isOffsetParentAnElement || !isOffsetParentAnElement && !isFixed) {\n    if (getNodeName(offsetParent) !== 'body' || isOverflowElement(documentElement)) {\n      scroll = getNodeScroll(offsetParent);\n    }\n    if (isOffsetParentAnElement) {\n      const offsetRect = getBoundingClientRect(offsetParent, true, isFixed, offsetParent);\n      offsets.x = offsetRect.x + offsetParent.clientLeft;\n      offsets.y = offsetRect.y + offsetParent.clientTop;\n    } else if (documentElement) {\n      offsets.x = getWindowScrollBarX(documentElement);\n    }\n  }\n  return {\n    x: rect.left + scroll.scrollLeft - offsets.x,\n    y: rect.top + scroll.scrollTop - offsets.y,\n    width: rect.width,\n    height: rect.height\n  };\n}\nfunction getTrueOffsetParent(element, polyfill) {\n  if (!isHTMLElement(element) || getComputedStyle(element).position === 'fixed') {\n    return null;\n  }\n  if (polyfill) {\n    return polyfill(element);\n  }\n  return element.offsetParent;\n}\n\n// Gets the closest ancestor positioned element. Handles some edge cases,\n// such as table ancestors and cross browser bugs.\nfunction getOffsetParent(element, polyfill) {\n  const window = getWindow(element);\n  if (!isHTMLElement(element)) {\n    return window;\n  }\n  let offsetParent = getTrueOffsetParent(element, polyfill);\n  while (offsetParent && isTableElement(offsetParent) && getComputedStyle(offsetParent).position === 'static') {\n    offsetParent = getTrueOffsetParent(offsetParent, polyfill);\n  }\n  if (offsetParent && (getNodeName(offsetParent) === 'html' || getNodeName(offsetParent) === 'body' && getComputedStyle(offsetParent).position === 'static' && !isContainingBlock(offsetParent))) {\n    return window;\n  }\n  return offsetParent || getContainingBlock(element) || window;\n}\nconst getElementRects = async function getElementRects(_ref) {\n  let {\n    reference,\n    floating,\n    strategy\n  } = _ref;\n  const getOffsetParentFn = this.getOffsetParent || getOffsetParent;\n  const getDimensionsFn = this.getDimensions;\n  return {\n    reference: getRectRelativeToOffsetParent(reference, await getOffsetParentFn(floating), strategy),\n    floating: _extends({\n      x: 0,\n      y: 0\n    }, await getDimensionsFn(floating))\n  };\n};\nfunction isRTL(element) {\n  return getComputedStyle(element).direction === 'rtl';\n}\nconst platform = {\n  convertOffsetParentRelativeRectToViewportRelativeRect,\n  getDocumentElement,\n  getClippingRect,\n  getOffsetParent,\n  getElementRects,\n  getClientRects,\n  getDimensions,\n  getScale,\n  isElement,\n  isRTL\n};\n\n// https://samthor.au/2021/observing-dom/\nfunction observeMove(element, onMove) {\n  let io = null;\n  let timeoutId;\n  const root = getDocumentElement(element);\n  function cleanup() {\n    clearTimeout(timeoutId);\n    io && io.disconnect();\n    io = null;\n  }\n  function refresh(skip, threshold) {\n    if (skip === void 0) {\n      skip = false;\n    }\n    if (threshold === void 0) {\n      threshold = 1;\n    }\n    cleanup();\n    const {\n      left,\n      top,\n      width,\n      height\n    } = element.getBoundingClientRect();\n    if (!skip) {\n      onMove();\n    }\n    if (!width || !height) {\n      return;\n    }\n    const insetTop = floor(top);\n    const insetRight = floor(root.clientWidth - (left + width));\n    const insetBottom = floor(root.clientHeight - (top + height));\n    const insetLeft = floor(left);\n    const rootMargin = -insetTop + \"px \" + -insetRight + \"px \" + -insetBottom + \"px \" + -insetLeft + \"px\";\n    const options = {\n      rootMargin,\n      threshold: max(0, min(1, threshold)) || 1\n    };\n    let isFirstUpdate = true;\n    function handleObserve(entries) {\n      const ratio = entries[0].intersectionRatio;\n      if (ratio !== threshold) {\n        if (!isFirstUpdate) {\n          return refresh();\n        }\n        if (!ratio) {\n          timeoutId = setTimeout(() => {\n            refresh(false, 1e-7);\n          }, 100);\n        } else {\n          refresh(false, ratio);\n        }\n      }\n      isFirstUpdate = false;\n    }\n\n    // Older browsers don't support a `document` as the root and will throw an\n    // error.\n    try {\n      io = new IntersectionObserver(handleObserve, _extends({}, options, {\n        // Handle <iframe>s\n        root: root.ownerDocument\n      }));\n    } catch (e) {\n      io = new IntersectionObserver(handleObserve, options);\n    }\n    io.observe(element);\n  }\n  refresh(true);\n  return cleanup;\n}\n\n/**\n * Automatically updates the position of the floating element when necessary.\n * Should only be called when the floating element is mounted on the DOM or\n * visible on the screen.\n * @returns cleanup function that should be invoked when the floating element is\n * removed from the DOM or hidden from the screen.\n * @see https://floating-ui.com/docs/autoUpdate\n */\nfunction autoUpdate(reference, floating, update, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  const {\n    ancestorScroll = true,\n    ancestorResize = true,\n    elementResize = typeof ResizeObserver === 'function',\n    layoutShift = typeof IntersectionObserver === 'function',\n    animationFrame = false\n  } = options;\n  const referenceEl = unwrapElement(reference);\n  const ancestors = ancestorScroll || ancestorResize ? [...(referenceEl ? getOverflowAncestors(referenceEl) : []), ...getOverflowAncestors(floating)] : [];\n  ancestors.forEach(ancestor => {\n    ancestorScroll && ancestor.addEventListener('scroll', update, {\n      passive: true\n    });\n    ancestorResize && ancestor.addEventListener('resize', update);\n  });\n  const cleanupIo = referenceEl && layoutShift ? observeMove(referenceEl, update) : null;\n  let reobserveFrame = -1;\n  let resizeObserver = null;\n  if (elementResize) {\n    resizeObserver = new ResizeObserver(_ref => {\n      let [firstEntry] = _ref;\n      if (firstEntry && firstEntry.target === referenceEl && resizeObserver) {\n        // Prevent update loops when using the `size` middleware.\n        // https://github.com/floating-ui/floating-ui/issues/1740\n        resizeObserver.unobserve(floating);\n        cancelAnimationFrame(reobserveFrame);\n        reobserveFrame = requestAnimationFrame(() => {\n          resizeObserver && resizeObserver.observe(floating);\n        });\n      }\n      update();\n    });\n    if (referenceEl && !animationFrame) {\n      resizeObserver.observe(referenceEl);\n    }\n    resizeObserver.observe(floating);\n  }\n  let frameId;\n  let prevRefRect = animationFrame ? getBoundingClientRect(reference) : null;\n  if (animationFrame) {\n    frameLoop();\n  }\n  function frameLoop() {\n    const nextRefRect = getBoundingClientRect(reference);\n    if (prevRefRect && (nextRefRect.x !== prevRefRect.x || nextRefRect.y !== prevRefRect.y || nextRefRect.width !== prevRefRect.width || nextRefRect.height !== prevRefRect.height)) {\n      update();\n    }\n    prevRefRect = nextRefRect;\n    frameId = requestAnimationFrame(frameLoop);\n  }\n  update();\n  return () => {\n    ancestors.forEach(ancestor => {\n      ancestorScroll && ancestor.removeEventListener('scroll', update);\n      ancestorResize && ancestor.removeEventListener('resize', update);\n    });\n    cleanupIo && cleanupIo();\n    resizeObserver && resizeObserver.disconnect();\n    resizeObserver = null;\n    if (animationFrame) {\n      cancelAnimationFrame(frameId);\n    }\n  };\n}\n\n/**\n * Computes the `x` and `y` coordinates that will place the floating element\n * next to a reference element when it is given a certain CSS positioning\n * strategy.\n */\nconst computePosition = (reference, floating, options) => {\n  // This caches the expensive `getClippingElementAncestors` function so that\n  // multiple lifecycle resets re-use the same result. It only lives for a\n  // single call. If other functions become expensive, we can add them as well.\n  const cache = new Map();\n  const mergedOptions = _extends({\n    platform\n  }, options);\n  const platformWithCache = _extends({}, mergedOptions.platform, {\n    _c: cache\n  });\n  return computePosition$1(reference, floating, _extends({}, mergedOptions, {\n    platform: platformWithCache\n  }));\n};\n\n/**\n * Floating UI Options\n *\n * @typedef {object} FloatingUIOptions\n */\n\n/**\n * Determines options for the tooltip and initializes event listeners.\n *\n * @param {Step} step The step instance\n *\n * @return {FloatingUIOptions}\n */\nfunction setupTooltip(step) {\n  if (step.cleanup) {\n    step.cleanup();\n  }\n  const attachToOptions = step._getResolvedAttachToOptions();\n  let target = attachToOptions.element;\n  const floatingUIOptions = getFloatingUIOptions(attachToOptions, step);\n  const shouldCenter = shouldCenterStep(attachToOptions);\n  if (shouldCenter) {\n    target = document.body;\n    const content = step.shepherdElementComponent.getElement();\n    content.classList.add('shepherd-centered');\n  }\n  step.cleanup = autoUpdate(target, step.el, () => {\n    // The element might have already been removed by the end of the tour.\n    if (!step.el) {\n      step.cleanup();\n      return;\n    }\n    setPosition(target, step, floatingUIOptions, shouldCenter);\n  });\n  step.target = attachToOptions.element;\n  return floatingUIOptions;\n}\n\n/**\n * Merge tooltip options handling nested keys.\n *\n * @param tourOptions - The default tour options.\n * @param options - Step specific options.\n *\n * @return {floatingUIOptions: FloatingUIOptions}\n */\nfunction mergeTooltipConfig(tourOptions, options) {\n  return {\n    floatingUIOptions: cjs(tourOptions.floatingUIOptions || {}, options.floatingUIOptions || {})\n  };\n}\n\n/**\n * Cleanup function called when the step is closed/destroyed.\n *\n * @param {Step} step\n */\nfunction destroyTooltip(step) {\n  if (step.cleanup) {\n    step.cleanup();\n  }\n  step.cleanup = null;\n}\n\n/**\n *\n * @return {Promise<*>}\n */\nfunction setPosition(target, step, floatingUIOptions, shouldCenter) {\n  return computePosition(target, step.el, floatingUIOptions).then(floatingUIposition(step, shouldCenter))\n  // Wait before forcing focus.\n  .then(step => new Promise(resolve => {\n    setTimeout(() => resolve(step), 300);\n  }))\n  // Replaces focusAfterRender modifier.\n  .then(step => {\n    if (step && step.el) {\n      step.el.focus({\n        preventScroll: true\n      });\n    }\n  });\n}\n\n/**\n *\n * @param step\n * @param shouldCenter\n * @return {function({x: *, y: *, placement: *, middlewareData: *}): Promise<unknown>}\n */\nfunction floatingUIposition(step, shouldCenter) {\n  return ({\n    x,\n    y,\n    placement,\n    middlewareData\n  }) => {\n    if (!step.el) {\n      return step;\n    }\n    if (shouldCenter) {\n      Object.assign(step.el.style, {\n        position: 'fixed',\n        left: '50%',\n        top: '50%',\n        transform: 'translate(-50%, -50%)'\n      });\n    } else {\n      Object.assign(step.el.style, {\n        position: 'absolute',\n        left: `${x}px`,\n        top: `${y}px`\n      });\n    }\n    step.el.dataset.popperPlacement = placement;\n    placeArrow(step.el, middlewareData);\n    return step;\n  };\n}\n\n/**\n *\n * @param el\n * @param middlewareData\n */\nfunction placeArrow(el, middlewareData) {\n  const arrowEl = el.querySelector('.shepherd-arrow');\n  if (arrowEl && middlewareData.arrow) {\n    const {\n      x: arrowX,\n      y: arrowY\n    } = middlewareData.arrow;\n    Object.assign(arrowEl.style, {\n      left: arrowX != null ? `${arrowX}px` : '',\n      top: arrowY != null ? `${arrowY}px` : ''\n    });\n  }\n}\n\n/**\n * Gets the `Floating UI` options from a set of base `attachTo` options\n * @param attachToOptions\n * @param {Step} step The step instance\n * @return {Object}\n * @private\n */\nfunction getFloatingUIOptions(attachToOptions, step) {\n  const options = {\n    strategy: 'absolute',\n    middleware: []\n  };\n  const arrowEl = addArrow(step);\n  const shouldCenter = shouldCenterStep(attachToOptions);\n  if (!shouldCenter) {\n    options.middleware.push(flip(),\n    // Replicate PopperJS default behavior.\n    shift({\n      limiter: limitShift(),\n      crossAxis: true\n    }));\n    if (arrowEl) {\n      options.middleware.push(arrow({\n        element: arrowEl\n      }));\n    }\n    options.placement = attachToOptions.on;\n  }\n  return cjs(step.options.floatingUIOptions || {}, options);\n}\n\n/**\n * @param {Step} step\n * @return {HTMLElement|false|null}\n */\nfunction addArrow(step) {\n  if (step.options.arrow && step.el) {\n    return step.el.querySelector('.shepherd-arrow');\n  }\n  return false;\n}\nfunction noop() {}\nfunction assign(tar, src) {\n  // @ts-ignore\n  for (const k in src) tar[k] = src[k];\n  return tar;\n}\nfunction run(fn) {\n  return fn();\n}\nfunction blank_object() {\n  return Object.create(null);\n}\nfunction run_all(fns) {\n  fns.forEach(run);\n}\nfunction is_function(thing) {\n  return typeof thing === 'function';\n}\nfunction safe_not_equal(a, b) {\n  return a != a ? b == b : a !== b || a && typeof a === 'object' || typeof a === 'function';\n}\nfunction is_empty(obj) {\n  return Object.keys(obj).length === 0;\n}\nfunction append(target, node) {\n  target.appendChild(node);\n}\nfunction insert(target, node, anchor) {\n  target.insertBefore(node, anchor || null);\n}\nfunction detach(node) {\n  if (node.parentNode) {\n    node.parentNode.removeChild(node);\n  }\n}\nfunction destroy_each(iterations, detaching) {\n  for (let i = 0; i < iterations.length; i += 1) {\n    if (iterations[i]) iterations[i].d(detaching);\n  }\n}\nfunction element(name) {\n  return document.createElement(name);\n}\nfunction svg_element(name) {\n  return document.createElementNS('http://www.w3.org/2000/svg', name);\n}\nfunction text(data) {\n  return document.createTextNode(data);\n}\nfunction space() {\n  return text(' ');\n}\nfunction empty() {\n  return text('');\n}\nfunction listen(node, event, handler, options) {\n  node.addEventListener(event, handler, options);\n  return () => node.removeEventListener(event, handler, options);\n}\nfunction attr(node, attribute, value) {\n  if (value == null) node.removeAttribute(attribute);else if (node.getAttribute(attribute) !== value) node.setAttribute(attribute, value);\n}\n/**\n * List of attributes that should always be set through the attr method,\n * because updating them through the property setter doesn't work reliably.\n * In the example of `width`/`height`, the problem is that the setter only\n * accepts numeric values, but the attribute can also be set to a string like `50%`.\n * If this list becomes too big, rethink this approach.\n */\nconst always_set_through_set_attribute = ['width', 'height'];\nfunction set_attributes(node, attributes) {\n  // @ts-ignore\n  const descriptors = Object.getOwnPropertyDescriptors(node.__proto__);\n  for (const key in attributes) {\n    if (attributes[key] == null) {\n      node.removeAttribute(key);\n    } else if (key === 'style') {\n      node.style.cssText = attributes[key];\n    } else if (key === '__value') {\n      node.value = node[key] = attributes[key];\n    } else if (descriptors[key] && descriptors[key].set && always_set_through_set_attribute.indexOf(key) === -1) {\n      node[key] = attributes[key];\n    } else {\n      attr(node, key, attributes[key]);\n    }\n  }\n}\nfunction children(element) {\n  return Array.from(element.childNodes);\n}\nfunction toggle_class(element, name, toggle) {\n  element.classList[toggle ? 'add' : 'remove'](name);\n}\nlet current_component;\nfunction set_current_component(component) {\n  current_component = component;\n}\nfunction get_current_component() {\n  if (!current_component) throw new Error('Function called outside component initialization');\n  return current_component;\n}\n/**\n * The `onMount` function schedules a callback to run as soon as the component has been mounted to the DOM.\n * It must be called during the component's initialisation (but doesn't need to live *inside* the component;\n * it can be called from an external module).\n *\n * `onMount` does not run inside a [server-side component](/docs#run-time-server-side-component-api).\n *\n * https://svelte.dev/docs#run-time-svelte-onmount\n */\nfunction onMount(fn) {\n  get_current_component().$$.on_mount.push(fn);\n}\n/**\n * Schedules a callback to run immediately after the component has been updated.\n *\n * The first time the callback runs will be after the initial `onMount`\n */\nfunction afterUpdate(fn) {\n  get_current_component().$$.after_update.push(fn);\n}\nconst dirty_components = [];\nconst binding_callbacks = [];\nlet render_callbacks = [];\nconst flush_callbacks = [];\nconst resolved_promise = /* @__PURE__ */Promise.resolve();\nlet update_scheduled = false;\nfunction schedule_update() {\n  if (!update_scheduled) {\n    update_scheduled = true;\n    resolved_promise.then(flush);\n  }\n}\nfunction add_render_callback(fn) {\n  render_callbacks.push(fn);\n}\n// flush() calls callbacks in this order:\n// 1. All beforeUpdate callbacks, in order: parents before children\n// 2. All bind:this callbacks, in reverse order: children before parents.\n// 3. All afterUpdate callbacks, in order: parents before children. EXCEPT\n//    for afterUpdates called during the initial onMount, which are called in\n//    reverse order: children before parents.\n// Since callbacks might update component values, which could trigger another\n// call to flush(), the following steps guard against this:\n// 1. During beforeUpdate, any updated components will be added to the\n//    dirty_components array and will cause a reentrant call to flush(). Because\n//    the flush index is kept outside the function, the reentrant call will pick\n//    up where the earlier call left off and go through all dirty components. The\n//    current_component value is saved and restored so that the reentrant call will\n//    not interfere with the \"parent\" flush() call.\n// 2. bind:this callbacks cannot trigger new flush() calls.\n// 3. During afterUpdate, any updated components will NOT have their afterUpdate\n//    callback called a second time; the seen_callbacks set, outside the flush()\n//    function, guarantees this behavior.\nconst seen_callbacks = new Set();\nlet flushidx = 0; // Do *not* move this inside the flush() function\nfunction flush() {\n  // Do not reenter flush while dirty components are updated, as this can\n  // result in an infinite loop. Instead, let the inner flush handle it.\n  // Reentrancy is ok afterwards for bindings etc.\n  if (flushidx !== 0) {\n    return;\n  }\n  const saved_component = current_component;\n  do {\n    // first, call beforeUpdate functions\n    // and update components\n    try {\n      while (flushidx < dirty_components.length) {\n        const component = dirty_components[flushidx];\n        flushidx++;\n        set_current_component(component);\n        update(component.$$);\n      }\n    } catch (e) {\n      // reset dirty state to not end up in a deadlocked state and then rethrow\n      dirty_components.length = 0;\n      flushidx = 0;\n      throw e;\n    }\n    set_current_component(null);\n    dirty_components.length = 0;\n    flushidx = 0;\n    while (binding_callbacks.length) binding_callbacks.pop()();\n    // then, once components are updated, call\n    // afterUpdate functions. This may cause\n    // subsequent updates...\n    for (let i = 0; i < render_callbacks.length; i += 1) {\n      const callback = render_callbacks[i];\n      if (!seen_callbacks.has(callback)) {\n        // ...so guard against infinite loops\n        seen_callbacks.add(callback);\n        callback();\n      }\n    }\n    render_callbacks.length = 0;\n  } while (dirty_components.length);\n  while (flush_callbacks.length) {\n    flush_callbacks.pop()();\n  }\n  update_scheduled = false;\n  seen_callbacks.clear();\n  set_current_component(saved_component);\n}\nfunction update($$) {\n  if ($$.fragment !== null) {\n    $$.update();\n    run_all($$.before_update);\n    const dirty = $$.dirty;\n    $$.dirty = [-1];\n    $$.fragment && $$.fragment.p($$.ctx, dirty);\n    $$.after_update.forEach(add_render_callback);\n  }\n}\n/**\n * Useful for example to execute remaining `afterUpdate` callbacks before executing `destroy`.\n */\nfunction flush_render_callbacks(fns) {\n  const filtered = [];\n  const targets = [];\n  render_callbacks.forEach(c => fns.indexOf(c) === -1 ? filtered.push(c) : targets.push(c));\n  targets.forEach(c => c());\n  render_callbacks = filtered;\n}\nconst outroing = new Set();\nlet outros;\nfunction group_outros() {\n  outros = {\n    r: 0,\n    c: [],\n    p: outros // parent group\n  };\n}\nfunction check_outros() {\n  if (!outros.r) {\n    run_all(outros.c);\n  }\n  outros = outros.p;\n}\nfunction transition_in(block, local) {\n  if (block && block.i) {\n    outroing.delete(block);\n    block.i(local);\n  }\n}\nfunction transition_out(block, local, detach, callback) {\n  if (block && block.o) {\n    if (outroing.has(block)) return;\n    outroing.add(block);\n    outros.c.push(() => {\n      outroing.delete(block);\n      if (callback) {\n        if (detach) block.d(1);\n        callback();\n      }\n    });\n    block.o(local);\n  } else if (callback) {\n    callback();\n  }\n}\nfunction get_spread_update(levels, updates) {\n  const update = {};\n  const to_null_out = {};\n  const accounted_for = {\n    $$scope: 1\n  };\n  let i = levels.length;\n  while (i--) {\n    const o = levels[i];\n    const n = updates[i];\n    if (n) {\n      for (const key in o) {\n        if (!(key in n)) to_null_out[key] = 1;\n      }\n      for (const key in n) {\n        if (!accounted_for[key]) {\n          update[key] = n[key];\n          accounted_for[key] = 1;\n        }\n      }\n      levels[i] = n;\n    } else {\n      for (const key in o) {\n        accounted_for[key] = 1;\n      }\n    }\n  }\n  for (const key in to_null_out) {\n    if (!(key in update)) update[key] = undefined;\n  }\n  return update;\n}\nfunction create_component(block) {\n  block && block.c();\n}\nfunction mount_component(component, target, anchor, customElement) {\n  const {\n    fragment,\n    after_update\n  } = component.$$;\n  fragment && fragment.m(target, anchor);\n  if (!customElement) {\n    // onMount happens before the initial afterUpdate\n    add_render_callback(() => {\n      const new_on_destroy = component.$$.on_mount.map(run).filter(is_function);\n      // if the component was destroyed immediately\n      // it will update the `$$.on_destroy` reference to `null`.\n      // the destructured on_destroy may still reference to the old array\n      if (component.$$.on_destroy) {\n        component.$$.on_destroy.push(...new_on_destroy);\n      } else {\n        // Edge case - component was destroyed immediately,\n        // most likely as a result of a binding initialising\n        run_all(new_on_destroy);\n      }\n      component.$$.on_mount = [];\n    });\n  }\n  after_update.forEach(add_render_callback);\n}\nfunction destroy_component(component, detaching) {\n  const $$ = component.$$;\n  if ($$.fragment !== null) {\n    flush_render_callbacks($$.after_update);\n    run_all($$.on_destroy);\n    $$.fragment && $$.fragment.d(detaching);\n    // TODO null out other refs, including component.$$ (but need to\n    // preserve final state?)\n    $$.on_destroy = $$.fragment = null;\n    $$.ctx = [];\n  }\n}\nfunction make_dirty(component, i) {\n  if (component.$$.dirty[0] === -1) {\n    dirty_components.push(component);\n    schedule_update();\n    component.$$.dirty.fill(0);\n  }\n  component.$$.dirty[i / 31 | 0] |= 1 << i % 31;\n}\nfunction init(component, options, instance, create_fragment, not_equal, props, append_styles, dirty = [-1]) {\n  const parent_component = current_component;\n  set_current_component(component);\n  const $$ = component.$$ = {\n    fragment: null,\n    ctx: [],\n    // state\n    props,\n    update: noop,\n    not_equal,\n    bound: blank_object(),\n    // lifecycle\n    on_mount: [],\n    on_destroy: [],\n    on_disconnect: [],\n    before_update: [],\n    after_update: [],\n    context: new Map(options.context || (parent_component ? parent_component.$$.context : [])),\n    // everything else\n    callbacks: blank_object(),\n    dirty,\n    skip_bound: false,\n    root: options.target || parent_component.$$.root\n  };\n  append_styles && append_styles($$.root);\n  let ready = false;\n  $$.ctx = instance ? instance(component, options.props || {}, (i, ret, ...rest) => {\n    const value = rest.length ? rest[0] : ret;\n    if ($$.ctx && not_equal($$.ctx[i], $$.ctx[i] = value)) {\n      if (!$$.skip_bound && $$.bound[i]) $$.bound[i](value);\n      if (ready) make_dirty(component, i);\n    }\n    return ret;\n  }) : [];\n  $$.update();\n  ready = true;\n  run_all($$.before_update);\n  // `false` as a special case of no DOM component\n  $$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n  if (options.target) {\n    if (options.hydrate) {\n      const nodes = children(options.target);\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      $$.fragment && $$.fragment.l(nodes);\n      nodes.forEach(detach);\n    } else {\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      $$.fragment && $$.fragment.c();\n    }\n    if (options.intro) transition_in(component.$$.fragment);\n    mount_component(component, options.target, options.anchor, options.customElement);\n    flush();\n  }\n  set_current_component(parent_component);\n}\n/**\n * Base class for Svelte components. Used when dev=false.\n */\nclass SvelteComponent {\n  $destroy() {\n    destroy_component(this, 1);\n    this.$destroy = noop;\n  }\n  $on(type, callback) {\n    if (!is_function(callback)) {\n      return noop;\n    }\n    const callbacks = this.$$.callbacks[type] || (this.$$.callbacks[type] = []);\n    callbacks.push(callback);\n    return () => {\n      const index = callbacks.indexOf(callback);\n      if (index !== -1) callbacks.splice(index, 1);\n    };\n  }\n  $set($$props) {\n    if (this.$$set && !is_empty($$props)) {\n      this.$$.skip_bound = true;\n      this.$$set($$props);\n      this.$$.skip_bound = false;\n    }\n  }\n}\n\n/* src/js/components/shepherd-button.svelte generated by Svelte v3.59.2 */\nfunction create_fragment$8(ctx) {\n  let button;\n  let button_aria_label_value;\n  let button_class_value;\n  let mounted;\n  let dispose;\n  return {\n    c() {\n      button = element(\"button\");\n      attr(button, \"aria-label\", button_aria_label_value = /*label*/ctx[3] ? /*label*/ctx[3] : null);\n      attr(button, \"class\", button_class_value = `${/*classes*/ctx[1] || ''} shepherd-button ${/*secondary*/ctx[4] ? 'shepherd-button-secondary' : ''}`);\n      button.disabled = /*disabled*/ctx[2];\n      attr(button, \"tabindex\", \"0\");\n    },\n    m(target, anchor) {\n      insert(target, button, anchor);\n      button.innerHTML = /*text*/ctx[5];\n      if (!mounted) {\n        dispose = listen(button, \"click\", function () {\n          if (is_function(/*action*/ctx[0])) /*action*/ctx[0].apply(this, arguments);\n        });\n        mounted = true;\n      }\n    },\n    p(new_ctx, [dirty]) {\n      ctx = new_ctx;\n      if (dirty & /*text*/32) button.innerHTML = /*text*/ctx[5];\n      if (dirty & /*label*/8 && button_aria_label_value !== (button_aria_label_value = /*label*/ctx[3] ? /*label*/ctx[3] : null)) {\n        attr(button, \"aria-label\", button_aria_label_value);\n      }\n      if (dirty & /*classes, secondary*/18 && button_class_value !== (button_class_value = `${/*classes*/ctx[1] || ''} shepherd-button ${/*secondary*/ctx[4] ? 'shepherd-button-secondary' : ''}`)) {\n        attr(button, \"class\", button_class_value);\n      }\n      if (dirty & /*disabled*/4) {\n        button.disabled = /*disabled*/ctx[2];\n      }\n    },\n    i: noop,\n    o: noop,\n    d(detaching) {\n      if (detaching) detach(button);\n      mounted = false;\n      dispose();\n    }\n  };\n}\nfunction instance$8($$self, $$props, $$invalidate) {\n  let {\n    config,\n    step\n  } = $$props;\n  let action, classes, disabled, label, secondary, text;\n  function getConfigOption(option) {\n    if (isFunction(option)) {\n      return option = option.call(step);\n    }\n    return option;\n  }\n  $$self.$$set = $$props => {\n    if ('config' in $$props) $$invalidate(6, config = $$props.config);\n    if ('step' in $$props) $$invalidate(7, step = $$props.step);\n  };\n  $$self.$$.update = () => {\n    if ($$self.$$.dirty & /*config, step*/192) {\n      {\n        $$invalidate(0, action = config.action ? config.action.bind(step.tour) : null);\n        $$invalidate(1, classes = config.classes);\n        $$invalidate(2, disabled = config.disabled ? getConfigOption(config.disabled) : false);\n        $$invalidate(3, label = config.label ? getConfigOption(config.label) : null);\n        $$invalidate(4, secondary = config.secondary);\n        $$invalidate(5, text = config.text ? getConfigOption(config.text) : null);\n      }\n    }\n  };\n  return [action, classes, disabled, label, secondary, text, config, step];\n}\nclass Shepherd_button extends SvelteComponent {\n  constructor(options) {\n    super();\n    init(this, options, instance$8, create_fragment$8, safe_not_equal, {\n      config: 6,\n      step: 7\n    });\n  }\n}\n\n/* src/js/components/shepherd-footer.svelte generated by Svelte v3.59.2 */\nfunction get_each_context(ctx, list, i) {\n  const child_ctx = ctx.slice();\n  child_ctx[2] = list[i];\n  return child_ctx;\n}\n\n// (24:4) {#if buttons}\nfunction create_if_block$3(ctx) {\n  let each_1_anchor;\n  let current;\n  let each_value = /*buttons*/ctx[1];\n  let each_blocks = [];\n  for (let i = 0; i < each_value.length; i += 1) {\n    each_blocks[i] = create_each_block(get_each_context(ctx, each_value, i));\n  }\n  const out = i => transition_out(each_blocks[i], 1, 1, () => {\n    each_blocks[i] = null;\n  });\n  return {\n    c() {\n      for (let i = 0; i < each_blocks.length; i += 1) {\n        each_blocks[i].c();\n      }\n      each_1_anchor = empty();\n    },\n    m(target, anchor) {\n      for (let i = 0; i < each_blocks.length; i += 1) {\n        if (each_blocks[i]) {\n          each_blocks[i].m(target, anchor);\n        }\n      }\n      insert(target, each_1_anchor, anchor);\n      current = true;\n    },\n    p(ctx, dirty) {\n      if (dirty & /*buttons, step*/3) {\n        each_value = /*buttons*/ctx[1];\n        let i;\n        for (i = 0; i < each_value.length; i += 1) {\n          const child_ctx = get_each_context(ctx, each_value, i);\n          if (each_blocks[i]) {\n            each_blocks[i].p(child_ctx, dirty);\n            transition_in(each_blocks[i], 1);\n          } else {\n            each_blocks[i] = create_each_block(child_ctx);\n            each_blocks[i].c();\n            transition_in(each_blocks[i], 1);\n            each_blocks[i].m(each_1_anchor.parentNode, each_1_anchor);\n          }\n        }\n        group_outros();\n        for (i = each_value.length; i < each_blocks.length; i += 1) {\n          out(i);\n        }\n        check_outros();\n      }\n    },\n    i(local) {\n      if (current) return;\n      for (let i = 0; i < each_value.length; i += 1) {\n        transition_in(each_blocks[i]);\n      }\n      current = true;\n    },\n    o(local) {\n      each_blocks = each_blocks.filter(Boolean);\n      for (let i = 0; i < each_blocks.length; i += 1) {\n        transition_out(each_blocks[i]);\n      }\n      current = false;\n    },\n    d(detaching) {\n      destroy_each(each_blocks, detaching);\n      if (detaching) detach(each_1_anchor);\n    }\n  };\n}\n\n// (25:8) {#each buttons as config}\nfunction create_each_block(ctx) {\n  let shepherdbutton;\n  let current;\n  shepherdbutton = new Shepherd_button({\n    props: {\n      config: /*config*/ctx[2],\n      step: /*step*/ctx[0]\n    }\n  });\n  return {\n    c() {\n      create_component(shepherdbutton.$$.fragment);\n    },\n    m(target, anchor) {\n      mount_component(shepherdbutton, target, anchor);\n      current = true;\n    },\n    p(ctx, dirty) {\n      const shepherdbutton_changes = {};\n      if (dirty & /*buttons*/2) shepherdbutton_changes.config = /*config*/ctx[2];\n      if (dirty & /*step*/1) shepherdbutton_changes.step = /*step*/ctx[0];\n      shepherdbutton.$set(shepherdbutton_changes);\n    },\n    i(local) {\n      if (current) return;\n      transition_in(shepherdbutton.$$.fragment, local);\n      current = true;\n    },\n    o(local) {\n      transition_out(shepherdbutton.$$.fragment, local);\n      current = false;\n    },\n    d(detaching) {\n      destroy_component(shepherdbutton, detaching);\n    }\n  };\n}\nfunction create_fragment$7(ctx) {\n  let footer;\n  let current;\n  let if_block = /*buttons*/ctx[1] && create_if_block$3(ctx);\n  return {\n    c() {\n      footer = element(\"footer\");\n      if (if_block) if_block.c();\n      attr(footer, \"class\", \"shepherd-footer\");\n    },\n    m(target, anchor) {\n      insert(target, footer, anchor);\n      if (if_block) if_block.m(footer, null);\n      current = true;\n    },\n    p(ctx, [dirty]) {\n      if (/*buttons*/ctx[1]) {\n        if (if_block) {\n          if_block.p(ctx, dirty);\n          if (dirty & /*buttons*/2) {\n            transition_in(if_block, 1);\n          }\n        } else {\n          if_block = create_if_block$3(ctx);\n          if_block.c();\n          transition_in(if_block, 1);\n          if_block.m(footer, null);\n        }\n      } else if (if_block) {\n        group_outros();\n        transition_out(if_block, 1, 1, () => {\n          if_block = null;\n        });\n        check_outros();\n      }\n    },\n    i(local) {\n      if (current) return;\n      transition_in(if_block);\n      current = true;\n    },\n    o(local) {\n      transition_out(if_block);\n      current = false;\n    },\n    d(detaching) {\n      if (detaching) detach(footer);\n      if (if_block) if_block.d();\n    }\n  };\n}\nfunction instance$7($$self, $$props, $$invalidate) {\n  let buttons;\n  let {\n    step\n  } = $$props;\n  $$self.$$set = $$props => {\n    if ('step' in $$props) $$invalidate(0, step = $$props.step);\n  };\n  $$self.$$.update = () => {\n    if ($$self.$$.dirty & /*step*/1) {\n      $$invalidate(1, buttons = step.options.buttons);\n    }\n  };\n  return [step, buttons];\n}\nclass Shepherd_footer extends SvelteComponent {\n  constructor(options) {\n    super();\n    init(this, options, instance$7, create_fragment$7, safe_not_equal, {\n      step: 0\n    });\n  }\n}\n\n/* src/js/components/shepherd-cancel-icon.svelte generated by Svelte v3.59.2 */\nfunction create_fragment$6(ctx) {\n  let button;\n  let span;\n  let button_aria_label_value;\n  let mounted;\n  let dispose;\n  return {\n    c() {\n      button = element(\"button\");\n      span = element(\"span\");\n      span.textContent = \"×\";\n      attr(span, \"aria-hidden\", \"true\");\n      attr(button, \"aria-label\", button_aria_label_value = /*cancelIcon*/ctx[0].label ? /*cancelIcon*/ctx[0].label : 'Close Tour');\n      attr(button, \"class\", \"shepherd-cancel-icon\");\n      attr(button, \"type\", \"button\");\n    },\n    m(target, anchor) {\n      insert(target, button, anchor);\n      append(button, span);\n      if (!mounted) {\n        dispose = listen(button, \"click\", /*handleCancelClick*/ctx[1]);\n        mounted = true;\n      }\n    },\n    p(ctx, [dirty]) {\n      if (dirty & /*cancelIcon*/1 && button_aria_label_value !== (button_aria_label_value = /*cancelIcon*/ctx[0].label ? /*cancelIcon*/ctx[0].label : 'Close Tour')) {\n        attr(button, \"aria-label\", button_aria_label_value);\n      }\n    },\n    i: noop,\n    o: noop,\n    d(detaching) {\n      if (detaching) detach(button);\n      mounted = false;\n      dispose();\n    }\n  };\n}\nfunction instance$6($$self, $$props, $$invalidate) {\n  let {\n    cancelIcon,\n    step\n  } = $$props;\n\n  /**\n  * Add a click listener to the cancel link that cancels the tour\n  */\n  const handleCancelClick = e => {\n    e.preventDefault();\n    step.cancel();\n  };\n  $$self.$$set = $$props => {\n    if ('cancelIcon' in $$props) $$invalidate(0, cancelIcon = $$props.cancelIcon);\n    if ('step' in $$props) $$invalidate(2, step = $$props.step);\n  };\n  return [cancelIcon, handleCancelClick, step];\n}\nclass Shepherd_cancel_icon extends SvelteComponent {\n  constructor(options) {\n    super();\n    init(this, options, instance$6, create_fragment$6, safe_not_equal, {\n      cancelIcon: 0,\n      step: 2\n    });\n  }\n}\n\n/* src/js/components/shepherd-title.svelte generated by Svelte v3.59.2 */\nfunction create_fragment$5(ctx) {\n  let h3;\n  return {\n    c() {\n      h3 = element(\"h3\");\n      attr(h3, \"id\", /*labelId*/ctx[1]);\n      attr(h3, \"class\", \"shepherd-title\");\n    },\n    m(target, anchor) {\n      insert(target, h3, anchor);\n      /*h3_binding*/\n      ctx[3](h3);\n    },\n    p(ctx, [dirty]) {\n      if (dirty & /*labelId*/2) {\n        attr(h3, \"id\", /*labelId*/ctx[1]);\n      }\n    },\n    i: noop,\n    o: noop,\n    d(detaching) {\n      if (detaching) detach(h3);\n      /*h3_binding*/\n      ctx[3](null);\n    }\n  };\n}\nfunction instance$5($$self, $$props, $$invalidate) {\n  let {\n    labelId,\n    element,\n    title\n  } = $$props;\n  afterUpdate(() => {\n    if (isFunction(title)) {\n      $$invalidate(2, title = title());\n    }\n    $$invalidate(0, element.innerHTML = title, element);\n  });\n  function h3_binding($$value) {\n    binding_callbacks[$$value ? 'unshift' : 'push'](() => {\n      element = $$value;\n      $$invalidate(0, element);\n    });\n  }\n  $$self.$$set = $$props => {\n    if ('labelId' in $$props) $$invalidate(1, labelId = $$props.labelId);\n    if ('element' in $$props) $$invalidate(0, element = $$props.element);\n    if ('title' in $$props) $$invalidate(2, title = $$props.title);\n  };\n  return [element, labelId, title, h3_binding];\n}\nclass Shepherd_title extends SvelteComponent {\n  constructor(options) {\n    super();\n    init(this, options, instance$5, create_fragment$5, safe_not_equal, {\n      labelId: 1,\n      element: 0,\n      title: 2\n    });\n  }\n}\n\n/* src/js/components/shepherd-header.svelte generated by Svelte v3.59.2 */\nfunction create_if_block_1$1(ctx) {\n  let shepherdtitle;\n  let current;\n  shepherdtitle = new Shepherd_title({\n    props: {\n      labelId: /*labelId*/ctx[0],\n      title: /*title*/ctx[2]\n    }\n  });\n  return {\n    c() {\n      create_component(shepherdtitle.$$.fragment);\n    },\n    m(target, anchor) {\n      mount_component(shepherdtitle, target, anchor);\n      current = true;\n    },\n    p(ctx, dirty) {\n      const shepherdtitle_changes = {};\n      if (dirty & /*labelId*/1) shepherdtitle_changes.labelId = /*labelId*/ctx[0];\n      if (dirty & /*title*/4) shepherdtitle_changes.title = /*title*/ctx[2];\n      shepherdtitle.$set(shepherdtitle_changes);\n    },\n    i(local) {\n      if (current) return;\n      transition_in(shepherdtitle.$$.fragment, local);\n      current = true;\n    },\n    o(local) {\n      transition_out(shepherdtitle.$$.fragment, local);\n      current = false;\n    },\n    d(detaching) {\n      destroy_component(shepherdtitle, detaching);\n    }\n  };\n}\n\n// (39:4) {#if cancelIcon && cancelIcon.enabled}\nfunction create_if_block$2(ctx) {\n  let shepherdcancelicon;\n  let current;\n  shepherdcancelicon = new Shepherd_cancel_icon({\n    props: {\n      cancelIcon: /*cancelIcon*/ctx[3],\n      step: /*step*/ctx[1]\n    }\n  });\n  return {\n    c() {\n      create_component(shepherdcancelicon.$$.fragment);\n    },\n    m(target, anchor) {\n      mount_component(shepherdcancelicon, target, anchor);\n      current = true;\n    },\n    p(ctx, dirty) {\n      const shepherdcancelicon_changes = {};\n      if (dirty & /*cancelIcon*/8) shepherdcancelicon_changes.cancelIcon = /*cancelIcon*/ctx[3];\n      if (dirty & /*step*/2) shepherdcancelicon_changes.step = /*step*/ctx[1];\n      shepherdcancelicon.$set(shepherdcancelicon_changes);\n    },\n    i(local) {\n      if (current) return;\n      transition_in(shepherdcancelicon.$$.fragment, local);\n      current = true;\n    },\n    o(local) {\n      transition_out(shepherdcancelicon.$$.fragment, local);\n      current = false;\n    },\n    d(detaching) {\n      destroy_component(shepherdcancelicon, detaching);\n    }\n  };\n}\nfunction create_fragment$4(ctx) {\n  let header;\n  let t;\n  let current;\n  let if_block0 = /*title*/ctx[2] && create_if_block_1$1(ctx);\n  let if_block1 = /*cancelIcon*/ctx[3] && /*cancelIcon*/ctx[3].enabled && create_if_block$2(ctx);\n  return {\n    c() {\n      header = element(\"header\");\n      if (if_block0) if_block0.c();\n      t = space();\n      if (if_block1) if_block1.c();\n      attr(header, \"class\", \"shepherd-header\");\n    },\n    m(target, anchor) {\n      insert(target, header, anchor);\n      if (if_block0) if_block0.m(header, null);\n      append(header, t);\n      if (if_block1) if_block1.m(header, null);\n      current = true;\n    },\n    p(ctx, [dirty]) {\n      if (/*title*/ctx[2]) {\n        if (if_block0) {\n          if_block0.p(ctx, dirty);\n          if (dirty & /*title*/4) {\n            transition_in(if_block0, 1);\n          }\n        } else {\n          if_block0 = create_if_block_1$1(ctx);\n          if_block0.c();\n          transition_in(if_block0, 1);\n          if_block0.m(header, t);\n        }\n      } else if (if_block0) {\n        group_outros();\n        transition_out(if_block0, 1, 1, () => {\n          if_block0 = null;\n        });\n        check_outros();\n      }\n      if (/*cancelIcon*/ctx[3] && /*cancelIcon*/ctx[3].enabled) {\n        if (if_block1) {\n          if_block1.p(ctx, dirty);\n          if (dirty & /*cancelIcon*/8) {\n            transition_in(if_block1, 1);\n          }\n        } else {\n          if_block1 = create_if_block$2(ctx);\n          if_block1.c();\n          transition_in(if_block1, 1);\n          if_block1.m(header, null);\n        }\n      } else if (if_block1) {\n        group_outros();\n        transition_out(if_block1, 1, 1, () => {\n          if_block1 = null;\n        });\n        check_outros();\n      }\n    },\n    i(local) {\n      if (current) return;\n      transition_in(if_block0);\n      transition_in(if_block1);\n      current = true;\n    },\n    o(local) {\n      transition_out(if_block0);\n      transition_out(if_block1);\n      current = false;\n    },\n    d(detaching) {\n      if (detaching) detach(header);\n      if (if_block0) if_block0.d();\n      if (if_block1) if_block1.d();\n    }\n  };\n}\nfunction instance$4($$self, $$props, $$invalidate) {\n  let {\n    labelId,\n    step\n  } = $$props;\n  let title, cancelIcon;\n  $$self.$$set = $$props => {\n    if ('labelId' in $$props) $$invalidate(0, labelId = $$props.labelId);\n    if ('step' in $$props) $$invalidate(1, step = $$props.step);\n  };\n  $$self.$$.update = () => {\n    if ($$self.$$.dirty & /*step*/2) {\n      {\n        $$invalidate(2, title = step.options.title);\n        $$invalidate(3, cancelIcon = step.options.cancelIcon);\n      }\n    }\n  };\n  return [labelId, step, title, cancelIcon];\n}\nclass Shepherd_header extends SvelteComponent {\n  constructor(options) {\n    super();\n    init(this, options, instance$4, create_fragment$4, safe_not_equal, {\n      labelId: 0,\n      step: 1\n    });\n  }\n}\n\n/* src/js/components/shepherd-text.svelte generated by Svelte v3.59.2 */\nfunction create_fragment$3(ctx) {\n  let div;\n  return {\n    c() {\n      div = element(\"div\");\n      attr(div, \"class\", \"shepherd-text\");\n      attr(div, \"id\", /*descriptionId*/ctx[1]);\n    },\n    m(target, anchor) {\n      insert(target, div, anchor);\n      /*div_binding*/\n      ctx[3](div);\n    },\n    p(ctx, [dirty]) {\n      if (dirty & /*descriptionId*/2) {\n        attr(div, \"id\", /*descriptionId*/ctx[1]);\n      }\n    },\n    i: noop,\n    o: noop,\n    d(detaching) {\n      if (detaching) detach(div);\n      /*div_binding*/\n      ctx[3](null);\n    }\n  };\n}\nfunction instance$3($$self, $$props, $$invalidate) {\n  let {\n    descriptionId,\n    element,\n    step\n  } = $$props;\n  afterUpdate(() => {\n    let {\n      text\n    } = step.options;\n    if (isFunction(text)) {\n      text = text.call(step);\n    }\n    if (isHTMLElement$1(text)) {\n      element.appendChild(text);\n    } else {\n      $$invalidate(0, element.innerHTML = text, element);\n    }\n  });\n  function div_binding($$value) {\n    binding_callbacks[$$value ? 'unshift' : 'push'](() => {\n      element = $$value;\n      $$invalidate(0, element);\n    });\n  }\n  $$self.$$set = $$props => {\n    if ('descriptionId' in $$props) $$invalidate(1, descriptionId = $$props.descriptionId);\n    if ('element' in $$props) $$invalidate(0, element = $$props.element);\n    if ('step' in $$props) $$invalidate(2, step = $$props.step);\n  };\n  return [element, descriptionId, step, div_binding];\n}\nclass Shepherd_text extends SvelteComponent {\n  constructor(options) {\n    super();\n    init(this, options, instance$3, create_fragment$3, safe_not_equal, {\n      descriptionId: 1,\n      element: 0,\n      step: 2\n    });\n  }\n}\n\n/* src/js/components/shepherd-content.svelte generated by Svelte v3.59.2 */\nfunction create_if_block_2(ctx) {\n  let shepherdheader;\n  let current;\n  shepherdheader = new Shepherd_header({\n    props: {\n      labelId: /*labelId*/ctx[1],\n      step: /*step*/ctx[2]\n    }\n  });\n  return {\n    c() {\n      create_component(shepherdheader.$$.fragment);\n    },\n    m(target, anchor) {\n      mount_component(shepherdheader, target, anchor);\n      current = true;\n    },\n    p(ctx, dirty) {\n      const shepherdheader_changes = {};\n      if (dirty & /*labelId*/2) shepherdheader_changes.labelId = /*labelId*/ctx[1];\n      if (dirty & /*step*/4) shepherdheader_changes.step = /*step*/ctx[2];\n      shepherdheader.$set(shepherdheader_changes);\n    },\n    i(local) {\n      if (current) return;\n      transition_in(shepherdheader.$$.fragment, local);\n      current = true;\n    },\n    o(local) {\n      transition_out(shepherdheader.$$.fragment, local);\n      current = false;\n    },\n    d(detaching) {\n      destroy_component(shepherdheader, detaching);\n    }\n  };\n}\n\n// (28:2) {#if !isUndefined(step.options.text)}\nfunction create_if_block_1(ctx) {\n  let shepherdtext;\n  let current;\n  shepherdtext = new Shepherd_text({\n    props: {\n      descriptionId: /*descriptionId*/ctx[0],\n      step: /*step*/ctx[2]\n    }\n  });\n  return {\n    c() {\n      create_component(shepherdtext.$$.fragment);\n    },\n    m(target, anchor) {\n      mount_component(shepherdtext, target, anchor);\n      current = true;\n    },\n    p(ctx, dirty) {\n      const shepherdtext_changes = {};\n      if (dirty & /*descriptionId*/1) shepherdtext_changes.descriptionId = /*descriptionId*/ctx[0];\n      if (dirty & /*step*/4) shepherdtext_changes.step = /*step*/ctx[2];\n      shepherdtext.$set(shepherdtext_changes);\n    },\n    i(local) {\n      if (current) return;\n      transition_in(shepherdtext.$$.fragment, local);\n      current = true;\n    },\n    o(local) {\n      transition_out(shepherdtext.$$.fragment, local);\n      current = false;\n    },\n    d(detaching) {\n      destroy_component(shepherdtext, detaching);\n    }\n  };\n}\n\n// (35:2) {#if Array.isArray(step.options.buttons) && step.options.buttons.length}\nfunction create_if_block$1(ctx) {\n  let shepherdfooter;\n  let current;\n  shepherdfooter = new Shepherd_footer({\n    props: {\n      step: /*step*/ctx[2]\n    }\n  });\n  return {\n    c() {\n      create_component(shepherdfooter.$$.fragment);\n    },\n    m(target, anchor) {\n      mount_component(shepherdfooter, target, anchor);\n      current = true;\n    },\n    p(ctx, dirty) {\n      const shepherdfooter_changes = {};\n      if (dirty & /*step*/4) shepherdfooter_changes.step = /*step*/ctx[2];\n      shepherdfooter.$set(shepherdfooter_changes);\n    },\n    i(local) {\n      if (current) return;\n      transition_in(shepherdfooter.$$.fragment, local);\n      current = true;\n    },\n    o(local) {\n      transition_out(shepherdfooter.$$.fragment, local);\n      current = false;\n    },\n    d(detaching) {\n      destroy_component(shepherdfooter, detaching);\n    }\n  };\n}\nfunction create_fragment$2(ctx) {\n  let div;\n  let show_if_2 = !isUndefined(/*step*/ctx[2].options.title) || /*step*/ctx[2].options.cancelIcon && /*step*/ctx[2].options.cancelIcon.enabled;\n  let t0;\n  let show_if_1 = !isUndefined(/*step*/ctx[2].options.text);\n  let t1;\n  let show_if = Array.isArray(/*step*/ctx[2].options.buttons) && /*step*/ctx[2].options.buttons.length;\n  let current;\n  let if_block0 = show_if_2 && create_if_block_2(ctx);\n  let if_block1 = show_if_1 && create_if_block_1(ctx);\n  let if_block2 = show_if && create_if_block$1(ctx);\n  return {\n    c() {\n      div = element(\"div\");\n      if (if_block0) if_block0.c();\n      t0 = space();\n      if (if_block1) if_block1.c();\n      t1 = space();\n      if (if_block2) if_block2.c();\n      attr(div, \"class\", \"shepherd-content\");\n    },\n    m(target, anchor) {\n      insert(target, div, anchor);\n      if (if_block0) if_block0.m(div, null);\n      append(div, t0);\n      if (if_block1) if_block1.m(div, null);\n      append(div, t1);\n      if (if_block2) if_block2.m(div, null);\n      current = true;\n    },\n    p(ctx, [dirty]) {\n      if (dirty & /*step*/4) show_if_2 = !isUndefined(/*step*/ctx[2].options.title) || /*step*/ctx[2].options.cancelIcon && /*step*/ctx[2].options.cancelIcon.enabled;\n      if (show_if_2) {\n        if (if_block0) {\n          if_block0.p(ctx, dirty);\n          if (dirty & /*step*/4) {\n            transition_in(if_block0, 1);\n          }\n        } else {\n          if_block0 = create_if_block_2(ctx);\n          if_block0.c();\n          transition_in(if_block0, 1);\n          if_block0.m(div, t0);\n        }\n      } else if (if_block0) {\n        group_outros();\n        transition_out(if_block0, 1, 1, () => {\n          if_block0 = null;\n        });\n        check_outros();\n      }\n      if (dirty & /*step*/4) show_if_1 = !isUndefined(/*step*/ctx[2].options.text);\n      if (show_if_1) {\n        if (if_block1) {\n          if_block1.p(ctx, dirty);\n          if (dirty & /*step*/4) {\n            transition_in(if_block1, 1);\n          }\n        } else {\n          if_block1 = create_if_block_1(ctx);\n          if_block1.c();\n          transition_in(if_block1, 1);\n          if_block1.m(div, t1);\n        }\n      } else if (if_block1) {\n        group_outros();\n        transition_out(if_block1, 1, 1, () => {\n          if_block1 = null;\n        });\n        check_outros();\n      }\n      if (dirty & /*step*/4) show_if = Array.isArray(/*step*/ctx[2].options.buttons) && /*step*/ctx[2].options.buttons.length;\n      if (show_if) {\n        if (if_block2) {\n          if_block2.p(ctx, dirty);\n          if (dirty & /*step*/4) {\n            transition_in(if_block2, 1);\n          }\n        } else {\n          if_block2 = create_if_block$1(ctx);\n          if_block2.c();\n          transition_in(if_block2, 1);\n          if_block2.m(div, null);\n        }\n      } else if (if_block2) {\n        group_outros();\n        transition_out(if_block2, 1, 1, () => {\n          if_block2 = null;\n        });\n        check_outros();\n      }\n    },\n    i(local) {\n      if (current) return;\n      transition_in(if_block0);\n      transition_in(if_block1);\n      transition_in(if_block2);\n      current = true;\n    },\n    o(local) {\n      transition_out(if_block0);\n      transition_out(if_block1);\n      transition_out(if_block2);\n      current = false;\n    },\n    d(detaching) {\n      if (detaching) detach(div);\n      if (if_block0) if_block0.d();\n      if (if_block1) if_block1.d();\n      if (if_block2) if_block2.d();\n    }\n  };\n}\nfunction instance$2($$self, $$props, $$invalidate) {\n  let {\n    descriptionId,\n    labelId,\n    step\n  } = $$props;\n  $$self.$$set = $$props => {\n    if ('descriptionId' in $$props) $$invalidate(0, descriptionId = $$props.descriptionId);\n    if ('labelId' in $$props) $$invalidate(1, labelId = $$props.labelId);\n    if ('step' in $$props) $$invalidate(2, step = $$props.step);\n  };\n  return [descriptionId, labelId, step];\n}\nclass Shepherd_content extends SvelteComponent {\n  constructor(options) {\n    super();\n    init(this, options, instance$2, create_fragment$2, safe_not_equal, {\n      descriptionId: 0,\n      labelId: 1,\n      step: 2\n    });\n  }\n}\n\n/* src/js/components/shepherd-element.svelte generated by Svelte v3.59.2 */\nfunction create_if_block(ctx) {\n  let div;\n  return {\n    c() {\n      div = element(\"div\");\n      attr(div, \"class\", \"shepherd-arrow\");\n      attr(div, \"data-popper-arrow\", \"\");\n    },\n    m(target, anchor) {\n      insert(target, div, anchor);\n    },\n    d(detaching) {\n      if (detaching) detach(div);\n    }\n  };\n}\nfunction create_fragment$1(ctx) {\n  let div;\n  let t;\n  let shepherdcontent;\n  let div_aria_describedby_value;\n  let div_aria_labelledby_value;\n  let current;\n  let mounted;\n  let dispose;\n  let if_block = /*step*/ctx[4].options.arrow && /*step*/ctx[4].options.attachTo && /*step*/ctx[4].options.attachTo.element && /*step*/ctx[4].options.attachTo.on && create_if_block();\n  shepherdcontent = new Shepherd_content({\n    props: {\n      descriptionId: /*descriptionId*/ctx[2],\n      labelId: /*labelId*/ctx[3],\n      step: /*step*/ctx[4]\n    }\n  });\n  let div_levels = [{\n    \"aria-describedby\": div_aria_describedby_value = !isUndefined(/*step*/ctx[4].options.text) ? /*descriptionId*/ctx[2] : null\n  }, {\n    \"aria-labelledby\": div_aria_labelledby_value = /*step*/ctx[4].options.title ? /*labelId*/ctx[3] : null\n  }, /*dataStepId*/ctx[1], {\n    role: \"dialog\"\n  }, {\n    tabindex: \"0\"\n  }];\n  let div_data = {};\n  for (let i = 0; i < div_levels.length; i += 1) {\n    div_data = assign(div_data, div_levels[i]);\n  }\n  return {\n    c() {\n      div = element(\"div\");\n      if (if_block) if_block.c();\n      t = space();\n      create_component(shepherdcontent.$$.fragment);\n      set_attributes(div, div_data);\n      toggle_class(div, \"shepherd-has-cancel-icon\", /*hasCancelIcon*/ctx[5]);\n      toggle_class(div, \"shepherd-has-title\", /*hasTitle*/ctx[6]);\n      toggle_class(div, \"shepherd-element\", true);\n    },\n    m(target, anchor) {\n      insert(target, div, anchor);\n      if (if_block) if_block.m(div, null);\n      append(div, t);\n      mount_component(shepherdcontent, div, null);\n      /*div_binding*/\n      ctx[13](div);\n      current = true;\n      if (!mounted) {\n        dispose = listen(div, \"keydown\", /*handleKeyDown*/ctx[7]);\n        mounted = true;\n      }\n    },\n    p(ctx, [dirty]) {\n      if (/*step*/ctx[4].options.arrow && /*step*/ctx[4].options.attachTo && /*step*/ctx[4].options.attachTo.element && /*step*/ctx[4].options.attachTo.on) {\n        if (if_block) ;else {\n          if_block = create_if_block();\n          if_block.c();\n          if_block.m(div, t);\n        }\n      } else if (if_block) {\n        if_block.d(1);\n        if_block = null;\n      }\n      const shepherdcontent_changes = {};\n      if (dirty & /*descriptionId*/4) shepherdcontent_changes.descriptionId = /*descriptionId*/ctx[2];\n      if (dirty & /*labelId*/8) shepherdcontent_changes.labelId = /*labelId*/ctx[3];\n      if (dirty & /*step*/16) shepherdcontent_changes.step = /*step*/ctx[4];\n      shepherdcontent.$set(shepherdcontent_changes);\n      set_attributes(div, div_data = get_spread_update(div_levels, [(!current || dirty & /*step, descriptionId*/20 && div_aria_describedby_value !== (div_aria_describedby_value = !isUndefined(/*step*/ctx[4].options.text) ? /*descriptionId*/ctx[2] : null)) && {\n        \"aria-describedby\": div_aria_describedby_value\n      }, (!current || dirty & /*step, labelId*/24 && div_aria_labelledby_value !== (div_aria_labelledby_value = /*step*/ctx[4].options.title ? /*labelId*/ctx[3] : null)) && {\n        \"aria-labelledby\": div_aria_labelledby_value\n      }, dirty & /*dataStepId*/2 && /*dataStepId*/ctx[1], {\n        role: \"dialog\"\n      }, {\n        tabindex: \"0\"\n      }]));\n      toggle_class(div, \"shepherd-has-cancel-icon\", /*hasCancelIcon*/ctx[5]);\n      toggle_class(div, \"shepherd-has-title\", /*hasTitle*/ctx[6]);\n      toggle_class(div, \"shepherd-element\", true);\n    },\n    i(local) {\n      if (current) return;\n      transition_in(shepherdcontent.$$.fragment, local);\n      current = true;\n    },\n    o(local) {\n      transition_out(shepherdcontent.$$.fragment, local);\n      current = false;\n    },\n    d(detaching) {\n      if (detaching) detach(div);\n      if (if_block) if_block.d();\n      destroy_component(shepherdcontent);\n      /*div_binding*/\n      ctx[13](null);\n      mounted = false;\n      dispose();\n    }\n  };\n}\nconst KEY_TAB = 9;\nconst KEY_ESC = 27;\nconst LEFT_ARROW = 37;\nconst RIGHT_ARROW = 39;\nfunction getClassesArray(classes) {\n  return classes.split(' ').filter(className => !!className.length);\n}\nfunction instance$1($$self, $$props, $$invalidate) {\n  let {\n    classPrefix,\n    element,\n    descriptionId,\n    firstFocusableElement,\n    focusableElements,\n    labelId,\n    lastFocusableElement,\n    step,\n    dataStepId\n  } = $$props;\n  let hasCancelIcon, hasTitle, classes;\n  const getElement = () => element;\n  onMount(() => {\n    // Get all elements that are focusable\n    $$invalidate(1, dataStepId = {\n      [`data-${classPrefix}shepherd-step-id`]: step.id\n    });\n    $$invalidate(9, focusableElements = element.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex=\"0\"]'));\n    $$invalidate(8, firstFocusableElement = focusableElements[0]);\n    $$invalidate(10, lastFocusableElement = focusableElements[focusableElements.length - 1]);\n  });\n  afterUpdate(() => {\n    if (classes !== step.options.classes) {\n      updateDynamicClasses();\n    }\n  });\n  function updateDynamicClasses() {\n    removeClasses(classes);\n    classes = step.options.classes;\n    addClasses(classes);\n  }\n  function removeClasses(classes) {\n    if (isString(classes)) {\n      const oldClasses = getClassesArray(classes);\n      if (oldClasses.length) {\n        element.classList.remove(...oldClasses);\n      }\n    }\n  }\n  function addClasses(classes) {\n    if (isString(classes)) {\n      const newClasses = getClassesArray(classes);\n      if (newClasses.length) {\n        element.classList.add(...newClasses);\n      }\n    }\n  }\n\n  /**\n  * Setup keydown events to allow closing the modal with ESC\n  *\n  * Borrowed from this great post! https://bitsofco.de/accessible-modal-dialog/\n  *\n  * @private\n  */\n  const handleKeyDown = e => {\n    const {\n      tour\n    } = step;\n    switch (e.keyCode) {\n      case KEY_TAB:\n        if (focusableElements.length === 0) {\n          e.preventDefault();\n          break;\n        }\n        // Backward tab\n        if (e.shiftKey) {\n          if (document.activeElement === firstFocusableElement || document.activeElement.classList.contains('shepherd-element')) {\n            e.preventDefault();\n            lastFocusableElement.focus();\n          }\n        } else {\n          if (document.activeElement === lastFocusableElement) {\n            e.preventDefault();\n            firstFocusableElement.focus();\n          }\n        }\n        break;\n      case KEY_ESC:\n        if (tour.options.exitOnEsc) {\n          e.stopPropagation();\n          step.cancel();\n        }\n        break;\n      case LEFT_ARROW:\n        if (tour.options.keyboardNavigation) {\n          e.stopPropagation();\n          tour.back();\n        }\n        break;\n      case RIGHT_ARROW:\n        if (tour.options.keyboardNavigation) {\n          e.stopPropagation();\n          tour.next();\n        }\n        break;\n    }\n  };\n  function div_binding($$value) {\n    binding_callbacks[$$value ? 'unshift' : 'push'](() => {\n      element = $$value;\n      $$invalidate(0, element);\n    });\n  }\n  $$self.$$set = $$props => {\n    if ('classPrefix' in $$props) $$invalidate(11, classPrefix = $$props.classPrefix);\n    if ('element' in $$props) $$invalidate(0, element = $$props.element);\n    if ('descriptionId' in $$props) $$invalidate(2, descriptionId = $$props.descriptionId);\n    if ('firstFocusableElement' in $$props) $$invalidate(8, firstFocusableElement = $$props.firstFocusableElement);\n    if ('focusableElements' in $$props) $$invalidate(9, focusableElements = $$props.focusableElements);\n    if ('labelId' in $$props) $$invalidate(3, labelId = $$props.labelId);\n    if ('lastFocusableElement' in $$props) $$invalidate(10, lastFocusableElement = $$props.lastFocusableElement);\n    if ('step' in $$props) $$invalidate(4, step = $$props.step);\n    if ('dataStepId' in $$props) $$invalidate(1, dataStepId = $$props.dataStepId);\n  };\n  $$self.$$.update = () => {\n    if ($$self.$$.dirty & /*step*/16) {\n      {\n        $$invalidate(5, hasCancelIcon = step.options && step.options.cancelIcon && step.options.cancelIcon.enabled);\n        $$invalidate(6, hasTitle = step.options && step.options.title);\n      }\n    }\n  };\n  return [element, dataStepId, descriptionId, labelId, step, hasCancelIcon, hasTitle, handleKeyDown, firstFocusableElement, focusableElements, lastFocusableElement, classPrefix, getElement, div_binding];\n}\nclass Shepherd_element extends SvelteComponent {\n  constructor(options) {\n    super();\n    init(this, options, instance$1, create_fragment$1, safe_not_equal, {\n      classPrefix: 11,\n      element: 0,\n      descriptionId: 2,\n      firstFocusableElement: 8,\n      focusableElements: 9,\n      labelId: 3,\n      lastFocusableElement: 10,\n      step: 4,\n      dataStepId: 1,\n      getElement: 12\n    });\n  }\n  get getElement() {\n    return this.$$.ctx[12];\n  }\n}\n\n/**\n * A class representing steps to be added to a tour.\n * @extends {Evented}\n */\nclass Step extends Evented {\n  /**\n   * Create a step\n   * @param {Tour} tour The tour for the step\n   * @param {object} options The options for the step\n   * @param {boolean} options.arrow Whether to display the arrow for the tooltip or not. Defaults to `true`.\n   * @param {object} options.attachTo The element the step should be attached to on the page.\n   * An object with properties `element` and `on`.\n   *\n   * ```js\n   * const step = new Step(tour, {\n   *   attachTo: { element: '.some .selector-path', on: 'left' },\n   *   ...moreOptions\n   * });\n   * ```\n   *\n   * If you don’t specify an `attachTo` the element will appear in the middle of the screen. The same will happen if your `attachTo.element` callback returns `null`, `undefined`, or a selector that does not exist in the DOM.\n   * If you omit the `on` portion of `attachTo`, the element will still be highlighted, but the tooltip will appear\n   * in the middle of the screen, without an arrow pointing to the target.\n   * If the element to highlight does not yet exist while instantiating tour steps, you may use lazy evaluation by supplying a function to `attachTo.element`. The function will be called in the `before-show` phase.\n   * @param {string|HTMLElement|function} options.attachTo.element An element selector string, DOM element, or a function (returning a selector, a DOM element, `null` or `undefined`).\n   * @param {string} options.attachTo.on The optional direction to place the FloatingUI tooltip relative to the element.\n   *   - Possible string values: 'top', 'top-start', 'top-end', 'bottom', 'bottom-start', 'bottom-end', 'right', 'right-start', 'right-end', 'left', 'left-start', 'left-end'\n   * @param {Object} options.advanceOn An action on the page which should advance shepherd to the next step.\n   * It should be an object with a string `selector` and an `event` name\n   * ```js\n   * const step = new Step(tour, {\n   *   advanceOn: { selector: '.some .selector-path', event: 'click' },\n   *   ...moreOptions\n   * });\n   * ```\n   * `event` doesn’t have to be an event inside the tour, it can be any event fired on any element on the page.\n   * You can also always manually advance the Tour by calling `myTour.next()`.\n   * @param {function} options.beforeShowPromise A function that returns a promise.\n   * When the promise resolves, the rest of the `show` code for the step will execute.\n   * @param {Object[]} options.buttons An array of buttons to add to the step. These will be rendered in a\n   * footer below the main body text.\n   * @param {function} options.buttons.button.action A function executed when the button is clicked on.\n   * It is automatically bound to the `tour` the step is associated with, so things like `this.next` will\n   * work inside the action.\n   * You can use action to skip steps or navigate to specific steps, with something like:\n   * ```js\n   * action() {\n   *   return this.show('some_step_name');\n   * }\n   * ```\n   * @param {string} options.buttons.button.classes Extra classes to apply to the `<a>`\n   * @param {boolean} options.buttons.button.disabled Should the button be disabled?\n   * @param {string} options.buttons.button.label The aria-label text of the button\n   * @param {boolean} options.buttons.button.secondary If true, a shepherd-button-secondary class is applied to the button\n   * @param {string} options.buttons.button.text The HTML text of the button\n   * @param {boolean} options.canClickTarget A boolean, that when set to false, will set `pointer-events: none` on the target\n   * @param {object} options.cancelIcon Options for the cancel icon\n   * @param {boolean} options.cancelIcon.enabled Should a cancel “✕” be shown in the header of the step?\n   * @param {string} options.cancelIcon.label The label to add for `aria-label`\n   * @param {string} options.classes A string of extra classes to add to the step's content element.\n   * @param {string} options.highlightClass An extra class to apply to the `attachTo` element when it is\n   * highlighted (that is, when its step is active). You can then target that selector in your CSS.\n   * @param {string} options.id The string to use as the `id` for the step.\n   * @param {number} options.modalOverlayOpeningPadding An amount of padding to add around the modal overlay opening\n   * @param {number | { topLeft: number, bottomLeft: number, bottomRight: number, topRight: number }} options.modalOverlayOpeningRadius An amount of border radius to add around the modal overlay opening\n   * @param {object} options.floatingUIOptions Extra options to pass to FloatingUI\n   * @param {boolean|Object} options.scrollTo Should the element be scrolled to when this step is shown? If true, uses the default `scrollIntoView`,\n   * if an object, passes that object as the params to `scrollIntoView` i.e. `{behavior: 'smooth', block: 'center'}`\n   * @param {function} options.scrollToHandler A function that lets you override the default scrollTo behavior and\n   * define a custom action to do the scrolling, and possibly other logic.\n   * @param {function} options.showOn A function that, when it returns `true`, will show the step.\n   * If it returns false, the step will be skipped.\n   * @param {string} options.text The text in the body of the step. It can be one of three types:\n   * ```\n   * - HTML string\n   * - `HTMLElement` object\n   * - `Function` to be executed when the step is built. It must return one the two options above.\n   * ```\n   * @param {string} options.title The step's title. It becomes an `h3` at the top of the step. It can be one of two types:\n   * ```\n   * - HTML string\n   * - `Function` to be executed when the step is built. It must return HTML string.\n   * ```\n   * @param {object} options.when You can define `show`, `hide`, etc events inside `when`. For example:\n   * ```js\n   * when: {\n   *   show: function() {\n   *     window.scrollTo(0, 0);\n   *   }\n   * }\n   * ```\n   * @return {Step} The newly created Step instance\n   */\n  constructor(tour, options = {}) {\n    super(tour, options);\n    this.tour = tour;\n    this.classPrefix = this.tour.options ? normalizePrefix(this.tour.options.classPrefix) : '';\n    this.styles = tour.styles;\n\n    /**\n     * Resolved attachTo options. Due to lazy evaluation, we only resolve the options during `before-show` phase.\n     * Do not use this directly, use the _getResolvedAttachToOptions method instead.\n     * @type {null|{}|{element, to}}\n     * @private\n     */\n    this._resolvedAttachTo = null;\n    autoBind(this);\n    this._setOptions(options);\n    return this;\n  }\n\n  /**\n   * Cancel the tour\n   * Triggers the `cancel` event\n   */\n  cancel() {\n    this.tour.cancel();\n    this.trigger('cancel');\n  }\n\n  /**\n   * Complete the tour\n   * Triggers the `complete` event\n   */\n  complete() {\n    this.tour.complete();\n    this.trigger('complete');\n  }\n\n  /**\n   * Remove the step, delete the step's element, and destroy the FloatingUI instance for the step.\n   * Triggers `destroy` event\n   */\n  destroy() {\n    destroyTooltip(this);\n    if (isHTMLElement$1(this.el)) {\n      this.el.remove();\n      this.el = null;\n    }\n    this._updateStepTargetOnHide();\n    this.trigger('destroy');\n  }\n\n  /**\n   * Returns the tour for the step\n   * @return {Tour} The tour instance\n   */\n  getTour() {\n    return this.tour;\n  }\n\n  /**\n   * Hide the step\n   */\n  hide() {\n    this.tour.modal.hide();\n    this.trigger('before-hide');\n    if (this.el) {\n      this.el.hidden = true;\n    }\n    this._updateStepTargetOnHide();\n    this.trigger('hide');\n  }\n\n  /**\n   * Resolves attachTo options.\n   * @returns {{}|{element, on}}\n   * @private\n   */\n  _resolveAttachToOptions() {\n    this._resolvedAttachTo = parseAttachTo(this);\n    return this._resolvedAttachTo;\n  }\n\n  /**\n   * A selector for resolved attachTo options.\n   * @returns {{}|{element, on}}\n   * @private\n   */\n  _getResolvedAttachToOptions() {\n    if (this._resolvedAttachTo === null) {\n      return this._resolveAttachToOptions();\n    }\n    return this._resolvedAttachTo;\n  }\n\n  /**\n   * Check if the step is open and visible\n   * @return {boolean} True if the step is open and visible\n   */\n  isOpen() {\n    return Boolean(this.el && !this.el.hidden);\n  }\n\n  /**\n   * Wraps `_show` and ensures `beforeShowPromise` resolves before calling show\n   * @return {*|Promise}\n   */\n  show() {\n    if (isFunction(this.options.beforeShowPromise)) {\n      return Promise.resolve(this.options.beforeShowPromise()).then(() => this._show());\n    }\n    return Promise.resolve(this._show());\n  }\n\n  /**\n   * Updates the options of the step.\n   *\n   * @param {Object} options The options for the step\n   */\n  updateStepOptions(options) {\n    Object.assign(this.options, options);\n    if (this.shepherdElementComponent) {\n      this.shepherdElementComponent.$set({\n        step: this\n      });\n    }\n  }\n\n  /**\n   * Returns the element for the step\n   * @return {HTMLElement|null|undefined} The element instance. undefined if it has never been shown, null if it has been destroyed\n   */\n  getElement() {\n    return this.el;\n  }\n\n  /**\n   * Returns the target for the step\n   * @return {HTMLElement|null|undefined} The element instance. undefined if it has never been shown, null if query string has not been found\n   */\n  getTarget() {\n    return this.target;\n  }\n\n  /**\n   * Creates Shepherd element for step based on options\n   *\n   * @return {Element} The DOM element for the step tooltip\n   * @private\n   */\n  _createTooltipContent() {\n    const descriptionId = `${this.id}-description`;\n    const labelId = `${this.id}-label`;\n    this.shepherdElementComponent = new Shepherd_element({\n      target: this.tour.options.stepsContainer || document.body,\n      props: {\n        classPrefix: this.classPrefix,\n        descriptionId,\n        labelId,\n        step: this,\n        styles: this.styles\n      }\n    });\n    return this.shepherdElementComponent.getElement();\n  }\n\n  /**\n   * If a custom scrollToHandler is defined, call that, otherwise do the generic\n   * scrollIntoView call.\n   *\n   * @param {boolean|Object} scrollToOptions If true, uses the default `scrollIntoView`,\n   * if an object, passes that object as the params to `scrollIntoView` i.e. `{ behavior: 'smooth', block: 'center' }`\n   * @private\n   */\n  _scrollTo(scrollToOptions) {\n    const {\n      element\n    } = this._getResolvedAttachToOptions();\n    if (isFunction(this.options.scrollToHandler)) {\n      this.options.scrollToHandler(element);\n    } else if (isElement$1(element) && typeof element.scrollIntoView === 'function') {\n      element.scrollIntoView(scrollToOptions);\n    }\n  }\n\n  /**\n   * _getClassOptions gets all possible classes for the step\n   * @param {Object} stepOptions The step specific options\n   * @returns {String} unique string from array of classes\n   * @private\n   */\n  _getClassOptions(stepOptions) {\n    const defaultStepOptions = this.tour && this.tour.options && this.tour.options.defaultStepOptions;\n    const stepClasses = stepOptions.classes ? stepOptions.classes : '';\n    const defaultStepOptionsClasses = defaultStepOptions && defaultStepOptions.classes ? defaultStepOptions.classes : '';\n    const allClasses = [...stepClasses.split(' '), ...defaultStepOptionsClasses.split(' ')];\n    const uniqClasses = new Set(allClasses);\n    return Array.from(uniqClasses).join(' ').trim();\n  }\n\n  /**\n   * Sets the options for the step, maps `when` to events, sets up buttons\n   * @param {Object} options The options for the step\n   * @private\n   */\n  _setOptions(options = {}) {\n    let tourOptions = this.tour && this.tour.options && this.tour.options.defaultStepOptions;\n    tourOptions = cjs({}, tourOptions || {});\n    this.options = Object.assign({\n      arrow: true\n    }, tourOptions, options, mergeTooltipConfig(tourOptions, options));\n    const {\n      when\n    } = this.options;\n    this.options.classes = this._getClassOptions(options);\n    this.destroy();\n    this.id = this.options.id || `step-${uuid()}`;\n    if (when) {\n      Object.keys(when).forEach(event => {\n        this.on(event, when[event], this);\n      });\n    }\n  }\n\n  /**\n   * Create the element and set up the FloatingUI instance\n   * @private\n   */\n  _setupElements() {\n    if (!isUndefined(this.el)) {\n      this.destroy();\n    }\n    this.el = this._createTooltipContent();\n    if (this.options.advanceOn) {\n      bindAdvance(this);\n    }\n\n    // The tooltip implementation details are handled outside of the Step\n    // object.\n    setupTooltip(this);\n  }\n\n  /**\n   * Triggers `before-show`, generates the tooltip DOM content,\n   * sets up a FloatingUI instance for the tooltip, then triggers `show`.\n   * @private\n   */\n  _show() {\n    this.trigger('before-show');\n\n    // Force resolve to make sure the options are updated on subsequent shows.\n    this._resolveAttachToOptions();\n    this._setupElements();\n    if (!this.tour.modal) {\n      this.tour._setupModal();\n    }\n    this.tour.modal.setupForStep(this);\n    this._styleTargetElementForStep(this);\n    this.el.hidden = false;\n\n    // start scrolling to target before showing the step\n    if (this.options.scrollTo) {\n      setTimeout(() => {\n        this._scrollTo(this.options.scrollTo);\n      });\n    }\n    this.el.hidden = false;\n    const content = this.shepherdElementComponent.getElement();\n    const target = this.target || document.body;\n    target.classList.add(`${this.classPrefix}shepherd-enabled`);\n    target.classList.add(`${this.classPrefix}shepherd-target`);\n    content.classList.add('shepherd-enabled');\n    this.trigger('show');\n  }\n\n  /**\n   * Modulates the styles of the passed step's target element, based on the step's options and\n   * the tour's `modal` option, to visually emphasize the element\n   *\n   * @param step The step object that attaches to the element\n   * @private\n   */\n  _styleTargetElementForStep(step) {\n    const targetElement = step.target;\n    if (!targetElement) {\n      return;\n    }\n    if (step.options.highlightClass) {\n      targetElement.classList.add(step.options.highlightClass);\n    }\n    targetElement.classList.remove('shepherd-target-click-disabled');\n    if (step.options.canClickTarget === false) {\n      targetElement.classList.add('shepherd-target-click-disabled');\n    }\n  }\n\n  /**\n   * When a step is hidden, remove the highlightClass and 'shepherd-enabled'\n   * and 'shepherd-target' classes\n   * @private\n   */\n  _updateStepTargetOnHide() {\n    const target = this.target || document.body;\n    if (this.options.highlightClass) {\n      target.classList.remove(this.options.highlightClass);\n    }\n    target.classList.remove('shepherd-target-click-disabled', `${this.classPrefix}shepherd-enabled`, `${this.classPrefix}shepherd-target`);\n  }\n}\n\n/**\n * Cleanup the steps and set pointerEvents back to 'auto'\n * @param tour The tour object\n */\nfunction cleanupSteps(tour) {\n  if (tour) {\n    const {\n      steps\n    } = tour;\n    steps.forEach(step => {\n      if (step.options && step.options.canClickTarget === false && step.options.attachTo) {\n        if (step.target instanceof HTMLElement) {\n          step.target.classList.remove('shepherd-target-click-disabled');\n        }\n      }\n    });\n  }\n}\n\n/**\n * Generates the svg path data for a rounded rectangle overlay\n * @param {Object} dimension - Dimensions of rectangle.\n * @param {number} width - Width.\n * @param {number} height - Height.\n * @param {number} [x=0] - Offset from top left corner in x axis. default 0.\n * @param {number} [y=0] - Offset from top left corner in y axis. default 0.\n * @param {number | { topLeft: number, topRight: number, bottomRight: number, bottomLeft: number }} [r=0] - Corner Radius. Keep this smaller than half of width or height.\n * @returns {string} - Rounded rectangle overlay path data.\n */\nfunction makeOverlayPath({\n  width,\n  height,\n  x = 0,\n  y = 0,\n  r = 0\n}) {\n  const {\n    innerWidth: w,\n    innerHeight: h\n  } = window;\n  const {\n    topLeft = 0,\n    topRight = 0,\n    bottomRight = 0,\n    bottomLeft = 0\n  } = typeof r === 'number' ? {\n    topLeft: r,\n    topRight: r,\n    bottomRight: r,\n    bottomLeft: r\n  } : r;\n  return `M${w},${h}\\\nH0\\\nV0\\\nH${w}\\\nV${h}\\\nZ\\\nM${x + topLeft},${y}\\\na${topLeft},${topLeft},0,0,0-${topLeft},${topLeft}\\\nV${height + y - bottomLeft}\\\na${bottomLeft},${bottomLeft},0,0,0,${bottomLeft},${bottomLeft}\\\nH${width + x - bottomRight}\\\na${bottomRight},${bottomRight},0,0,0,${bottomRight}-${bottomRight}\\\nV${y + topRight}\\\na${topRight},${topRight},0,0,0-${topRight}-${topRight}\\\nZ`;\n}\n\n/* src/js/components/shepherd-modal.svelte generated by Svelte v3.59.2 */\nfunction create_fragment(ctx) {\n  let svg;\n  let path;\n  let svg_class_value;\n  let mounted;\n  let dispose;\n  return {\n    c() {\n      svg = svg_element(\"svg\");\n      path = svg_element(\"path\");\n      attr(path, \"d\", /*pathDefinition*/ctx[2]);\n      attr(svg, \"class\", svg_class_value = `${/*modalIsVisible*/ctx[1] ? 'shepherd-modal-is-visible' : ''} shepherd-modal-overlay-container`);\n    },\n    m(target, anchor) {\n      insert(target, svg, anchor);\n      append(svg, path);\n      /*svg_binding*/\n      ctx[11](svg);\n      if (!mounted) {\n        dispose = listen(svg, \"touchmove\", /*_preventModalOverlayTouch*/ctx[3]);\n        mounted = true;\n      }\n    },\n    p(ctx, [dirty]) {\n      if (dirty & /*pathDefinition*/4) {\n        attr(path, \"d\", /*pathDefinition*/ctx[2]);\n      }\n      if (dirty & /*modalIsVisible*/2 && svg_class_value !== (svg_class_value = `${/*modalIsVisible*/ctx[1] ? 'shepherd-modal-is-visible' : ''} shepherd-modal-overlay-container`)) {\n        attr(svg, \"class\", svg_class_value);\n      }\n    },\n    i: noop,\n    o: noop,\n    d(detaching) {\n      if (detaching) detach(svg);\n      /*svg_binding*/\n      ctx[11](null);\n      mounted = false;\n      dispose();\n    }\n  };\n}\nfunction _getScrollParent(element) {\n  if (!element) {\n    return null;\n  }\n  const isHtmlElement = element instanceof HTMLElement;\n  const overflowY = isHtmlElement && window.getComputedStyle(element).overflowY;\n  const isScrollable = overflowY !== 'hidden' && overflowY !== 'visible';\n  if (isScrollable && element.scrollHeight >= element.clientHeight) {\n    return element;\n  }\n  return _getScrollParent(element.parentElement);\n}\n\n/**\n * Get the visible height of the target element relative to its scrollParent.\n * If there is no scroll parent, the height of the element is returned.\n *\n * @param {HTMLElement} element The target element\n * @param {HTMLElement} [scrollParent] The scrollable parent element\n * @returns {{y: number, height: number}}\n * @private\n */\nfunction _getVisibleHeight(element, scrollParent) {\n  const elementRect = element.getBoundingClientRect();\n  let top = elementRect.y || elementRect.top;\n  let bottom = elementRect.bottom || top + elementRect.height;\n  if (scrollParent) {\n    const scrollRect = scrollParent.getBoundingClientRect();\n    const scrollTop = scrollRect.y || scrollRect.top;\n    const scrollBottom = scrollRect.bottom || scrollTop + scrollRect.height;\n    top = Math.max(top, scrollTop);\n    bottom = Math.min(bottom, scrollBottom);\n  }\n  const height = Math.max(bottom - top, 0); // Default to 0 if height is negative\n  return {\n    y: top,\n    height\n  };\n}\nfunction instance($$self, $$props, $$invalidate) {\n  let {\n    element,\n    openingProperties\n  } = $$props;\n  uuid();\n  let modalIsVisible = false;\n  let rafId = undefined;\n  let pathDefinition;\n  closeModalOpening();\n  const getElement = () => element;\n  function closeModalOpening() {\n    $$invalidate(4, openingProperties = {\n      width: 0,\n      height: 0,\n      x: 0,\n      y: 0,\n      r: 0\n    });\n  }\n  function hide() {\n    $$invalidate(1, modalIsVisible = false);\n\n    // Ensure we cleanup all event listeners when we hide the modal\n    _cleanupStepEventListeners();\n  }\n  function positionModal(modalOverlayOpeningPadding = 0, modalOverlayOpeningRadius = 0, scrollParent, targetElement) {\n    if (targetElement) {\n      const {\n        y,\n        height\n      } = _getVisibleHeight(targetElement, scrollParent);\n      const {\n        x,\n        width,\n        left\n      } = targetElement.getBoundingClientRect();\n\n      // getBoundingClientRect is not consistent. Some browsers use x and y, while others use left and top\n      $$invalidate(4, openingProperties = {\n        width: width + modalOverlayOpeningPadding * 2,\n        height: height + modalOverlayOpeningPadding * 2,\n        x: (x || left) - modalOverlayOpeningPadding,\n        y: y - modalOverlayOpeningPadding,\n        r: modalOverlayOpeningRadius\n      });\n    } else {\n      closeModalOpening();\n    }\n  }\n  function setupForStep(step) {\n    // Ensure we move listeners from the previous step, before we setup new ones\n    _cleanupStepEventListeners();\n    if (step.tour.options.useModalOverlay) {\n      _styleForStep(step);\n      show();\n    } else {\n      hide();\n    }\n  }\n  function show() {\n    $$invalidate(1, modalIsVisible = true);\n  }\n  const _preventModalBodyTouch = e => {\n    e.preventDefault();\n  };\n  const _preventModalOverlayTouch = e => {\n    e.stopPropagation();\n  };\n\n  /**\n  * Add touchmove event listener\n  * @private\n  */\n  function _addStepEventListeners() {\n    // Prevents window from moving on touch.\n    window.addEventListener('touchmove', _preventModalBodyTouch, {\n      passive: false\n    });\n  }\n\n  /**\n  * Cancel the requestAnimationFrame loop and remove touchmove event listeners\n  * @private\n  */\n  function _cleanupStepEventListeners() {\n    if (rafId) {\n      cancelAnimationFrame(rafId);\n      rafId = undefined;\n    }\n    window.removeEventListener('touchmove', _preventModalBodyTouch, {\n      passive: false\n    });\n  }\n\n  /**\n  * Style the modal for the step\n  * @param {Step} step The step to style the opening for\n  * @private\n  */\n  function _styleForStep(step) {\n    const {\n      modalOverlayOpeningPadding,\n      modalOverlayOpeningRadius\n    } = step.options;\n    const scrollParent = _getScrollParent(step.target);\n\n    // Setup recursive function to call requestAnimationFrame to update the modal opening position\n    const rafLoop = () => {\n      rafId = undefined;\n      positionModal(modalOverlayOpeningPadding, modalOverlayOpeningRadius, scrollParent, step.target);\n      rafId = requestAnimationFrame(rafLoop);\n    };\n    rafLoop();\n    _addStepEventListeners();\n  }\n  function svg_binding($$value) {\n    binding_callbacks[$$value ? 'unshift' : 'push'](() => {\n      element = $$value;\n      $$invalidate(0, element);\n    });\n  }\n  $$self.$$set = $$props => {\n    if ('element' in $$props) $$invalidate(0, element = $$props.element);\n    if ('openingProperties' in $$props) $$invalidate(4, openingProperties = $$props.openingProperties);\n  };\n  $$self.$$.update = () => {\n    if ($$self.$$.dirty & /*openingProperties*/16) {\n      $$invalidate(2, pathDefinition = makeOverlayPath(openingProperties));\n    }\n  };\n  return [element, modalIsVisible, pathDefinition, _preventModalOverlayTouch, openingProperties, getElement, closeModalOpening, hide, positionModal, setupForStep, show, svg_binding];\n}\nclass Shepherd_modal extends SvelteComponent {\n  constructor(options) {\n    super();\n    init(this, options, instance, create_fragment, safe_not_equal, {\n      element: 0,\n      openingProperties: 4,\n      getElement: 5,\n      closeModalOpening: 6,\n      hide: 7,\n      positionModal: 8,\n      setupForStep: 9,\n      show: 10\n    });\n  }\n  get getElement() {\n    return this.$$.ctx[5];\n  }\n  get closeModalOpening() {\n    return this.$$.ctx[6];\n  }\n  get hide() {\n    return this.$$.ctx[7];\n  }\n  get positionModal() {\n    return this.$$.ctx[8];\n  }\n  get setupForStep() {\n    return this.$$.ctx[9];\n  }\n  get show() {\n    return this.$$.ctx[10];\n  }\n}\nconst Shepherd = new Evented();\n\n/**\n * Class representing the site tour\n * @extends {Evented}\n */\nclass Tour extends Evented {\n  /**\n   * @param {Object} options The options for the tour\n   * @param {boolean | function(): boolean | Promise<boolean> | function(): Promise<boolean>} options.confirmCancel If true, will issue a `window.confirm` before cancelling.\n   * If it is a function(support Async Function), it will be called and wait for the return value, and will only be cancelled if the value returned is true\n   * @param {string} options.confirmCancelMessage The message to display in the `window.confirm` dialog\n   * @param {string} options.classPrefix The prefix to add to the `shepherd-enabled` and `shepherd-target` class names as well as the `data-shepherd-step-id`.\n   * @param {Object} options.defaultStepOptions Default options for Steps ({@link Step#constructor}), created through `addStep`\n   * @param {boolean} options.exitOnEsc Exiting the tour with the escape key will be enabled unless this is explicitly\n   * set to false.\n   * @param {boolean} options.keyboardNavigation Navigating the tour via left and right arrow keys will be enabled\n   * unless this is explicitly set to false.\n   * @param {HTMLElement} options.stepsContainer An optional container element for the steps.\n   * If not set, the steps will be appended to `document.body`.\n   * @param {HTMLElement} options.modalContainer An optional container element for the modal.\n   * If not set, the modal will be appended to `document.body`.\n   * @param {object[] | Step[]} options.steps An array of step options objects or Step instances to initialize the tour with\n   * @param {string} options.tourName An optional \"name\" for the tour. This will be appended to the the tour's\n   * dynamically generated `id` property.\n   * @param {boolean} options.useModalOverlay Whether or not steps should be placed above a darkened\n   * modal overlay. If true, the overlay will create an opening around the target element so that it\n   * can remain interactive\n   * @returns {Tour}\n   */\n  constructor(options = {}) {\n    super(options);\n    autoBind(this);\n    const defaultTourOptions = {\n      exitOnEsc: true,\n      keyboardNavigation: true\n    };\n    this.options = Object.assign({}, defaultTourOptions, options);\n    this.classPrefix = normalizePrefix(this.options.classPrefix);\n    this.steps = [];\n    this.addSteps(this.options.steps);\n\n    // Pass these events onto the global Shepherd object\n    const events = ['active', 'cancel', 'complete', 'inactive', 'show', 'start'];\n    events.map(event => {\n      (e => {\n        this.on(e, opts => {\n          opts = opts || {};\n          opts.tour = this;\n          Shepherd.trigger(e, opts);\n        });\n      })(event);\n    });\n    this._setTourID();\n    return this;\n  }\n\n  /**\n   * Adds a new step to the tour\n   * @param {Object|Step} options An object containing step options or a Step instance\n   * @param {number} index The optional index to insert the step at. If undefined, the step\n   * is added to the end of the array.\n   * @return {Step} The newly added step\n   */\n  addStep(options, index) {\n    let step = options;\n    if (!(step instanceof Step)) {\n      step = new Step(this, step);\n    } else {\n      step.tour = this;\n    }\n    if (!isUndefined(index)) {\n      this.steps.splice(index, 0, step);\n    } else {\n      this.steps.push(step);\n    }\n    return step;\n  }\n\n  /**\n   * Add multiple steps to the tour\n   * @param {Array<object> | Array<Step>} steps The steps to add to the tour\n   */\n  addSteps(steps) {\n    if (Array.isArray(steps)) {\n      steps.forEach(step => {\n        this.addStep(step);\n      });\n    }\n    return this;\n  }\n\n  /**\n   * Go to the previous step in the tour\n   */\n  back() {\n    const index = this.steps.indexOf(this.currentStep);\n    this.show(index - 1, false);\n  }\n\n  /**\n   * Calls _done() triggering the 'cancel' event\n   * If `confirmCancel` is true, will show a window.confirm before cancelling\n   * If `confirmCancel` is a function, will call it and wait for the return value,\n   * and only cancel when the value returned is true\n   */\n  async cancel() {\n    if (this.options.confirmCancel) {\n      const confirmCancelIsFunction = typeof this.options.confirmCancel === 'function';\n      const cancelMessage = this.options.confirmCancelMessage || 'Are you sure you want to stop the tour?';\n      const stopTour = confirmCancelIsFunction ? await this.options.confirmCancel() : window.confirm(cancelMessage);\n      if (stopTour) {\n        this._done('cancel');\n      }\n    } else {\n      this._done('cancel');\n    }\n  }\n\n  /**\n   * Calls _done() triggering the `complete` event\n   */\n  complete() {\n    this._done('complete');\n  }\n\n  /**\n   * Gets the step from a given id\n   * @param {Number|String} id The id of the step to retrieve\n   * @return {Step} The step corresponding to the `id`\n   */\n  getById(id) {\n    return this.steps.find(step => {\n      return step.id === id;\n    });\n  }\n\n  /**\n   * Gets the current step\n   * @returns {Step|null}\n   */\n  getCurrentStep() {\n    return this.currentStep;\n  }\n\n  /**\n   * Hide the current step\n   */\n  hide() {\n    const currentStep = this.getCurrentStep();\n    if (currentStep) {\n      return currentStep.hide();\n    }\n  }\n\n  /**\n   * Check if the tour is active\n   * @return {boolean}\n   */\n  isActive() {\n    return Shepherd.activeTour === this;\n  }\n\n  /**\n   * Go to the next step in the tour\n   * If we are at the end, call `complete`\n   */\n  next() {\n    const index = this.steps.indexOf(this.currentStep);\n    if (index === this.steps.length - 1) {\n      this.complete();\n    } else {\n      this.show(index + 1, true);\n    }\n  }\n\n  /**\n   * Removes the step from the tour\n   * @param {String} name The id for the step to remove\n   */\n  removeStep(name) {\n    const current = this.getCurrentStep();\n\n    // Find the step, destroy it and remove it from this.steps\n    this.steps.some((step, i) => {\n      if (step.id === name) {\n        if (step.isOpen()) {\n          step.hide();\n        }\n        step.destroy();\n        this.steps.splice(i, 1);\n        return true;\n      }\n    });\n    if (current && current.id === name) {\n      this.currentStep = undefined;\n\n      // If we have steps left, show the first one, otherwise just cancel the tour\n      this.steps.length ? this.show(0) : this.cancel();\n    }\n  }\n\n  /**\n   * Show a specific step in the tour\n   * @param {Number|String} key The key to look up the step by\n   * @param {Boolean} forward True if we are going forward, false if backward\n   */\n  show(key = 0, forward = true) {\n    const step = isString(key) ? this.getById(key) : this.steps[key];\n    if (step) {\n      this._updateStateBeforeShow();\n      const shouldSkipStep = isFunction(step.options.showOn) && !step.options.showOn();\n\n      // If `showOn` returns false, we want to skip the step, otherwise, show the step like normal\n      if (shouldSkipStep) {\n        this._skipStep(step, forward);\n      } else {\n        this.trigger('show', {\n          step,\n          previous: this.currentStep\n        });\n        this.currentStep = step;\n        step.show();\n      }\n    }\n  }\n\n  /**\n   * Start the tour\n   */\n  start() {\n    this.trigger('start');\n\n    // Save the focused element before the tour opens\n    this.focusedElBeforeOpen = document.activeElement;\n    this.currentStep = null;\n    this._setupModal();\n    this._setupActiveTour();\n    this.next();\n  }\n\n  /**\n   * Called whenever the tour is cancelled or completed, basically anytime we exit the tour\n   * @param {String} event The event name to trigger\n   * @private\n   */\n  _done(event) {\n    const index = this.steps.indexOf(this.currentStep);\n    if (Array.isArray(this.steps)) {\n      this.steps.forEach(step => step.destroy());\n    }\n    cleanupSteps(this);\n    this.trigger(event, {\n      index\n    });\n    Shepherd.activeTour = null;\n    this.trigger('inactive', {\n      tour: this\n    });\n    if (this.modal) {\n      this.modal.hide();\n    }\n    if (event === 'cancel' || event === 'complete') {\n      if (this.modal) {\n        const modalContainer = document.querySelector('.shepherd-modal-overlay-container');\n        if (modalContainer) {\n          modalContainer.remove();\n        }\n      }\n    }\n\n    // Focus the element that was focused before the tour started\n    if (isHTMLElement$1(this.focusedElBeforeOpen)) {\n      this.focusedElBeforeOpen.focus();\n    }\n  }\n\n  /**\n   * Make this tour \"active\"\n   * @private\n   */\n  _setupActiveTour() {\n    this.trigger('active', {\n      tour: this\n    });\n    Shepherd.activeTour = this;\n  }\n\n  /**\n   * _setupModal create the modal container and instance\n   * @private\n   */\n  _setupModal() {\n    this.modal = new Shepherd_modal({\n      target: this.options.modalContainer || document.body,\n      props: {\n        classPrefix: this.classPrefix,\n        styles: this.styles\n      }\n    });\n  }\n\n  /**\n   * Called when `showOn` evaluates to false, to skip the step or complete the tour if it's the last step\n   * @param {Step} step The step to skip\n   * @param {Boolean} forward True if we are going forward, false if backward\n   * @private\n   */\n  _skipStep(step, forward) {\n    const index = this.steps.indexOf(step);\n    if (index === this.steps.length - 1) {\n      this.complete();\n    } else {\n      const nextIndex = forward ? index + 1 : index - 1;\n      this.show(nextIndex, forward);\n    }\n  }\n\n  /**\n   * Before showing, hide the current step and if the tour is not\n   * already active, call `this._setupActiveTour`.\n   * @private\n   */\n  _updateStateBeforeShow() {\n    if (this.currentStep) {\n      this.currentStep.hide();\n    }\n    if (!this.isActive()) {\n      this._setupActiveTour();\n    }\n  }\n\n  /**\n   * Sets this.id to `${tourName}--${uuid}`\n   * @private\n   */\n  _setTourID() {\n    const tourName = this.options.tourName || 'tour';\n    this.id = `${tourName}--${uuid()}`;\n  }\n}\nconst isServerSide = typeof window === 'undefined';\nclass NoOp {\n  constructor() {}\n}\nif (isServerSide) {\n  Object.assign(Shepherd, {\n    Tour: NoOp,\n    Step: NoOp\n  });\n} else {\n  Object.assign(Shepherd, {\n    Tour,\n    Step\n  });\n}\nexport { Shepherd as default };\n","import * as i0 from '@angular/core';\nimport { Injectable } from '@angular/core';\nimport Shepherd from 'shepherd.js';\n\n/**\n * Helper method to check if element is hidden, since we cannot use :visible without jQuery\n * @param element The element to check for visibility\n * @returns true if element is hidden\n */\nfunction elementIsHidden(element) {\n  return element.offsetWidth === 0 && element.offsetHeight === 0;\n}\n\n/**\n * Creates a button of the specified type, with the given classes and text\n *\n * @param button.type The type of button cancel, back, or next\n * @param button.classes Classes to apply to the button\n * @param button.text The text for the button\n * @param button.action The action to call\n */\nfunction makeButton(button) {\n  const {\n    classes,\n    disabled,\n    label,\n    secondary,\n    type,\n    text\n  } = button;\n  const builtInButtonTypes = ['back', 'cancel', 'next'];\n  if (!type) {\n    return button;\n  }\n  if (builtInButtonTypes.indexOf(type) === -1) {\n    throw new Error(`'type' property must be one of 'back', 'cancel', or 'next'`);\n  }\n  return {\n    action: this[type].bind(this),\n    classes,\n    disabled,\n    label,\n    secondary,\n    text\n  };\n}\nlet ShepherdService = /*#__PURE__*/(() => {\n  class ShepherdService {\n    constructor() {\n      this.confirmCancel = false;\n      this.confirmCancelMessage = null;\n      this.defaultStepOptions = {};\n      this.errorTitle = null;\n      this.isActive = false;\n      this.keyboardNavigation = true;\n      this.messageForUser = null;\n      this.modal = false;\n      this.requiredElements = [];\n      this.tourName = undefined;\n      this.tourObject = null;\n      this.exitOnEsc = true;\n    }\n    /**\n     * Get the tour object and call back\n     */\n    back() {\n      this.tourObject.back();\n    }\n    /**\n     * Cancel the tour\n     */\n    cancel() {\n      this.tourObject.cancel();\n    }\n    /**\n     * Complete the tour\n     */\n    complete() {\n      this.tourObject.complete();\n    }\n    /**\n     * Hides the current step\n     */\n    hide() {\n      this.tourObject.hide();\n    }\n    /**\n     * Advance the tour to the next step\n     */\n    next() {\n      this.tourObject.next();\n    }\n    /**\n     * Show a specific step, by passing its id\n     * @param id The id of the step you want to show\n     */\n    show(id) {\n      this.tourObject.show(id);\n    }\n    /**\n     * Start the tour\n     */\n    start() {\n      this.isActive = true;\n      this.tourObject.start();\n    }\n    /**\n     * This function is called when a tour is completed or cancelled to initiate cleanup.\n     * @param completeOrCancel 'complete' or 'cancel'\n     */\n    onTourFinish(completeOrCancel) {\n      this.isActive = false;\n    }\n    /**\n     * Take a set of steps and create a tour object based on the current configuration\n     * @param steps An array of steps\n     */\n    addSteps(steps) {\n      this._initialize();\n      const tour = this.tourObject;\n      // Return nothing if there are no steps\n      if (!steps || !Array.isArray(steps) || steps.length === 0) {\n        return;\n      }\n      if (!this.requiredElementsPresent()) {\n        tour.addStep({\n          buttons: [{\n            text: 'Exit',\n            action: tour.cancel\n          }],\n          id: 'error',\n          title: this.errorTitle,\n          text: [this.messageForUser]\n        });\n        return;\n      }\n      steps.forEach(step => {\n        if (step.buttons) {\n          step.buttons = step.buttons.map(makeButton.bind(this), this);\n        }\n        tour.addStep(step);\n      });\n    }\n    /**\n     * Observes the array of requiredElements, which are the elements that must be present at the start of the tour,\n     * and determines if they exist, and are visible, if either is false, it will stop the tour from executing.\n     */\n    requiredElementsPresent() {\n      let allElementsPresent = true;\n      /* istanbul ignore next: also can't test this due to things attached to root blowing up tests */\n      this.requiredElements.forEach(element => {\n        const selectedElement = document.querySelector(element.selector);\n        if (allElementsPresent && (!selectedElement || elementIsHidden(selectedElement))) {\n          allElementsPresent = false;\n          this.errorTitle = element.title;\n          this.messageForUser = element.message;\n        }\n      });\n      return allElementsPresent;\n    }\n    /**\n     * Initializes the tour, creates a new Shepherd.Tour. sets options, and binds events\n     */\n    _initialize() {\n      const tourObject = new Shepherd.Tour({\n        confirmCancel: this.confirmCancel,\n        confirmCancelMessage: this.confirmCancelMessage,\n        defaultStepOptions: this.defaultStepOptions,\n        keyboardNavigation: this.keyboardNavigation,\n        tourName: this.tourName,\n        useModalOverlay: this.modal,\n        exitOnEsc: this.exitOnEsc\n      });\n      tourObject.on('complete', this.onTourFinish.bind(this, 'complete'));\n      tourObject.on('cancel', this.onTourFinish.bind(this, 'cancel'));\n      this.tourObject = tourObject;\n    }\n    /** @nocollapse */\n    static {\n      this.ɵfac = function ShepherdService_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || ShepherdService)();\n      };\n    }\n    /** @nocollapse */\n    static {\n      this.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n        token: ShepherdService,\n        factory: ShepherdService.ɵfac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return ShepherdService;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n/*\n * Public API Surface of shepherd\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { ShepherdService };\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\n\nimport { ConfigService } from '@igo2/core/config';\n\nimport { Observable } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\n\nimport { InteractiveTourOptions } from './interactive-tour.interface';\n\n@Injectable()\nexport class InteractiveTourLoader {\n  private jsonURL: string;\n  private allToursOptions;\n\n  constructor(\n    private http: HttpClient,\n    private configService: ConfigService\n  ) {\n    this.jsonURL = this.getPathToConfigFile();\n  }\n\n  public loadConfigTour() {\n    this.getJSON().subscribe(\n      (data) => {\n        this.allToursOptions = data;\n      },\n      () => {\n        throw new Error(\n          `Problem with Interactive tour configuration file: interactiveTour.json not find. Check if the file and is path is set correctly.`\n        );\n      }\n    );\n  }\n\n  public getPathToConfigFile(): string {\n    return (\n      this.configService.getConfig('interactiveTour.pathToConfigFile') ||\n      './config/interactiveTour.json'\n    );\n  }\n\n  public getJSON(): Observable<any> {\n    return this.http.get(this.jsonURL).pipe(\n      catchError((e) => {\n        e.error.caught = true;\n        throw e;\n      })\n    );\n  }\n\n  public getTourOptionData(toolName): InteractiveTourOptions {\n    if (this.allToursOptions === undefined) {\n      return undefined;\n    }\n    let nameInConfigFile = toolName;\n    nameInConfigFile = nameInConfigFile.replace(/\\s/g, '');\n    return this.allToursOptions[nameInConfigFile];\n  }\n}\n","import { Injectable } from '@angular/core';\n\nimport { ConfigService } from '@igo2/core/config';\nimport { LanguageService } from '@igo2/core/language';\nimport { MediaService } from '@igo2/core/media';\n\nimport { autoPlacement, offset } from '@floating-ui/dom';\nimport { ShepherdService } from 'angular-shepherd';\nimport Shepherd from 'shepherd.js';\n\nimport {\n  InteractiveTourAction,\n  InteractiveTourOptions,\n  InteractiveTourStep\n} from './interactive-tour.interface';\nimport { InteractiveTourLoader } from './interactive-tour.loader';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class InteractiveTourService {\n  private previousStep: InteractiveTourStep;\n  private nextIndex = 1;\n\n  constructor(\n    private configService: ConfigService,\n    private mediaService: MediaService,\n    private languageService: LanguageService,\n    private interactiveTourLoader: InteractiveTourLoader,\n    private shepherdService: ShepherdService\n  ) {\n    if (this.isAppHaveTour()) {\n      this.interactiveTourLoader.loadConfigTour();\n    }\n  }\n\n  public isAppHaveTour() {\n    const haveTour = this.configService.getConfig(\n      'interactiveTour.activateInteractiveTour'\n    );\n    if (haveTour === undefined) {\n      return true;\n    } else {\n      return haveTour;\n    }\n  }\n\n  public isToolHaveTourConfig(toolName: string): boolean {\n    const checkTourActiveOptions =\n      this.interactiveTourLoader.getTourOptionData(toolName);\n    if (checkTourActiveOptions === undefined) {\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  public disabledTourButton(toolName: string): boolean {\n    const stepConfig: InteractiveTourOptions =\n      this.interactiveTourLoader.getTourOptionData(toolName);\n\n    if (stepConfig?.conditions) {\n      for (const condition of stepConfig.conditions) {\n        if (document.querySelector(condition) === null) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  public isMobile(): boolean {\n    return this.mediaService.isMobile();\n  }\n\n  public isTourDisplayInMobile(): boolean {\n    const showInMobile = this.configService.getConfig(\n      'interactiveTour.tourInMobile'\n    );\n\n    return showInMobile === undefined ? true : showInMobile;\n  }\n\n  private getButtons(buttonKind?: 'first' | 'last' | 'noBackButton') {\n    if (buttonKind === 'noBackButton') {\n      return [\n        {\n          classes: 'shepherd-button-primary',\n          text: this.languageService.translate.instant(\n            'igo.common.interactiveTour.nextButton'\n          ),\n          type: 'next'\n        }\n      ];\n    }\n    if (buttonKind === 'first') {\n      return [\n        {\n          classes: 'shepherd-button-secondary',\n          text: this.languageService.translate.instant(\n            'igo.common.interactiveTour.exitButton'\n          ),\n          type: 'cancel'\n        },\n        {\n          classes: 'shepherd-button-primary',\n          text: this.languageService.translate.instant(\n            'igo.common.interactiveTour.nextButton'\n          ),\n          type: 'next'\n        }\n      ];\n    }\n\n    if (buttonKind === 'last') {\n      return [\n        {\n          classes: 'shepherd-button-secondary',\n          text: this.languageService.translate.instant(\n            'igo.common.interactiveTour.backButton'\n          ),\n          type: 'back'\n        },\n        {\n          classes: 'shepherd-button-primary',\n          text: this.languageService.translate.instant(\n            'igo.common.interactiveTour.exitButton'\n          ),\n          type: 'cancel'\n        }\n      ];\n    }\n\n    return [\n      {\n        classes: 'shepherd-button-secondary',\n        text: this.languageService.translate.instant(\n          'igo.common.interactiveTour.backButton'\n        ),\n        type: 'back'\n      },\n      {\n        classes: 'shepherd-button-primary',\n        text: this.languageService.translate.instant(\n          'igo.common.interactiveTour.nextButton'\n        ),\n        type: 'next'\n      }\n    ];\n  }\n\n  private getAction(actionName: string) {\n    const action = {\n      click: 'click'\n    };\n    return action[actionName.toLowerCase()];\n  }\n\n  private addProgress() {\n    const self = this as any;\n    let nbTry = 0;\n    const maxTry = 21;\n    const checkExist = setInterval(() => {\n      if (self.getCurrentStep()) {\n        if (\n          self.getCurrentStep().options.attachTo.element &&\n          !document.querySelector(\n            self.getCurrentStep().options.attachTo.element\n          )\n        ) {\n          self.cancel();\n          clearInterval(checkExist);\n          return;\n        } else {\n          const currentStepElement = self.getCurrentStep().getElement();\n          if (currentStepElement) {\n            const shepherdList = currentStepElement.querySelectorAll(\n              '.shepherd-content, .shepherd-text'\n            );\n            shepherdList.forEach((element) => {\n              element.classList.add('mat-typography');\n            });\n          }\n          const header = currentStepElement\n            ? currentStepElement.querySelector('.shepherd-header')\n            : undefined;\n\n          nbTry++;\n          if (header || nbTry > maxTry) {\n            clearInterval(checkExist);\n          }\n\n          if (header) {\n            const stepsArray = self.steps;\n            const progress = document.createElement('span');\n            progress.className = 'shepherd-progress';\n            progress.innerText = `${\n              stepsArray.indexOf(self.getCurrentStep()) + 1\n            }/${stepsArray.length}`;\n            header.insertBefore(\n              progress,\n              currentStepElement.querySelector('.shepherd-cancel-icon')\n            );\n          }\n        }\n      }\n    }, 100);\n  }\n\n  private checkNext(index, tour, service) {\n    if (tour.getCurrentStep()) {\n      if (\n        tour.getCurrentStep().options.attachTo.element &&\n        document.querySelector(tour.getCurrentStep().options.attachTo.element)\n      ) {\n        tour.complete();\n        return;\n      }\n\n      if (index.index === tour.steps.length - 1) {\n        tour.complete();\n        return;\n      }\n\n      tour.steps.splice(index.index, 1);\n      const nextStep = tour.steps[index.index];\n      if (\n        nextStep.options.attachTo.element &&\n        !document.querySelector(nextStep.options.attachTo.element)\n      ) {\n        service.checkNext(index, tour, service);\n      } else {\n        tour._setupModal();\n        tour.show(nextStep.id);\n      }\n    }\n  }\n\n  private executeAction(\n    step: InteractiveTourStep,\n    actionConfig: InteractiveTourAction\n  ) {\n    if (!actionConfig) {\n      return;\n    }\n\n    if (\n      actionConfig.condition &&\n      ((actionConfig.condition.charAt(0) === '!' &&\n        document.querySelector(actionConfig.condition.slice(1))) ||\n        (actionConfig.condition.charAt(0) !== '!' &&\n          !document.querySelector(actionConfig.condition)))\n    ) {\n      return;\n    }\n\n    const element: HTMLElement = document.querySelector(\n      actionConfig.element || step.element\n    ) as HTMLElement;\n    const action = this.getAction(actionConfig.action);\n    if (element && action) {\n      element[action]();\n    }\n  }\n\n  private executeActionPromise(\n    step: InteractiveTourStep,\n    actionConfig: InteractiveTourAction\n  ) {\n    return new Promise<void>((resolve) => {\n      this.executeAction(step, actionConfig);\n      if (!actionConfig || !actionConfig.waitFor) {\n        resolve();\n        return;\n      }\n      let nbTry = 0;\n      const maxTry = actionConfig.maxWait ? actionConfig.maxWait / 100 : 20;\n      const checkExist = setInterval(() => {\n        nbTry++;\n        if (nbTry > maxTry || document.querySelector(actionConfig.waitFor)) {\n          clearInterval(checkExist);\n          resolve();\n        }\n      }, 100);\n    });\n  }\n\n  private getShepherdSteps(tourConfig: InteractiveTourOptions) {\n    const shepherdSteps: Shepherd.Step.StepOptions[] = [];\n\n    let i = 0;\n    for (const step of tourConfig.steps) {\n      const position = step.position ?? tourConfig.position;\n      shepherdSteps.push({\n        attachTo: {\n          element: step.element,\n          on: position as any // PopperPlacement\n        },\n        floatingUIOptions: {\n          middleware: [\n            position === 'auto' && autoPlacement(),\n            offset({ mainAxis: 15 })\n          ].filter(Boolean)\n        },\n        beforeShowPromise: () => {\n          return Promise.all([\n            this.executeActionPromise(\n              this.previousStep,\n              this.previousStep ? this.previousStep.beforeChange : undefined\n            ),\n            this.executeActionPromise(step, step.beforeShow)\n          ]);\n        },\n        buttons: this.getButtons(\n          i === 0\n            ? 'first'\n            : i + 1 === tourConfig.steps.length\n              ? 'last'\n              : tourConfig.steps[i].noBackButton\n                ? 'noBackButton'\n                : undefined\n        ),\n        classes: step.class,\n        highlightClass: step.highlightClass,\n        scrollTo: step.scrollToElement || tourConfig.scrollToElement || true,\n        canClickTarget: step.disableInteraction\n          ? !step.disableInteraction\n          : undefined,\n        title: this.languageService.translate.instant(\n          step.title || tourConfig.title\n        ),\n        text: [this.languageService.translate.instant(step.text)],\n        when: {\n          show: () => {\n            this.executeAction(step, step.onShow);\n          },\n          hide: () => {\n            this.previousStep = step;\n            this.executeAction(step, step.onHide);\n          }\n        }\n      } satisfies Shepherd.Step.StepOptions);\n      i++;\n    }\n\n    return shepherdSteps;\n  }\n\n  public startTour(toolName: string) {\n    const stepConfig: InteractiveTourOptions =\n      this.interactiveTourLoader.getTourOptionData(toolName);\n\n    this.shepherdService.defaultStepOptions = {\n      classes: stepConfig.class,\n      highlightClass: stepConfig.highlightClass,\n      canClickTarget: stepConfig.disableInteraction\n        ? !stepConfig.disableInteraction\n        : true,\n      cancelIcon: {\n        enabled: true\n      }\n    };\n\n    const shepherdSteps = this.getShepherdSteps(stepConfig);\n\n    this.shepherdService.modal = true;\n    this.shepherdService.confirmCancel = false;\n    this.shepherdService.addSteps(shepherdSteps);\n\n    this.shepherdService.tourObject.on('show', this.addProgress);\n    this.shepherdService.tourObject.on('cancel', (index) => {\n      this.checkNext(index, this.shepherdService.tourObject, this);\n    });\n\n    this.shepherdService.start();\n  }\n}\n","import { AsyncPipe, NgClass, NgIf } from '@angular/common';\nimport { Component, Input, ViewEncapsulation } from '@angular/core';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatTooltipModule } from '@angular/material/tooltip';\n\nimport {\n  IconService,\n  IgoIconComponent,\n  PRESENTATION_PLAY_ICON\n} from '@igo2/common/icon';\nimport { ToolService } from '@igo2/common/tool';\nimport { IgoLanguageModule } from '@igo2/core/language';\n\nimport { Observable, of } from 'rxjs';\n\nimport { InteractiveTourService } from './interactive-tour.service';\n\n@Component({\n  selector: 'igo-interactive-tour',\n  templateUrl: './interactive-tour.component.html',\n  styleUrls: ['./interactive-tour.component.scss'],\n  encapsulation: ViewEncapsulation.None,\n  standalone: true,\n  imports: [\n    NgIf,\n    MatButtonModule,\n    NgClass,\n    MatTooltipModule,\n    MatIconModule,\n    AsyncPipe,\n    IgoLanguageModule,\n    IgoIconComponent\n  ]\n})\nexport class InteractiveTourComponent {\n  presentationIcon = PRESENTATION_PLAY_ICON;\n\n  /**\n   * Toolbox that holds main tools\n   */\n  @Input() tourToStart = '';\n  @Input() styleButton: 'icon' | 'raised';\n  @Input() discoverTitleInLocale$: Observable<string> = of('IGO');\n\n  getClass() {\n    return {\n      'tour-button-tool-icon': this.styleButton === 'icon',\n      'tour-button-tool': this.styleButton === 'raised'\n    };\n  }\n\n  get toolbox() {\n    return this.toolService.toolbox;\n  }\n\n  getTourToStart() {\n    if (this.tourToStart) {\n      return this.tourToStart;\n    } else {\n      return this.activeToolName;\n    }\n  }\n\n  get activeToolName() {\n    if (this.toolbox) {\n      if (this.isActiveTool) {\n        return this.toolbox.activeTool$.getValue().name;\n      } else {\n        return 'global';\n      }\n    } else {\n      return undefined;\n    }\n  }\n\n  get isActiveTool(): boolean {\n    if (this.toolbox) {\n      return this.toolbox.activeTool$.getValue() !== undefined;\n    } else {\n      return undefined;\n    }\n  }\n\n  get isToolHaveTour(): boolean {\n    if (this.activeToolName === 'about' && !this.tourToStart) {\n      return false;\n    }\n    return this.interactiveTourService.isToolHaveTourConfig(\n      this.getTourToStart()\n    );\n  }\n\n  get showTourButton(): boolean {\n    // 2 conditions to show: have Tour on tool in Config file and if we are in mobile displayInMobile= true\n    if (this.isToolHaveTour === false) {\n      return false;\n    }\n\n    let inMobileAndShow: boolean;\n    if (this.interactiveTourService.isMobile()) {\n      inMobileAndShow = this.isTourDisplayInMobile;\n      if (inMobileAndShow === false) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  get isTourDisplayInMobile(): boolean {\n    return this.interactiveTourService.isTourDisplayInMobile();\n  }\n\n  get disabledTourButton(): boolean {\n    return this.interactiveTourService.disabledTourButton(this.activeToolName);\n  }\n\n  constructor(\n    private interactiveTourService: InteractiveTourService,\n    private toolService: ToolService,\n    private iconService: IconService\n  ) {\n    this.iconService.registerSvg(this.presentationIcon);\n  }\n\n  startInteractiveTour() {\n    const tour = this.getTourToStart();\n    if (tour) {\n      this.interactiveTourService.startTour(tour);\n    } else {\n      return;\n    }\n  }\n}\n","<ng-container *ngIf=\"showTourButton\">\n  <button\n    *ngIf=\"styleButton === 'icon'; else raisedButton\"\n    (click)=\"startInteractiveTour()\"\n    [ngClass]=\"getClass()\"\n    color=\"primary\"\n    mat-icon-button\n    tooltip-position=\"below\"\n    matTooltipShowDelay=\"500\"\n    [matTooltip]=\"\n      disabledTourButton\n        ? ('igo.common.interactiveTour.disaledTooltipTourToolButton'\n          | translate)\n        : ('igo.common.interactiveTour.tooltipTourToolButton' | translate)\n    \"\n    [disabled]=\"disabledTourButton\"\n  >\n    <igo-icon [icon]=\"presentationIcon\" iconPositionEnd />\n  </button>\n\n  <ng-template #raisedButton>\n    <button\n      (click)=\"startInteractiveTour()\"\n      [ngClass]=\"getClass()\"\n      color=\"primary\"\n      mat-raised-button\n      tooltip-position=\"below\"\n      matTooltipShowDelay=\"500\"\n      [disabled]=\"disabledTourButton\"\n    >\n      {{ 'igo.common.interactiveTour.buttonTitle' | translate }}\n      {{ discoverTitleInLocale$ | async | translate }}\n      <mat-icon\n        [svgIcon]=\"presentationIcon.name\"\n        iconPositionEnd\n        [matTooltip]=\"\n          disabledTourButton\n            ? ('igo.common.interactiveTour.disaledTooltipTourToolButton'\n              | translate)\n            : ('igo.common.interactiveTour.tooltipTourToolButton' | translate)\n        \"\n      >\n      </mat-icon>\n    </button>\n  </ng-template>\n</ng-container>\n","import { NgModule } from '@angular/core';\n\nimport { InteractiveTourComponent } from './interactive-tour.component';\nimport { InteractiveTourLoader } from './interactive-tour.loader';\nimport { InteractiveTourService } from './interactive-tour.service';\n\n@NgModule({\n  imports: [InteractiveTourComponent],\n  exports: [InteractiveTourComponent],\n  providers: [InteractiveTourService, InteractiveTourLoader]\n})\nexport class IgoInteractiveTourModule {}\n","import { NgFor, NgIf } from '@angular/common';\nimport { HttpClient } from '@angular/common/http';\nimport { ChangeDetectorRef, Component, Input, OnInit } from '@angular/core';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatMenuModule } from '@angular/material/menu';\nimport { MatTooltipModule } from '@angular/material/tooltip';\n\nimport { AuthService } from '@igo2/auth';\nimport { CustomHtmlComponent } from '@igo2/common/custom-html';\nimport { InteractiveTourComponent } from '@igo2/common/interactive-tour';\nimport { ToolComponent } from '@igo2/common/tool';\nimport { ConfigService, version } from '@igo2/core/config';\nimport { LanguageService } from '@igo2/core/language';\nimport { IgoLanguageModule } from '@igo2/core/language';\n\nimport { of } from 'rxjs';\nimport type { Observable } from 'rxjs';\n\nimport { AllEnvironmentOptions } from '../../environment';\n\n@ToolComponent({\n  name: 'about',\n  title: 'igo.integration.tools.about',\n  icon: 'help'\n})\n@Component({\n  selector: 'igo-about-tool',\n  templateUrl: './about-tool.component.html',\n  styleUrls: ['./about-tool.component.scss'],\n  standalone: true,\n  imports: [\n    InteractiveTourComponent,\n    NgIf,\n    MatButtonModule,\n    MatTooltipModule,\n    MatIconModule,\n    MatMenuModule,\n    NgFor,\n    CustomHtmlComponent,\n    IgoLanguageModule\n  ]\n})\nexport class AboutToolComponent implements OnInit {\n  private configOptions: AllEnvironmentOptions;\n  @Input()\n  get headerHtml() {\n    return this._headerHtml;\n  }\n  set headerHtml(value: string) {\n    this._headerHtml = Array.isArray(value) ? value.join('\\n') : value;\n  }\n\n  @Input()\n  get html() {\n    return this._html;\n  }\n  set html(value: string) {\n    this._html = Array.isArray(value) ? value.join('\\n') : value;\n  }\n  private _discoverTitleInLocale = 'IGO';\n  public discoverTitleInLocale$: Observable<string> = of(\n    this._discoverTitleInLocale\n  );\n\n  @Input()\n  get discoverTitleInLocale() {\n    return this._discoverTitleInLocale;\n  }\n  set discoverTitleInLocale(value: string) {\n    this._discoverTitleInLocale = value;\n    this.discoverTitleInLocale$ = of(value);\n  }\n\n  @Input() trainingGuideURLs;\n\n  public effectiveVersion: string;\n  private _html = 'igo.integration.aboutTool.html';\n  private _headerHtml: string;\n\n  private baseUrlProfil;\n  private baseUrlGuide;\n\n  public loading = false;\n\n  constructor(\n    public configService: ConfigService,\n    public auth: AuthService,\n    private http: HttpClient,\n    private cdRef: ChangeDetectorRef,\n    private languageService: LanguageService\n  ) {\n    this.headerHtml = this.languageService.translate.instant(\n      'igo.integration.aboutTool.headerHtml'\n    );\n    this.configOptions = this.configService.getConfigs();\n    const configVersion = this.configOptions.version;\n    this.effectiveVersion =\n      configVersion?.app || configVersion?.lib || version.lib;\n    this.baseUrlProfil = this.configOptions.storage?.url;\n    this.baseUrlGuide =\n      this.configOptions.depot?.url +\n      // todo validate this property\n      (this.configOptions.depot as any)?.guideUrl;\n  }\n\n  ngOnInit() {\n    if (this.auth.authenticated && this.configOptions.context?.url) {\n      this.http.get(this.baseUrlProfil).subscribe((profil) => {\n        const recast = profil as any;\n        this.trainingGuideURLs = recast.guides;\n        this.cdRef.detectChanges();\n      });\n    } else if (\n      this.auth.authenticated &&\n      !this.configOptions.context?.url &&\n      this.configOptions.depot?.trainingGuides\n    ) {\n      this.trainingGuideURLs = this.configOptions.depot?.trainingGuides;\n    }\n  }\n\n  openGuide(guide?) {\n    this.loading = true;\n    const url = guide\n      ? this.baseUrlGuide + guide + '?'\n      : this.baseUrlGuide + this.trainingGuideURLs[0] + '?';\n    this.http\n      .get(url, {\n        responseType: 'blob'\n      })\n      .subscribe(() => {\n        this.loading = false;\n        window.open(url, '_blank');\n        this.cdRef.detectChanges();\n      });\n  }\n\n  formatFileName(name: string) {\n    name = name.split('_').join(' ');\n    const index = name.indexOf('.');\n    name = name.slice(0, index);\n    return name;\n  }\n}\n","<p></p>\n<igo-interactive-tour\n  mat-raised-button\n  tourToStart=\"global\"\n  menuIsOpen=\"true\"\n  styleButton=\"raised\"\n  [discoverTitleInLocale$]=\"discoverTitleInLocale$\"\n>\n</igo-interactive-tour>\n\n<button\n  *ngIf=\"\n    auth.authenticated && trainingGuideURLs && trainingGuideURLs.length === 1\n  \"\n  class=\"training-guide-button\"\n  mat-raised-button\n  tooltip-position=\"below\"\n  matTooltipShowDelay=\"500\"\n  [disabled]=\"loading\"\n  [matTooltip]=\"'igo.integration.aboutTool.trainingGuideTooltip' | translate\"\n  (click)=\"openGuide()\"\n>\n  <span>{{ 'igo.integration.aboutTool.trainingGuide' | translate }}</span>\n  <mat-icon>description</mat-icon>\n</button>\n\n<button\n  *ngIf=\"\n    auth.authenticated && trainingGuideURLs && trainingGuideURLs.length > 1\n  \"\n  class=\"training-guide-button\"\n  mat-raised-button\n  tooltip-position=\"below\"\n  matTooltipShowDelay=\"500\"\n  [disabled]=\"loading\"\n  [matTooltip]=\"'igo.integration.aboutTool.trainingGuideTooltip' | translate\"\n  [matMenuTriggerFor]=\"menu\"\n>\n  <span>{{ 'igo.integration.aboutTool.trainingGuide' | translate }}</span>\n  <mat-icon>description</mat-icon>\n</button>\n\n<mat-menu #menu=\"matMenu\">\n  <button\n    *ngFor=\"let guide of trainingGuideURLs\"\n    mat-menu-item\n    (click)=\"openGuide(guide)\"\n  >\n    {{ formatFileName(guide) }}\n  </button>\n</mat-menu>\n\n<igo-custom-html\n  *ngIf=\"headerHtml !== ''\"\n  class=\"mat-typography\"\n  [html]=\"headerHtml | translate\"\n>\n</igo-custom-html>\n\n<igo-custom-html\n  class=\"mat-typography\"\n  [html]=\"html | translate: { version: effectiveVersion }\"\n>\n</igo-custom-html>\n","import { Injectable } from '@angular/core';\n\nimport { ConfigService } from '@igo2/core/config';\nimport { StorageService } from '@igo2/core/storage';\nimport { IgoMap, MapService, ProjectionService } from '@igo2/geo';\n\n/**\n * Service that holds the state of the map module\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class MapState {\n  get showAllLegendsValue(): boolean {\n    return this._legendToolShowAll;\n  }\n\n  set showAllLegendsValue(value) {\n    this._legendToolShowAll = value;\n  }\n  private _legendToolShowAll: boolean;\n\n  /**\n   * Active map\n   */\n  get map(): IgoMap {\n    return this._map;\n  }\n  private _map: IgoMap;\n\n  constructor(\n    private mapService: MapService,\n    private projectionService: ProjectionService, // Don't remove this or it'll never be injected,\n    private storageService: StorageService,\n    private configService: ConfigService\n  ) {\n    this._map = new IgoMap(\n      {\n        controls: {\n          scaleLine: true,\n          attribution: {\n            collapsed: true\n          }\n        }\n      },\n      this.storageService,\n      this.configService\n    );\n\n    this.mapService.setMap(this.map);\n  }\n}\n","import { Injectable } from '@angular/core';\n\nimport { AuthService } from '@igo2/auth';\nimport { EntityStore } from '@igo2/common/entity';\nimport { Catalog, CatalogItem } from '@igo2/geo';\n\n/**\n * Service that holds the state of the catalog module\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class CatalogState {\n  /**\n   * Store that contains all the catalogs\n   */\n  get catalogStore(): EntityStore<Catalog> {\n    return this._catalogStore;\n  }\n  private _catalogStore: EntityStore<Catalog>;\n\n  /**\n   * Catalog -> Catalog items store mapping\n   */\n  private catalogItemsStores = new Map<string, EntityStore<CatalogItem>>();\n\n  constructor(authService: AuthService) {\n    this._catalogStore = new EntityStore([]);\n\n    authService.authenticate$.subscribe(() => {\n      this.clearCatalogItemsStores();\n    });\n  }\n\n  /**\n   * Get a catalog's items store\n   * @param catalog Catalog\n   * @returns Store that contains the catalog items\n   */\n  getCatalogItemsStore(catalog: Catalog): EntityStore<CatalogItem> {\n    return this.catalogItemsStores.get(catalog.id as string);\n  }\n\n  /**\n   * Bind a catalog items store to a catalog\n   * @param catalog Catalog\n   * @param store Catalog items store\n   */\n  setCatalogItemsStore(catalog: Catalog, store: EntityStore<CatalogItem>) {\n    this.catalogItemsStores.set(catalog.id as string, store);\n  }\n\n  /**\n   * Clear all catalog items stores\n   */\n  clearCatalogItemsStores() {\n    this.catalogItemsStores.clear();\n  }\n}\n","import { AsyncPipe, NgIf } from '@angular/common';\nimport {\n  ChangeDetectionStrategy,\n  Component,\n  Input,\n  OnDestroy,\n  OnInit\n} from '@angular/core';\n\nimport { AuthService } from '@igo2/auth';\nimport { EntityRecord, EntityStore } from '@igo2/common/entity';\nimport { ToolComponent } from '@igo2/common/tool';\nimport {\n  Catalog,\n  CatalogBrowserComponent,\n  CatalogItem,\n  CatalogItemState,\n  CatalogService,\n  IgoMap\n} from '@igo2/geo';\n\nimport { BehaviorSubject, Subscription, combineLatest } from 'rxjs';\nimport { take } from 'rxjs/operators';\n\nimport { MapState } from '../../map/map.state';\nimport { CatalogState } from '../catalog.state';\n\n/**\n * Tool to browse a catalog's groups and layers and display them to a map.\n */\n@ToolComponent({\n  name: 'catalogBrowser',\n  title: 'igo.integration.tools.catalog',\n  parent: 'catalog'\n})\n@Component({\n  selector: 'igo-catalog-browser-tool',\n  templateUrl: './catalog-browser-tool.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  standalone: true,\n  imports: [NgIf, CatalogBrowserComponent, AsyncPipe]\n})\nexport class CatalogBrowserToolComponent implements OnInit, OnDestroy {\n  catalog: Catalog;\n\n  /**\n   * Store that contains the catalog items\n   * @internal\n   */\n  store$ = new BehaviorSubject<EntityStore<CatalogItem, CatalogItemState>>(\n    undefined\n  );\n\n  /**\n   * Subscription to the selected catalog\n   */\n  private catalog$$: Subscription;\n\n  /**\n   * Whether a group can be toggled when it's collapsed\n   */\n  @Input() toggleCollapsedGroup = true;\n\n  /**\n   * Map to add layers to\n   * @internal\n   */\n  get map(): IgoMap {\n    return this.mapState.map;\n  }\n\n  constructor(\n    private catalogService: CatalogService,\n    private catalogState: CatalogState,\n    private mapState: MapState,\n    private authService: AuthService\n  ) {}\n\n  /**\n   * @internal\n   */\n  ngOnInit() {\n    const catalogStore = this.catalogState.catalogStore;\n\n    const catalog$ = catalogStore.stateView.firstBy$(\n      (record: EntityRecord<Catalog>) => record.state.selected === true\n    );\n    const authenticate$ = this.authService.authenticate$;\n    this.catalog$$ = combineLatest([catalog$, authenticate$]).subscribe(\n      ([record]) => {\n        // Mute an error, that we are not able to replicate where the record is undefined\n        if (record === undefined) {\n          return;\n        }\n        const catalog = record.entity;\n        this.catalog = catalog;\n        this.loadCatalogItems(this.catalog);\n      }\n    );\n  }\n\n  /**\n   * @internal\n   */\n  ngOnDestroy() {\n    this.catalog$$.unsubscribe();\n  }\n\n  /**\n   * Get the selected catalog's items from the CatalogService and\n   * load them into the store.\n   * @param catalog Selected catalog\n   */\n  private loadCatalogItems(catalog: Catalog) {\n    let store = this.catalogState.getCatalogItemsStore(catalog);\n    if (store !== undefined) {\n      this.store$.next(store);\n      return;\n    }\n\n    store = new EntityStore<CatalogItem>([]);\n    this.catalogState.setCatalogItemsStore(catalog, store);\n    this.catalogService\n      .loadCatalogItems(catalog)\n      .pipe(take(1))\n      .subscribe((items: CatalogItem[]) => {\n        store.load(items);\n        this.store$.next(store);\n      });\n  }\n}\n","<igo-catalog-browser\n  *ngIf=\"store$ | async as store\"\n  [catalog]=\"catalog\"\n  [store]=\"store\"\n  [map]=\"map\"\n  [toggleCollapsedGroup]=\"toggleCollapsedGroup\"\n>\n</igo-catalog-browser>\n","import { Injectable } from '@angular/core';\n\nimport { ExportOptions } from '@igo2/geo';\n\nimport { BehaviorSubject } from 'rxjs';\n\nexport enum ImportExportType {\n  layer = 'layer',\n  context = 'context'\n}\n\nexport enum ImportExportMode {\n  import = 'import',\n  export = 'export'\n}\n\n/**\n * Service that holds the state of the importExport module\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class ImportExportState {\n  readonly importExportType$ = new BehaviorSubject<ImportExportType>(\n    ImportExportType.layer\n  );\n  readonly selectedMode$ = new BehaviorSubject<ImportExportMode>(\n    ImportExportMode.import\n  );\n  readonly exportOptions$ = new BehaviorSubject<ExportOptions>(undefined);\n\n  setImportExportType(type: ImportExportType) {\n    this.importExportType$.next(type);\n  }\n\n  setMode(mode: ImportExportMode) {\n    this.selectedMode$.next(mode);\n  }\n\n  setsExportOptions(exportOptions: ExportOptions) {\n    this.exportOptions$.next(exportOptions);\n  }\n}\n","import { Injectable } from '@angular/core';\n\nimport { ToolService, Toolbox } from '@igo2/common/tool';\nimport { ExportOptions } from '@igo2/geo';\n\nimport { BehaviorSubject } from 'rxjs';\n\nimport {\n  ImportExportMode,\n  ImportExportState\n} from '../import-export/import-export.state';\n\n/**\n * Service that holds the state of the search module\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class ToolState {\n  get toolbox(): Toolbox {\n    return this.toolService.toolbox;\n  }\n\n  public openSidenav$ = new BehaviorSubject<boolean>(undefined);\n\n  constructor(\n    private toolService: ToolService,\n    private importExportState: ImportExportState\n  ) {}\n\n  toolToActivateFromOptions(toolToActivate: {\n    tool: string;\n    options: ExportOptions;\n  }) {\n    if (!toolToActivate) {\n      return;\n    }\n    if (toolToActivate.tool === 'importExport') {\n      let exportOptions: ExportOptions =\n        this.importExportState.exportOptions$.value;\n      if (!exportOptions) {\n        exportOptions = {\n          layers: toolToActivate.options.layers,\n          featureInMapExtent: toolToActivate.options.featureInMapExtent\n        };\n      } else {\n        exportOptions.layers = toolToActivate.options.layers;\n        exportOptions.featureInMapExtent =\n          toolToActivate.options.featureInMapExtent;\n      }\n      this.importExportState.setsExportOptions(exportOptions);\n      this.importExportState.setMode(ImportExportMode.export);\n    }\n\n    if (this.toolbox.getTool(toolToActivate.tool)) {\n      this.toolbox.activateTool(toolToActivate.tool);\n      this.openSidenav$.next(true);\n    }\n  }\n}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  Input,\n  OnInit\n} from '@angular/core';\n\nimport { EntityStore } from '@igo2/common/entity';\nimport { ToolComponent } from '@igo2/common/tool';\nimport { StorageScope, StorageService } from '@igo2/core/storage';\nimport { Catalog, CatalogLibaryComponent, CatalogService } from '@igo2/geo';\n\nimport { take } from 'rxjs/operators';\n\nimport { ToolState } from '../../tool/tool.state';\nimport { CatalogState } from '../catalog.state';\n\n/**\n * Tool to browse the list of available catalogs.\n */\n@ToolComponent({\n  name: 'catalog',\n  title: 'igo.integration.tools.catalog',\n  icon: 'library_add'\n})\n@Component({\n  selector: 'igo-catalog-library-tool',\n  templateUrl: './catalog-library-tool.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  standalone: true,\n  imports: [CatalogLibaryComponent]\n})\nexport class CatalogLibraryToolComponent implements OnInit {\n  /**\n   * Store that contains the catalogs\n   * @internal\n   */\n  get store(): EntityStore<Catalog> {\n    return this.catalogState.catalogStore;\n  }\n\n  /**\n   * Determine if the form to add a catalog is allowed\n   */\n  @Input() addCatalogAllowed = false;\n\n  /**\n   * List of predefined catalogs\n   */\n  @Input() predefinedCatalogs: Catalog[] = [];\n\n  set selectedCatalogId(id) {\n    this.storageService.set('selectedCatalogId', id, StorageScope.SESSION);\n  }\n\n  get currentTool() {\n    return this.toolState.toolbox.getCurrentPreviousToolName()[1];\n  }\n\n  get lastTool() {\n    return this.toolState.toolbox.getCurrentPreviousToolName()[0];\n  }\n\n  constructor(\n    private catalogService: CatalogService,\n    private catalogState: CatalogState,\n    private toolState: ToolState,\n    private storageService: StorageService\n  ) {}\n\n  /**\n   * @internal\n   */\n  ngOnInit() {\n    if (this.lastTool === 'catalogBrowser' && this.currentTool === 'catalog') {\n      this.selectedCatalogId = null;\n    }\n\n    if (this.store.count === 0) {\n      this.loadCatalogs();\n    }\n  }\n\n  /**\n   * When the selected catalog changes, toggle the the CatalogBrowser tool.\n   * @internal\n   * @param event Select event\n   */\n  onCatalogSelectChange(event: { selected: boolean; catalog: Catalog }) {\n    if (event.selected === false) {\n      return;\n    }\n    this.toolState.toolbox.activateTool('catalogBrowser');\n  }\n\n  /**\n   * Get all the available catalogs from the CatalogService and\n   * load them into the store.\n   */\n  private loadCatalogs() {\n    this.catalogService\n      .loadCatalogs()\n      .pipe(take(1))\n      .subscribe((catalogs: Catalog[]) => {\n        this.store.clear();\n        this.store.load(\n          catalogs.concat(\n            (this.storageService.get('addedCatalogs') || []) as Catalog[]\n          )\n        );\n      });\n  }\n}\n","<igo-catalog-library\n  [predefinedCatalogs]=\"predefinedCatalogs\"\n  [addCatalogAllowed]=\"addCatalogAllowed\"\n  [store]=\"store\"\n  (catalogSelectChange)=\"onCatalogSelectChange($event)\"\n>\n</igo-catalog-library>\n","import { Component } from '@angular/core';\n\nimport { ToolComponent } from '@igo2/common/tool';\nimport {\n  ContextEditBindingDirective,\n  ContextEditComponent\n} from '@igo2/context';\n\nimport { ToolState } from '../../tool/tool.state';\n\n@ToolComponent({\n  name: 'contextEditor',\n  title: 'igo.integration.tools.contexts',\n  icon: 'star',\n  parent: 'contextManager'\n})\n@Component({\n  selector: 'igo-context-editor-tool',\n  templateUrl: './context-editor-tool.component.html',\n  standalone: true,\n  imports: [ContextEditComponent, ContextEditBindingDirective]\n})\nexport class ContextEditorToolComponent {\n  constructor(private toolState: ToolState) {}\n\n  submitSuccessed() {\n    this.toolState.toolbox.activatePreviousTool();\n  }\n}\n","<igo-context-edit\n  igoContextEditBinding\n  (submitSuccessed)=\"submitSuccessed()\"\n></igo-context-edit>\n","import { Component, Input } from '@angular/core';\n\nimport { ToolComponent } from '@igo2/common/tool';\nimport {\n  ContextListBindingDirective,\n  ContextListComponent\n} from '@igo2/context';\nimport { IgoMap } from '@igo2/geo';\n\nimport { MapState } from '../../map/map.state';\nimport { ToolState } from '../../tool/tool.state';\n\n@ToolComponent({\n  name: 'contextManager',\n  title: 'igo.integration.tools.contexts',\n  icon: 'star'\n})\n@Component({\n  selector: 'igo-context-manager-tool',\n  templateUrl: './context-manager-tool.component.html',\n  standalone: true,\n  imports: [ContextListComponent, ContextListBindingDirective]\n})\nexport class ContextManagerToolComponent {\n  @Input() toolToOpenOnContextChange = 'mapTools';\n\n  get map(): IgoMap {\n    return this.mapState.map;\n  }\n\n  constructor(\n    private toolState: ToolState,\n    private mapState: MapState\n  ) {}\n\n  editContext() {\n    this.toolState.toolbox.activateTool('contextEditor');\n  }\n\n  managePermissions() {\n    this.toolState.toolbox.activateTool('contextPermissionManager');\n  }\n}\n","<igo-context-list\n  igoContextListBinding\n  [map]=\"map\"\n  (edit)=\"editContext()\"\n  (managePermissions)=\"managePermissions()\"\n>\n</igo-context-list>\n","import { Component } from '@angular/core';\n\nimport { ToolComponent } from '@igo2/common/tool';\nimport {\n  ContextPermissionsBindingDirective,\n  ContextPermissionsComponent\n} from '@igo2/context';\n\n@ToolComponent({\n  name: 'contextPermissionManager',\n  title: 'igo.integration.tools.contexts',\n  icon: 'star',\n  parent: 'contextManager'\n})\n@Component({\n  selector: 'igo-context-permission-manager-tool',\n  templateUrl: './context-permission-manager-tool.component.html',\n  standalone: true,\n  imports: [ContextPermissionsComponent, ContextPermissionsBindingDirective]\n})\nexport class ContextPermissionManagerToolComponent {}\n","<igo-context-permissions igoContextPermissionsBinding></igo-context-permissions>\n","import { Injectable } from '@angular/core';\n\nimport { LayerListControlsOptions } from '@igo2/geo';\n\nimport { BehaviorSubject } from 'rxjs';\n\n/**\n * Service that holds the state of layer list tool values\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class LayerListToolState {\n  readonly keyword$ = new BehaviorSubject<string>('');\n  readonly sortAlpha$ = new BehaviorSubject<boolean>(undefined);\n  readonly onlyVisible$ = new BehaviorSubject<boolean>(undefined);\n  readonly selectedTab$ = new BehaviorSubject<number>(undefined);\n\n  setKeyword(keyword: string) {\n    this.keyword$.next(keyword);\n  }\n\n  setSortAlpha(sort: boolean) {\n    this.sortAlpha$.next(sort);\n  }\n\n  setOnlyVisible(onlyVisible: boolean) {\n    this.onlyVisible$.next(onlyVisible);\n  }\n\n  setSelectedTab(tab: number) {\n    this.selectedTab$.next(tab);\n  }\n\n  getLayerListControls(): LayerListControlsOptions {\n    return {\n      keyword: this.keyword$.value,\n      onlyVisible: this.onlyVisible$.value,\n      sortAlpha: this.sortAlpha$.value\n    };\n  }\n}\n","import { Component } from '@angular/core';\n\nimport { ToolComponent } from '@igo2/common/tool';\nimport { ShareMapComponent } from '@igo2/context';\nimport { IgoMap, LayerListControlsOptions } from '@igo2/geo';\n\nimport { LayerListToolState } from '../../map/layer-list-tool.state';\nimport { MapState } from '../../map/map.state';\n\n@ToolComponent({\n  name: 'shareMap',\n  title: 'igo.integration.tools.shareMap',\n  icon: 'share'\n})\n@Component({\n  selector: 'igo-context-share-tool',\n  templateUrl: './context-share-tool.component.html',\n  standalone: true,\n  imports: [ShareMapComponent]\n})\nexport class ContextShareToolComponent {\n  get map(): IgoMap {\n    return this.mapState.map;\n  }\n\n  get layerListControls(): LayerListControlsOptions {\n    return this.layerListToolState.getLayerListControls();\n  }\n\n  constructor(\n    private mapState: MapState,\n    private layerListToolState: LayerListToolState\n  ) {}\n}\n","<igo-share-map [map]=\"map\"></igo-share-map>\n","import { Injectable } from '@angular/core';\n\nimport { Tool, ToolService } from '@igo2/common/tool';\nimport { ContextService, DetailedContext } from '@igo2/context';\nimport { LanguageService } from '@igo2/core/language';\n\nimport { BehaviorSubject } from 'rxjs';\n\nimport { ToolState } from '../tool/tool.state';\n\n/**\n * Service that holds the state of the context module\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class ContextState {\n  /**\n   * Observable of the active context\n   */\n  context$ = new BehaviorSubject<DetailedContext>(undefined);\n\n  constructor(\n    private contextService: ContextService,\n    private toolService: ToolService,\n    private toolState: ToolState,\n    private languageService: LanguageService\n  ) {\n    this.contextService.context$.subscribe((context: DetailedContext) => {\n      this.onContextChange(context);\n    });\n    this.contextService.toolsChanged$.subscribe((context: DetailedContext) => {\n      this.updateTools(context);\n    });\n  }\n\n  /**\n   * Set the active context\n   * @param context Detailed context\n   */\n  private setContext(context: DetailedContext) {\n    this.updateTools(context);\n    this.context$.next(context);\n  }\n\n  /**\n   * Update the tool state with the context's tools\n   * @param context Detailed context\n   */\n  private updateTools(context: DetailedContext) {\n    const toolbox = this.toolState.toolbox;\n\n    const tools = [];\n    const contextTools = context.tools || [];\n    contextTools.forEach((contextTool: Tool) => {\n      const baseTool = this.toolService.getTool(contextTool.name);\n      if (baseTool === undefined) {\n        return;\n      }\n\n      const options = Object.assign(\n        {},\n        baseTool.options || {},\n        contextTool.options || {}\n      );\n      const tool = Object.assign({}, baseTool, contextTool, { options });\n      tools.push(tool);\n    });\n\n    tools.forEach((tool) => {\n      if (tool.parent) {\n        const parentIndex = tools.findIndex((el) => el.name === tool.parent);\n        if (parentIndex !== -1) {\n          tools[parentIndex].children = [];\n          tools[parentIndex].children.push(tool.name);\n        }\n      }\n    });\n\n    toolbox.setTools(tools);\n    toolbox.setToolbar(context.toolbar || []);\n\n    // TODO: This is a patch so the context service can work without\n    // injecting the ToolState or without being completely refactored\n    this.contextService.setTools([].concat(tools));\n    this.contextService.setToolbar(context.toolbar || []);\n  }\n\n  /**\n   * Set a new context and update the tool state\n   * @param context Detailed context\n   */\n  private onContextChange(context: DetailedContext) {\n    if (context === undefined) {\n      return;\n    }\n    this.setContext(context);\n  }\n}\n","import { Injectable } from '@angular/core';\n\nimport {\n  RoutesFeatureStore,\n  StepsFeatureStore,\n  StopsFeatureStore,\n  StopsStore\n} from '@igo2/geo';\n\nimport { Subject } from 'rxjs';\n\nimport { MapState } from '../map/map.state';\n\n/**\n * Service that holds the state of the direction module\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class DirectionState {\n  public zoomToActiveRoute$ = new Subject<void>();\n\n  /**\n   * Store that holds the stop\n   */\n  public stopsStore: StopsStore = new StopsStore([]);\n\n  /**\n   * Store that holds the driving stops as feature\n   */\n  public stopsFeatureStore: StopsFeatureStore;\n\n  /**\n   * Store that holds the driving route as feature\n   */\n  public routesFeatureStore: RoutesFeatureStore;\n\n  public stepFeatureStore: StepsFeatureStore;\n\n  public debounceTime = 200;\n\n  constructor(private mapState: MapState) {\n    this.stopsFeatureStore = new StopsFeatureStore([], {\n      map: this.mapState.map\n    });\n\n    this.routesFeatureStore = new RoutesFeatureStore([], {\n      map: this.mapState.map\n    });\n\n    this.stepFeatureStore = new StepsFeatureStore([], {\n      map: this.mapState.map\n    });\n\n    this.mapState.map.layerController.all$.subscribe(() => {\n      if (\n        !this.mapState.map.layerController.getById('igo-direction-stops-layer')\n      ) {\n        this.stopsStore.deleteMany(this.stopsStore.all());\n        this.stopsFeatureStore.deleteMany(this.stopsFeatureStore.all()); // not necessary\n      }\n      if (\n        !this.mapState.map.layerController.getById('igo-direction-route-layer')\n      ) {\n        this.routesFeatureStore.deleteMany(this.routesFeatureStore.all());\n      }\n    });\n  }\n}\n","import { Component, OnInit } from '@angular/core';\n\nimport { AuthService } from '@igo2/auth';\nimport { ToolComponent } from '@igo2/common/tool';\nimport { LanguageService } from '@igo2/core/language';\nimport { MessageService } from '@igo2/core/message';\nimport { StorageScope, StorageService } from '@igo2/core/storage';\nimport {\n  IgoDirectionsModule,\n  IgoMap,\n  RoutesFeatureStore,\n  StepsFeatureStore,\n  StopsFeatureStore,\n  StopsStore\n} from '@igo2/geo';\n\nimport { BehaviorSubject, Subject } from 'rxjs';\n\nimport { ContextState } from '../../context/context.state';\nimport { MapState } from '../../map/map.state';\nimport { DirectionState } from '../directions.state';\n\n@ToolComponent({\n  name: 'directions',\n  title: 'igo.integration.tools.directions',\n  icon: 'directions'\n})\n@Component({\n  selector: 'igo-directions-tool',\n  templateUrl: './directions-tool.component.html',\n  standalone: true,\n  imports: [IgoDirectionsModule]\n})\nexport class DirectionsToolComponent implements OnInit {\n  public currentContextUri: string;\n  /**\n   * stops\n   * @internal\n   */\n  get stopsStore(): StopsStore {\n    return this.directionState.stopsStore;\n  }\n\n  get debounceTime(): number {\n    return this.directionState.debounceTime;\n  }\n\n  /**\n   * stops\n   * @internal\n   */\n  get stopsFeatureStore(): StopsFeatureStore {\n    return this.directionState.stopsFeatureStore;\n  }\n\n  /**\n   * routes\n   * @internal\n   */\n  get routesFeatureStore(): RoutesFeatureStore {\n    return this.directionState.routesFeatureStore;\n  }\n\n  /**\n   * step store\n   * @internal\n   */\n  get stepFeatureStore(): StepsFeatureStore {\n    return this.directionState.stepFeatureStore;\n  }\n\n  /**\n   * step store\n   * @internal\n   */\n  get zoomOnActiveRoute$(): Subject<void> {\n    return this.directionState.zoomToActiveRoute$;\n  }\n\n  get authenticated$(): BehaviorSubject<boolean> {\n    return this.authService.authenticate$;\n  }\n\n  /**\n   * Map to measure on\n   * @internal\n   */\n  get map(): IgoMap {\n    return this.mapState.map;\n  }\n\n  constructor(\n    private directionState: DirectionState,\n    private mapState: MapState,\n    private languageService: LanguageService,\n    private messageService: MessageService,\n    private storageService: StorageService,\n    public contextState: ContextState,\n    private authService: AuthService\n  ) {}\n\n  ngOnInit(): void {\n    const warningShown = this.storageService.get(\n      'direction.warning.shown'\n    ) as boolean;\n    if (!warningShown) {\n      this.messageService.info(\n        'igo.integration.directions.warning.message',\n        'igo.integration.directions.warning.title',\n        { timeOut: 20000 }\n      );\n      this.storageService.set(\n        'direction.warning.shown',\n        true,\n        StorageScope.SESSION\n      );\n    }\n    this.contextState.context$.subscribe((c) => {\n      if (!this.authService.authenticated) {\n        this.currentContextUri = c.uri;\n      }\n    });\n  }\n}\n","<igo-directions\n  [contextUri]=\"currentContextUri\"\n  [debounce]=\"debounceTime\"\n  [stopsStore]=\"stopsStore\"\n  [stopsFeatureStore]=\"stopsFeatureStore\"\n  [stepsFeatureStore]=\"stepFeatureStore\"\n  [routesFeatureStore]=\"routesFeatureStore\"\n  [zoomOnActiveRoute$]=\"zoomOnActiveRoute$\"\n  [authenticated$]=\"authenticated$\"\n>\n</igo-directions>\n","import { Injectable } from '@angular/core';\n\nimport {\n  DrawControl,\n  FeatureStore,\n  FeatureWithDraw,\n  VectorLayer\n} from '@igo2/geo';\n\nimport { MapState } from '../map/map.state';\n\n/**\n * Service that holds the state of the measure module\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class DrawState {\n  public stores: FeatureStore<FeatureWithDraw>[] = [];\n  public layersID: string[] = [];\n  public drawControls: [string, DrawControl][] = [];\n  public activeDrawingLayer: VectorLayer;\n\n  constructor(private mapState: MapState) {\n    this.mapState.map.layerController.all$.subscribe(() => {\n      this.layersID.forEach((layerId) => {\n        if (!this.mapState.map.layerController.getById(layerId)) {\n          const deletedStore = this.stores.find(\n            (store) => store.layer.id === layerId\n          );\n          deletedStore.deleteMany(deletedStore.all());\n          this.stores.splice(this.stores.indexOf(deletedStore, 0), 1);\n          this.layersID.splice(this.layersID.indexOf(layerId, 0), 1);\n          const drawControlIndex = this.drawControls.findIndex(\n            (dc) => dc[0] === layerId\n          );\n          this.drawControls.splice(drawControlIndex, 1);\n        }\n      });\n    });\n    for (let store of this.stores) {\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\n      store = new FeatureStore<FeatureWithDraw>([], { map: this.mapState.map });\n    }\n  }\n}\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\n\nimport { ToolComponent } from '@igo2/common/tool';\nimport {\n  DrawComponent,\n  DrawControl,\n  FeatureStore,\n  FeatureWithDraw,\n  IgoMap,\n  VectorLayer\n} from '@igo2/geo';\n\nimport { MapState } from '../../map/map.state';\nimport { DrawState } from '../draw.state';\n\n/**\n * Tool to measure lengths and areas\n */\n@ToolComponent({\n  name: 'draw',\n  title: 'igo.integration.tools.draw',\n  icon: 'stylus_note'\n})\n@Component({\n  selector: 'igo-drawing-tool',\n  templateUrl: './drawing-tool.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  standalone: true,\n  imports: [DrawComponent]\n})\nexport class DrawingToolComponent {\n  /**\n   * Map to measure on\n   * @internal\n   */\n  get stores(): FeatureStore<FeatureWithDraw>[] {\n    return this.drawState.stores;\n  }\n\n  /**\n   * Map to measure on\n   * @internal\n   */\n  get map(): IgoMap {\n    return this.mapState.map;\n  }\n\n  get layersID(): string[] {\n    return this.drawState.layersID;\n  }\n\n  get drawControls(): [string, DrawControl][] {\n    return this.drawState.drawControls;\n  }\n  set drawControls(dc: [string, DrawControl][]) {\n    this.drawState.drawControls = dc;\n  }\n\n  get activeDrawingLayer(): VectorLayer {\n    return this.drawState.activeDrawingLayer;\n  }\n  set activeDrawingLayer(value: VectorLayer) {\n    this.drawState.activeDrawingLayer = value;\n  }\n\n  public addLayersID(layerID: string) {\n    this.layersID.push(layerID);\n  }\n\n  public addDrawControls(dc: [string, DrawControl][]) {\n    this.drawControls = dc;\n  }\n\n  constructor(\n    private drawState: DrawState,\n    private mapState: MapState\n  ) {}\n}\n","<igo-draw\n  [stores]=\"stores\"\n  [map]=\"map\"\n  (layersIDEvent)=\"addLayersID($event)\"\n  [activeDrawingLayer]=\"activeDrawingLayer\"\n  [drawControls]=\"drawControls\"\n  (drawControlsEvent)=\"addDrawControls($event)\"\n  (activeLayerChange)=\"activeDrawingLayer = $event\"\n>\n</igo-draw>\n","import {\n  AnimationTriggerMetadata,\n  animate,\n  state,\n  style,\n  transition,\n  trigger\n} from '@angular/animations';\n\nexport function toolSlideInOut(\n  speed = '300ms',\n  type = 'ease-in-out'\n): AnimationTriggerMetadata {\n  return trigger('toolSlideInOut', [\n    state(\n      'enter',\n      style({\n        transform: 'translateX(100%)'\n      })\n    ),\n    transition('void => enter', animate(speed + ' ' + type))\n  ]);\n}\n","import { Component } from '@angular/core';\n\nimport { ToolComponent } from '@igo2/common/tool';\nimport {\n  IgoMap,\n  Layer,\n  OgcFilterableItemComponent,\n  isLayerItem\n} from '@igo2/geo';\n\nimport { MapState } from '../../map/map.state';\nimport { toolSlideInOut } from './active-ogc-filter-tool.animation';\n\n@ToolComponent({\n  name: 'activeOgcFilter',\n  title: 'igo.integration.tools.ogcFilter',\n  icon: 'filter',\n  parent: 'mapTools'\n})\n@Component({\n  selector: 'igo-active-ogc-filter-tool',\n  templateUrl: './active-ogc-filter-tool.component.html',\n  animations: [toolSlideInOut()],\n  standalone: true,\n  imports: [OgcFilterableItemComponent]\n})\nexport class ActiveOgcFilterToolComponent {\n  get map(): IgoMap {\n    return this.mapState.map;\n  }\n\n  get layer(): Layer {\n    for (const lay of this.map.layerController.all) {\n      if (isLayerItem(lay) && this.map.layerController.isSelected(lay)) {\n        return lay;\n      }\n    }\n    return;\n  }\n\n  public animate = 'enter';\n\n  constructor(public mapState: MapState) {}\n}\n","<igo-ogc-filterable-item\n  [map]=\"map\"\n  [layer]=\"layer\"\n  [header]=\"false\"\n  [@toolSlideInOut]=\"animate\"\n>\n</igo-ogc-filterable-item>\n","import {\n  AnimationTriggerMetadata,\n  animate,\n  state,\n  style,\n  transition,\n  trigger\n} from '@angular/animations';\n\nexport function toolSlideInOut(\n  speed = '300ms',\n  type = 'ease-in-out'\n): AnimationTriggerMetadata {\n  return trigger('toolSlideInOut', [\n    state(\n      'enter',\n      style({\n        transform: 'translateX(100%)'\n      })\n    ),\n    transition('void => enter', animate(speed + ' ' + type))\n  ]);\n}\n","import { Component } from '@angular/core';\n\nimport { ToolComponent } from '@igo2/common/tool';\nimport { IgoMap, Layer, TimeFilterItemComponent, isLayerItem } from '@igo2/geo';\n\nimport { MapState } from '../../map/map.state';\nimport { toolSlideInOut } from './active-time-filter-tool.animation';\n\n@ToolComponent({\n  name: 'activeTimeFilter',\n  title: 'igo.integration.tools.timeFilter',\n  icon: 'history',\n  parent: 'mapTools'\n})\n@Component({\n  selector: 'igo-active-time-filter-tool',\n  templateUrl: './active-time-filter-tool.component.html',\n  animations: [toolSlideInOut()],\n  standalone: true,\n  imports: [TimeFilterItemComponent]\n})\nexport class ActiveTimeFilterToolComponent {\n  get map(): IgoMap {\n    return this.mapState.map;\n  }\n\n  get layer(): Layer {\n    for (const lay of this.map.layerController.all) {\n      if (isLayerItem(lay) && this.map.layerController.isSelected(lay)) {\n        return lay;\n      }\n    }\n    return;\n  }\n\n  public animate = 'enter';\n\n  constructor(public mapState: MapState) {}\n}\n","<igo-time-filter-item\n  [layer]=\"layer\"\n  [header]=\"false\"\n  [@toolSlideInOut]=\"animate\"\n>\n</igo-time-filter-item>\n","import { Component } from '@angular/core';\n\nimport { ToolComponent } from '@igo2/common/tool';\nimport {\n  OgcFilterableListBindingDirective,\n  OgcFilterableListComponent\n} from '@igo2/geo';\n\n@ToolComponent({\n  name: 'ogcFilter',\n  title: 'igo.integration.tools.ogcFilter',\n  icon: 'filter'\n})\n@Component({\n  selector: 'igo-ogc-filter-tool',\n  templateUrl: './ogc-filter-tool.component.html',\n  standalone: true,\n  imports: [OgcFilterableListComponent, OgcFilterableListBindingDirective]\n})\nexport class OgcFilterToolComponent {}\n","<igo-ogc-filterable-list igoOgcFilterableListBinding></igo-ogc-filterable-list>\n","import { Injectable } from '@angular/core';\n\nimport { StorageService } from '@igo2/core/storage';\n\n/**\n * Service that holds the state of storage service\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class StorageState {\n  get storageService(): StorageService {\n    return this.igoStorageService;\n  }\n\n  constructor(private igoStorageService: StorageService) {}\n}\n","import { Action } from '@igo2/common/action';\nimport {\n  EntityStoreFilterCustomFuncStrategy,\n  EntityStoreFilterSelectionStrategy\n} from '@igo2/common/entity';\nimport { Widget } from '@igo2/common/widget';\nimport { LanguageService } from '@igo2/core/language';\nimport { MediaService } from '@igo2/core/media';\nimport { StorageService } from '@igo2/core/storage';\nimport {\n  EditionWorkspace,\n  FeatureMotion,\n  FeatureStoreSelectionStrategy,\n  FeatureWorkspace,\n  OgcFilterableDataSource,\n  WfsWorkspace,\n  mapExtentStrategyActiveToolTip,\n  noElementSelected\n} from '@igo2/geo';\n\nimport { jsPDF } from 'jspdf';\nimport { autoTable } from 'jspdf-autotable';\nimport moment from 'moment';\nimport { BehaviorSubject, map } from 'rxjs';\n\nimport { ToolState } from '../../tool';\n\nexport function handleZoomAuto(\n  workspace: FeatureWorkspace | WfsWorkspace | EditionWorkspace,\n  storageService\n) {\n  const zoomStrategy = workspace.entityStore.getStrategyOfType(\n    FeatureStoreSelectionStrategy\n  ) as FeatureStoreSelectionStrategy;\n  zoomStrategy.setMotion(\n    (storageService.get('zoomAuto') as boolean)\n      ? FeatureMotion.Default\n      : FeatureMotion.None\n  );\n}\n\nexport function getWorkspaceActions(\n  workspace: FeatureWorkspace | WfsWorkspace | EditionWorkspace,\n  rowsInMapExtentCheckCondition$: BehaviorSubject<boolean>,\n  selectOnlyCheckCondition$: BehaviorSubject<boolean>,\n  ogcFilterWidget: Widget,\n  zoomAuto$: BehaviorSubject<boolean>,\n  maximize$: BehaviorSubject<boolean>,\n  storageService: StorageService,\n  languageService: LanguageService,\n  mediaService: MediaService,\n  toolState: ToolState\n): Action[] {\n  const actions = [\n    {\n      id: 'zoomAuto',\n      checkbox: true,\n      title: 'igo.integration.workspace.zoomAuto.title',\n      tooltip: 'igo.integration.workspace.zoomAuto.tooltip',\n      checkCondition: zoomAuto$,\n      handler: () => {\n        handleZoomAuto(workspace, storageService);\n        storageService.set(\n          'zoomAuto',\n          !storageService.get('zoomAuto') as boolean\n        );\n      }\n    },\n    {\n      id: 'filterInMapExtent',\n      checkbox: true,\n      title: 'igo.integration.workspace.inMapExtent.title',\n      tooltip: mapExtentStrategyActiveToolTip(workspace),\n      checkCondition: rowsInMapExtentCheckCondition$,\n      handler: () =>\n        rowsInMapExtentCheckCondition$.next(\n          !rowsInMapExtentCheckCondition$.value\n        )\n    },\n    {\n      id: 'selectedOnly',\n      checkbox: true,\n      title: 'igo.integration.workspace.selected.title',\n      tooltip: 'igo.integration.workspace.selected.tooltip',\n      checkCondition: selectOnlyCheckCondition$,\n      handler: () =>\n        selectOnlyCheckCondition$.next(!selectOnlyCheckCondition$.value)\n    },\n    {\n      id: 'clearselection',\n      icon: 'deselect',\n      title: 'igo.integration.workspace.clearSelection.title',\n      tooltip: 'igo.integration.workspace.clearSelection.tooltip',\n      handler: (ws: FeatureWorkspace | WfsWorkspace | EditionWorkspace) => {\n        ws.entityStore.state.updateMany(ws.entityStore.view.all(), {\n          selected: false\n        });\n      },\n      args: [workspace],\n      availability: (ws: FeatureWorkspace | WfsWorkspace | EditionWorkspace) =>\n        noElementSelected(ws)\n    },\n    {\n      id: 'featureDownload',\n      icon: 'file_save',\n      title: 'igo.integration.workspace.download.title',\n      tooltip: 'igo.integration.workspace.download.tooltip',\n      handler: (ws: FeatureWorkspace | WfsWorkspace | EditionWorkspace) => {\n        const filterStrategy = ws.entityStore.getStrategyOfType(\n          EntityStoreFilterCustomFuncStrategy\n        );\n        const filterSelectionStrategy = ws.entityStore.getStrategyOfType(\n          EntityStoreFilterSelectionStrategy\n        );\n        const layersWithSelection = filterSelectionStrategy.active\n          ? [ws.layer.id]\n          : [];\n        toolState.toolToActivateFromOptions({\n          tool: 'importExport',\n          options: {\n            layers: [ws.layer.id],\n            featureInMapExtent: filterStrategy.active,\n            layersWithSelection\n          }\n        });\n      },\n      args: [workspace]\n    },\n    {\n      id: 'ogcFilter',\n      icon: 'filter_alt',\n      title: 'igo.integration.workspace.ogcFilter.title',\n      tooltip: 'igo.integration.workspace.ogcFilter.tooltip',\n      handler: (\n        widget: Widget,\n        ws: FeatureWorkspace | WfsWorkspace | EditionWorkspace\n      ) => {\n        ws.activateWidget(widget, {\n          map: ws.map,\n          layer: ws.layer\n        });\n      },\n      args: [ogcFilterWidget, workspace]\n    },\n    {\n      id: 'maximize',\n      title: languageService.translate.instant(\n        'igo.integration.workspace.maximize'\n      ),\n      tooltip: languageService.translate.instant(\n        'igo.integration.workspace.maximizeTooltip'\n      ),\n      icon: 'resize',\n      display: () => {\n        return maximize$.pipe(map((v) => !v && !mediaService.isMobile()));\n      },\n      handler: () => {\n        if (!mediaService.isMobile()) {\n          maximize$.next(true);\n        }\n      }\n    },\n    {\n      id: 'standardExtent',\n      title: languageService.translate.instant(\n        'igo.integration.workspace.standardExtent'\n      ),\n      tooltip: languageService.translate.instant(\n        'igo.integration.workspace.standardExtentTooltip'\n      ),\n      icon: 'resize',\n      display: () => {\n        return maximize$.pipe(map((v) => v && !mediaService.isMobile()));\n      },\n      handler: () => {\n        maximize$.next(false);\n      }\n    },\n    {\n      id: 'print',\n      icon: 'print',\n      title: 'igo.integration.workspace.print.title',\n      tooltip: 'igo.integration.workspace.print.tooltip',\n      handler: (ws: FeatureWorkspace | WfsWorkspace | EditionWorkspace) => {\n        const title = `${ws.layer.title} (${dateTransform(\n          new Date(),\n          'YYYY-MM-DD-HH_mm'\n        )})`;\n        const doc = new jsPDF({\n          orientation: 'landscape'\n        });\n        const totalPagesExp = '{total_pages_count_string}';\n        doc.text(title, 14, 20);\n        autoTable(doc, {\n          startY: 25,\n          tableWidth: 'wrap',\n          html: '#currentWorkspaceTable',\n          horizontalPageBreak: true,\n          styles: { cellPadding: 0.5, minCellWidth: 20, fontSize: 6 },\n          didDrawPage: (data) => {\n            let str = 'Page ' + doc.getNumberOfPages();\n            if (typeof doc.putTotalPages === 'function') {\n              str = str + ' / ' + totalPagesExp;\n            }\n            doc.setFontSize(6);\n            const pageSize = doc.internal.pageSize;\n            const pageHeight = pageSize.height\n              ? pageSize.height\n              : pageSize.getHeight();\n            doc.text(str, data.settings.margin.left, pageHeight - 10);\n          }\n        });\n        if (typeof doc.putTotalPages === 'function') {\n          doc.putTotalPages(totalPagesExp);\n        }\n        doc.save(`${title}.pdf`);\n      },\n      args: [workspace]\n    }\n  ];\n  let returnActions = (workspace.layer.dataSource as OgcFilterableDataSource)\n    .options.ogcFilters?.enabled\n    ? actions\n    : actions.filter((action) => action.id !== 'ogcFilter');\n  returnActions =\n    workspace.layer.options.workspace.printable !== false\n      ? actions\n      : actions.filter((action) => action.id !== 'print');\n  return returnActions;\n}\n\nfunction dateTransform(date: Date, format: string): string {\n  return moment(date).format(format);\n}\n","import { Inject, Injectable, OnDestroy, Optional } from '@angular/core';\n\nimport { Action } from '@igo2/common/action';\nimport { Widget } from '@igo2/common/widget';\nimport { LanguageService } from '@igo2/core/language';\nimport { MediaService } from '@igo2/core/media';\nimport {\n  StorageService,\n  StorageServiceEvent,\n  StorageServiceEventEnum\n} from '@igo2/core/storage';\nimport { EditionWorkspace, OgcFilterWidget } from '@igo2/geo';\n\nimport { BehaviorSubject, Subscription } from 'rxjs';\nimport { skipWhile } from 'rxjs/operators';\n\nimport { StorageState } from '../../storage/storage.state';\nimport { ToolState } from '../../tool/tool.state';\nimport { getWorkspaceActions, handleZoomAuto } from './workspace.utils';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class EditionActionsService implements OnDestroy {\n  public maximize$: BehaviorSubject<boolean>;\n\n  zoomAuto$ = new BehaviorSubject<boolean>(false);\n  private storageChange$$: Subscription;\n\n  get storageService(): StorageService {\n    return this.storageState.storageService;\n  }\n\n  get zoomAuto(): boolean {\n    return this.storageService.get('zoomAuto') as boolean;\n  }\n\n  constructor(\n    @Optional()\n    @Inject(OgcFilterWidget)\n    private ogcFilterWidget: Widget,\n    private storageState: StorageState,\n    public languageService: LanguageService,\n    private mediaService: MediaService,\n    private toolState: ToolState\n  ) {\n    this.maximize$ = new BehaviorSubject(\n      this.storageService.get('workspaceMaximize') as boolean\n    );\n  }\n\n  ngOnDestroy(): void {\n    if (this.storageChange$$) {\n      this.storageChange$$.unsubscribe();\n    }\n  }\n\n  loadActions(\n    workspace: EditionWorkspace,\n    rowsInMapExtentCheckCondition$: BehaviorSubject<boolean>,\n    selectOnlyCheckCondition$: BehaviorSubject<boolean>\n  ) {\n    const actions = this.buildActions(\n      workspace,\n      rowsInMapExtentCheckCondition$,\n      selectOnlyCheckCondition$\n    );\n    workspace.actionStore.load(actions);\n  }\n\n  buildActions(\n    workspace: EditionWorkspace,\n    rowsInMapExtentCheckCondition$: BehaviorSubject<boolean>,\n    selectOnlyCheckCondition$: BehaviorSubject<boolean>\n  ): Action[] {\n    this.zoomAuto$.next(this.zoomAuto);\n    this.storageChange$$ = this.storageService.storageChange$\n      .pipe(\n        skipWhile(\n          (storageChange: StorageServiceEvent) =>\n            storageChange?.key !== 'zoomAuto' ||\n            storageChange?.event === StorageServiceEventEnum.CLEARED\n        )\n      )\n      .subscribe(() => {\n        this.zoomAuto$.next(this.zoomAuto);\n        handleZoomAuto(workspace, this.storageService);\n      });\n    return getWorkspaceActions(\n      workspace,\n      rowsInMapExtentCheckCondition$,\n      selectOnlyCheckCondition$,\n      this.ogcFilterWidget,\n      this.zoomAuto$,\n      this.maximize$,\n      this.storageService,\n      this.languageService,\n      this.mediaService,\n      this.toolState\n    );\n  }\n}\n","import { Injectable, OnDestroy } from '@angular/core';\n\nimport { Action } from '@igo2/common/action';\nimport { LanguageService } from '@igo2/core/language';\nimport { MediaService } from '@igo2/core/media';\nimport {\n  StorageService,\n  StorageServiceEvent,\n  StorageServiceEventEnum\n} from '@igo2/core/storage';\nimport { FeatureWorkspace } from '@igo2/geo';\n\nimport { BehaviorSubject, Subscription } from 'rxjs';\nimport { skipWhile } from 'rxjs/operators';\n\nimport { StorageState } from '../../storage/storage.state';\nimport { ToolState } from '../../tool/tool.state';\nimport { getWorkspaceActions, handleZoomAuto } from './workspace.utils';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class FeatureActionsService implements OnDestroy {\n  public maximize$: BehaviorSubject<boolean>;\n\n  zoomAuto$ = new BehaviorSubject<boolean>(false);\n  private storageChange$$: Subscription;\n\n  get storageService(): StorageService {\n    return this.storageState.storageService;\n  }\n\n  get zoomAuto(): boolean {\n    return this.storageService.get('zoomAuto') as boolean;\n  }\n\n  constructor(\n    private storageState: StorageState,\n    public languageService: LanguageService,\n    private toolState: ToolState,\n    private mediaService: MediaService\n  ) {\n    this.maximize$ = new BehaviorSubject(\n      this.storageService.get('workspaceMaximize') as boolean\n    );\n  }\n\n  ngOnDestroy(): void {\n    if (this.storageChange$$) {\n      this.storageChange$$.unsubscribe();\n    }\n  }\n\n  loadActions(\n    workspace: FeatureWorkspace,\n    rowsInMapExtentCheckCondition$: BehaviorSubject<boolean>,\n    selectOnlyCheckCondition$: BehaviorSubject<boolean>\n  ) {\n    const actions = this.buildActions(\n      workspace,\n      rowsInMapExtentCheckCondition$,\n      selectOnlyCheckCondition$\n    );\n    workspace.actionStore.load(actions);\n  }\n\n  buildActions(\n    workspace: FeatureWorkspace,\n    rowsInMapExtentCheckCondition$: BehaviorSubject<boolean>,\n    selectOnlyCheckCondition$: BehaviorSubject<boolean>\n  ): Action[] {\n    this.zoomAuto$.next(this.zoomAuto);\n    this.storageChange$$ = this.storageService.storageChange$\n      .pipe(\n        skipWhile(\n          (storageChange: StorageServiceEvent) =>\n            storageChange?.key !== 'zoomAuto' ||\n            storageChange?.event === StorageServiceEventEnum.CLEARED\n        )\n      )\n      .subscribe(() => {\n        this.zoomAuto$.next(this.zoomAuto);\n        handleZoomAuto(workspace, this.storageService);\n      });\n    return getWorkspaceActions(\n      workspace,\n      rowsInMapExtentCheckCondition$,\n      selectOnlyCheckCondition$,\n      undefined,\n      this.zoomAuto$,\n      this.maximize$,\n      this.storageService,\n      this.languageService,\n      this.mediaService,\n      this.toolState\n    );\n  }\n}\n","import { Inject, Injectable, OnDestroy, Optional } from '@angular/core';\n\nimport { Action } from '@igo2/common/action';\nimport { Widget } from '@igo2/common/widget';\nimport { LanguageService } from '@igo2/core/language';\nimport { MediaService } from '@igo2/core/media';\nimport {\n  StorageService,\n  StorageServiceEvent,\n  StorageServiceEventEnum\n} from '@igo2/core/storage';\nimport { OgcFilterWidget, WfsWorkspace } from '@igo2/geo';\n\nimport { BehaviorSubject, Subscription } from 'rxjs';\nimport { skipWhile } from 'rxjs/operators';\n\nimport { StorageState } from '../../storage/storage.state';\nimport { ToolState } from '../../tool/tool.state';\nimport { getWorkspaceActions, handleZoomAuto } from './workspace.utils';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class WfsActionsService implements OnDestroy {\n  public maximize$: BehaviorSubject<boolean>;\n\n  selectOnlyCheckCondition$ = new BehaviorSubject<boolean>(false);\n  // rowsInMapExtentCheckCondition$: BehaviorSubject<boolean> = new BehaviorSubject(true);\n  zoomAuto$ = new BehaviorSubject<boolean>(false);\n  private storageChange$$: Subscription;\n\n  get storageService(): StorageService {\n    return this.storageState.storageService;\n  }\n\n  get zoomAuto(): boolean {\n    return this.storageService.get('zoomAuto') as boolean;\n  }\n\n  constructor(\n    @Optional()\n    @Inject(OgcFilterWidget)\n    private ogcFilterWidget: Widget,\n    private storageState: StorageState,\n    public languageService: LanguageService,\n    private mediaService: MediaService,\n    private toolState: ToolState\n  ) {\n    this.maximize$ = new BehaviorSubject(\n      this.storageService.get('workspaceMaximize') as boolean\n    );\n  }\n\n  ngOnDestroy(): void {\n    if (this.storageChange$$) {\n      this.storageChange$$.unsubscribe();\n    }\n  }\n\n  loadActions(\n    workspace: WfsWorkspace,\n    rowsInMapExtentCheckCondition$: BehaviorSubject<boolean>,\n    selectOnlyCheckCondition$: BehaviorSubject<boolean>\n  ) {\n    const actions = this.buildActions(\n      workspace,\n      rowsInMapExtentCheckCondition$,\n      selectOnlyCheckCondition$\n    );\n    workspace.actionStore.load(actions);\n  }\n\n  buildActions(\n    workspace: WfsWorkspace,\n    rowsInMapExtentCheckCondition$: BehaviorSubject<boolean>,\n    selectOnlyCheckCondition$: BehaviorSubject<boolean>\n  ): Action[] {\n    this.zoomAuto$.next(this.zoomAuto);\n    this.storageChange$$ = this.storageService.storageChange$\n      .pipe(\n        skipWhile(\n          (storageChange: StorageServiceEvent) =>\n            storageChange?.key !== 'zoomAuto' ||\n            storageChange?.event === StorageServiceEventEnum.CLEARED\n        )\n      )\n      .subscribe(() => {\n        this.zoomAuto$.next(this.zoomAuto);\n        handleZoomAuto(workspace, this.storageService);\n      });\n    return getWorkspaceActions(\n      workspace,\n      rowsInMapExtentCheckCondition$,\n      selectOnlyCheckCondition$,\n      this.ogcFilterWidget,\n      this.zoomAuto$,\n      this.maximize$,\n      this.storageService,\n      this.languageService,\n      this.mediaService,\n      this.toolState\n    );\n  }\n}\n","import { Injectable, OnDestroy } from '@angular/core';\n\nimport {\n  EntityRecord,\n  EntityState,\n  EntityStoreFilterCustomFuncStrategy,\n  EntityStoreFilterSelectionStrategy\n} from '@igo2/common/entity';\nimport { Widget } from '@igo2/common/widget';\nimport { Workspace, WorkspaceStore } from '@igo2/common/workspace';\nimport { StorageService } from '@igo2/core/storage';\nimport { EditionWorkspace, FeatureWorkspace, WfsWorkspace } from '@igo2/geo';\n\nimport { BehaviorSubject, Observable, Subscription, of } from 'rxjs';\n\nimport { EditionActionsService } from './shared/edition-actions.service';\nimport { FeatureActionsService } from './shared/feature-actions.service';\nimport { WfsActionsService } from './shared/wfs-actions.service';\n\n/**\n * Service that holds the state of the workspace module\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class WorkspaceState implements OnDestroy {\n  public workspacePanelExpanded = false;\n\n  readonly workspaceEnabled$: BehaviorSubject<boolean> =\n    new BehaviorSubject<boolean>(false);\n  readonly rowsInMapExtentCheckCondition$: BehaviorSubject<boolean> =\n    new BehaviorSubject<boolean>(true);\n  readonly selectOnlyCheckCondition$: BehaviorSubject<boolean> =\n    new BehaviorSubject<boolean>(false);\n\n  readonly workspaceMaximize$: BehaviorSubject<boolean>;\n  private actionMaximize$$: Subscription[] = [];\n\n  private rowsInMapExtentCheckCondition$$: Subscription;\n  private selectOnlyCheckCondition$$: Subscription;\n\n  /** Subscription to the active workspace */\n  private activeWorkspace$$: Subscription;\n\n  /** Subscription to the active workspace widget */\n  private activeWorkspaceWidget$$: Subscription;\n\n  /** Active widget observable. Only one may be active for all available workspaces */\n  readonly activeWorkspaceWidget$: BehaviorSubject<Widget> =\n    new BehaviorSubject<Widget>(undefined);\n\n  /**\n   * Observable of the active workspace\n   */\n  public workspace$ = new BehaviorSubject<Workspace>(undefined);\n\n  /**\n   * Store that holds all the available workspaces\n   */\n  get store(): WorkspaceStore {\n    return this._store;\n  }\n  private _store: WorkspaceStore;\n\n  get workspaceSelection() {\n    if (this.workspace$.value) {\n      return this.workspace$.value?.entityStore.stateView.manyBy(\n        (r) => r.state.selected === true\n      );\n    } else {\n      return [];\n    }\n  }\n\n  get workspaceSelection$(): Observable<EntityRecord<object, EntityState>[]> {\n    if (this.workspace$.value) {\n      return this.workspace$.value?.entityStore?.stateView.manyBy$(\n        (r) => r.state.selected === true\n      );\n    } else {\n      return of([]);\n    }\n  }\n\n  constructor(\n    private featureActionsService: FeatureActionsService,\n    private wfsActionsService: WfsActionsService,\n    private editionActionsService: EditionActionsService,\n    private storageService: StorageService\n  ) {\n    this.workspaceMaximize$ = new BehaviorSubject(\n      this.storageService.get('workspaceMaximize') as boolean\n    );\n    this.initWorkspaces();\n  }\n\n  /**\n   * Initialize the workspace store. Each time a workspace is activated,\n   * subscribe to it's active widget. Tracking the active widget is useful\n   * to make sure only one widget is active at a time.\n   */\n  private initWorkspaces() {\n    this._store = new WorkspaceStore([]);\n    this._store.stateView\n      .firstBy$(\n        (record: EntityRecord<Workspace>) => record.state.active === true\n      )\n      .subscribe((record: EntityRecord<Workspace>) => {\n        const workspace = record ? record.entity : undefined;\n        this.workspace$.next(workspace);\n      });\n\n    this._store.stateView\n      .all$()\n      .subscribe((workspaces: EntityRecord<Workspace>[]) => {\n        workspaces.map((wks: EntityRecord<Workspace>) => {\n          if (wks.entity.actionStore.empty) {\n            if (wks.entity instanceof WfsWorkspace) {\n              this.wfsActionsService.loadActions(\n                wks.entity,\n                this.rowsInMapExtentCheckCondition$,\n                this.selectOnlyCheckCondition$\n              );\n            } else if (wks.entity instanceof FeatureWorkspace) {\n              this.featureActionsService.loadActions(\n                wks.entity,\n                this.rowsInMapExtentCheckCondition$,\n                this.selectOnlyCheckCondition$\n              );\n            } else if (wks.entity instanceof EditionWorkspace) {\n              this.editionActionsService.loadActions(\n                wks.entity,\n                this.rowsInMapExtentCheckCondition$,\n                this.selectOnlyCheckCondition$\n              );\n            }\n          }\n        });\n      });\n\n    this.actionMaximize$$.push(\n      this.featureActionsService.maximize$.subscribe((maximized) => {\n        this.setWorkspaceIsMaximized(maximized);\n      })\n    );\n\n    this.actionMaximize$$.push(\n      this.wfsActionsService.maximize$.subscribe((maximized) => {\n        this.setWorkspaceIsMaximized(maximized);\n      })\n    );\n\n    this.actionMaximize$$.push(\n      this.editionActionsService.maximize$.subscribe((maximized) => {\n        this.setWorkspaceIsMaximized(maximized);\n      })\n    );\n\n    this.activeWorkspace$$ = this.workspace$.subscribe(\n      (workspace: Workspace) => {\n        if (this.activeWorkspaceWidget$$ !== undefined) {\n          this.activeWorkspaceWidget$$.unsubscribe();\n          this.activeWorkspaceWidget$$ = undefined;\n        }\n\n        if (workspace !== undefined) {\n          this.activeWorkspaceWidget$$ = workspace.widget$.subscribe(\n            (widget: Widget) => this.activeWorkspaceWidget$.next(widget)\n          );\n        }\n      }\n    );\n\n    this.rowsInMapExtentCheckCondition$$ =\n      this.rowsInMapExtentCheckCondition$.subscribe((rowsInMapExtent) => {\n        this._store.stateView.all().map((wks: EntityRecord<Workspace>) => {\n          if (!wks.entity.actionStore.empty) {\n            const filterStrategy = wks.entity.entityStore.getStrategyOfType(\n              EntityStoreFilterCustomFuncStrategy\n            );\n            if (filterStrategy) {\n              if (rowsInMapExtent) {\n                filterStrategy.activate();\n              } else {\n                filterStrategy.deactivate();\n              }\n            }\n          }\n        });\n      });\n\n    this.selectOnlyCheckCondition$$ = this.selectOnlyCheckCondition$.subscribe(\n      (selectOnly) => {\n        this._store.stateView.all().map((wks: EntityRecord<Workspace>) => {\n          if (!wks.entity.actionStore.empty) {\n            const filterStrategy = wks.entity.entityStore.getStrategyOfType(\n              EntityStoreFilterSelectionStrategy\n            );\n            if (filterStrategy) {\n              if (selectOnly) {\n                filterStrategy.activate();\n              } else {\n                filterStrategy.deactivate();\n              }\n            }\n          }\n        });\n      }\n    );\n  }\n\n  private setWorkspaceIsMaximized(maximized: boolean) {\n    this.storageService.set('workspaceMaximize', maximized);\n    this.workspaceMaximize$.next(maximized);\n  }\n\n  public setActiveWorkspaceById(id: string) {\n    const wksFromId = this.store.all().find((workspace) => workspace.id === id);\n    if (wksFromId) {\n      this.store.activateWorkspace(wksFromId);\n    }\n  }\n\n  public setActiveWorkspaceByTitle(title: string) {\n    const wksFromTitle = this.store\n      .all()\n      .find((workspace) => workspace.title === title);\n    if (wksFromTitle) {\n      this.store.activateWorkspace(wksFromTitle);\n    }\n  }\n\n  /**\n   * Teardown all the workspaces\n   * @internal\n   */\n  ngOnDestroy() {\n    this.teardownWorkspaces();\n    this.actionMaximize$$.map((a) => a.unsubscribe());\n    if (this.rowsInMapExtentCheckCondition$$) {\n      this.selectOnlyCheckCondition$$.unsubscribe();\n    }\n    if (this.selectOnlyCheckCondition$$) {\n      this.selectOnlyCheckCondition$$.unsubscribe();\n    }\n  }\n\n  /**\n   * Teardown the workspace store and any subscribers\n   */\n  private teardownWorkspaces() {\n    this.store.clear();\n    if (this.activeWorkspaceWidget$$ !== undefined) {\n      this.activeWorkspaceWidget$$.unsubscribe();\n    }\n    if (this.activeWorkspace$$ !== undefined) {\n      this.activeWorkspace$$.unsubscribe();\n    }\n  }\n}\n","import { AsyncPipe, NgIf } from '@angular/common';\nimport {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  Input,\n  OnDestroy,\n  OnInit\n} from '@angular/core';\nimport { MatIconRegistry } from '@angular/material/icon';\n\nimport { EntityStore } from '@igo2/common/entity';\nimport { SELECTION_MARKER_ICON } from '@igo2/common/icon';\nimport { PanelComponent } from '@igo2/common/panel';\nimport { ToolComponent } from '@igo2/common/tool';\nimport { LanguageService } from '@igo2/core/language';\nimport { MessageService } from '@igo2/core/message';\nimport {\n  AnyLayer,\n  ExportOptions,\n  Feature,\n  FeatureDetailsComponent,\n  FeatureMotion,\n  IgoMap,\n  LayerService,\n  MeasureLengthUnit,\n  QueryableDataSourceOptions,\n  SpatialFilterItemComponent,\n  SpatialFilterItemType,\n  SpatialFilterQueryType,\n  SpatialFilterService,\n  SpatialFilterThematic,\n  SpatialFilterType,\n  SpatialFilterTypeComponent,\n  VectorLayer,\n  VectorLayerOptions,\n  createOverlayMarkerStyle,\n  featureToOl,\n  isLayerItem,\n  moveToOlFeatures\n} from '@igo2/geo';\n\nimport olFormatGeoJSON from 'ol/format/GeoJSON';\nimport olSourceCluster from 'ol/source/Cluster';\nimport olSourceVector from 'ol/source/Vector';\nimport * as olstyle from 'ol/style';\n\nimport { Observable, Subject, forkJoin } from 'rxjs';\nimport { BehaviorSubject } from 'rxjs';\nimport { take, takeUntil, tap } from 'rxjs/operators';\n\nimport { MapState } from '../../map/map.state';\nimport { ToolState } from '../../tool/tool.state';\nimport { WorkspaceState } from '../../workspace/workspace.state';\nimport {\n  ImportExportMode,\n  ImportExportState\n} from './../../import-export/import-export.state';\n\n/**\n * Tool to apply spatial filter\n */\n@ToolComponent({\n  name: 'spatialFilter',\n  title: 'igo.integration.tools.spatialFilter',\n  icon: SELECTION_MARKER_ICON\n})\n/**\n * Spatial Filter Type\n */\n@Component({\n  selector: 'igo-spatial-filter-tool',\n  templateUrl: './spatial-filter-tool.component.html',\n  styleUrls: ['./spatial-filter-tool.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  standalone: true,\n  imports: [\n    SpatialFilterTypeComponent,\n    SpatialFilterItemComponent,\n    PanelComponent,\n    FeatureDetailsComponent,\n    NgIf,\n    AsyncPipe\n  ]\n})\nexport class SpatialFilterToolComponent implements OnInit, OnDestroy {\n  get map(): IgoMap {\n    return this.mapState.map;\n  }\n\n  @Input() type: SpatialFilterType;\n  @Input() itemType: SpatialFilterItemType = SpatialFilterItemType.Address;\n  @Input() freehandDrawIsActive: boolean;\n\n  public layers: AnyLayer[] = [];\n  public activeLayers: AnyLayer[] = [];\n\n  public queryType: SpatialFilterQueryType;\n  public thematics: SpatialFilterThematic[];\n  public zone: Feature;\n  public zoneWithBuffer: Feature;\n  public buffer = 0;\n\n  public iterator = 1;\n\n  public selectedFeature$ = new BehaviorSubject<Feature>(undefined);\n\n  private format = new olFormatGeoJSON();\n\n  public store: EntityStore<Feature> = new EntityStore<Feature>([]); // Store to print results at the end\n\n  public spatialListStore: EntityStore<Feature> = new EntityStore<Feature>([]);\n\n  public loading = false;\n\n  public thematicLength = 0;\n\n  public measureUnit: MeasureLengthUnit = MeasureLengthUnit.Meters;\n  private unsubscribe$ = new Subject<void>();\n\n  public defaultStyle: olstyle.Style | ((feature, resolution) => olstyle.Style);\n\n  constructor(\n    private matIconRegistry: MatIconRegistry,\n    private spatialFilterService: SpatialFilterService,\n    private layerService: LayerService,\n    private mapState: MapState,\n    private messageService: MessageService,\n    private languageService: LanguageService,\n    private importExportState: ImportExportState,\n    private toolState: ToolState,\n    private workspaceState: WorkspaceState,\n    private cdRef: ChangeDetectorRef\n  ) {}\n\n  ngOnInit() {\n    for (const layer of this.map.layerController.all) {\n      if (\n        layer.title &&\n        layer.title.includes(\n          this.languageService.translate.instant(\n            'igo.geo.spatialFilter.spatialFilter'\n          )\n        )\n      ) {\n        this.layers.push(layer);\n      }\n    }\n  }\n\n  ngOnDestroy() {\n    this.unsubscribe$.next();\n    this.unsubscribe$.complete();\n  }\n\n  getOutputType(event: SpatialFilterType) {\n    this.type = event;\n    this.queryType = undefined;\n  }\n\n  getOutputQueryType(event: SpatialFilterQueryType) {\n    this.queryType = event;\n    if (this.queryType) {\n      this.loadFilterList();\n    }\n  }\n\n  activateExportTool() {\n    const ids = [];\n    const re = new RegExp('^Zone \\\\d+');\n    for (const layer of this.layers) {\n      if (!layer.title.match(re)) {\n        ids.push(layer.id);\n      }\n    }\n    this.importExportState.setMode(ImportExportMode.export);\n    this.importExportState.setsExportOptions({ layers: ids } as ExportOptions);\n    this.toolState.toolbox.activateTool('importExport');\n  }\n\n  activateWorkspace(record?) {\n    let layerToOpenWks;\n    this.workspaceState.store.entities$\n      .pipe(takeUntil(this.unsubscribe$))\n      .subscribe(() => {\n        if (\n          !record &&\n          this.activeLayers.length &&\n          this.workspaceState.store.all().length > 1\n        ) {\n          if (\n            this.itemType === SpatialFilterItemType.Thematics &&\n            this.thematics\n          ) {\n            for (const thematic of this.thematics) {\n              if (!thematic.zeroResults) {\n                layerToOpenWks = this.activeLayers.find((layer) =>\n                  layer.title.includes(\n                    thematic.name + ' ' + this.iterator.toString()\n                  )\n                );\n                break;\n              }\n            }\n          } else {\n            const title = 'Adresses ' + this.iterator.toString();\n            this.activeLayers.forEach((layer) => {\n              if (layer.title.includes(title)) {\n                layerToOpenWks = layer;\n              }\n            });\n          }\n\n          if (layerToOpenWks) {\n            this.workspaceState.workspacePanelExpanded = true;\n            this.workspaceState.setActiveWorkspaceById(layerToOpenWks.id);\n          }\n        } else if (\n          record &&\n          this.activeLayers.length &&\n          this.workspaceState.store.all().length > 1\n        ) {\n          this.selectWorkspaceEntity(record);\n          this.map.ol.on('moveend', () => {\n            this.selectWorkspaceEntity(record);\n          });\n        }\n      });\n  }\n\n  private selectWorkspaceEntity(record) {\n    this.workspaceState.store.all().forEach((workspace) => {\n      workspace.entityStore.state.updateAll({ selected: false });\n      if (workspace.title.includes(record.added[0].meta.title)) {\n        this.workspaceState.setActiveWorkspaceById(workspace.id);\n        workspace.entityStore.state.updateMany(record.added, {\n          selected: true\n        });\n      }\n    });\n  }\n\n  private loadFilterList() {\n    this.spatialFilterService\n      .loadFilterList(this.queryType)\n      .pipe(takeUntil(this.unsubscribe$))\n      .subscribe((features: Feature[]) => {\n        features.sort((a, b) => {\n          if (a.properties.nom < b.properties.nom) {\n            return -1;\n          }\n          if (a.properties.nom > b.properties.nom) {\n            return 1;\n          }\n          return 0;\n        });\n        this.spatialListStore.clear();\n        this.spatialListStore.load(features);\n      });\n  }\n\n  getOutputToggleSearch() {\n    this.loadThematics();\n  }\n\n  getOutputClearSearch() {\n    this.zone = undefined;\n    this.queryType = undefined;\n  }\n\n  clearMap() {\n    this.map.layerController.remove(...this.layers);\n    this.layers = [];\n    this.activeLayers = [];\n    this.thematicLength = 0;\n    this.iterator = 1;\n    if (this.type === SpatialFilterType.Predefined) {\n      this.zone = undefined;\n      this.queryType = undefined;\n    }\n  }\n\n  private loadThematics() {\n    this.loading = true;\n    let zeroResults = true;\n    let thematics;\n    if (this.buffer === 0 || this.type === SpatialFilterType.Point) {\n      this.tryAddFeaturesToMap([this.zone]);\n    }\n    if (this.itemType !== SpatialFilterItemType.Thematics) {\n      const theme: SpatialFilterThematic = {\n        name: ''\n      };\n      thematics = [theme];\n    } else {\n      thematics = this.thematics;\n    }\n    if (\n      this.measureUnit === MeasureLengthUnit.Kilometers &&\n      this.type !== SpatialFilterType.Point\n    ) {\n      this.buffer = this.buffer * 1000;\n    }\n    if (this.type === SpatialFilterType.Polygon) {\n      this.buffer = 0; // to avoid buffer enter a second time in terrAPI\n    }\n\n    const observables$: Observable<Feature[]>[] = [];\n    thematics.forEach((thematic) => {\n      observables$.push(\n        this.spatialFilterService\n          .loadFilterItem(\n            this.zone,\n            this.itemType,\n            this.queryType,\n            thematic,\n            this.buffer\n          )\n          .pipe(\n            tap((features: Feature[]) => {\n              this.store.insertMany(features);\n              const featuresPoint: Feature[] = [];\n              const featuresLinePoly: Feature[] = [];\n              let idPoint;\n              let idLinePoly;\n              features.forEach((feature) => {\n                if (feature.geometry.type === 'Point') {\n                  feature.properties.longitude =\n                    feature.geometry.coordinates[0];\n                  feature.properties.latitude = feature.geometry.coordinates[1];\n                  featuresPoint.push(feature);\n                  idPoint = feature.meta.id;\n                } else {\n                  featuresLinePoly.push(feature);\n                  idLinePoly = feature.meta.id;\n                }\n              });\n\n              this.tryAddPointToMap(featuresPoint, idPoint);\n              this.tryAddLayerToMap(featuresLinePoly, idLinePoly);\n              if (features.length) {\n                zeroResults = false;\n                this.thematicLength += 1;\n                thematic.zeroResults = false;\n                this.cdRef.detectChanges();\n              } else {\n                thematic.zeroResults = true;\n              }\n\n              if (features.length >= 10000) {\n                this.messageService.alert(\n                  'igo.geo.spatialFilter.maxSizeAlert',\n                  'igo.geo.spatialFilter.warning',\n                  { timeOut: 10000 }\n                );\n              }\n            })\n          )\n      );\n    });\n\n    forkJoin(observables$)\n      .pipe(takeUntil(this.unsubscribe$))\n      .subscribe(() => {\n        this.loading = false;\n        if (zeroResults) {\n          this.messageService.alert(\n            'igo.geo.spatialFilter.zeroResults',\n            'igo.geo.spatialFilter.warning',\n            { timeOut: 10000 }\n          );\n        }\n      });\n  }\n\n  onZoneChange(feature: Feature, buffer?: boolean) {\n    this.zone = feature;\n    if (feature) {\n      this.tryAddFeaturesToMap([feature], buffer);\n      this.zoomToFeatureExtent(feature);\n    }\n  }\n\n  /**\n   * Try to add zone feature to the map overlay\n   */\n  public tryAddFeaturesToMap(features: Feature[], buffer?: boolean) {\n    let i = 1;\n    for (const feature of features) {\n      if (this.type === SpatialFilterType.Predefined) {\n        for (const layer of this.layers) {\n          if (\n            isLayerItem(layer) &&\n            layer.options._internal &&\n            layer.options._internal.code === feature.properties.code &&\n            !buffer\n          ) {\n            if (!layer.title?.startsWith('Zone')) {\n              const index = this.layers.indexOf(layer);\n              this.layers.splice(index, 1);\n            }\n            return;\n          }\n          if (layer.title?.startsWith('Zone')) {\n            this.activeLayers = [];\n            const index = this.layers.indexOf(layer);\n            this.layers.splice(index, 1);\n            this.map.layerController.remove(layer);\n          }\n        }\n      } else {\n        if (buffer) {\n          for (const layer of this.activeLayers) {\n            if (\n              this.activeLayers.length === 1 &&\n              layer.title?.startsWith('Zone')\n            ) {\n              const index = this.layers.indexOf(layer);\n              this.layers.splice(index, 1);\n              this.map.layerController.remove(layer);\n            }\n          }\n        }\n        this.activeLayers = [];\n      }\n      for (const layer of this.layers) {\n        if (layer.title?.startsWith('Zone')) {\n          i++;\n        }\n      }\n      this.defaultStyle = (_feature, resolution) => {\n        const coordinates = (features[0] as any).coordinates;\n        return new olstyle.Style({\n          image: new olstyle.Circle({\n            radius: coordinates\n              ? this.buffer /\n                Math.cos((Math.PI / 180) * coordinates[1]) /\n                resolution\n              : undefined,\n            fill: new olstyle.Fill({\n              color: 'rgba(200, 200, 20, 0.2)'\n            }),\n            stroke: new olstyle.Stroke({\n              width: 1,\n              color: 'orange'\n            })\n          }),\n          stroke: new olstyle.Stroke({\n            width: 1,\n            color: 'orange'\n          }),\n          fill: new olstyle.Fill({\n            color: 'rgba(200, 200, 20, 0.2)'\n          })\n        });\n      };\n\n      const options: VectorLayerOptions = {\n        isIgoInternalLayer: true,\n        title: ('Zone ' +\n          i +\n          ' - ' +\n          this.languageService.translate.instant(\n            'igo.geo.spatialFilter.spatialFilter'\n          )) as string,\n        workspace: { enabled: true },\n        _internal: {\n          code:\n            this.type === SpatialFilterType.Predefined\n              ? feature.properties.code\n              : undefined\n        },\n        sourceOptions: {\n          type: 'vector',\n          queryable: true\n        } as QueryableDataSourceOptions,\n        visible: true\n      };\n\n      this.layerService\n        .createAsyncLayer(options)\n        .pipe(take(1))\n        .subscribe((layer: VectorLayer) => {\n          const featuresOl = features.map((f) => {\n            return featureToOl(f, this.map.projection);\n          });\n\n          if (this.type !== SpatialFilterType.Predefined) {\n            const type =\n              this.type === SpatialFilterType.Point ? 'Cercle' : 'Polygone';\n            featuresOl[0].set('nom', 'Zone', true);\n            featuresOl[0].set('type', type, true);\n          }\n          const ol = layer.dataSource.ol as olSourceVector | olSourceCluster;\n          ol.addFeatures(featuresOl);\n          layer.ol.setStyle(this.defaultStyle);\n\n          this.map.layerController.add(layer);\n\n          this.layers.push(layer);\n          this.activeLayers.push(layer);\n          this.cdRef.detectChanges();\n        });\n    }\n  }\n\n  /**\n   * Try to add point features to the map\n   * Necessary to create clusters\n   */\n  private tryAddPointToMap(features: Feature[], id) {\n    let i = 1;\n    if (features.length) {\n      if (this.map === undefined) {\n        return;\n      }\n      for (const layer of this.layers) {\n        if (layer.title?.startsWith(features[0].meta.title)) {\n          i++;\n        }\n      }\n\n      const icon = features[0].meta.icon;\n      let style: olstyle.Style;\n      if (!icon) {\n        style = createOverlayMarkerStyle();\n      } else {\n        style = this.createSvgIcon(icon) || createOverlayMarkerStyle();\n      }\n\n      const options: VectorLayerOptions = {\n        isIgoInternalLayer: true,\n        title: (features[0].meta.title +\n          ' ' +\n          i +\n          ' - ' +\n          this.languageService.translate.instant(\n            'igo.geo.spatialFilter.spatialFilter'\n          )) as string,\n        visible: true,\n        style,\n\n        sourceOptions: {\n          type: 'cluster',\n          id,\n          queryable: true,\n          distance: 120,\n          meta: {\n            title: 'Cluster'\n          }\n        } as QueryableDataSourceOptions\n      };\n      this.layerService\n        .createAsyncLayer(options)\n        .pipe(take(1))\n        .subscribe((layer: VectorLayer) => {\n          const featuresOl = features.map((feature) => {\n            return featureToOl(feature, this.map.projection);\n          });\n          const ol = layer.dataSource.ol as olSourceCluster;\n          ol.getSource().addFeatures(featuresOl);\n          const previousLayer = this.layers.find(\n            (prevLayer) => prevLayer.id === layer.id\n          );\n          if (previousLayer) {\n            this.map.layerController.remove(previousLayer);\n            i = i - 1;\n            layer.title = (features[0].meta.title +\n              ' ' +\n              i +\n              ' - ' +\n              this.languageService.translate.instant(\n                'igo.geo.spatialFilter.spatialFilter'\n              )) as string;\n            layer.options.title = layer.title;\n          }\n          this.iterator = i;\n          this.map.layerController.add(layer);\n          this.layers.push(layer);\n          this.pushLayer(layer);\n          this.cdRef.detectChanges();\n        });\n    }\n  }\n\n  private createSvgIcon(icon): olstyle.Style {\n    let style: olstyle.Style;\n    this.matIconRegistry.getNamedSvgIcon(icon).subscribe((svgObj) => {\n      const xmlSerializer = new XMLSerializer();\n      svgObj.setAttribute('width', '30');\n      svgObj.setAttribute('height', '30');\n      svgObj.setAttribute('fill', 'rgba(0, 128, 255)');\n      svgObj.setAttribute('stroke', 'white');\n      const svg = xmlSerializer.serializeToString(svgObj);\n      style = new olstyle.Style({\n        image: new olstyle.Icon({\n          src: 'data:image/svg+xml;utf8,' + svg\n        })\n      });\n    });\n    return style;\n  }\n  /**\n   * Try to add line or polygon features to the map\n   */\n  private tryAddLayerToMap(features: Feature[], id) {\n    let i = 1;\n    if (features.length) {\n      if (this.map === undefined) {\n        return;\n      }\n      for (const layer of this.layers) {\n        if (layer.title?.startsWith(features[0].meta.title)) {\n          i++;\n        }\n      }\n\n      const options: VectorLayerOptions = {\n        isIgoInternalLayer: true,\n        title: (features[0].meta.title +\n          ' ' +\n          i +\n          ' - ' +\n          this.languageService.translate.instant(\n            'igo.geo.spatialFilter.spatialFilter'\n          )) as string,\n        sourceOptions: {\n          type: 'vector',\n          id,\n          queryable: true\n        } as QueryableDataSourceOptions,\n        visible: true\n      };\n      this.layerService\n        .createAsyncLayer(options)\n        .pipe(take(1))\n        .subscribe((layer: VectorLayer) => {\n          const featuresOl = features.map((feature) => {\n            return featureToOl(feature, this.map.projection);\n          });\n          const ol = layer.dataSource.ol as olSourceVector;\n          ol.addFeatures(featuresOl);\n          const previousLayer = this.layers.find(\n            (prevLayer) => prevLayer.id === layer.id\n          );\n          if (previousLayer) {\n            this.map.layerController.remove(previousLayer);\n            i = i - 1;\n            layer.title = (features[0].meta.title +\n              ' ' +\n              i +\n              ' - ' +\n              this.languageService.translate.instant(\n                'igo.geo.spatialFilter.spatialFilter'\n              )) as string;\n            layer.options.title = layer.title;\n          }\n          this.map.layerController.add(layer);\n          this.layers.push(layer);\n          this.pushLayer(layer);\n          this.cdRef.detectChanges();\n        });\n    }\n  }\n\n  zoomToFeatureExtent(feature) {\n    if (feature) {\n      const olFeature = this.format.readFeature(feature, {\n        dataProjection: feature.projection,\n        featureProjection: this.map.projection\n      });\n      moveToOlFeatures(\n        this.map.viewController,\n        [olFeature],\n        FeatureMotion.Zoom\n      );\n    }\n  }\n\n  pushLayer(layer) {\n    for (const lay of this.activeLayers) {\n      if (lay.id === layer.id) {\n        return;\n      }\n    }\n\n    this.activeLayers.push(layer);\n  }\n}\n","<igo-spatial-filter-type\n  [store]=\"spatialListStore\"\n  [selectedQueryType]=\"queryType\"\n  [zone]=\"zone\"\n  [layers]=\"activeLayers\"\n  (eventType)=\"getOutputType($event)\"\n  (eventQueryType)=\"getOutputQueryType($event)\"\n  (zoneChange)=\"onZoneChange($event)\"\n  (zoneWithBufferChange)=\"onZoneChange($event, true)\"\n  (bufferChange)=\"buffer = $event\"\n  (measureUnitChange)=\"measureUnit = $event\"\n>\n</igo-spatial-filter-type>\n\n<igo-spatial-filter-item\n  [type]=\"type\"\n  [queryType]=\"queryType\"\n  [map]=\"map\"\n  [zone]=\"zone\"\n  [loading]=\"loading\"\n  [store]=\"store\"\n  [layers]=\"activeLayers\"\n  [allLayers]=\"layers\"\n  [thematicLength]=\"thematicLength\"\n  (radiusEvent)=\"buffer = $event\"\n  (bufferEvent)=\"buffer = $event\"\n  (measureUnitChange)=\"measureUnit = $event\"\n  (freehandControl)=\"freehandDrawIsActive = $event\"\n  (drawZoneEvent)=\"zone = $event\"\n  (zoneWithBufferChange)=\"onZoneChange($event, true)\"\n  (itemTypeChange)=\"itemType = $event\"\n  (thematicChange)=\"thematics = $event\"\n  (toggleSearch)=\"getOutputToggleSearch()\"\n  (clearButtonEvent)=\"clearMap()\"\n  (clearSearchEvent)=\"getOutputClearSearch()\"\n  (export)=\"activateExportTool()\"\n  (openWorkspace)=\"activateWorkspace()\"\n  (entityChange)=\"activateWorkspace($event)\"\n>\n</igo-spatial-filter-item>\n<ng-container *ngIf=\"selectedFeature$ | async as feature\">\n  <igo-feature-details [feature]=\"feature\"></igo-feature-details>\n</ng-container>\n","import { Component } from '@angular/core';\n\nimport { ToolComponent } from '@igo2/common/tool';\nimport {\n  TimeFilterListBindingDirective,\n  TimeFilterListComponent\n} from '@igo2/geo';\n\n@ToolComponent({\n  name: 'timeFilter',\n  title: 'igo.integration.tools.timeFilter',\n  icon: 'history'\n})\n@Component({\n  selector: 'igo-time-filter-tool',\n  templateUrl: './time-filter-tool.component.html',\n  standalone: true,\n  imports: [TimeFilterListComponent, TimeFilterListBindingDirective]\n})\nexport class TimeFilterToolComponent {}\n","<igo-time-filter-list igoTimeFilterListBinding></igo-time-filter-list>\n","import { HttpClient } from '@angular/common/http';\nimport { Component, Input, OnDestroy, OnInit } from '@angular/core';\nimport { Validators } from '@angular/forms';\n\nimport { Form, FormService } from '@igo2/common/form';\nimport { ToolComponent } from '@igo2/common/tool';\nimport { LanguageService } from '@igo2/core/language';\nimport { MessageService } from '@igo2/core/message';\nimport { IgoMap, isBaseLayer } from '@igo2/geo';\n\nimport * as olstyle from 'ol/style';\n\nimport { BehaviorSubject, combineLatest } from 'rxjs';\nimport type { Subscription } from 'rxjs';\n\nimport { MapState } from '../../map/map.state';\n\ninterface DataIssueReporterData {\n  geometry: object;\n  layer: string;\n  desc: string;\n  email: string;\n}\n\n@ToolComponent({\n  name: 'dataIssueReporter',\n  title: 'igo.integration.tools.dataIssueReporter',\n  icon: 'feedback'\n})\n@Component({\n  selector: 'igo-issue-reporter-tool',\n  templateUrl: './data-issue-reporter-tool.component.html',\n  styleUrls: ['./data-issue-reporter-tool.component.scss']\n})\nexport class DataIssueReporterToolComponent implements OnInit, OnDestroy {\n  /**\n   * Url to report the data issue. Use the Post protocol to send the form.\n   */\n  @Input() url: string;\n\n  /**\n   * Map to link to the form\n   * @internal\n   */\n  get map(): IgoMap {\n    return this.mapState.map;\n  }\n\n  form$ = new BehaviorSubject<Form>(undefined);\n\n  data$ = new BehaviorSubject<Record<string, any>>(undefined);\n\n  submitDisabled = true;\n\n  private valueChanges$$: Subscription;\n\n  constructor(\n    private mapState: MapState,\n    private formService: FormService,\n    private languageService: LanguageService,\n    private messageService: MessageService,\n    private httpClient: HttpClient\n  ) {}\n\n  ngOnInit() {\n    combineLatest([\n      this.languageService.language$,\n      this.map.layerController.all$\n    ]).subscribe(([_language, layers]) => {\n      const baseLayerOrShownInLayerList = layers\n        .filter((l) => isBaseLayer(l) || l.showInLayerList)\n        .map((l) => {\n          return { value: `${l.title}-${l.id}`, title: l.title };\n        });\n      const fieldConfigs = [\n        {\n          name: 'geometry',\n          title: this.languageService.translate.instant(\n            'igo.integration.dataIssueReporterTool.geometry'\n          ),\n          type: 'geometry',\n          inputs: {\n            map: this.map,\n            geometryTypeField: true,\n            geometryType: 'Polygon',\n            drawGuideField: false,\n            drawGuide: 0,\n            drawGuidePlaceholder: this.languageService.translate.instant(\n              'igo.integration.dataIssueReporterTool.drawGuidePlaceholder'\n            ),\n            drawStyle: new olstyle.Style({\n              stroke: new olstyle.Stroke({\n                color: [255, 0, 0, 1],\n                width: 2\n              }),\n              fill: new olstyle.Fill({\n                color: [255, 0, 0, 0.2]\n              }),\n              image: new olstyle.Circle({\n                radius: 8,\n                stroke: new olstyle.Stroke({\n                  color: [255, 0, 0, 1]\n                }),\n                fill: new olstyle.Fill({\n                  color: [255, 0, 0, 0.2]\n                })\n              })\n            }),\n            overlayStyle: new olstyle.Style({\n              stroke: new olstyle.Stroke({\n                color: [0, 255, 0, 1],\n                width: 2\n              }),\n              fill: new olstyle.Fill({\n                color: [0, 255, 0, 0.2]\n              }),\n              image: new olstyle.Circle({\n                radius: 8,\n                stroke: new olstyle.Stroke({\n                  color: [0, 255, 0, 1]\n                }),\n                fill: new olstyle.Fill({\n                  color: [0, 255, 0, 0.2]\n                })\n              })\n            })\n          }\n        },\n        {\n          name: 'layer',\n          title: this.languageService.translate.instant(\n            'igo.integration.dataIssueReporterTool.layer'\n          ),\n          type: 'select',\n          options: {\n            cols: 2\n          },\n          inputs: {\n            choices: baseLayerOrShownInLayerList\n          }\n        },\n        {\n          name: 'desc',\n          title: this.languageService.translate.instant(\n            'igo.integration.dataIssueReporterTool.description'\n          ),\n          type: 'textarea',\n          options: {\n            validator: Validators.required\n          }\n        },\n        {\n          name: 'email',\n          title: this.languageService.translate.instant(\n            'igo.integration.dataIssueReporterTool.email'\n          ),\n          options: {\n            validator: Validators.email\n          }\n        }\n      ];\n\n      const fields = fieldConfigs.map((config) =>\n        this.formService.field(config)\n      );\n      const form = this.formService.form(fields, []);\n\n      this.valueChanges$$ = form.control.valueChanges.subscribe(() => {\n        this.submitDisabled = !form.control.valid;\n      });\n\n      this.form$.next(form);\n    });\n  }\n\n  ngOnDestroy() {\n    this.valueChanges$$.unsubscribe();\n  }\n\n  clearForm() {\n    this.form$.value.control.reset();\n  }\n\n  onSubmit(data: DataIssueReporterData) {\n    const submitTitle = 'igo.integration.dataIssueReporterTool.submit.title';\n    if (!this.url) {\n      this.messageService.alert(\n        'igo.integration.dataIssueReporterTool.submit.setupMessage',\n        submitTitle\n      );\n      alert(JSON.stringify(data));\n    } else {\n      this.httpClient\n        .post<DataIssueReporterData>(this.url, data)\n        .subscribe(() => {\n          this.messageService.success(\n            'igo.integration.dataIssueReporterTool.submit.message',\n            submitTitle\n          );\n        });\n      this.clearForm();\n    }\n  }\n}\n","<igo-form\n  *ngIf=\"form$ | async as form\"\n  [form]=\"form\"\n  [formData]=\"data$ | async\"\n  (submitForm)=\"onSubmit($any($event))\"\n>\n  <div *ngIf=\"form.fields.length\" class=\"form-container\">\n    <igo-form-field\n      *ngFor=\"let field of form.fields\"\n      [field]=\"field\"\n    ></igo-form-field>\n  </div>\n\n  <div formButtons class=\"actions-container\">\n    <button\n      mat-stroked-button\n      type=\"button\"\n      color=\"primary\"\n      (click)=\"clearForm()\"\n    >\n      {{ 'igo.integration.dataIssueReporterTool.reset.button' | translate }}\n    </button>\n    <button\n      mat-flat-button\n      type=\"submit\"\n      color=\"primary\"\n      [disabled]=\"submitDisabled\"\n    >\n      {{ 'igo.integration.dataIssueReporterTool.submit.button' | translate }}\n    </button>\n  </div>\n</igo-form>\n","import { AsyncPipe, NgIf } from '@angular/common';\nimport {\n  ChangeDetectionStrategy,\n  Component,\n  Input,\n  OnInit\n} from '@angular/core';\nimport { MatTabsModule } from '@angular/material/tabs';\n\nimport { ToolComponent } from '@igo2/common/tool';\nimport type { WorkspaceStore } from '@igo2/common/workspace';\nimport { ContextImportExportComponent } from '@igo2/context';\nimport { IgoLanguageModule } from '@igo2/core/language';\nimport {\n  ExportOptions,\n  IgoMap,\n  ImportExportComponent,\n  ProjectionsLimitationsOptions\n} from '@igo2/geo';\n\nimport { ContextState } from '../../context/context.state';\nimport { MapState } from '../../map/map.state';\nimport { WorkspaceState } from '../../workspace/workspace.state';\nimport {\n  ImportExportMode,\n  ImportExportState,\n  ImportExportType\n} from '../import-export.state';\n\n@ToolComponent({\n  name: 'importExport',\n  title: 'igo.integration.tools.importExport',\n  icon: 'file_save'\n})\n@Component({\n  selector: 'igo-import-export-tool',\n  templateUrl: './import-export-tool.component.html',\n  styleUrls: ['./import-export-tool.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  standalone: true,\n  imports: [\n    NgIf,\n    MatTabsModule,\n    ImportExportComponent,\n    ContextImportExportComponent,\n    AsyncPipe,\n    IgoLanguageModule\n  ]\n})\nexport class ImportExportToolComponent implements OnInit {\n  @Input() projectionsLimitations: ProjectionsLimitationsOptions;\n\n  @Input() selectFirstProj = false;\n\n  /**\n   * Map to measure on\n   * @internal\n   */\n  get map(): IgoMap {\n    return this.mapState.map;\n  }\n\n  get workspaceStore(): WorkspaceStore {\n    return this.workspaceState.store;\n  }\n\n  @Input() importExportType: ImportExportType = ImportExportType.layer;\n  @Input() importExportShowBothType = true;\n\n  constructor(\n    private mapState: MapState,\n    public importExportState: ImportExportState,\n    private workspaceState: WorkspaceState,\n    public contextState: ContextState\n  ) {}\n\n  ngOnInit(): void {\n    this.selectType();\n    this.selectMode();\n  }\n\n  private selectType() {\n    if (this.importExportType) {\n      this.importExportState.importExportType$.next(this.importExportType);\n    }\n    const userSelectedType = this.importExportState.importExportType$.value;\n    if (userSelectedType !== undefined) {\n      this.importExportState.setImportExportType(userSelectedType);\n    } else {\n      this.importExportState.setImportExportType(ImportExportType.layer);\n    }\n  }\n\n  private selectMode() {\n    const userSelectedMode = this.importExportState.selectedMode$.value;\n    if (userSelectedMode !== undefined) {\n      this.importExportState.setMode(userSelectedMode);\n    } else {\n      this.importExportState.setMode(ImportExportMode.import);\n    }\n  }\n\n  public modeChanged(mode: ImportExportMode) {\n    this.importExportState.setMode(mode);\n  }\n\n  public exportOptionsChange(exportOptions: ExportOptions) {\n    this.importExportState.setsExportOptions(exportOptions);\n  }\n\n  importExportTypeChange(event) {\n    this.importExportType = event.value;\n  }\n}\n","<mat-tab-group *ngIf=\"importExportShowBothType\">\n  <mat-tab\n    [label]=\"'igo.integration.importExportTool.importExportData' | translate\"\n  >\n    <igo-import-export\n      [contextUri]=\"(contextState.context$ | async).uri\"\n      [map]=\"map\"\n      [selectFirstProj]=\"selectFirstProj\"\n      [projectionsLimitations]=\"projectionsLimitations\"\n      [store]=\"workspaceStore\"\n      [selectedMode]=\"importExportState.selectedMode$ | async\"\n      (selectMode)=\"modeChanged($any($event))\"\n      [exportOptions$]=\"importExportState.exportOptions$\"\n      (exportOptionsChange)=\"exportOptionsChange($event)\"\n    >\n    </igo-import-export>\n  </mat-tab>\n  <mat-tab\n    [label]=\"'igo.integration.importExportTool.importExportContext' | translate\"\n  >\n    <igo-context-import-export [map]=\"map\"></igo-context-import-export>\n  </mat-tab>\n</mat-tab-group>\n\n<igo-import-export\n  *ngIf=\"!importExportShowBothType && importExportType === 'layer'\"\n  [contextUri]=\"(contextState.context$ | async).uri\"\n  [map]=\"map\"\n  [store]=\"workspaceStore\"\n  [selectedMode]=\"importExportState.selectedMode$ | async\"\n  (selectMode)=\"modeChanged($any($event))\"\n  [exportOptions$]=\"importExportState.exportOptions$\"\n  (exportOptionsChange)=\"exportOptionsChange($event)\"\n>\n</igo-import-export>\n\n<igo-context-import-export\n  *ngIf=\"!importExportShowBothType && importExportType === 'context'\"\n  [map]=\"map\"\n>\n</igo-context-import-export>\n","import { AsyncPipe, DecimalPipe, NgFor, NgIf } from '@angular/common';\nimport {\n  ChangeDetectorRef,\n  Component,\n  Input,\n  OnDestroy,\n  OnInit\n} from '@angular/core';\nimport {\n  FormsModule,\n  ReactiveFormsModule,\n  UntypedFormBuilder,\n  UntypedFormGroup,\n  Validators\n} from '@angular/forms';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatOptionModule } from '@angular/material/core';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatSelectModule } from '@angular/material/select';\nimport { MatSlideToggleModule } from '@angular/material/slide-toggle';\n\nimport { ConfigService } from '@igo2/core/config';\nimport { LanguageService } from '@igo2/core/language';\nimport { IgoLanguageModule } from '@igo2/core/language';\nimport { MessageService } from '@igo2/core/message';\nimport { StorageScope, StorageService } from '@igo2/core/storage';\nimport {\n  IgoMap,\n  InputProjections,\n  ProjectionsLimitationsOptions,\n  formatScale\n} from '@igo2/geo';\nimport { computeProjectionsConstraints, zoneMtm, zoneUtm } from '@igo2/geo';\nimport { Clipboard } from '@igo2/utils';\n\nimport * as olproj from 'ol/proj';\n\nimport { BehaviorSubject, Subscription } from 'rxjs';\nimport { debounceTime } from 'rxjs/operators';\n\nimport { MapState } from '../../map.state';\n\n/**\n * Tool to display the coordinates and a cursor of the center of the map\n */\n@Component({\n  selector: 'igo-advanced-coordinates',\n  templateUrl: './advanced-coordinates.component.html',\n  styleUrls: ['./advanced-coordinates.component.scss'],\n  standalone: true,\n  imports: [\n    NgIf,\n    MatFormFieldModule,\n    MatInputModule,\n    MatButtonModule,\n    MatIconModule,\n    FormsModule,\n    ReactiveFormsModule,\n    MatSelectModule,\n    NgFor,\n    MatOptionModule,\n    MatSlideToggleModule,\n    AsyncPipe,\n    DecimalPipe,\n    IgoLanguageModule\n  ]\n})\nexport class AdvancedCoordinatesComponent implements OnInit, OnDestroy {\n  public formattedScale$ = new BehaviorSubject<string>('');\n  public projections$ = new BehaviorSubject<InputProjections[]>([]);\n  public form: UntypedFormGroup;\n  public coordinates: string[];\n  private currentCenterDefaultProj: [number, number];\n  public center: boolean;\n  private inMtmZone = true;\n  private inLambert2 = { 32198: true, 3798: true };\n  private mapState$$: Subscription;\n  private formStatus$$: Subscription;\n  private _projectionsLimitations: ProjectionsLimitationsOptions = {};\n  private projectionsConstraints: ProjectionsLimitationsOptions;\n  private defaultProj: InputProjections;\n  private currentZones = { utm: undefined, mtm: undefined };\n  public units = true;\n  get map(): IgoMap {\n    return this.mapState.map;\n  }\n\n  get inputProj(): InputProjections {\n    return this.form.get('inputProj').value;\n  }\n  set inputProj(value: InputProjections) {\n    this.form.patchValue({ inputProj: value });\n  }\n  get projectionsLimitations(): ProjectionsLimitationsOptions {\n    return this._projectionsLimitations || {};\n  }\n\n  @Input()\n  set projectionsLimitations(value: ProjectionsLimitationsOptions) {\n    this._projectionsLimitations = value;\n  }\n\n  constructor(\n    public mapState: MapState,\n    private languageService: LanguageService,\n    private messageService: MessageService,\n    private cdRef: ChangeDetectorRef,\n    private storageService: StorageService,\n    private config: ConfigService,\n    private formBuilder: UntypedFormBuilder\n  ) {\n    this.defaultProj = {\n      translatedValue: this.languageService.translate.instant(\n        'igo.geo.importExportForm.projections.wgs84',\n        { code: 'EPSG:4326' }\n      ),\n      translateKey: 'wgs84',\n      alias: 'WGS84',\n      code: 'EPSG:4326',\n      zone: '',\n      def: undefined,\n      extent: undefined\n    };\n    this.center = this.storageService.get('centerToggle') as boolean;\n    this.computeProjections();\n    this.buildForm();\n  }\n\n  /**\n   * Listen a state of the map, a state of a form, update the coordinates\n   */\n  ngOnInit(): void {\n    this.mapState$$ = this.map.viewController.state$\n      .pipe(debounceTime(50))\n      .subscribe(() => {\n        this.setScaleValue(this.map);\n        this.updateCoordinates();\n      });\n\n    this.formStatus$$ = this.form.valueChanges.subscribe(() => {\n      this.updateCoordinates();\n    });\n\n    const tempInputProj = this.storageService.get(\n      'currentProjection'\n    ) as InputProjections;\n\n    this.inputProj =\n      this.projections$.value.find(\n        (val) => val.code === this.defaultProj.code\n      ) ?? this.projections$.value[0];\n\n    if (tempInputProj !== null) {\n      const pos = this.positionInList(tempInputProj);\n      this.inputProj = this.projections$.value[pos];\n      this.updateZoneMtmUtm();\n    }\n    this.map.mapCenter$.next(this.center);\n    this.coordinates = this.getCoordinates();\n    this.currentCenterDefaultProj = this.map.viewController.getCenter(\n      this.defaultProj.code\n    );\n  }\n\n  ngOnDestroy(): void {\n    this.map.mapCenter$.next(false);\n    this.mapState$$.unsubscribe();\n    this.formStatus$$.unsubscribe();\n  }\n\n  setScaleValue(map: IgoMap) {\n    this.formattedScale$.next(\n      ': ~ 1 / ' + formatScale(map.viewController.getScale())\n    );\n  }\n  /**\n   * Coordinates of the center of the map on the appropriate systeme of coordinates\n   * @returns Array of two numbers\n   */\n  getCoordinates(): string[] {\n    this.currentZones.mtm = zoneMtm(this.currentCenterDefaultProj[0]);\n    this.currentZones.utm = zoneUtm(this.currentCenterDefaultProj[0]);\n    const code = this.inputProj.code;\n    let decimal = 2;\n    if (code.includes('EPSG:4326') || code.includes('EPSG:4269')) {\n      decimal = 5;\n    }\n    this.units = code === 'EPSG:4326' || code === 'EPSG:4269';\n    const coord = this.map.viewController\n      .getCenter(code)\n      .map((c) => c.toFixed(decimal));\n    return coord;\n  }\n\n  updateCoordinates() {\n    this.currentCenterDefaultProj = this.map.viewController.getCenter(\n      this.defaultProj.code\n    );\n    const currentMtmZone = zoneMtm(this.currentCenterDefaultProj[0]);\n    const currentUtmZone = zoneUtm(this.currentCenterDefaultProj[0]);\n    if (!this.inMtmZone && currentMtmZone !== this.currentZones.mtm) {\n      this.back2quebec();\n    }\n    let zoneChange = false;\n    if (currentMtmZone !== this.currentZones.mtm) {\n      this.currentZones.mtm = currentMtmZone;\n      zoneChange = true;\n    }\n    if (currentUtmZone !== this.currentZones.utm) {\n      this.currentZones.utm = currentUtmZone;\n      zoneChange = true;\n    }\n    if (zoneChange) {\n      this.updateProjectionsZoneChange();\n    }\n    this.checkLambert(this.currentCenterDefaultProj);\n    this.coordinates = this.getCoordinates();\n\n    this.storageService.set(\n      'currentProjection',\n      this.inputProj,\n      StorageScope.SESSION\n    );\n  }\n\n  /**\n   * Copy the coordinates to a clipboard\n   */\n  copyTextToClipboard(): void {\n    const successful = Clipboard.copy(this.coordinates.toString());\n    if (successful) {\n      this.messageService.success(\n        'igo.integration.advanced-map-tool.advanced-coordinates.copyMsg',\n        'igo.integration.advanced-map-tool.advanced-coordinates.copyTitle'\n      );\n    }\n  }\n\n  /**\n   * Display a cursor on the center of the map\n   */\n  displayCenter(toggle: boolean): void {\n    this.center = toggle;\n    this.map.mapCenter$.next(toggle);\n    this.storageService.set('centerToggle', toggle, StorageScope.SESSION);\n  }\n\n  /**\n   * Builder of the form\n   */\n  private buildForm(): void {\n    this.form = this.formBuilder.group({\n      inputProj: ['', [Validators.required]]\n    });\n  }\n\n  /**\n   * Update list of projections after changing of the state of the map\n   */\n  private updateProjectionsZoneChange(): void {\n    let modifiedProj = this.projections$.value;\n    const translate = this.languageService.translate;\n    modifiedProj.map((p) => {\n      if (p.translateKey === 'mtm') {\n        const zone = zoneMtm(this.currentCenterDefaultProj[0]);\n        if (zone) {\n          const code = zone < 10 ? `EPSG:3218${zone}` : `EPSG:321${80 + zone}`;\n          p.alias = `MTM ${zone}`;\n          p.code = code;\n          p.zone = `${zone}`;\n          p.translatedValue = translate.instant(\n            'igo.geo.importExportForm.projections.mtm',\n            p\n          );\n        } else {\n          p.alias = '';\n          this.inMtmZone = false;\n          if (this.inputProj.translateKey === 'mtm') {\n            this.inputProj = this.projections$.value[0];\n          }\n        }\n      }\n      if (p.translateKey === 'utm') {\n        const zone = zoneUtm(this.currentCenterDefaultProj[0]);\n        const code = `EPSG:326${zone}`;\n        p.alias = `UTM ${zone}`;\n        p.code = code;\n        p.zone = `${zone}`;\n        p.translatedValue = translate.instant(\n          'igo.geo.importExportForm.projections.utm',\n          p\n        );\n      }\n    });\n    modifiedProj = modifiedProj.filter((p) => p.alias !== '');\n    this.projections$.next(modifiedProj);\n  }\n\n  /**\n   * Create a list of currents projections\n   */\n  private computeProjections(): void {\n    this.projectionsConstraints = computeProjectionsConstraints(\n      this.projectionsLimitations\n    );\n    const projections: InputProjections[] = [];\n\n    if (!this.currentCenterDefaultProj) {\n      this.currentCenterDefaultProj = this.map.viewController.getCenter(\n        this.defaultProj.code\n      );\n    }\n\n    const translate = this.languageService.translate;\n    if (this.projectionsConstraints.wgs84) {\n      projections.push({\n        translatedValue: translate.instant(\n          'igo.geo.importExportForm.projections.wgs84',\n          { code: 'EPSG:4326' }\n        ),\n        translateKey: 'wgs84',\n        alias: 'WGS84',\n        code: 'EPSG:4326',\n        zone: '',\n        def: undefined,\n        extent: undefined\n      });\n    }\n\n    if (this.projectionsConstraints.nad83) {\n      projections.push({\n        translatedValue: translate.instant(\n          'igo.geo.importExportForm.projections.nad83',\n          { code: 'EPSG:4269' }\n        ),\n        translateKey: 'nad83',\n        alias: 'NAD83',\n        code: 'EPSG:4269',\n        zone: '',\n        def: undefined,\n        extent: undefined\n      });\n    }\n\n    if (this.projectionsConstraints.webMercator) {\n      projections.push({\n        translatedValue: translate.instant(\n          'igo.geo.importExportForm.projections.webMercator',\n          { code: 'EPSG:3857' }\n        ),\n        translateKey: 'webMercator',\n        alias: 'Web Mercator',\n        code: 'EPSG:3857',\n        zone: '',\n        def: undefined,\n        extent: undefined\n      });\n    }\n    if (this.projectionsConstraints.mtm) {\n      // Quebec\n      const zone = zoneMtm(this.currentCenterDefaultProj[0]);\n      if (zone) {\n        this.inMtmZone = true;\n        const code = zone < 10 ? `EPSG:3218${zone}` : `EPSG:321${80 + zone}`;\n        projections.splice(3, 0, {\n          translatedValue: this.languageService.translate.instant(\n            'igo.geo.importExportForm.projections.mtm',\n            { code, zone }\n          ),\n          translateKey: 'mtm',\n          alias: `MTM ${zone}`,\n          code,\n          zone: `${zone}`,\n          def: undefined,\n          extent: undefined\n        });\n      } else {\n        this.inMtmZone = false;\n      }\n    }\n    if (this.projectionsConstraints.utm) {\n      const order = this.inMtmZone ? 4 : 3;\n      const zone = zoneUtm(this.currentCenterDefaultProj[0]);\n      const code = zone < 10 ? `EPSG:3260${zone}` : `EPSG:326${zone}`;\n      projections.splice(order, 0, {\n        translatedValue: this.languageService.translate.instant(\n          'igo.geo.importExportForm.projections.utm',\n          { code, zone }\n        ),\n        translateKey: 'utm',\n        alias: `UTM ${zone}`,\n        code,\n        zone: `${zone}`,\n        def: undefined,\n        extent: undefined\n      });\n    }\n    let configProjection: InputProjections[] = [];\n    if (this.projectionsConstraints.projFromConfig) {\n      configProjection = (this.config.getConfig('projections') ||\n        []) as InputProjections[];\n    }\n\n    this.projections$.next(configProjection.concat(projections));\n  }\n\n  /**\n   * Push the MTM in the array of systeme of coordinates\n   * @param projections Array of the InputProjections\n   */\n  private pushMtm(projections: InputProjections[]): void {\n    if (this.projectionsConstraints.mtm) {\n      const zone = zoneMtm(this.currentCenterDefaultProj[0]);\n      const code = zone < 10 ? `EPSG:3218${zone}` : `EPSG:321${80 + zone}`;\n      projections.splice(3, 0, {\n        translatedValue: this.languageService.translate.instant(\n          'igo.geo.importExportForm.projections.mtm',\n          { code, zone }\n        ),\n        translateKey: 'mtm',\n        alias: `MTM ${zone}`,\n        code,\n        zone: `${zone}`,\n        def: undefined,\n        extent: undefined\n      });\n    }\n  }\n\n  /**\n   * Updates the list of systems of coordinates for territory of Quebec\n   * push MTM and UTM in the Array\n   */\n  private back2quebec(): void {\n    const projections = this.projections$.value;\n    this.pushMtm(projections);\n    this.inMtmZone = true;\n  }\n\n  /**\n   * Update the numbers of the zones when application is restarted\n   */\n  private updateZoneMtmUtm() {\n    if (this.inputProj.translateKey === 'mtm') {\n      const zone = zoneMtm(this.currentCenterDefaultProj[0]);\n      this.inputProj.alias = `MTM ${zone}`;\n      const code = zone < 10 ? `EPSG:3218${zone}` : `EPSG:321${80 + zone}`;\n      this.inputProj.code = code;\n      this.inputProj.zone = `${zone}`;\n      this.inputProj.translatedValue = this.languageService.translate.instant(\n        'igo.geo.importExportForm.projections.mtm',\n        { code, zone }\n      );\n    }\n    if (this.inputProj.translateKey === 'utm') {\n      const zone = zoneUtm(this.currentCenterDefaultProj[0]);\n      this.inputProj.alias = `UTM ${zone}`;\n      const code = zone < 10 ? `EPSG:3260${zone}` : `EPSG:326${zone}`;\n      this.inputProj.code = code;\n      this.inputProj.zone = `${zone}`;\n      this.inputProj.translatedValue = this.languageService.translate.instant(\n        'igo.geo.importExportForm.projections.utm',\n        { code, zone }\n      );\n    }\n  }\n\n  /**\n   * Compute the position of a current projection in a list. 0 if the projection is not in the list\n   * @param translateKey string, translate key of a projection\n   * @returns numeric, position of an element in the array\n   */\n  positionInList(tempInputProj: InputProjections): number {\n    const tk = tempInputProj.translateKey;\n    const alias = tempInputProj.alias;\n    let position; // = undefined;\n    let iter = 0;\n    this.projections$.value.map((projection) => {\n      if (tk) {\n        if (tk === projection.translateKey) {\n          position = iter;\n        }\n      } else if (alias === projection.alias) {\n        position = iter;\n      }\n      iter++;\n    });\n    position = position ? position : 0;\n    return position;\n  }\n\n  /**\n   * Change the list of projections depending on the projections of Lambert\n   * @param coordinates An array of numbers, longitude and latitude\n   */\n  checkLambert(coordinates: [number, number]) {\n    const lambertProjections = this.config.getConfig('projections') || [];\n    lambertProjections.forEach((projection) => {\n      let modifiedProj = this.projections$.value;\n      const extent = projection.extent;\n      const code = projection.code.match(/\\d+/);\n      const currentExtentWGS = olproj.transformExtent(\n        extent,\n        projection.code,\n        this.defaultProj.code\n      );\n      if (\n        coordinates[0] < currentExtentWGS[0] ||\n        coordinates[0] > currentExtentWGS[2] ||\n        coordinates[1] < currentExtentWGS[1] ||\n        coordinates[1] > currentExtentWGS[3]\n      ) {\n        this.inLambert2[code] = false;\n        if (this.inputProj.alias === projection.alias) {\n          this.inputProj = this.projections$.value[0];\n        }\n        modifiedProj = modifiedProj.filter((p) => p.alias !== projection.alias);\n        this.projections$.next(modifiedProj);\n      } else {\n        if (!this.inLambert2[code]) {\n          this.projections$.next(modifiedProj.concat(projection));\n          this.inLambert2[code] = true;\n        }\n      }\n    });\n  }\n}\n","<div class=\"advanced-coordinates__coordinates-container\">\n  <div class=\"advanced-coordinates__coordinates-container__inner\">\n    <mat-form-field *ngIf=\"units; else elseBlock\" subscriptSizing=\"dynamic\">\n      <mat-label>{{\n        'igo.integration.advanced-map-tool.advanced-coordinates.lon' | translate\n      }}</mat-label>\n      <textarea\n        #textArea\n        matInput\n        readonly\n        rows=\"1\"\n        [placeholder]=\"\n          'igo.integration.advanced-map-tool.advanced-coordinates.lon'\n            | translate\n        \"\n        [value]=\"coordinates[0]\"\n      ></textarea>\n    </mat-form-field>\n    <ng-template #elseBlock>\n      <mat-form-field subscriptSizing=\"dynamic\">\n        <textarea\n          #textArea\n          matInput\n          readonly\n          rows=\"1\"\n          [placeholder]=\"\n            'igo.integration.advanced-map-tool.advanced-coordinates.est'\n              | translate\n          \"\n          [value]=\"coordinates[0]\"\n        ></textarea>\n      </mat-form-field>\n    </ng-template>\n\n    <mat-form-field *ngIf=\"units; else elseBlock2\" subscriptSizing=\"dynamic\">\n      <mat-label>{{\n        'igo.integration.advanced-map-tool.advanced-coordinates.lat' | translate\n      }}</mat-label>\n      <textarea\n        #textArea\n        matInput\n        readonly\n        rows=\"1\"\n        [placeholder]=\"\n          'igo.integration.advanced-map-tool.advanced-coordinates.lat'\n            | translate\n        \"\n        [value]=\"coordinates[1]\"\n      ></textarea>\n    </mat-form-field>\n    <ng-template #elseBlock2>\n      <mat-form-field subscriptSizing=\"dynamic\">\n        <textarea\n          #textArea\n          matInput\n          readonly\n          rows=\"1\"\n          [placeholder]=\"\n            'igo.integration.advanced-map-tool.advanced-coordinates.nord'\n              | translate\n          \"\n          [value]=\"coordinates[1]\"\n        ></textarea>\n      </mat-form-field>\n    </ng-template>\n    <button\n      mat-icon-button\n      [attr.aria-label]=\"\n        'igo.integration.advanced-map-tool.advanced-coordinates.copy'\n          | translate\n      \"\n      class=\"igo-form-button-group advanced-coordinates__copy-coordinates\"\n      (click)=\"copyTextToClipboard()\"\n    >\n      <mat-icon>content_copy</mat-icon>\n    </button>\n  </div>\n\n  <form class=\"igo-form advanced-coordinates__form\" [formGroup]=\"form\">\n    <div class=\"advanced-coordinates__coordinates-container__inner\">\n      <mat-form-field class=\"igo-input-container\" subscriptSizing=\"dynamic\">\n        <mat-label>{{\n          'igo.integration.advanced-map-tool.advanced-coordinates.coordSystem'\n            | translate\n        }}</mat-label>\n        <mat-select [(value)]=\"inputProj\">\n          <mat-option\n            matTooltipShowDelay=\"500\"\n            *ngFor=\"let projection of projections$ | async\"\n            [value]=\"projection\"\n            (click)=\"$event.stopPropagation()\"\n          >\n            {{ projection.translatedValue || projection.alias }}\n          </mat-option>\n        </mat-select>\n      </mat-form-field>\n    </div>\n    <div class=\"advanced-coordinates__coordinates-container__inner\">\n      <mat-slide-toggle\n        class=\"center-toggle mat-typography\"\n        [checked]=\"center\"\n        [labelPosition]=\"'before'\"\n        (change)=\"displayCenter($event.checked)\"\n      >\n        {{\n          'igo.integration.advanced-map-tool.advanced-coordinates.center'\n            | translate\n        }}\n      </mat-slide-toggle>\n    </div>\n  </form>\n\n  <p class=\"igo-zoom mat-typography\">\n    {{\n      'igo.integration.advanced-map-tool.advanced-coordinates.zoom' | translate\n    }}\n    {{ map.viewController.getZoom() }}\n  </p>\n  <p class=\"igo-zoom mat-typography\">\n    {{\n      'igo.integration.advanced-map-tool.advanced-coordinates.scale' | translate\n    }}\n    {{ formattedScale$ | async }}\n  </p>\n  <p class=\"igo-zoom mat-typography\">\n    {{\n      'igo.integration.advanced-map-tool.advanced-coordinates.resolution'\n        | translate\n    }}\n    {{ map.viewController.getResolution() | number: '1.0-0' }}\n  </p>\n</div>\n","import { NgFor, NgIf } from '@angular/common';\nimport { Component, OnDestroy, OnInit } from '@angular/core';\nimport {\n  FormsModule,\n  ReactiveFormsModule,\n  UntypedFormBuilder,\n  UntypedFormGroup,\n  Validators\n} from '@angular/forms';\nimport { MatOptionModule } from '@angular/material/core';\nimport { MatDividerModule } from '@angular/material/divider';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatListModule } from '@angular/material/list';\nimport { MatSelectModule } from '@angular/material/select';\nimport { MatSlideToggleModule } from '@angular/material/slide-toggle';\n\nimport { IgoIconComponent } from '@igo2/common/icon';\nimport { DetailedContext } from '@igo2/context';\nimport { IgoLanguageModule } from '@igo2/core/language';\nimport { AnyLayer, IgoMap, Layer, VectorLayer, isLayerItem } from '@igo2/geo';\n\nimport { ToolState } from '../../../tool/tool.state';\nimport { MapState } from '../../map.state';\n\n@Component({\n  selector: 'igo-advanced-swipe',\n  templateUrl: './advanced-swipe.component.html',\n  styleUrls: ['./advanced-swipe.component.scss'],\n  standalone: true,\n  imports: [\n    NgIf,\n    FormsModule,\n    ReactiveFormsModule,\n    MatFormFieldModule,\n    MatSelectModule,\n    MatOptionModule,\n    MatDividerModule,\n    NgFor,\n    MatSlideToggleModule,\n    MatListModule,\n    MatIconModule,\n    IgoLanguageModule,\n    IgoIconComponent\n  ]\n})\nexport class AdvancedSwipeComponent implements OnInit, OnDestroy {\n  public swipe = false;\n  public layerList: AnyLayer[];\n  public userControlledLayerList: AnyLayer[];\n  public form: UntypedFormGroup;\n  public layers: VectorLayer[];\n  public res: DetailedContext;\n  public listForSwipe: Layer[];\n\n  /**\n   * Get an active map state\n   */\n  get map(): IgoMap {\n    return this.mapState.map;\n  }\n\n  constructor(\n    public mapState: MapState,\n    private formBuilder: UntypedFormBuilder,\n    private toolState: ToolState\n  ) {\n    this.buildForm();\n  }\n\n  /**\n   * Get the list of layers for swipe\n   * @internal\n   */\n  ngOnInit() {\n    this.map.layerController.all$.subscribe(\n      (layers) =>\n        (this.userControlledLayerList = layers.filter(\n          (layer) =>\n            isLayerItem(layer) &&\n            !layer.baseLayer &&\n            layer.showInLayerList &&\n            layer.displayed\n        ))\n    );\n  }\n\n  /**\n   * Desactivate the swipe\n   * @internal\n   */\n  ngOnDestroy() {\n    this.swipe = false;\n    this.map.swipeEnabled$.next(this.swipe);\n  }\n\n  /**\n   * Build a form for choise of the layers\n   */\n  private buildForm() {\n    this.form = this.formBuilder.group({\n      layers: ['', [Validators.required]]\n    });\n  }\n\n  /**\n   * Activate the swipe, send a list of layers for a swipe-tool\n   */\n  startSwipe(toggle: boolean) {\n    this.swipe = toggle;\n    this.map.swipeEnabled$.next(toggle);\n    this.listForSwipe = [];\n    for (const layer of this.form.value.layers) {\n      this.listForSwipe.push(layer);\n    }\n    this.map.selectedFeatures$.next(this.listForSwipe);\n  }\n\n  /**\n   * Restart a swipe for a new layers-list\n   */\n  applyNewLayers(e) {\n    this.startSwipe(false); // l'approche KISS\n    this.startSwipe(true);\n    if (e._selected) {\n      e._selected = false;\n    }\n    const allLayers = this.userControlledLayerList?.length;\n    const selectedLayers = this.form.controls.layers.value.length;\n    if (selectedLayers === allLayers) {\n      e._selected = true;\n    }\n  }\n\n  /**\n   * Select all list of layers and restart a tool\n   */\n  selectAll(e) {\n    if (e._selected) {\n      this.form.controls.layers.setValue(this.userControlledLayerList);\n      e._selected = true;\n    } else {\n      this.form.controls.layers.setValue([]);\n    }\n    this.startSwipe(false);\n    this.startSwipe(true);\n  }\n\n  /**\n   * Open search tool\n   */\n  searchEmit() {\n    this.toolState.toolbox.activateTool('searchResults');\n  }\n\n  /**\n   * Open catalog\n   */\n  catalogEmit() {\n    this.toolState.toolbox.activateTool('catalog');\n  }\n\n  /**\n   * Open context manager\n   */\n  contextEmit() {\n    this.toolState.toolbox.activateTool('contextManager');\n  }\n}\n","<div\n  *ngIf=\"userControlledLayerList?.length; else noLayersBlock\"\n  class=\"igo-swipe-select-container\"\n>\n  <form class=\"igo-form\" [formGroup]=\"form\">\n    <mat-form-field>\n      <mat-label>{{\n        'igo.integration.advanced-map-tool.advanced-swipe.swipe-select'\n          | translate\n      }}</mat-label>\n      <mat-select formControlName=\"layers\" multiple>\n        <mat-option [value]=\"1\" (click)=\"selectAll(e)\" #e>\n          {{\n            'igo.integration.advanced-map-tool.advanced-swipe.selectAll'\n              | translate\n          }}\n        </mat-option>\n        <mat-divider></mat-divider>\n        <mat-option\n          *ngFor=\"let layer of userControlledLayerList\"\n          [value]=\"layer\"\n          (click)=\"applyNewLayers(e)\"\n          >{{ layer.title }}</mat-option\n        >\n      </mat-select>\n    </mat-form-field>\n    <mat-slide-toggle\n      class=\"swipe-toggle mat-typography\"\n      [checked]=\"swipe\"\n      [labelPosition]=\"'before'\"\n      (change)=\"startSwipe($event.checked)\"\n    >\n      {{ 'igo.integration.advanced-map-tool.advanced-swipe.swipe' | translate }}\n    </mat-slide-toggle>\n  </form>\n</div>\n\n<ng-template #noLayersBlock>\n  <mat-list>\n    <p class=\"map-empty mat-typography\">\n      {{ 'igo.integration.advanced-map-tool.advanced-swipe.empty' | translate }}\n    </p>\n    <p class=\"map-empty mat-typography\">\n      {{\n        'igo.integration.advanced-map-tool.advanced-swipe.customize' | translate\n      }}\n    </p>\n    <mat-list-item>\n      <mat-icon matListItemIcon>search</mat-icon>\n      <span\n        matListItemTitle\n        class=\"search-tool mat-typography\"\n        (click)=\"searchEmit()\"\n      >\n        {{\n          'igo.integration.advanced-map-tool.advanced-swipe.search-tool'\n            | translate\n        }}\n      </span>\n    </mat-list-item>\n    <mat-list-item>\n      <mat-icon matListItemIcon>library_add</mat-icon>\n      <span\n        matListItemTitle\n        class=\"catalog-tool mat-typography\"\n        (click)=\"catalogEmit()\"\n      >\n        {{\n          'igo.integration.advanced-map-tool.advanced-swipe.catalog-tool'\n            | translate\n        }}\n      </span>\n    </mat-list-item>\n    <mat-list-item>\n      <mat-icon matListItemIcon>star</mat-icon>\n      <span\n        matListItemTitle\n        class=\"context-tool mat-typography\"\n        (click)=\"contextEmit()\"\n      >\n        {{\n          'igo.integration.advanced-map-tool.advanced-swipe.context-tool'\n            | translate\n        }}\n      </span>\n    </mat-list-item>\n  </mat-list>\n</ng-template>\n","import { AsyncPipe } from '@angular/common';\nimport { Component } from '@angular/core';\nimport { MatDividerModule } from '@angular/material/divider';\nimport { MatSlideToggleModule } from '@angular/material/slide-toggle';\n\nimport { ToolComponent } from '@igo2/common/tool';\nimport { IgoLanguageModule } from '@igo2/core/language';\n\nimport { MapState } from '../map.state';\nimport { AdvancedCoordinatesComponent } from './advanced-coordinates/advanced-coordinates.component';\nimport { AdvancedSwipeComponent } from './advanced-swipe/advanced-swipe.component';\n\n@ToolComponent({\n  name: 'advancedMap',\n  title: 'igo.integration.tools.advancedMap',\n  icon: 'home_repair_service'\n})\n/**\n * Tool to handle the advanced map tools\n */\n@Component({\n  selector: 'igo-advanced-map-tool',\n  templateUrl: './advanced-map-tool.component.html',\n  styleUrls: ['./advanced-map-tool.component.scss'],\n  standalone: true,\n  imports: [\n    AdvancedSwipeComponent,\n    MatDividerModule,\n    AdvancedCoordinatesComponent,\n    MatSlideToggleModule,\n    AsyncPipe,\n    IgoLanguageModule\n  ]\n})\nexport class AdvancedMapToolComponent {\n  get tracking$() {\n    return this.mapState.map.geolocationController?.tracking$;\n  }\n  get followPosition$() {\n    return this.mapState.map.geolocationController?.followPosition$;\n  }\n\n  constructor(public mapState: MapState) {}\n\n  toggleTracking(value) {\n    if (!this.mapState.map.geolocationController) {\n      return;\n    }\n    this.mapState.map.geolocationController.tracking = value;\n  }\n\n  toggleFollow(value) {\n    if (!this.mapState.map.geolocationController) {\n      return;\n    }\n    this.mapState.map.geolocationController.followPosition = value;\n  }\n}\n","<h4 class=\"nameOfTool\">\n  {{\n    'igo.integration.advanced-map-tool.advanced-swipe.swipe-tool' | translate\n  }}\n</h4>\n<igo-advanced-swipe></igo-advanced-swipe>\n<mat-divider class=\"advanced-tool-line\"></mat-divider>\n<h4 class=\"nameOfTool\">\n  {{\n    'igo.integration.advanced-map-tool.advanced-coordinates.coordinates'\n      | translate\n  }}\n</h4>\n<igo-advanced-coordinates></igo-advanced-coordinates>\n<mat-divider class=\"advanced-tool-line\"></mat-divider>\n\n<h4 class=\"nameOfTool\">\n  {{ 'igo.integration.advanced-map-tool.geolocation.title' | translate }}\n</h4>\n\n<div class=\"igo-input-container\">\n  <div class=\"geolocation-slide-toggle-container\">\n    <mat-slide-toggle\n      class=\"geolocation-option\"\n      [checked]=\"tracking$ | async\"\n      [labelPosition]=\"'before'\"\n      (change)=\"toggleTracking($event.checked)\"\n    >\n      {{ 'igo.integration.advanced-map-tool.geolocation.tracking' | translate }}\n    </mat-slide-toggle>\n\n    <mat-slide-toggle\n      class=\"geolocation-option\"\n      [disabled]=\"(tracking$ | async) !== true\"\n      [labelPosition]=\"'before'\"\n      [checked]=\"followPosition$ | async\"\n      (change)=\"toggleFollow($event.checked)\"\n    >\n      {{ 'igo.integration.advanced-map-tool.geolocation.follow' | translate }}\n    </mat-slide-toggle>\n  </div>\n</div>\n","import { AsyncPipe, NgIf } from '@angular/common';\nimport {\n  ChangeDetectionStrategy,\n  Component,\n  Input,\n  OnDestroy,\n  OnInit\n} from '@angular/core';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatTooltipModule } from '@angular/material/tooltip';\n\nimport { IgoLanguageModule } from '@igo2/core/language';\nimport { type AnyLayer, isLayerItem } from '@igo2/geo';\n\nimport { BehaviorSubject, Subscription, combineLatest } from 'rxjs';\n\nimport { WorkspaceState } from '../workspace.state';\n\n@Component({\n  selector: 'igo-workspace-button',\n  templateUrl: './workspace-button.component.html',\n  styleUrls: ['./workspace-button.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  standalone: true,\n  imports: [\n    NgIf,\n    MatButtonModule,\n    MatTooltipModule,\n    MatIconModule,\n    AsyncPipe,\n    IgoLanguageModule\n  ]\n})\nexport class WorkspaceButtonComponent implements OnInit, OnDestroy {\n  public hasWorkspace$ = new BehaviorSubject<boolean>(false);\n  private hasWorkspace$$: Subscription;\n\n  private layer$ = new BehaviorSubject<AnyLayer>(undefined);\n  @Input()\n  set layer(value: AnyLayer) {\n    this._layer = value;\n    this.layer$.next(this._layer);\n  }\n  get layer(): AnyLayer {\n    return this._layer;\n  }\n  private _layer: AnyLayer;\n\n  @Input() color = 'primary';\n\n  constructor(private workspaceState: WorkspaceState) {}\n\n  ngOnInit(): void {\n    this.hasWorkspace$$ = combineLatest([\n      this.workspaceState.workspaceEnabled$,\n      this.layer$\n    ]).subscribe(([enabled, layer]) =>\n      this.hasWorkspace$.next(\n        enabled && isLayerItem(layer) && layer.options.workspace?.enabled\n      )\n    );\n  }\n\n  ngOnDestroy(): void {\n    this.hasWorkspace$$.unsubscribe();\n  }\n\n  activateWorkspace() {\n    if (\n      this.workspaceState.workspace$.value &&\n      (this.workspaceState.workspace$.value as any).layer.id ===\n        this.layer.id &&\n      this.workspaceState.workspacePanelExpanded\n    ) {\n      this.workspaceState.workspacePanelExpanded = false;\n    } else {\n      this.workspaceState.workspacePanelExpanded = true;\n      this.workspaceState.setActiveWorkspaceById(this.layer.id);\n    }\n  }\n}\n","<button\n  *ngIf=\"hasWorkspace$ | async\"\n  mat-icon-button\n  tooltip-position=\"below\"\n  matTooltipShowDelay=\"500\"\n  [matTooltip]=\"'igo.integration.workspace.toggleWorkspace' | translate\"\n  [color]=\"color\"\n  (click)=\"activateWorkspace()\"\n>\n  <mat-icon>table</mat-icon>\n</button>\n","import { AsyncPipe, NgIf } from '@angular/common';\nimport { ChangeDetectorRef, Component, Input, OnInit } from '@angular/core';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatListModule } from '@angular/material/list';\n\nimport { ToolComponent } from '@igo2/common/tool';\nimport { ConfigService } from '@igo2/core/config';\nimport { IgoLanguageModule } from '@igo2/core/language';\nimport { Media, MediaService } from '@igo2/core/media';\nimport {\n  AnyLayer,\n  ExportButtonComponent,\n  ExportOptions,\n  IgoMap,\n  Layer,\n  LayerListControlsEnum,\n  LayerListControlsOptions,\n  LayerViewerComponent,\n  LayerViewerOptions,\n  MetadataButtonComponent,\n  OgcFilterButtonComponent,\n  SearchSourceService,\n  TimeFilterButtonComponent,\n  TrackFeatureButtonComponent,\n  sourceCanSearch\n} from '@igo2/geo';\n\nimport { Observable } from 'rxjs';\n\nimport {\n  ImportExportMode,\n  ImportExportState\n} from '../../import-export/import-export.state';\nimport { WorkspaceButtonComponent } from '../../workspace';\nimport { ToolState } from './../../tool/tool.state';\nimport { MapState } from './../map.state';\n\n@ToolComponent({\n  name: 'mapDetails',\n  title: 'igo.integration.tools.map',\n  icon: 'map'\n})\n@Component({\n  selector: 'igo-map-details-tool',\n  templateUrl: './map-details-tool.component.html',\n  styleUrls: ['./map-details-tool.component.scss'],\n  standalone: true,\n  imports: [\n    NgIf,\n    LayerViewerComponent,\n    WorkspaceButtonComponent,\n    ExportButtonComponent,\n    OgcFilterButtonComponent,\n    TimeFilterButtonComponent,\n    TrackFeatureButtonComponent,\n    MetadataButtonComponent,\n    MatListModule,\n    MatIconModule,\n    AsyncPipe,\n    IgoLanguageModule\n  ]\n})\nexport class MapDetailsToolComponent implements OnInit {\n  isDesktop: boolean;\n  public delayedShowEmptyMapContent = false;\n\n  @Input() toggleLegendOnVisibilityChange = false;\n\n  @Input() expandLegendOfVisibleLayers = false;\n\n  @Input() updateLegendOnResolutionChange = false;\n\n  @Input() ogcButton = true;\n\n  @Input() timeButton = true;\n\n  @Input() layerListControls: LayerListControlsOptions = {};\n\n  @Input() queryBadge = false;\n\n  @Input() layerAdditionAllowed = true;\n\n  private _layerViewerOptions: Partial<LayerViewerOptions>;\n  get layerViewerOptions(): LayerViewerOptions {\n    return {\n      filterAndSortOptions: this.layerFilterAndSortOptions,\n      legend: {\n        showForVisibleLayers: this.expandLegendOfVisibleLayers,\n        showOnVisibilityChange: this.toggleLegendOnVisibilityChange,\n        updateOnResolutionChange: this.updateLegendOnResolutionChange\n      },\n      queryBadge: this.queryBadge,\n      ...this._layerViewerOptions\n    };\n  }\n\n  get map(): IgoMap {\n    return this.mapState.map;\n  }\n\n  get layers$(): Observable<AnyLayer[]> {\n    return this.map.layerController.all$;\n  }\n\n  get excludeBaseLayers(): boolean {\n    return this.layerListControls.excludeBaseLayers || false;\n  }\n\n  get layerFilterAndSortOptions(): any {\n    const filterSortOptions = Object.assign(\n      {\n        showToolbar: LayerListControlsEnum.default\n      },\n      this.layerListControls\n    );\n\n    switch (this.layerListControls.showToolbar) {\n      case LayerListControlsEnum.always:\n        filterSortOptions.showToolbar = LayerListControlsEnum.always;\n        break;\n      case LayerListControlsEnum.never:\n        filterSortOptions.showToolbar = LayerListControlsEnum.never;\n        break;\n      default:\n        break;\n    }\n    return filterSortOptions;\n  }\n\n  get searchToolInToolbar(): boolean {\n    return (\n      this.toolState.toolbox.getToolbar().indexOf('searchResults') !== -1 &&\n      this.searchSourceService\n        .getSources()\n        .filter(sourceCanSearch)\n        .filter((s) => s.available && s.getType() === 'Layer').length > 0\n    );\n  }\n\n  get catalogToolInToolbar(): boolean {\n    return this.toolState.toolbox.getToolbar().indexOf('catalog') !== -1;\n  }\n\n  get contextToolInToolbar(): boolean {\n    return this.toolState.toolbox.getToolbar().indexOf('contextManager') !== -1;\n  }\n\n  constructor(\n    private mapState: MapState,\n    private toolState: ToolState,\n    private searchSourceService: SearchSourceService,\n    private importExportState: ImportExportState,\n    private configService: ConfigService,\n    public mediaService: MediaService,\n    private cdr: ChangeDetectorRef\n  ) {\n    this._layerViewerOptions = this.configService.getConfig('layer');\n  }\n\n  ngOnInit(): void {\n    this.handleMedia();\n\n    // prevent message to be shown too quickly. Waiting for layers\n    setTimeout(() => {\n      this.delayedShowEmptyMapContent = true;\n      this.cdr.detectChanges();\n    }, 250);\n  }\n\n  searchEmit() {\n    this.toolState.toolbox.activateTool('searchResults');\n  }\n\n  catalogEmit() {\n    this.toolState.toolbox.activateTool('catalog');\n  }\n\n  contextEmit() {\n    this.toolState.toolbox.activateTool('contextManager');\n  }\n\n  activateExport(layer: Layer) {\n    let id = layer.id;\n    if (layer.options.workspace?.workspaceId) {\n      id =\n        layer.options.workspace.workspaceId !== layer.id\n          ? layer.options.workspace.workspaceId\n          : layer.id;\n    }\n    this.importExportState.setsExportOptions({ layers: [id] } as ExportOptions);\n    this.importExportState.setMode(ImportExportMode.export);\n    this.toolState.toolbox.activateTool('importExport');\n  }\n\n  private handleMedia(): void {\n    this.mediaService.media$.subscribe((result) => {\n      this.isDesktop = result === Media.Desktop;\n      this.cdr.detectChanges();\n    });\n  }\n}\n","<igo-layer-viewer\n  class=\"mapDetailsList\"\n  *ngIf=\"(layers$ | async).length; else empty\"\n  [map]=\"map\"\n  [options]=\"layerViewerOptions\"\n  [excludeBaseLayers]=\"excludeBaseLayers\"\n  [isDesktop]=\"isDesktop\"\n>\n  <ng-template #customBottomActions let-layer=\"layer\">\n    <igo-workspace-button [layer]=\"layer\"></igo-workspace-button>\n    <igo-export-button\n      [layer]=\"layer\"\n      (click)=\"activateExport(layer)\"\n    ></igo-export-button>\n    <igo-ogc-filter-button\n      [header]=\"ogcButton\"\n      [layer]=\"layer\"\n    ></igo-ogc-filter-button>\n    <igo-time-filter-button\n      [header]=\"timeButton\"\n      [layer]=\"layer\"\n    ></igo-time-filter-button>\n    <igo-track-feature-button\n      [trackFeature]=\"true\"\n      [layer]=\"layer\"\n    ></igo-track-feature-button>\n    <igo-metadata-button [layer]=\"layer\"></igo-metadata-button>\n  </ng-template>\n</igo-layer-viewer>\n\n<ng-template #empty>\n  <mat-list *ngIf=\"delayedShowEmptyMapContent\">\n    <p class=\"map-empty mat-typography\">\n      {{ 'igo.integration.mapTool.empty' | translate }}\n    </p>\n    <p\n      *ngIf=\"\n        layerAdditionAllowed &&\n        (searchToolInToolbar || catalogToolInToolbar || contextToolInToolbar)\n      \"\n      class=\"map-empty mat-typography\"\n    >\n      {{ 'igo.integration.mapTool.customize' | translate }}\n    </p>\n    <mat-list-item *ngIf=\"layerAdditionAllowed && searchToolInToolbar\">\n      <mat-icon matListItemIcon>search</mat-icon>\n      <span\n        matListItemTitle\n        class=\"search-tool mat-typography\"\n        (click)=\"searchEmit()\"\n      >\n        {{ 'igo.integration.mapTool.search-tool' | translate }}\n      </span>\n    </mat-list-item>\n    <mat-list-item *ngIf=\"layerAdditionAllowed && catalogToolInToolbar\">\n      <mat-icon matListItemIcon>library_add</mat-icon>\n      <span\n        matListItemTitle\n        class=\"catalog-tool mat-typography\"\n        (click)=\"catalogEmit()\"\n      >\n        {{ 'igo.integration.mapTool.catalog-tool' | translate }}\n      </span>\n    </mat-list-item>\n    <mat-list-item *ngIf=\"layerAdditionAllowed && contextToolInToolbar\">\n      <mat-icon matListItemIcon>star</mat-icon>\n      <span\n        matListItemTitle\n        class=\"context-tool mat-typography\"\n        (click)=\"contextEmit()\"\n      >\n        {{ 'igo.integration.mapTool.context-tool' | translate }}\n      </span>\n    </mat-list-item>\n  </mat-list>\n</ng-template>\n","import { AsyncPipe, NgIf } from '@angular/common';\nimport {\n  ChangeDetectorRef,\n  Component,\n  Input,\n  OnDestroy,\n  OnInit\n} from '@angular/core';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatListModule } from '@angular/material/list';\n\nimport { ToolComponent } from '@igo2/common/tool';\nimport { IgoLanguageModule } from '@igo2/core/language';\nimport {\n  AnyLayer,\n  IgoMap,\n  LayerLegendListBindingDirective,\n  LayerLegendListComponent,\n  LayerListControlsOptions,\n  SearchSourceService,\n  isBaseLayer,\n  sourceCanSearch\n} from '@igo2/geo';\n\nimport {\n  BehaviorSubject,\n  Observable,\n  ReplaySubject,\n  Subscription,\n  combineLatest\n} from 'rxjs';\nimport { debounceTime, map } from 'rxjs/operators';\n\nimport { ToolState } from './../../tool/tool.state';\nimport { MapState } from './../map.state';\n\n@ToolComponent({\n  name: 'mapLegend',\n  title: 'igo.integration.tools.legend',\n  icon: 'format_list_bulleted'\n})\n@Component({\n  selector: 'igo-map-legend-tool',\n  templateUrl: './map-legend-tool.component.html',\n  styleUrls: ['./map-legend-tool.component.scss'],\n  standalone: true,\n  imports: [\n    NgIf,\n    LayerLegendListComponent,\n    LayerLegendListBindingDirective,\n    MatListModule,\n    MatIconModule,\n    AsyncPipe,\n    IgoLanguageModule\n  ]\n})\nexport class MapLegendToolComponent implements OnInit, OnDestroy {\n  public delayedShowEmptyMapContent = false;\n\n  layers$ = new BehaviorSubject<AnyLayer[]>([]);\n  showAllLegendsValue$ = new BehaviorSubject(false);\n  change$ = new ReplaySubject<void>(1);\n\n  private resolution$$: Subscription;\n  private visibleOrInRangeLayers$$: Subscription;\n\n  @Input() updateLegendOnResolutionChange = false;\n\n  @Input() layerAdditionAllowed = true;\n\n  @Input() allowShowAllLegends = false;\n\n  @Input() showAllLegendsValue = false;\n\n  @Input() layerListControls: LayerListControlsOptions = {};\n\n  get map(): IgoMap {\n    return this.mapState.map;\n  }\n\n  get visibleOrInRangeLayers$(): Observable<AnyLayer[]> {\n    return this.layers$.pipe(\n      map((layers) => layers.filter((layer) => layer.displayed))\n    );\n  }\n\n  get visibleLayers$(): Observable<AnyLayer[]> {\n    return this.layers$.pipe(\n      map((layers) => layers.filter((layer) => layer.visible))\n    );\n  }\n\n  get excludeBaseLayers(): boolean {\n    return this.layerListControls.excludeBaseLayers || false;\n  }\n\n  get searchToolInToolbar(): boolean {\n    return (\n      this.toolState.toolbox.getToolbar().indexOf('searchResults') !== -1 &&\n      this.searchSourceService\n        .getSources()\n        .filter(sourceCanSearch)\n        .filter((s) => s.available && s.getType() === 'Layer').length > 0\n    );\n  }\n\n  get catalogToolInToolbar(): boolean {\n    return this.toolState.toolbox.getToolbar().indexOf('catalog') !== -1;\n  }\n\n  get contextToolInToolbar(): boolean {\n    return this.toolState.toolbox.getToolbar().indexOf('contextManager') !== -1;\n  }\n  constructor(\n    private mapState: MapState,\n    private toolState: ToolState,\n    private searchSourceService: SearchSourceService,\n    private cdRef: ChangeDetectorRef\n  ) {}\n\n  ngOnInit(): void {\n    this.resolution$$ = combineLatest([\n      this.map.layerController.all$,\n      this.map.viewController.resolution$\n    ])\n      .pipe(debounceTime(10))\n      .subscribe((bunch) => {\n        this.layers$.next(\n          bunch[0].filter(\n            (layer) =>\n              layer.showInLayerList !== false &&\n              (!this.excludeBaseLayers || !isBaseLayer(layer))\n          )\n        );\n      });\n\n    if (this.allowShowAllLegends) {\n      this.mapState.showAllLegendsValue =\n        this.mapState.showAllLegendsValue !== undefined\n          ? this.mapState.showAllLegendsValue\n          : this.showAllLegendsValue || false;\n      this.showAllLegendsValue$.next(this.mapState.showAllLegendsValue);\n    } else {\n      this.showAllLegendsValue$.next(false);\n    }\n\n    // prevent message to be shown too quickly. Waiting for layers\n    setTimeout(() => {\n      this.delayedShowEmptyMapContent = true;\n      this.cdRef.detectChanges();\n    }, 250);\n  }\n\n  onShowAllLegends(event) {\n    this.mapState.showAllLegendsValue = event;\n    this.showAllLegendsValue$.next(event);\n  }\n\n  showAllLegend() {\n    if (this.layers$.getValue().length === 0) {\n      return false;\n    } else if (\n      this.layers$.getValue().length !== 0 &&\n      this.allowShowAllLegends === false\n    ) {\n      let visibleOrInRangeLayers;\n      this.visibleOrInRangeLayers$$ = this.visibleOrInRangeLayers$.subscribe(\n        (value) => {\n          visibleOrInRangeLayers = value.length === 0 ? false : true;\n        }\n      );\n\n      if (visibleOrInRangeLayers === false) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  ngOnDestroy(): void {\n    this.resolution$$.unsubscribe();\n    if (this.visibleOrInRangeLayers$$) {\n      this.visibleOrInRangeLayers$$.unsubscribe();\n    }\n  }\n\n  searchEmit() {\n    this.toolState.toolbox.activateTool('searchResults');\n  }\n\n  catalogEmit() {\n    this.toolState.toolbox.activateTool('catalog');\n  }\n\n  contextEmit() {\n    this.toolState.toolbox.activateTool('contextManager');\n  }\n}\n","<igo-layer-legend-list\n  *ngIf=\"showAllLegend()\"\n  igoLayerLegendListBinding\n  [excludeBaseLayers]=\"excludeBaseLayers\"\n  [allowShowAllLegends]=\"allowShowAllLegends\"\n  [updateLegendOnResolutionChange]=\"updateLegendOnResolutionChange\"\n  [showAllLegendsValue]=\"showAllLegendsValue$ | async\"\n  (allLegendsShown)=\"onShowAllLegends($event)\"\n>\n</igo-layer-legend-list>\n<ng-template\n  *ngIf=\"(layers$ | async).length !== 0; else emptyLayers\"\n></ng-template>\n\n<p\n  class=\"map-empty mat-typography\"\n  *ngIf=\"\n    !allowShowAllLegends &&\n    (layers$ | async).length !== 0 &&\n    (visibleOrInRangeLayers$ | async).length === 0\n  \"\n>\n  {{\n    (visibleLayers$ | async).length\n      ? ('igo.integration.mapTool.noLayersInRange' | translate)\n      : ('igo.integration.mapTool.noLayersVisible' | translate)\n  }}\n</p>\n\n<ng-template #emptyLayers>\n  <mat-list *ngIf=\"delayedShowEmptyMapContent\">\n    <p class=\"map-empty mat-typography\">\n      {{ 'igo.integration.mapTool.empty' | translate }}\n    </p>\n    <p\n      *ngIf=\"\n        layerAdditionAllowed &&\n        (searchToolInToolbar || catalogToolInToolbar || contextToolInToolbar)\n      \"\n      class=\"map-empty mat-typography\"\n    >\n      {{ 'igo.integration.mapTool.customize' | translate }}\n    </p>\n\n    <mat-list-item *ngIf=\"layerAdditionAllowed && searchToolInToolbar\">\n      <mat-icon matListItemIcon>search</mat-icon>\n      <span\n        matListItemTitle\n        class=\"search-tool mat-typography\"\n        (click)=\"searchEmit()\"\n      >\n        {{ 'igo.integration.mapTool.search-tool' | translate }}\n      </span>\n    </mat-list-item>\n    <mat-list-item *ngIf=\"layerAdditionAllowed && catalogToolInToolbar\">\n      <mat-icon matListItemIcon>library_add</mat-icon>\n      <span\n        matListItemTitle\n        class=\"catalog-tool mat-typography\"\n        (click)=\"catalogEmit()\"\n      >\n        {{ 'igo.integration.mapTool.catalog-tool' | translate }}\n      </span>\n    </mat-list-item>\n    <mat-list-item *ngIf=\"layerAdditionAllowed && contextToolInToolbar\">\n      <mat-icon matListItemIcon>star</mat-icon>\n      <span\n        matListItemTitle\n        class=\"context-tool mat-typography\"\n        (click)=\"contextEmit()\"\n      >\n        {{ 'igo.integration.mapTool.context-tool' | translate }}\n      </span>\n    </mat-list-item>\n  </mat-list>\n</ng-template>\n","import { Injectable } from '@angular/core';\n\nimport { StorageService } from '@igo2/core/storage';\nimport {\n  AnyLayer,\n  FEATURE,\n  Feature,\n  FeatureStore,\n  IgoMap,\n  Layer,\n  MapGeolocationState,\n  QueryableDataSource,\n  QueryableDataSourceOptions,\n  featureFromOl,\n  isLayerItem,\n  measureOlGeometryLength,\n  roundCoordTo\n} from '@igo2/geo';\nimport { uuid } from '@igo2/utils';\n\nimport { Coordinate } from 'ol/coordinate';\nimport GeoJSON from 'ol/format/GeoJSON';\nimport Geometry from 'ol/geom/Geometry';\nimport olLineString from 'ol/geom/LineString';\nimport olLayerVector from 'ol/layer/Vector';\nimport * as olProj from 'ol/proj';\nimport olVectorSource from 'ol/source/Vector';\n\nimport { BehaviorSubject, Subscription, combineLatest, interval } from 'rxjs';\nimport { debounceTime } from 'rxjs/operators';\n\nimport { MapState } from '../map/map.state';\n\n/**\n * Service that holds the state of the direction module\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class MapProximityState {\n  private defaultProximityRadiusValue = 30;\n\n  public enabled$: BehaviorSubject<boolean> = new BehaviorSubject<boolean>(\n    false\n  );\n  public proximityRadiusValue$: BehaviorSubject<number>;\n  public proximitylocationType$: BehaviorSubject<string> =\n    new BehaviorSubject<string>('geolocation');\n  public proximityFeatureStore: FeatureStore<Feature>;\n  private subs$$: Subscription[] = [];\n  public currentPositionCoordinate$ = new BehaviorSubject<Coordinate>(\n    undefined\n  );\n\n  get map(): IgoMap {\n    return this.mapState.map;\n  }\n\n  constructor(\n    private mapState: MapState,\n    private storageService: StorageService\n  ) {\n    this.proximityFeatureStore = new FeatureStore<Feature>([], {\n      map: this.mapState.map\n    });\n\n    this.proximityRadiusValue$ = new BehaviorSubject<number>(\n      (this.storageService.get('mapProximityRadius') as number) ||\n        this.defaultProximityRadiusValue\n    );\n\n    this.mapState.map.ol.once('rendercomplete', () => {\n      this.subscribeProximityMonitor();\n    });\n  }\n\n  subscribeProximityMonitor() {\n    this.subs$$.push(\n      combineLatest([\n        this.enabled$,\n        this.proximitylocationType$,\n        this.proximityRadiusValue$,\n        interval(5000),\n        this.map.geolocationController.position$\n      ])\n        .pipe(debounceTime(750))\n        .subscribe(\n          (bunch: [boolean, string, number, number, MapGeolocationState]) => {\n            this.proximityFeatureStore.clear();\n            const enabled = bunch[0];\n            const layers = this.map.layerController.all;\n            const currentPos = this.map.geolocationController.position$.value;\n            const locationType = bunch[1];\n            const proximityRadiusValue = bunch[2];\n            this.storageService.set(\n              'mapProximityRadius',\n              proximityRadiusValue || this.defaultProximityRadiusValue\n            );\n\n            if (!enabled) {\n              return;\n            }\n\n            let coord: number[];\n            if (locationType === 'geolocation') {\n              if (!currentPos || !currentPos.position) {\n                return;\n              }\n\n              coord = olProj.transform(\n                currentPos.position,\n                currentPos.projection,\n                this.map.projection\n              );\n              this.map.mapCenter$.next(false);\n            } else {\n              coord = this.map.viewController.getCenter();\n              this.map.mapCenter$.next(true);\n            }\n\n            const coordLonLat = olProj.transform(\n              coord,\n              this.map.projection,\n              'EPSG:4269'\n            );\n            const roundedCoordLonLat = roundCoordTo(\n              coordLonLat as [number, number],\n              6\n            );\n            this.currentPositionCoordinate$.next(roundedCoordLonLat);\n\n            const layersToMonitor = layers.filter(\n              (layer) =>\n                isLayerItem(layer) &&\n                layer.ol instanceof olLayerVector &&\n                (layer.dataSource as QueryableDataSource).options.queryable &&\n                layer.visible &&\n                layer.isInResolutionsRange\n            ) as Layer[];\n\n            layersToMonitor.map((layerToMonitor) => {\n              const layerSource =\n                layerToMonitor.ol.getSource() as olVectorSource;\n\n              // Mostly for polygon features.\n              const olFeaturesAtCoordinate =\n                layerSource.getFeaturesAtCoordinate(coord);\n              if (olFeaturesAtCoordinate && olFeaturesAtCoordinate.length) {\n                olFeaturesAtCoordinate.map((olFeatureAtCoordinate) => {\n                  const featureAtThisPosition = featureFromOl(\n                    olFeatureAtCoordinate,\n                    this.map.projection\n                  );\n                  const title = this.getQueryTitle(\n                    featureAtThisPosition,\n                    layerToMonitor\n                  );\n                  // todo handle imported layers without querytitle? prompt title or detect first column?\n                  this.addFeatureToStore(\n                    layerToMonitor,\n                    coord,\n                    featureAtThisPosition,\n                    title,\n                    0\n                  );\n                });\n              } else {\n                // compute proximity for remaining sources\n                const closestOlFeature =\n                  layerSource.getClosestFeatureToCoordinate(coord);\n                if (closestOlFeature) {\n                  const closestOlGeom = closestOlFeature.getGeometry();\n                  const closestFeature = featureFromOl(\n                    closestOlFeature,\n                    this.map.projection\n                  );\n                  const geometryClosestPoint =\n                    closestOlGeom.getClosestPoint(coord);\n                  const linebetween = new olLineString([\n                    coord,\n                    geometryClosestPoint\n                  ]);\n                  const lineLength = measureOlGeometryLength(\n                    linebetween,\n                    'EPSG:3857'\n                  );\n                  if (lineLength <= proximityRadiusValue) {\n                    const title = this.getQueryTitle(\n                      closestFeature,\n                      layerToMonitor\n                    );\n                    // todo handle imported layers without querytitle? prompt title or detect first column?\n                    this.addFeatureToStore(\n                      layerToMonitor,\n                      coord,\n                      closestFeature,\n                      title,\n                      lineLength\n                    );\n                  }\n                }\n              }\n            });\n          }\n        )\n    );\n  }\n\n  /**\n   * Add a feature with proximity properties to the store\n   * @internal\n   */\n  private addFeatureToStore(\n    layer: Layer,\n    coordFromCalculatedDistance,\n    feature: Feature,\n    title,\n    distance\n  ) {\n    const featureId = uuid();\n    const projection = this.map.ol.getView().getProjection();\n    const olGeometry = feature.ol.getGeometry() as Geometry;\n    const geometry = new GeoJSON().writeGeometryObject(olGeometry, {\n      featureProjection: projection,\n      dataProjection: projection\n    }) as any;\n    this.proximityFeatureStore.update({\n      type: FEATURE,\n      geometry,\n      projection: projection.getCode(),\n      properties: {\n        ...feature.properties,\n        ...{\n          id: featureId,\n          element: title,\n          distance,\n          coordFromCalculatedDistance,\n          layerSrcId: layer.id,\n          layerSrcTitle: layer.title\n        }\n      },\n      meta: {\n        id: featureId\n      }\n    });\n  }\n\n  getQueryTitle(feature: Feature, layer: AnyLayer): string | undefined {\n    if (isLayerItem(layer) && layer.options?.source?.options) {\n      const dataSourceOptions = layer.options.source\n        .options as QueryableDataSourceOptions;\n      if (dataSourceOptions.queryTitle) {\n        return this.getLabelMatch(feature, dataSourceOptions.queryTitle);\n      }\n    }\n  }\n\n  getLabelMatch(feature: Feature, labelMatch): string {\n    let label = labelMatch;\n    const labelToGet = Array.from(labelMatch.matchAll(/\\$\\{([^\\{\\}]+)\\}/g));\n\n    labelToGet.forEach((v) => {\n      label = label.replace(v[0], feature.properties[v[1]]);\n    });\n\n    // Nothing done? check feature's attribute\n    if (labelToGet.length === 0 && label === labelMatch) {\n      label = feature.properties[labelMatch] || labelMatch;\n    }\n    return label;\n  }\n}\n","import { AsyncPipe, NgIf } from '@angular/common';\nimport { Component, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatRadioChange, MatRadioModule } from '@angular/material/radio';\n\nimport { EntityTableComponent, EntityTableTemplate } from '@igo2/common/entity';\nimport { ToolComponent } from '@igo2/common/tool';\nimport { LanguageService } from '@igo2/core/language';\nimport { IgoLanguageModule } from '@igo2/core/language';\nimport { MessageService } from '@igo2/core/message';\nimport { Feature, IgoMap } from '@igo2/geo';\nimport { Clipboard, NumberUtils } from '@igo2/utils';\n\nimport { Subscription } from 'rxjs';\n\nimport { MapProximityState } from '../map-proximity.state';\nimport { MapState } from '../map.state';\n\n@ToolComponent({\n  name: 'map-proximity',\n  title: 'igo.integration.tools.closestFeature',\n  icon: 'radar'\n})\n/**\n * Tool to handle the advanced map tools\n */\n@Component({\n  selector: 'igo-map-proximity-tool',\n  templateUrl: './map-proximity-tool.component.html',\n  styleUrls: ['./map-proximity-tool.component.scss'],\n  standalone: true,\n  imports: [\n    EntityTableComponent,\n    NgIf,\n    MatFormFieldModule,\n    MatInputModule,\n    MatButtonModule,\n    MatIconModule,\n    MatRadioModule,\n    FormsModule,\n    AsyncPipe,\n    IgoLanguageModule\n  ]\n})\nexport class MapProximityToolComponent implements OnInit, OnDestroy {\n  private subs$$: Subscription[] = [];\n  @ViewChild('table', { static: true }) table: EntityTableComponent;\n\n  get maxDistance() {\n    return this.mapProximityState.proximityRadiusValue$.value;\n  }\n  set maxDistance(value: number) {\n    this.mapProximityState.proximityRadiusValue$.next(value);\n  }\n\n  get map(): IgoMap {\n    return this.mapState.map;\n  }\n  public userDefinedMapCenter: boolean;\n  public userDefinedFollowPosition: boolean;\n  /**\n   * Table template\n   * @internal\n   */\n  public tableTemplate: EntityTableTemplate;\n\n  constructor(\n    public mapState: MapState,\n    public mapProximityState: MapProximityState,\n    private languageService: LanguageService,\n    private messageService: MessageService\n  ) {\n    this.tableTemplate = {\n      selection: true,\n      selectMany: false,\n      selectionCheckbox: false,\n      sort: true,\n      columns: [\n        {\n          name: 'element',\n          title: this.languageService.translate.instant(\n            'igo.integration.map-proximity-tool.feature'\n          ),\n          valueAccessor: (localFeature: Feature) => {\n            return localFeature.properties.element;\n          }\n        },\n        {\n          name: 'distance',\n          title: this.languageService.translate.instant(\n            'igo.integration.map-proximity-tool.distance'\n          ),\n          valueAccessor: (localFeature: Feature) => {\n            return `${NumberUtils.roundToNDecimal(\n              localFeature.properties.distance,\n              1\n            )}m`;\n          }\n        }\n      ]\n    };\n  }\n\n  ngOnInit(): void {\n    this.mapProximityState.enabled$.next(true);\n    this.userDefinedFollowPosition =\n      this.map.geolocationController.followPosition === true;\n    this.userDefinedMapCenter = this.map.mapCenter$.value === true;\n\n    this.subs$$.push(\n      this.mapProximityState.proximitylocationType$.subscribe((v) => {\n        this.map.mapCenter$.next(v !== 'geolocation');\n        if (v === 'geolocation') {\n          this.map.geolocationController.followPosition = true;\n        } else {\n          this.map.geolocationController.followPosition = false;\n        }\n      })\n    );\n  }\n\n  ngOnDestroy(): void {\n    this.mapProximityState.enabled$.next(false);\n    this.map.mapCenter$.next(this.userDefinedMapCenter);\n    this.subs$$.map((s) => s.unsubscribe());\n    this.map.geolocationController.followPosition =\n      this.userDefinedFollowPosition;\n  }\n\n  onLocationTypeChange(e: MatRadioChange) {\n    this.mapProximityState.proximitylocationType$.next(e.value);\n  }\n\n  /**\n   * Copy the coordinates to a clipboard\n   */\n  copyTextToClipboard(): void {\n    const successful = Clipboard.copy(\n      this.mapProximityState.currentPositionCoordinate$?.value.toString()\n    );\n    if (successful) {\n      this.messageService.success(\n        'igo.integration.map-proximity-tool.copyMsg',\n        'igo.integration.map-proximity-tool.copyTitle'\n      );\n    }\n  }\n}\n","<igo-entity-table\n  #table\n  class=\"table-compact\"\n  [store]=\"mapProximityState.proximityFeatureStore\"\n  [template]=\"tableTemplate\"\n></igo-entity-table>\n<br />\n<mat-form-field\n  *ngIf=\"mapProximityState.currentPositionCoordinate$ | async as coord\"\n  class=\"coordinates\"\n>\n  <textarea\n    #textArea\n    matInput\n    readonly\n    rows=\"1\"\n    [placeholder]=\"'igo.integration.map-proximity-tool.lon' | translate\"\n    [value]=\"coord[0]\"\n  ></textarea>\n</mat-form-field>\n<mat-form-field\n  *ngIf=\"mapProximityState.currentPositionCoordinate$ | async as coord2\"\n  class=\"coordinates2\"\n>\n  <textarea\n    #textArea\n    matInput\n    readonly\n    rows=\"1\"\n    [placeholder]=\"'igo.integration.map-proximity-tool.lat' | translate\"\n    [value]=\"coord2[1]\"\n  ></textarea>\n</mat-form-field>\n\n<button\n  *ngIf=\"\n    (mapProximityState.currentPositionCoordinate$ | async) &&\n    (mapProximityState.currentPositionCoordinate$ | async).length\n  \"\n  mat-icon-button\n  (click)=\"copyTextToClipboard()\"\n>\n  <mat-icon>content_copy</mat-icon>\n</button>\n<div class=\"title-container\">\n  <mat-label class=\"title mat-typography\">{{\n    'igo.integration.map-proximity-tool.method' | translate\n  }}</mat-label>\n</div>\n<div class=\"igo-input-container mat-typography\">\n  <mat-radio-group (change)=\"onLocationTypeChange($event)\">\n    <mat-radio-button\n      [checked]=\"\n        (mapProximityState.proximitylocationType$ | async) === 'geolocation'\n      \"\n      value=\"geolocation\"\n      >{{\n        'igo.integration.map-proximity-tool.geolocation' | translate\n      }}</mat-radio-button\n    >\n    <mat-radio-button\n      [checked]=\"\n        (mapProximityState.proximitylocationType$ | async) === 'mapCenter'\n      \"\n      value=\"mapCenter\"\n      >{{\n        'igo.integration.map-proximity-tool.mapCenter' | translate\n      }}</mat-radio-button\n    >\n  </mat-radio-group>\n</div>\n\n<div class=\"radius-unit\">\n  <mat-form-field class=\"radius-field\" floatLabel=\"always\">\n    <mat-label>{{\n      'igo.integration.map-proximity-tool.radiusM' | translate\n    }}</mat-label>\n    <input\n      type=\"number\"\n      pattern=\"[0-9]*\"\n      [(ngModel)]=\"maxDistance\"\n      matInput\n      placeholder=\"{{\n        'igo.integration.map-proximity-tool.radiusM' | translate\n      }}\"\n    />\n  </mat-form-field>\n</div>\n","import {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  Input,\n  OnInit\n} from '@angular/core';\nimport { MatTabsModule } from '@angular/material/tabs';\n\nimport { ToolComponent } from '@igo2/common/tool';\nimport {\n  ContextListBindingDirective,\n  ContextListComponent\n} from '@igo2/context';\nimport { ConfigService } from '@igo2/core/config';\nimport { IgoLanguageModule } from '@igo2/core/language';\nimport { Media, MediaService } from '@igo2/core/media';\nimport {\n  ExportButtonComponent,\n  ExportOptions,\n  IgoMap,\n  Layer,\n  LayerListControlsEnum,\n  LayerListControlsOptions,\n  LayerViewerComponent,\n  LayerViewerOptions,\n  MetadataButtonComponent,\n  OgcFilterButtonComponent,\n  TimeFilterButtonComponent,\n  TrackFeatureButtonComponent\n} from '@igo2/geo';\n\nimport {\n  ImportExportMode,\n  ImportExportState\n} from '../../import-export/import-export.state';\nimport { ToolState } from '../../tool/tool.state';\nimport { WorkspaceButtonComponent } from '../../workspace/workspace-button/workspace-button.component';\nimport { MapState } from './../map.state';\n\n/**\n * Tool to browse a map's layers or to choose a different map\n */\n@ToolComponent({\n  name: 'map',\n  title: 'igo.integration.tools.map',\n  icon: 'map'\n})\n@Component({\n  selector: 'igo-map-tool',\n  templateUrl: './map-tool.component.html',\n  styleUrls: ['./map-tool.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  standalone: true,\n  imports: [\n    MatTabsModule,\n    WorkspaceButtonComponent,\n    ExportButtonComponent,\n    OgcFilterButtonComponent,\n    TimeFilterButtonComponent,\n    TrackFeatureButtonComponent,\n    MetadataButtonComponent,\n    LayerViewerComponent,\n    ContextListComponent,\n    ContextListBindingDirective,\n    IgoLanguageModule\n  ]\n})\nexport class MapToolComponent implements OnInit {\n  isDesktop: boolean;\n\n  @Input() toggleLegendOnVisibilityChange = false;\n\n  @Input() expandLegendOfVisibleLayers = false;\n\n  @Input() updateLegendOnResolutionChange = false;\n\n  @Input() ogcButton = true;\n\n  @Input() timeButton = true;\n\n  @Input() layerListControls: LayerListControlsOptions = {};\n\n  @Input() queryBadge = false;\n\n  get map(): IgoMap {\n    return this.mapState.map;\n  }\n\n  get excludeBaseLayers(): boolean {\n    return this.layerListControls.excludeBaseLayers || false;\n  }\n\n  get layerFilterAndSortOptions(): any {\n    const filterSortOptions = Object.assign(\n      {\n        showToolbar: LayerListControlsEnum.default\n      },\n      this.layerListControls\n    );\n\n    switch (this.layerListControls.showToolbar) {\n      case LayerListControlsEnum.always:\n        filterSortOptions.showToolbar = LayerListControlsEnum.always;\n        break;\n      case LayerListControlsEnum.never:\n        filterSortOptions.showToolbar = LayerListControlsEnum.never;\n        break;\n      default:\n        break;\n    }\n    return filterSortOptions;\n  }\n\n  private _layerViewerOptions: Partial<LayerViewerOptions>;\n  get layerViewerOptions(): LayerViewerOptions {\n    return {\n      filterAndSortOptions: this.layerFilterAndSortOptions,\n      legend: {\n        showForVisibleLayers: this.expandLegendOfVisibleLayers,\n        showOnVisibilityChange: this.toggleLegendOnVisibilityChange,\n        updateOnResolutionChange: this.updateLegendOnResolutionChange\n      },\n      queryBadge: this.queryBadge,\n      ...this._layerViewerOptions\n    };\n  }\n\n  constructor(\n    private mapState: MapState,\n    private toolState: ToolState,\n    private importExportState: ImportExportState,\n    private configService: ConfigService,\n    public mediaService: MediaService,\n    private cdr: ChangeDetectorRef\n  ) {\n    this._layerViewerOptions = this.configService.getConfig('layer');\n  }\n\n  ngOnInit(): void {\n    this.handleMedia();\n  }\n\n  activateExport(layer: Layer) {\n    let id = layer.id;\n    if (layer.options.workspace?.workspaceId) {\n      id =\n        layer.options.workspace.workspaceId !== layer.id\n          ? layer.options.workspace.workspaceId\n          : layer.id;\n    }\n    this.importExportState.setsExportOptions({ layers: [id] } as ExportOptions);\n    this.importExportState.setMode(ImportExportMode.export);\n    this.toolState.toolbox.activateTool('importExport');\n  }\n\n  private handleMedia(): void {\n    this.mediaService.media$.subscribe((result) => {\n      this.isDesktop = result === Media.Desktop;\n      this.cdr.detectChanges();\n    });\n  }\n}\n","<mat-tab-group>\n  <mat-tab [label]=\"'igo.integration.tools.map' | translate\">\n    <igo-layer-viewer\n      [map]=\"map\"\n      [options]=\"layerViewerOptions\"\n      [excludeBaseLayers]=\"excludeBaseLayers\"\n      [isDesktop]=\"isDesktop\"\n    >\n      <ng-template #customBottomActions let-layer=\"layer\">\n        <igo-workspace-button [layer]=\"layer\"></igo-workspace-button>\n        <igo-export-button\n          [layer]=\"layer\"\n          (click)=\"activateExport(layer)\"\n        ></igo-export-button>\n        <igo-ogc-filter-button\n          [header]=\"ogcButton\"\n          [layer]=\"layer\"\n        ></igo-ogc-filter-button>\n        <igo-time-filter-button\n          [header]=\"timeButton\"\n          [layer]=\"layer\"\n        ></igo-time-filter-button>\n        <igo-track-feature-button\n          [trackFeature]=\"true\"\n          [layer]=\"layer\"\n        ></igo-track-feature-button>\n        <igo-metadata-button [layer]=\"layer\"></igo-metadata-button>\n      </ng-template>\n    </igo-layer-viewer>\n  </mat-tab>\n\n  <mat-tab [label]=\"'igo.integration.tools.contexts' | translate\">\n    <igo-context-list igoContextListBinding></igo-context-list>\n  </mat-tab>\n</mat-tab-group>\n","import { AsyncPipe, NgIf, NgTemplateOutlet } from '@angular/common';\nimport {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  Input,\n  OnDestroy,\n  OnInit,\n  ViewChild\n} from '@angular/core';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatListModule } from '@angular/material/list';\nimport { MatTabChangeEvent, MatTabsModule } from '@angular/material/tabs';\n\nimport { ToolComponent } from '@igo2/common/tool';\nimport { ConfigService } from '@igo2/core/config';\nimport { IgoLanguageModule } from '@igo2/core/language';\nimport { Media, MediaService } from '@igo2/core/media';\nimport {\n  AnyLayer,\n  ExportButtonComponent,\n  ExportOptions,\n  IgoMap,\n  Layer,\n  LayerLegendListBindingDirective,\n  LayerLegendListComponent,\n  LayerListControlsEnum,\n  LayerListControlsOptions,\n  LayerViewerComponent,\n  LayerViewerOptions,\n  MetadataButtonComponent,\n  OgcFilterButtonComponent,\n  SearchSourceService,\n  StyleModalLayerButtonComponent,\n  TimeFilterButtonComponent,\n  TrackFeatureButtonComponent,\n  VectorLayer,\n  sourceCanSearch\n} from '@igo2/geo';\n\nimport { BehaviorSubject, Observable, Subscription, combineLatest } from 'rxjs';\nimport { debounceTime, map } from 'rxjs/operators';\n\nimport {\n  ImportExportMode,\n  ImportExportState\n} from '../../import-export/import-export.state';\nimport { ToolState } from '../../tool/tool.state';\nimport { WorkspaceButtonComponent } from '../../workspace/workspace-button/workspace-button.component';\nimport { LayerListToolState } from '../layer-list-tool.state';\nimport { MapState } from '../map.state';\n\n/**\n * Tool to browse a map's layers or to choose a different map\n */\n@ToolComponent({\n  name: 'mapTools',\n  title: 'igo.integration.tools.map',\n  icon: 'map'\n})\n@Component({\n  selector: 'igo-map-tools',\n  templateUrl: './map-tools.component.html',\n  styleUrls: ['./map-tools.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  standalone: true,\n  imports: [\n    MatTabsModule,\n    NgIf,\n    NgTemplateOutlet,\n    LayerViewerComponent,\n    StyleModalLayerButtonComponent,\n    MetadataButtonComponent,\n    TrackFeatureButtonComponent,\n    TimeFilterButtonComponent,\n    OgcFilterButtonComponent,\n    ExportButtonComponent,\n    WorkspaceButtonComponent,\n    LayerLegendListComponent,\n    LayerLegendListBindingDirective,\n    MatListModule,\n    MatIconModule,\n    AsyncPipe,\n    IgoLanguageModule\n  ]\n})\nexport class MapToolsComponent implements OnInit, OnDestroy {\n  isDesktop: boolean;\n  layers$ = new BehaviorSubject<AnyLayer[]>([]);\n  showAllLegendsValue$ = new BehaviorSubject<boolean>(false);\n\n  private resolution$$: Subscription;\n  private visibleOrInRangeLayers$$: Subscription;\n  public delayedShowEmptyMapContent = false;\n\n  @Input() allowShowAllLegends = false;\n\n  @Input() showAllLegendsValue = false;\n\n  @Input() toggleLegendOnVisibilityChange = false;\n\n  @Input() expandLegendOfVisibleLayers = false;\n\n  @Input() updateLegendOnResolutionChange = false;\n\n  @Input() selectedTabAtOpening: string;\n\n  @Input() ogcButton = true;\n\n  @Input() timeButton = true;\n\n  @Input() layerAdditionAllowed = true;\n\n  @Input()\n  get layerListControls(): LayerListControlsOptions {\n    return this._layerListControls;\n  }\n  set layerListControls(value: LayerListControlsOptions) {\n    const stateOptions = this.layerListToolState.getLayerListControls();\n    const stateKeyword = stateOptions.keyword;\n    const stateOnlyVisible = stateOptions.onlyVisible;\n    const stateSortAlpha = stateOptions.sortAlpha;\n\n    value.keyword = stateKeyword !== '' ? stateKeyword : value.keyword;\n    value.onlyVisible =\n      stateOnlyVisible !== undefined ? stateOnlyVisible : value.onlyVisible;\n    value.sortAlpha =\n      stateSortAlpha !== undefined ? stateSortAlpha : value.sortAlpha;\n\n    value.onlyVisible =\n      value.onlyVisible === undefined ? false : value.onlyVisible;\n    value.sortAlpha = value.sortAlpha === undefined ? false : value.sortAlpha;\n\n    this._layerListControls = value;\n  }\n  private _layerListControls = {};\n\n  get map(): IgoMap {\n    return this.mapState.map;\n  }\n\n  @Input() queryBadge = false;\n\n  get visibleOrInRangeLayers$(): Observable<AnyLayer[]> {\n    return this.layers$.pipe(\n      map((layers) => layers.filter((layer) => layer.displayed))\n    );\n  }\n\n  get visibleLayers$(): Observable<AnyLayer[]> {\n    return this.layers$.pipe(\n      map((layers) => layers.filter((layer) => layer.visible))\n    );\n  }\n\n  get excludeBaseLayers(): boolean {\n    return this.layerListControls.excludeBaseLayers || false;\n  }\n\n  get layerFilterAndSortOptions(): LayerListControlsOptions {\n    const filterSortOptions = Object.assign(\n      {\n        showToolbar: LayerListControlsEnum.default\n      },\n      this.layerListControls\n    );\n\n    switch (this.layerListControls.showToolbar) {\n      case LayerListControlsEnum.always:\n        filterSortOptions.showToolbar = LayerListControlsEnum.always;\n        break;\n      case LayerListControlsEnum.never:\n        filterSortOptions.showToolbar = LayerListControlsEnum.never;\n        break;\n      default:\n        break;\n    }\n    return filterSortOptions;\n  }\n\n  private _layerViewerOptions: Partial<LayerViewerOptions>;\n  get layerViewerOptions(): LayerViewerOptions {\n    return {\n      filterAndSortOptions: this.layerFilterAndSortOptions,\n      legend: {\n        showForVisibleLayers: this.expandLegendOfVisibleLayers,\n        showOnVisibilityChange: this.toggleLegendOnVisibilityChange,\n        updateOnResolutionChange: this.updateLegendOnResolutionChange\n      },\n      queryBadge: this.queryBadge,\n      ...this._layerViewerOptions\n    };\n  }\n\n  @ViewChild('tabGroup', { static: true }) tabGroup;\n\n  get searchToolInToolbar(): boolean {\n    return (\n      this.toolState.toolbox.getToolbar().indexOf('searchResults') !== -1 &&\n      this.searchSourceService\n        .getSources()\n        .filter(sourceCanSearch)\n        .filter((s) => s.available && s.getType() === 'Layer').length > 0\n    );\n  }\n\n  get catalogToolInToolbar(): boolean {\n    return this.toolState.toolbox.getToolbar().indexOf('catalog') !== -1;\n  }\n\n  get contextToolInToolbar(): boolean {\n    return this.toolState.toolbox.getToolbar().indexOf('contextManager') !== -1;\n  }\n\n  constructor(\n    public layerListToolState: LayerListToolState,\n    private toolState: ToolState,\n    public mapState: MapState,\n    private searchSourceService: SearchSourceService,\n    private importExportState: ImportExportState,\n    private configService: ConfigService,\n    public mediaService: MediaService,\n    private cdr: ChangeDetectorRef\n  ) {\n    this._layerViewerOptions = this.configService.getConfig('layer');\n  }\n\n  ngOnInit(): void {\n    this.handleMedia();\n    this.selectedTab();\n    this.resolution$$ = combineLatest([\n      this.map.layerController.all$,\n      this.map.viewController.resolution$\n    ])\n      .pipe(debounceTime(10))\n      .subscribe(([layers]) => {\n        this.layers$.next(layers);\n      });\n\n    if (this.allowShowAllLegends) {\n      this.mapState.showAllLegendsValue =\n        this.mapState.showAllLegendsValue !== undefined\n          ? this.mapState.showAllLegendsValue\n          : this.showAllLegendsValue || false;\n      this.showAllLegendsValue$.next(this.mapState.showAllLegendsValue);\n    } else {\n      this.showAllLegendsValue$.next(false);\n    }\n\n    // prevent message to be shown too quickly. Waiting for layers\n    setTimeout(() => (this.delayedShowEmptyMapContent = true), 250);\n  }\n\n  ngOnDestroy(): void {\n    this.resolution$$.unsubscribe();\n    if (this.visibleOrInRangeLayers$$) {\n      this.visibleOrInRangeLayers$$.unsubscribe();\n    }\n  }\n\n  onShowAllLegends(event) {\n    this.mapState.showAllLegendsValue = event;\n    this.showAllLegendsValue$.next(event);\n  }\n\n  private selectedTab() {\n    const userSelectedTab = this.layerListToolState.selectedTab$.value;\n    if (userSelectedTab !== undefined) {\n      this.layerListToolState.setSelectedTab(userSelectedTab);\n    } else {\n      if (this.selectedTabAtOpening === 'legend') {\n        this.layerListToolState.setSelectedTab(1);\n      } else {\n        this.layerListToolState.setSelectedTab(0);\n      }\n    }\n  }\n\n  public tabChanged(tab: MatTabChangeEvent) {\n    this.layerListToolState.setSelectedTab(tab.index);\n    this.layers$.next(this.map.layerController.all);\n  }\n\n  onLayerListChange(appliedFilters: LayerListControlsOptions) {\n    this.layerListToolState.setKeyword(appliedFilters.keyword);\n    this.layerListToolState.setSortAlpha(appliedFilters.sortAlpha);\n    this.layerListToolState.setOnlyVisible(appliedFilters.onlyVisible);\n  }\n\n  showAllLegend() {\n    if (this.layers$.getValue().length === 0) {\n      return false;\n    } else if (\n      this.layers$.getValue().length !== 0 &&\n      this.allowShowAllLegends === false\n    ) {\n      let visibleOrInRangeLayers;\n      this.visibleOrInRangeLayers$$ = this.visibleOrInRangeLayers$.subscribe(\n        (value) => {\n          visibleOrInRangeLayers = value.length === 0 ? false : true;\n        }\n      );\n\n      if (visibleOrInRangeLayers === false) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  activateExport(layer: Layer) {\n    let id = layer.id;\n    if (layer.options.workspace?.workspaceId) {\n      id =\n        layer.options.workspace.workspaceId !== layer.id\n          ? layer.options.workspace.workspaceId\n          : layer.id;\n    }\n    this.importExportState.setsExportOptions({ layers: [id] } as ExportOptions);\n    this.importExportState.setMode(ImportExportMode.export);\n    this.toolState.toolbox.activateTool('importExport');\n  }\n\n  activateTimeFilter() {\n    this.toolState.toolbox.activateTool('activeTimeFilter');\n  }\n\n  activateOgcFilter() {\n    this.toolState.toolbox.activateTool('activeOgcFilter');\n  }\n\n  searchEmit() {\n    this.toolState.toolbox.activateTool('searchResults');\n  }\n\n  catalogEmit() {\n    this.toolState.toolbox.activateTool('catalog');\n  }\n\n  contextEmit() {\n    this.toolState.toolbox.activateTool('contextManager');\n  }\n\n  isTimeFilterButton(layer): boolean {\n    const options = layer.dataSource.options;\n    return this.timeButton && options.timeFilterable && options.timeFilter;\n  }\n\n  isOGCFilterButton(layer): boolean {\n    const options = layer.dataSource.options;\n    return (\n      this.ogcButton &&\n      options.ogcFilters &&\n      options.ogcFilters.enabled &&\n      (options.ogcFilters.pushButtons ||\n        options.ogcFilters.checkboxes ||\n        options.ogcFilters.radioButtons ||\n        options.ogcFilters.select ||\n        options.ogcFilters.autocomplete ||\n        options.ogcFilters.editable)\n    );\n  }\n\n  isExportButton(layer: Layer): boolean {\n    if (\n      (layer instanceof VectorLayer && layer.exportable === true) ||\n      (layer.dataSource.options.download &&\n        layer.dataSource.options.download.url) ||\n      (layer.options.workspace?.enabled &&\n        layer.options.workspace?.workspaceId !== layer.id)\n    ) {\n      return true;\n    }\n    return false;\n  }\n\n  isStyleEditButton(layer: Layer): boolean {\n    if (layer instanceof VectorLayer) {\n      if ((layer as VectorLayer).options?.igoStyle?.editable) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  private handleMedia(): void {\n    this.mediaService.media$.subscribe((result) => {\n      this.isDesktop = result === Media.Desktop;\n      this.cdr.detectChanges();\n    });\n  }\n}\n","<mat-tab-group\n  #tabGroup\n  [selectedIndex]=\"layerListToolState.selectedTab$ | async\"\n  (selectedTabChange)=\"tabChanged($event)\"\n>\n  <mat-tab [label]=\"'igo.integration.tools.layers' | translate\">\n    <igo-layer-viewer\n      [options]=\"layerViewerOptions\"\n      [map]=\"map\"\n      [excludeBaseLayers]=\"excludeBaseLayers\"\n      [isDesktop]=\"isDesktop\"\n      (appliedFilterAndSort)=\"onLayerListChange($event)\"\n    >\n      <ng-template #customBottomActions let-layer=\"layer\">\n        <igo-style-modal-layer-button\n          *ngIf=\"isStyleEditButton(layer)\"\n          [layer]=\"layer\"\n        ></igo-style-modal-layer-button>\n        <igo-metadata-button [layer]=\"layer\"></igo-metadata-button>\n        <igo-track-feature-button\n          [trackFeature]=\"true\"\n          [layer]=\"layer\"\n        ></igo-track-feature-button>\n        <igo-time-filter-button\n          *ngIf=\"isTimeFilterButton(layer)\"\n          [header]=\"timeButton\"\n          [layer]=\"layer\"\n          (click)=\"activateTimeFilter()\"\n        ></igo-time-filter-button>\n        <igo-ogc-filter-button\n          *ngIf=\"isOGCFilterButton(layer)\"\n          [header]=\"ogcButton\"\n          [layer]=\"layer\"\n          (click)=\"activateOgcFilter()\"\n        ></igo-ogc-filter-button>\n        <igo-export-button\n          *ngIf=\"isExportButton(layer)\"\n          [layer]=\"layer\"\n          (click)=\"activateExport(layer)\"\n        ></igo-export-button>\n        <igo-workspace-button [layer]=\"layer\"></igo-workspace-button>\n      </ng-template>\n\n      <ng-container ngProjectAs=\"[emptyList]\">\n        <ng-template [ngTemplateOutlet]=\"emptyLayers\"></ng-template>\n      </ng-container>\n    </igo-layer-viewer>\n  </mat-tab>\n\n  <mat-tab [label]=\"'igo.integration.tools.legend' | translate\">\n    <igo-layer-legend-list\n      *ngIf=\"showAllLegend()\"\n      igoLayerLegendListBinding\n      [allowShowAllLegends]=\"allowShowAllLegends\"\n      [showAllLegendsValue]=\"showAllLegendsValue$ | async\"\n      (allLegendsShown)=\"onShowAllLegends($event)\"\n      [excludeBaseLayers]=\"excludeBaseLayers\"\n      [updateLegendOnResolutionChange]=\"updateLegendOnResolutionChange\"\n    >\n    </igo-layer-legend-list>\n    <ng-template\n      *ngIf=\"(layers$ | async).length !== 0; else emptyLayers\"\n    ></ng-template>\n\n    <p\n      class=\"map-empty mat-typography\"\n      *ngIf=\"\n        !allowShowAllLegends &&\n        (layers$ | async).length !== 0 &&\n        (visibleOrInRangeLayers$ | async).length === 0\n      \"\n    >\n      {{\n        (visibleLayers$ | async).length\n          ? ('igo.integration.mapTool.noLayersInRange' | translate)\n          : ('igo.integration.mapTool.noLayersVisible' | translate)\n      }}\n    </p>\n  </mat-tab>\n\n  <ng-template #emptyLayers>\n    <mat-list *ngIf=\"delayedShowEmptyMapContent\">\n      <p class=\"map-empty mat-typography\">\n        {{ 'igo.integration.mapTool.empty' | translate }}\n      </p>\n      <p\n        *ngIf=\"\n          layerAdditionAllowed &&\n          (searchToolInToolbar || catalogToolInToolbar || contextToolInToolbar)\n        \"\n        class=\"map-empty mat-typography\"\n      >\n        {{ 'igo.integration.mapTool.customize' | translate }}\n      </p>\n\n      <mat-list-item *ngIf=\"layerAdditionAllowed && searchToolInToolbar\">\n        <mat-icon matListItemIcon>search</mat-icon>\n        <span\n          matListItemTitle\n          class=\"search-tool mat-typography\"\n          (click)=\"searchEmit()\"\n        >\n          {{ 'igo.integration.mapTool.search-tool' | translate }}\n        </span>\n      </mat-list-item>\n      <mat-list-item *ngIf=\"layerAdditionAllowed && catalogToolInToolbar\">\n        <mat-icon matListItemIcon>library_add</mat-icon>\n        <span\n          matListItemTitle\n          class=\"catalog-tool mat-typography\"\n          (click)=\"catalogEmit()\"\n        >\n          {{ 'igo.integration.mapTool.catalog-tool' | translate }}\n        </span>\n      </mat-list-item>\n      <mat-list-item *ngIf=\"layerAdditionAllowed && contextToolInToolbar\">\n        <mat-icon matListItemIcon>star</mat-icon>\n        <span\n          matListItemTitle\n          class=\"context-tool mat-typography\"\n          (click)=\"contextEmit()\"\n        >\n          {{ 'igo.integration.mapTool.context-tool' | translate }}\n        </span>\n      </mat-list-item>\n    </mat-list>\n  </ng-template>\n</mat-tab-group>\n","import { Injectable } from '@angular/core';\n\nimport { FeatureStore, FeatureWithMeasure } from '@igo2/geo';\n\nimport { MapState } from '../map/map.state';\n\n/**\n * Service that holds the state of the measure module\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class MeasureState {\n  /**\n   * Store that holds the measures\n   */\n  public store: FeatureStore<FeatureWithMeasure>;\n\n  constructor(private mapState: MapState) {\n    this.store = new FeatureStore<FeatureWithMeasure>([], {\n      map: this.mapState.map\n    });\n\n    this.mapState.map.layerController.all$.subscribe((layers) => {\n      const hasMeasure = layers.some((l) => l.id?.startsWith('igo-measures-'));\n      if (!hasMeasure) {\n        this.store.deleteMany(this.store.all());\n        this.mapState.map.ol\n          .getOverlays()\n          .getArray()\n          .filter((overlay) =>\n            (overlay as any).options.className.includes('igo-map-tooltip')\n          )\n          .map((overlay) => this.mapState.map.ol.removeOverlay(overlay));\n      }\n    });\n  }\n}\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\n\nimport { ToolComponent } from '@igo2/common/tool';\nimport {\n  FeatureStore,\n  FeatureWithMeasure,\n  IgoMap,\n  MeasurerComponent\n} from '@igo2/geo';\n\nimport { MapState } from '../../map/map.state';\nimport { MeasureState } from '../measure.state';\n\n/**\n * Tool to measure lengths and areas\n */\n@ToolComponent({\n  name: 'measurer',\n  title: 'igo.integration.tools.measurer',\n  icon: 'square_foot'\n})\n@Component({\n  selector: 'igo-measurer-tool',\n  templateUrl: './measurer-tool.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  standalone: true,\n  imports: [MeasurerComponent]\n})\nexport class MeasurerToolComponent {\n  /**\n   * Map to measure on\n   * @internal\n   */\n  get store(): FeatureStore<FeatureWithMeasure> {\n    return this.measureState.store;\n  }\n\n  /**\n   * Map to measure on\n   * @internal\n   */\n  get map(): IgoMap {\n    return this.mapState.map;\n  }\n\n  constructor(\n    private measureState: MeasureState,\n    private mapState: MapState\n  ) {}\n}\n","<igo-measurer [store]=\"store\" [map]=\"map\"></igo-measurer>\n","import { Component } from '@angular/core';\n\nimport { ToolComponent } from '@igo2/common/tool';\nimport { IgoMap, PrintComponent } from '@igo2/geo';\n\nimport { MapState } from '../../map/map.state';\n\n@ToolComponent({\n  name: 'print',\n  title: 'igo.integration.tools.print',\n  icon: 'print'\n})\n@Component({\n  selector: 'igo-print-tool',\n  templateUrl: './print-tool.component.html',\n  standalone: true,\n  imports: [PrintComponent]\n})\nexport class PrintToolComponent {\n  get map(): IgoMap {\n    return this.mapState.map;\n  }\n\n  constructor(private mapState: MapState) {}\n}\n","<igo-print [map]=\"map\"></igo-print>\n","import { Injectable } from '@angular/core';\n\nimport {\n  EntityRecord,\n  EntityStore,\n  EntityStoreFilterCustomFuncStrategy,\n  EntityStoreStrategyFuncOptions\n} from '@igo2/common/entity';\nimport { ConfigService } from '@igo2/core/config';\nimport { StorageService } from '@igo2/core/storage';\nimport {\n  CommonVectorStyleOptions,\n  Feature,\n  FeatureMotion,\n  FeatureStore,\n  FeatureWorkspace,\n  OverlayStyleOptions,\n  SearchResult,\n  SearchSource,\n  SearchSourceService\n} from '@igo2/geo';\n\nimport { BehaviorSubject, Subscription } from 'rxjs';\n\nimport { MapState } from '../map';\nimport { WorkspaceState } from '../workspace/workspace.state';\n\n/**\n * Define the FeatureMotion to apply when adding the SearchResult to the map as an overlay.\n */\nexport interface SearchFeatureMotion {\n  selected?: FeatureMotion;\n  focus?: FeatureMotion;\n}\n\n/**\n * Service that holds the state of the search module\n */\n@Injectable()\nexport class SearchState {\n  public searchLayerStores: FeatureStore<Feature>[] = [];\n  public searchOverlayStyle: CommonVectorStyleOptions = {};\n  public searchOverlayStyleSelection: CommonVectorStyleOptions = {};\n  public searchOverlayStyleFocus: CommonVectorStyleOptions = {};\n\n  public focusedOrResolution$$: Subscription;\n  public selectedOrResolution$$: Subscription;\n\n  /**\n   * Default feature motion are:\n   * on selection = FeatureMotion.Default and\n   * on focus = FeatureMotion.None\n   */\n  public featureMotion: SearchFeatureMotion = {\n    selected: FeatureMotion.Default,\n    focus: FeatureMotion.None\n  };\n\n  readonly searchTermSplitter$ = new BehaviorSubject<string>('|');\n\n  readonly searchTerm$ = new BehaviorSubject<string>(undefined);\n\n  readonly searchType$ = new BehaviorSubject<string>(undefined);\n\n  readonly searchDisabled$ = new BehaviorSubject<boolean>(false);\n\n  readonly searchResultsGeometryEnabled$ = new BehaviorSubject<boolean>(false);\n\n  readonly searchSettingsChange$ = new BehaviorSubject<boolean>(undefined);\n\n  readonly selectedResult$ = new BehaviorSubject<SearchResult>(undefined);\n\n  /**\n   * Store that holds the search results\n   */\n  readonly store = new EntityStore<SearchResult>([]);\n\n  /**\n   * Search types currently enabled in the search source service\n   */\n  get searchTypes(): string[] {\n    return this.searchSourceService\n      .getEnabledSources()\n      .map((source: SearchSource) => (source.constructor as any).type);\n  }\n\n  constructor(\n    private searchSourceService: SearchSourceService,\n    private storageService: StorageService,\n    private workspaceState: WorkspaceState,\n    private configService: ConfigService,\n    private mapState: MapState\n  ) {\n    const searchOverlayStyle: OverlayStyleOptions =\n      this.configService.getConfig('searchOverlayStyle');\n    if (searchOverlayStyle) {\n      this.searchOverlayStyle = searchOverlayStyle.base;\n      this.searchOverlayStyleSelection = searchOverlayStyle.selection;\n      this.searchOverlayStyleFocus = searchOverlayStyle.focus;\n    }\n\n    const searchResultsGeometryEnabled = this.storageService.get(\n      'searchResultsGeometryEnabled'\n    ) as boolean;\n    if (searchResultsGeometryEnabled) {\n      this.searchResultsGeometryEnabled$.next(searchResultsGeometryEnabled);\n    }\n    this.store.addStrategy(this.createCustomFilterTermStrategy(), false);\n\n    const wksSource = this.searchSourceService\n      .getSources()\n      .find((source) => source.getId() === 'workspace');\n    if (wksSource) {\n      this.workspaceState.store.entities$.subscribe((e) => {\n        const searchableWks = e.filter(\n          (fw) =>\n            fw instanceof FeatureWorkspace &&\n            fw.layer.options.workspace.searchIndexEnabled\n        );\n        this.searchSourceService.setWorkspaces(wksSource, searchableWks);\n      });\n    }\n    this.monitorLayerDeletion();\n  }\n\n  private monitorLayerDeletion() {\n    this.mapState.map.layerController.all$.subscribe((layers) => {\n      this.searchLayerStores.forEach((store) => {\n        const layer = layers.find((l) => l.id === store.layer.id);\n        if (!layer) {\n          const index = this.searchLayerStores.indexOf(store);\n          this.searchLayerStores.splice(index, 1);\n        }\n      });\n    });\n  }\n\n  private createCustomFilterTermStrategy(): EntityStoreFilterCustomFuncStrategy {\n    const filterClauseFunc = (record: EntityRecord<SearchResult>) => {\n      return record.entity.meta.score === 100;\n    };\n    return new EntityStoreFilterCustomFuncStrategy({\n      filterClauseFunc\n    } as EntityStoreStrategyFuncOptions);\n  }\n\n  /**\n   * Activate custom strategy\n   *\n   */\n  activateCustomFilterTermStrategy() {\n    const strategy = this.store.getStrategyOfType(\n      EntityStoreFilterCustomFuncStrategy\n    );\n    if (strategy !== undefined) {\n      strategy.activate();\n    }\n  }\n\n  /**\n   * Deactivate custom strategy\n   *\n   */\n  deactivateCustomFilterTermStrategy() {\n    const strategy = this.store.getStrategyOfType(\n      EntityStoreFilterCustomFuncStrategy\n    );\n    if (strategy !== undefined) {\n      strategy.deactivate();\n    }\n  }\n\n  enableSearch() {\n    this.searchDisabled$.next(false);\n  }\n\n  disableSearch() {\n    this.searchDisabled$.next(true);\n  }\n\n  setSearchTerm(searchTerm: string) {\n    this.searchTerm$.next(searchTerm);\n  }\n\n  setSearchType(searchType: string) {\n    this.searchSourceService.enableSourcesByType(searchType);\n    this.searchType$.next(searchType);\n  }\n\n  setSearchSettingsChange() {\n    this.searchSettingsChange$.next(true);\n  }\n\n  setSelectedResult(result: SearchResult) {\n    this.selectedResult$.next(result);\n  }\n\n  setSearchResultsGeometryStatus(value) {\n    this.storageService.set('searchResultsGeometryEnabled', value);\n    this.searchResultsGeometryEnabled$.next(value);\n  }\n}\n","import { AsyncPipe, NgIf } from '@angular/common';\nimport {\n  ChangeDetectionStrategy,\n  Component,\n  ElementRef,\n  Input,\n  OnDestroy,\n  OnInit\n} from '@angular/core';\nimport { MatBadgeModule } from '@angular/material/badge';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatTooltipModule } from '@angular/material/tooltip';\n\nimport { SanitizeHtmlPipe } from '@igo2/common/custom-html';\nimport { EntityState, EntityStore, getEntityTitle } from '@igo2/common/entity';\nimport { FlexibleComponent, FlexibleState } from '@igo2/common/flexible';\nimport { PanelComponent } from '@igo2/common/panel';\nimport { ToolComponent } from '@igo2/common/tool';\nimport { ConfigService } from '@igo2/core/config';\nimport { IgoLanguageModule } from '@igo2/core/language';\nimport {\n  FEATURE,\n  Feature,\n  FeatureDetailsComponent,\n  FeatureMotion,\n  FeatureStore,\n  IgoMap,\n  Research,\n  SearchResult,\n  SearchResultAddButtonComponent,\n  SearchResultsComponent,\n  computeOlFeaturesExtent,\n  featureFromOl,\n  featureToOl,\n  featuresAreOutOfView,\n  featuresAreTooDeepInView,\n  getCommonVectorSelectedStyle,\n  getCommonVectorStyle,\n  moveToOlFeatures,\n  roundCoordTo\n} from '@igo2/geo';\n\nimport olFeature from 'ol/Feature';\nimport { Coordinate } from 'ol/coordinate';\nimport olFormatGeoJSON from 'ol/format/GeoJSON';\nimport type { default as OlGeometry } from 'ol/geom/Geometry';\nimport olPoint from 'ol/geom/Point';\nimport * as olProj from 'ol/proj';\n\nimport pointOnFeature from '@turf/point-on-feature';\nimport { BehaviorSubject, Observable, Subscription, combineLatest } from 'rxjs';\nimport { debounceTime, map } from 'rxjs/operators';\n\nimport { DirectionState } from '../../directions/directions.state';\nimport { MapState } from '../../map/map.state';\nimport { ToolState } from '../../tool/tool.state';\nimport { SearchState } from '../search.state';\n\n/**\n * Tool to browse the search results\n */\n@ToolComponent({\n  name: 'searchResults',\n  title: 'igo.integration.tools.searchResults',\n  icon: 'search'\n})\n@Component({\n  selector: 'igo-search-results-tool',\n  templateUrl: './search-results-tool.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  standalone: true,\n  imports: [\n    NgIf,\n    FlexibleComponent,\n    SearchResultsComponent,\n    SearchResultAddButtonComponent,\n    PanelComponent,\n    MatButtonModule,\n    MatIconModule,\n    MatTooltipModule,\n    MatBadgeModule,\n    FeatureDetailsComponent,\n    AsyncPipe,\n    IgoLanguageModule,\n    SanitizeHtmlPipe\n  ]\n})\nexport class SearchResultsToolComponent implements OnInit, OnDestroy {\n  /**\n   * to show hide results icons\n   */\n  @Input() showIcons = true;\n\n  /**\n   * Determine the top panel default state\n   */\n  @Input() topPanelStateDefault = 'expanded';\n\n  private hasFeatureEmphasisOnSelection = false;\n  public saveSearchResultInLayer = false;\n\n  private showResultsGeometries$$: Subscription;\n  private getRoute$$: Subscription;\n  private shownResultsGeometries: Feature[] = [];\n  private shownResultsEmphasisGeometries: Feature[] = [];\n  private focusedResult$ = new BehaviorSubject<SearchResult>(undefined);\n  public isSelectedResultOutOfView$ = new BehaviorSubject(false);\n  private isSelectedResultOutOfView$$: Subscription;\n  private abstractFocusedResult: Feature;\n  private abstractSelectedResult: Feature;\n\n  public debouncedEmpty$ = new BehaviorSubject<boolean>(true);\n  private debouncedEmpty$$: Subscription;\n\n  /**\n   * Store holding the search results\n   * @internal\n   */\n  get store(): EntityStore<SearchResult> {\n    return this.searchState.store;\n  }\n\n  /**\n   * Map to display the results on\n   * @internal\n   */\n  get map(): IgoMap {\n    return this.mapState.map;\n  }\n\n  get featureTitle(): string {\n    return this.feature ? getEntityTitle(this.feature) : undefined;\n  }\n\n  get feature$(): Observable<Feature> {\n    return this.store.stateView\n      .firstBy$((e) => e.state.focused)\n      .pipe(\n        map(\n          (element) =>\n            (this.feature = element\n              ? (element.entity.data as Feature)\n              : undefined)\n        )\n      );\n  }\n\n  public feature: Feature;\n\n  public term = '';\n  private searchTerm$$: Subscription;\n\n  public settingsChange$ = new BehaviorSubject<boolean>(undefined);\n\n  public topPanelState$ = new BehaviorSubject<FlexibleState>('initial');\n  private topPanelState$$: Subscription;\n\n  @Input()\n  set topPanelState(value: FlexibleState) {\n    this.topPanelState$.next(value);\n  }\n  get topPanelState(): FlexibleState {\n    return this.topPanelState$.value;\n  }\n\n  get termSplitter(): string {\n    return this.searchState.searchTermSplitter$.value;\n  }\n\n  private format = new olFormatGeoJSON();\n\n  get stores(): FeatureStore<Feature>[] {\n    return this.searchState.searchLayerStores;\n  }\n\n  constructor(\n    private mapState: MapState,\n    private searchState: SearchState,\n    private elRef: ElementRef,\n    public toolState: ToolState,\n    private directionState: DirectionState,\n    configService: ConfigService\n  ) {\n    this.hasFeatureEmphasisOnSelection = configService.getConfig(\n      'hasFeatureEmphasisOnSelection'\n    );\n    this.saveSearchResultInLayer = configService.getConfig(\n      'saveSearchResultInLayer'\n    );\n  }\n\n  ngOnInit() {\n    this.searchTerm$$ = this.searchState.searchTerm$.subscribe(\n      (searchTerm: string) => {\n        if (\n          searchTerm !== undefined &&\n          searchTerm !== null &&\n          searchTerm !== ''\n        ) {\n          this.term = searchTerm;\n          this.debouncedEmpty$.next(false);\n        } else if (searchTerm === '') {\n          this.debouncedEmpty$.next(true);\n        }\n      }\n    );\n\n    for (const res of this.store.stateView.all$().value) {\n      if (this.store.state.get(res.entity).selected === true) {\n        this.topPanelState = 'expanded';\n      }\n    }\n\n    this.searchState.searchSettingsChange$.subscribe(() => {\n      this.settingsChange$.next(true);\n    });\n\n    this.topPanelState$$ = this.topPanelState$.subscribe(() => {\n      const igoList = this.computeElementRef()[0];\n      const selected = this.computeElementRef()[1];\n      if (selected) {\n        setTimeout(() => {\n          // To be sure the flexible component has been displayed yet\n          if (!this.isScrolledIntoView(igoList, selected)) {\n            this.adjustTopPanel(igoList, selected);\n          }\n        }, FlexibleComponent.transitionTime + 50);\n      }\n    });\n\n    if (this.hasFeatureEmphasisOnSelection) {\n      if (!this.searchState.focusedOrResolution$$) {\n        this.searchState.focusedOrResolution$$ = combineLatest([\n          this.focusedResult$,\n          this.map.viewController.resolution$\n        ]).subscribe((bunch: [SearchResult<Feature>, number]) =>\n          this.buildResultEmphasis(bunch[0], 'focused')\n        );\n      }\n\n      if (!this.searchState.selectedOrResolution$$) {\n        this.searchState.selectedOrResolution$$ = combineLatest([\n          this.searchState.selectedResult$,\n          this.map.viewController.resolution$\n        ]).subscribe((bunch: [SearchResult<Feature>, number]) =>\n          this.buildResultEmphasis(bunch[0], 'selected')\n        );\n      }\n    }\n    this.monitorResultOutOfView();\n\n    this.showResultsGeometries$$ = combineLatest([\n      this.searchState.searchResultsGeometryEnabled$,\n      this.store.stateView.all$(),\n      this.focusedResult$,\n      this.searchState.selectedResult$,\n      this.searchState.searchTerm$,\n      this.map.viewController.resolution$\n    ]).subscribe(\n      (\n        bunch: [\n          boolean,\n          { entity: SearchResult; state: EntityState }[],\n          SearchResult,\n          SearchResult,\n          string,\n          number\n        ]\n      ) => {\n        const searchResultsGeometryEnabled = bunch[0];\n        const searchResults = bunch[1];\n\n        if (this.hasFeatureEmphasisOnSelection) {\n          this.clearFeatureEmphasis('shown');\n        }\n        this.shownResultsGeometries.map((result) =>\n          this.map.queryResultsOverlay.removeFeature(result)\n        );\n        const featureToHandleGeom = searchResults.filter(\n          (result) =>\n            result.entity.meta.dataType === FEATURE &&\n            result.entity.data.geometry &&\n            !result.state.selected &&\n            !result.state.focused\n        );\n\n        featureToHandleGeom.map((result) => {\n          if (searchResultsGeometryEnabled) {\n            result.entity.data.meta.style = getCommonVectorStyle(\n              Object.assign(\n                {},\n                {\n                  feature: result.entity.data as Feature | olFeature<OlGeometry>\n                },\n                this.searchState.searchOverlayStyle,\n                result.entity.style?.base ? result.entity.style.base : {}\n              )\n            );\n            this.shownResultsGeometries.push(result.entity.data as Feature);\n            this.map.queryResultsOverlay.addFeature(\n              result.entity.data as Feature,\n              FeatureMotion.None\n            );\n            if (this.hasFeatureEmphasisOnSelection) {\n              this.buildResultEmphasis(\n                result.entity as SearchResult<Feature>,\n                'shown'\n              );\n            }\n          }\n        });\n      }\n    );\n\n    this.debouncedEmpty$$ = this.store.stateView.empty$\n      .pipe(debounceTime(1500))\n      .subscribe((empty) => this.debouncedEmpty$.next(empty));\n  }\n\n  private monitorResultOutOfView() {\n    this.isSelectedResultOutOfView$$ = combineLatest([\n      this.map.viewController.state$,\n      this.searchState.selectedResult$\n    ])\n      .pipe(debounceTime(100))\n      .subscribe((bunch) => {\n        const selectedResult = bunch[1] as SearchResult<Feature>;\n        if (!selectedResult) {\n          this.isSelectedResultOutOfView$.next(false);\n          return;\n        }\n        if (selectedResult.data.geometry) {\n          const selectedOlFeature = featureToOl(\n            selectedResult.data,\n            this.map.projection\n          );\n          const selectedOlFeatureExtent = computeOlFeaturesExtent(\n            [selectedOlFeature],\n            this.map.viewController.getOlProjection()\n          );\n          this.isSelectedResultOutOfView$.next(\n            featuresAreOutOfView(this.map.getExtent(), selectedOlFeatureExtent)\n          );\n        }\n      });\n  }\n\n  private buildResultEmphasis(\n    result: SearchResult<Feature>,\n    trigger: 'selected' | 'focused' | 'shown' | undefined\n  ) {\n    if (trigger !== 'shown') {\n      this.clearFeatureEmphasis(trigger);\n    }\n    if (!result || !result.data.geometry) {\n      return;\n    }\n    const myOlFeature = featureToOl(result.data, this.map.projection);\n    const olGeometry = myOlFeature.getGeometry();\n    if (\n      featuresAreTooDeepInView(\n        this.map.viewController,\n        olGeometry.getExtent() as [number, number, number, number],\n        0.0025\n      )\n    ) {\n      const extent = olGeometry.getExtent();\n      const x = extent[0] + (extent[2] - extent[0]) / 2;\n      const y = extent[1] + (extent[3] - extent[1]) / 2;\n      const feature1 = new olFeature({\n        name: `${trigger}AbstractResult'`,\n        geometry: new olPoint([x, y])\n      });\n      const abstractResult = featureFromOl(feature1, this.map.projection);\n\n      let computedStyle;\n      let zIndexOffset = 0;\n\n      switch (trigger) {\n        case 'focused':\n          computedStyle = getCommonVectorSelectedStyle(\n            Object.assign(\n              {},\n              { feature: abstractResult },\n              this.searchState.searchOverlayStyleFocus,\n              result.style?.focus ? result.style.focus : {}\n            )\n          );\n          zIndexOffset = 2;\n          break;\n        case 'shown':\n          computedStyle = getCommonVectorStyle(\n            Object.assign(\n              {},\n              { feature: abstractResult },\n              this.searchState.searchOverlayStyle,\n              result.style?.base ? result.style.base : {}\n            )\n          );\n          break;\n        case 'selected':\n          computedStyle = getCommonVectorSelectedStyle(\n            Object.assign(\n              {},\n              { feature: abstractResult },\n              this.searchState.searchOverlayStyleSelection,\n              result.style?.selection ? result.style.selection : {}\n            )\n          );\n          zIndexOffset = 1;\n          break;\n      }\n      abstractResult.meta.style = computedStyle;\n      abstractResult.meta.style.setZIndex(2000 + zIndexOffset);\n      this.map.searchResultsOverlay.addFeature(\n        abstractResult,\n        this.searchState.featureMotion.focus\n      );\n      if (trigger === 'focused') {\n        this.abstractFocusedResult = abstractResult;\n      }\n      if (trigger === 'selected') {\n        this.abstractSelectedResult = abstractResult;\n      }\n      if (trigger === 'shown') {\n        this.shownResultsEmphasisGeometries.push(abstractResult);\n      }\n    } else {\n      this.clearFeatureEmphasis(trigger);\n    }\n  }\n\n  private clearFeatureEmphasis(trigger: 'selected' | 'focused' | 'shown') {\n    if (trigger === 'focused' && this.abstractFocusedResult) {\n      this.map.searchResultsOverlay.removeFeature(this.abstractFocusedResult);\n      this.abstractFocusedResult = undefined;\n    }\n    if (trigger === 'selected' && this.abstractSelectedResult) {\n      this.map.searchResultsOverlay.removeFeature(this.abstractSelectedResult);\n      this.abstractSelectedResult = undefined;\n    }\n    if (trigger === 'shown') {\n      this.shownResultsEmphasisGeometries.map((shownResult) =>\n        this.map.searchResultsOverlay.removeFeature(shownResult)\n      );\n      this.shownResultsEmphasisGeometries = [];\n    }\n  }\n\n  ngOnDestroy() {\n    this.topPanelState$$.unsubscribe();\n    this.searchTerm$$.unsubscribe();\n    if (this.isSelectedResultOutOfView$$) {\n      this.isSelectedResultOutOfView$$.unsubscribe();\n    }\n    if (this.showResultsGeometries$$) {\n      this.showResultsGeometries$$.unsubscribe();\n    }\n    if (this.getRoute$$) {\n      this.getRoute$$.unsubscribe();\n    }\n    if (this.debouncedEmpty$$) {\n      this.debouncedEmpty$$.unsubscribe();\n    }\n  }\n\n  /**\n   * Try to add a feature to the map when it's being focused\n   * @internal\n   * @param result A search result that could be a feature\n   */\n  onResultFocus(result: SearchResult) {\n    this.focusedResult$.next(result);\n    if (result.meta.dataType === FEATURE && result.data.geometry) {\n      result.data.meta.style = getCommonVectorSelectedStyle(\n        Object.assign(\n          {},\n          { feature: result.data as Feature | olFeature<OlGeometry> },\n          this.searchState.searchOverlayStyleFocus,\n          result.style?.focus ? result.style.focus : {}\n        )\n      );\n\n      const feature =\n        this.map.searchResultsOverlay.dataSource.ol.getFeatureById(\n          result.meta.id\n        );\n      if (feature) {\n        feature.setStyle(result.data.meta.style);\n        return;\n      }\n      this.map.searchResultsOverlay.addFeature(\n        result.data as Feature,\n        this.searchState.featureMotion.focus\n      );\n    }\n  }\n\n  onResultUnfocus(result: SearchResult) {\n    this.focusedResult$.next(undefined);\n    if (result.meta.dataType !== FEATURE) {\n      return;\n    }\n\n    if (this.store.state.get(result).selected === true) {\n      const feature =\n        this.map.searchResultsOverlay.dataSource.ol.getFeatureById(\n          result.meta.id\n        );\n      if (feature) {\n        const style = getCommonVectorSelectedStyle(\n          Object.assign(\n            {},\n            { feature: result.data as Feature | olFeature<OlGeometry> },\n            this.searchState.searchOverlayStyleFocus,\n            result.style?.focus ? result.style.focus : {}\n          )\n        );\n        feature.setStyle(style);\n      }\n      return;\n    }\n    this.map.searchResultsOverlay.removeFeature(result.data as Feature);\n  }\n\n  /**\n   * Try to add a feature to the map when it's being selected\n   * @internal\n   * @param result A search result that could be a feature or some layer options\n   */\n  onResultSelect(result: SearchResult) {\n    this.map.searchResultsOverlay.dataSource.ol.clear();\n    this.tryAddFeatureToMap(result, this.searchState.featureMotion.selected);\n    this.searchState.setSelectedResult(result);\n\n    if (this.topPanelState === 'initial') {\n      if (this.topPanelStateDefault !== 'collapsed') {\n        this.topPanelState = 'expanded';\n      } else {\n        this.topPanelState = 'collapsed';\n      }\n    }\n\n    if (this.topPanelState === 'expanded') {\n      const igoList = this.computeElementRef()[0];\n      const selected = this.computeElementRef()[1];\n      if (!this.isScrolledIntoView(igoList, selected)) {\n        this.adjustTopPanel(igoList, selected);\n      }\n    }\n  }\n\n  onSearch(event: { research: Research; results: SearchResult[] }) {\n    const results = event.results;\n    const newResults = this.store.entities$.value\n      .filter((result: SearchResult) => result.source !== event.research.source)\n      .concat(results);\n\n    this.store.load(newResults);\n\n    for (const res of this.store.all()) {\n      if (\n        this.store.state.get(res).focused === true &&\n        this.store.state.get(res).selected !== true\n      ) {\n        this.store.state.update(res, { focused: false }, true);\n      }\n    }\n\n    setTimeout(() => {\n      const igoList = this.elRef.nativeElement.querySelector('igo-list');\n      let moreResults;\n      event.research.request.subscribe((source) => {\n        if (!source[0] || !source[0].source) {\n          moreResults = null;\n        } else if (source[0].source.getId() === 'icherche') {\n          moreResults = igoList.querySelector('.icherche .moreResults');\n        } else if (source[0].source.getId() === 'ilayer') {\n          moreResults = igoList.querySelector('.ilayer .moreResults');\n        } else if (source[0].source.getId() === 'nominatim') {\n          moreResults = igoList.querySelector('.nominatim .moreResults');\n        } else {\n          moreResults = igoList.querySelector(\n            '.' + source[0].source.getId() + ' .moreResults'\n          );\n        }\n\n        if (\n          moreResults !== null &&\n          !this.isScrolledIntoView(igoList, moreResults)\n        ) {\n          igoList.scrollTop =\n            moreResults.offsetTop +\n            moreResults.offsetHeight -\n            igoList.clientHeight;\n        }\n      });\n    }, 250);\n  }\n\n  computeElementRef() {\n    const items = document.getElementsByTagName('igo-search-results-item');\n    const igoList =\n      this.elRef.nativeElement.getElementsByTagName('igo-list')[0];\n    let selectedItem;\n    // eslint-disable-next-line\n    for (let i = 0; i < items.length; i++) {\n      if (items[i].className.includes('igo-list-item-selected')) {\n        selectedItem = items[i];\n      }\n    }\n    return [igoList, selectedItem];\n  }\n\n  adjustTopPanel(elemSource, elem) {\n    if (!this.isScrolledIntoView(elemSource, elem)) {\n      elemSource.scrollTop =\n        elem.offsetTop +\n        elem.children[0].offsetHeight -\n        elemSource.clientHeight;\n    }\n  }\n\n  toggleTopPanel(event?: MouseEvent) {\n    if (event && (event.target as any)?.className !== 'igo-panel-title') {\n      return;\n    } else {\n      if (this.topPanelState === 'expanded') {\n        this.topPanelState = 'collapsed';\n      } else {\n        this.topPanelState = 'expanded';\n      }\n    }\n  }\n\n  zoomToFeatureExtent() {\n    if (this.feature.geometry) {\n      const localOlFeature = this.format.readFeature(this.feature, {\n        dataProjection: this.feature.projection,\n        featureProjection: this.map.projectionCode\n      });\n      moveToOlFeatures(\n        this.map.viewController,\n        [localOlFeature],\n        FeatureMotion.Zoom\n      );\n    }\n  }\n\n  /**\n   * Try to add a feature to the map overlay\n   * @param result A search result that could be a feature\n   * @param motion A FeatureMotion to trigger when adding the searchresult to the map search overlay\n   */\n  private tryAddFeatureToMap(\n    result: SearchResult,\n    motion: FeatureMotion = FeatureMotion.Default\n  ) {\n    if (result.meta.dataType !== FEATURE) {\n      return undefined;\n    }\n    const feature = (result as SearchResult<Feature>).data;\n\n    // Somethimes features have no geometry. It happens with some GetFeatureInfo\n    if (!feature.geometry) {\n      return;\n    }\n\n    feature.meta.style = getCommonVectorSelectedStyle(\n      Object.assign(\n        {},\n        { feature },\n        this.searchState.searchOverlayStyleSelection,\n        result.style?.selection ? result.style.selection : {}\n      )\n    );\n\n    this.map.searchResultsOverlay.addFeature(feature, motion);\n  }\n\n  isScrolledIntoView(elemSource, elem) {\n    const padding = 6;\n    const docViewTop = elemSource.scrollTop;\n    const docViewBottom = docViewTop + elemSource.clientHeight;\n\n    const elemTop = elem.offsetTop;\n    const elemBottom = elemTop + elem.clientHeight + padding;\n    return elemBottom <= docViewBottom && elemTop >= docViewTop;\n  }\n\n  getRoute() {\n    this.toolState.toolbox.activateTool('directions');\n    this.directionState.stopsStore.clearStops();\n    setTimeout(() => {\n      let routingCoordLoaded = false;\n      if (this.getRoute$$) {\n        this.getRoute$$.unsubscribe();\n      }\n      this.getRoute$$ =\n        this.directionState.stopsStore.storeInitialized$.subscribe(() => {\n          if (\n            this.directionState.stopsStore.storeInitialized$.value &&\n            !routingCoordLoaded\n          ) {\n            routingCoordLoaded = true;\n            const stop = this.directionState.stopsStore\n              .all()\n              .find((e) => e.position === 1);\n            let coord;\n            if (this.feature.geometry) {\n              if (this.feature.geometry.type === 'Point') {\n                coord = [\n                  this.feature.geometry.coordinates[0],\n                  this.feature.geometry.coordinates[1]\n                ];\n              } else {\n                const point = pointOnFeature(this.feature.geometry);\n                coord = [\n                  point.geometry.coordinates[0],\n                  point.geometry.coordinates[1]\n                ];\n              }\n            }\n            stop.text = this.featureTitle;\n            stop.coordinates = coord;\n            this.directionState.stopsStore.update(stop);\n            if (this.map.geolocationController.position$.value) {\n              const currentPos = this.map.geolocationController.position$.value;\n              const stop = this.directionState.stopsStore\n                .all()\n                .find((e) => e.position === 0);\n              const currentCoord = olProj.transform(\n                currentPos.position,\n                currentPos.projection,\n                'EPSG:4326'\n              );\n              const coord: Coordinate = roundCoordTo(\n                [currentCoord[0], currentCoord[1]],\n                6\n              );\n              stop.text = coord.join(',');\n              stop.coordinates = coord;\n              this.directionState.stopsStore.update(stop);\n            }\n          }\n        });\n    }, 250);\n  }\n}\n","<div\n  *ngIf=\"(!store || store.stateView.empty) && (debouncedEmpty$ | async)\"\n  style=\"margin: 10px\"\n>\n  <section class=\"mat-typography\">\n    <h4>\n      <strong>{{\n        'igo.integration.searchResultsTool.noResults' | translate\n      }}</strong>\n    </h4>\n    <p>\n      <strong>{{\n        'igo.integration.searchResultsTool.doSearch' | translate\n      }}</strong>\n    </p>\n    <div\n      [innerHTML]=\"\n        'igo.integration.searchResultsTool.examples' | translate | sanitizeHtml\n      \"\n    ></div>\n  </section>\n</div>\n\n<igo-flexible\n  *ngIf=\"(debouncedEmpty$ | async) === false\"\n  #topPanel\n  initial=\"100%\"\n  initialMobile=\"100%\"\n  collapsed=\"calc(100% - 58px)\"\n  collapsedMobile=\"calc(100% - 58px)\"\n  expanded=\"60%\"\n  expandedMobile=\"60%\"\n  [state]=\"(feature$ | async) ? topPanelState : 'initial'\"\n>\n  <div class=\"igo-content\">\n    <igo-search-results\n      [store]=\"store\"\n      [showIcons]=\"showIcons\"\n      [term]=\"term\"\n      [termSplitter]=\"termSplitter\"\n      [settingsChange$]=\"settingsChange$\"\n      placeholder=\"false\"\n      (resultFocus)=\"onResultFocus($event)\"\n      (resultSelect)=\"onResultSelect($event)\"\n      (resultUnfocus)=\"onResultUnfocus($event)\"\n      (resultMouseenter)=\"onResultFocus($event)\"\n      (resultMouseleave)=\"onResultUnfocus($event)\"\n      (moreResults)=\"onSearch($event)\"\n      [map]=\"map\"\n    >\n      <ng-template #igoSearchItemToolbar let-result=\"result\">\n        <igo-search-add-button\n          [map]=\"map\"\n          [store]=\"store\"\n          [stores]=\"stores\"\n          [layer]=\"result\"\n          [saveSearchResultInLayer]=\"saveSearchResultInLayer\"\n        >\n        </igo-search-add-button>\n      </ng-template>\n    </igo-search-results>\n  </div>\n\n  <div igoFlexibleFill class=\"igo-content\">\n    <igo-panel\n      [title]=\"featureTitle\"\n      *ngIf=\"feature$ | async\"\n      (click)=\"toggleTopPanel($event)\"\n      [cursorPointer]=\"true\"\n    >\n      <button\n        mat-icon-button\n        panelLeftButton\n        class=\"igo-icon-button\"\n        (click)=\"toggleTopPanel()\"\n      >\n        <mat-icon>{{\n          (topPanelState$ | async) === 'collapsed'\n            ? 'arrow_upward'\n            : 'arrow_downward'\n        }}</mat-icon>\n      </button>\n\n      <button\n        *ngIf=\"feature.geometry\"\n        mat-icon-button\n        panelRightButton\n        class=\"igo-icon-button\"\n        [matTooltip]=\"\n          ((isSelectedResultOutOfView$ | async)\n            ? 'igo.integration.searchResultsTool.zoomOnFeatureTooltipOutOfView'\n            : 'igo.integration.searchResultsTool.zoomOnFeatureTooltip'\n          ) | translate\n        \"\n        matTooltipShowDelay=\"500\"\n        (click)=\"zoomToFeatureExtent()\"\n      >\n        <mat-icon\n          aria-hidden=\"false\"\n          [matBadge]=\"(isSelectedResultOutOfView$ | async) ? '!' : ''\"\n          matBadgeColor=\"accent\"\n          matBadgeSize=\"small\"\n          [matBadgeHidden]=\"(isSelectedResultOutOfView$ | async) === false\"\n          >zoom_in</mat-icon\n        >\n      </button>\n\n      <igo-feature-details\n        igoFeatureDetailsDirective\n        [feature]=\"feature$ | async\"\n        [map]=\"map\"\n        [toolbox]=\"toolState.toolbox\"\n        (routingEvent)=\"getRoute()\"\n      >\n      </igo-feature-details>\n    </igo-panel>\n  </div>\n</igo-flexible>\n","import { NgIf } from '@angular/common';\nimport {\n  Component,\n  ElementRef,\n  OnDestroy,\n  OnInit,\n  ViewChild\n} from '@angular/core';\n\nimport {\n  ActionStore,\n  ActionbarComponent,\n  ActionbarMode\n} from '@igo2/common/action';\nimport { CONTEXT_MENU_DIRECTIVES } from '@igo2/common/context-menu';\nimport { EntityStore } from '@igo2/common/entity';\nimport { PanelComponent } from '@igo2/common/panel';\nimport { MediaService } from '@igo2/core/media';\nimport { StorageService } from '@igo2/core/storage';\nimport {\n  FEATURE,\n  Feature,\n  FeatureDetailsComponent,\n  FeatureMotion,\n  GoogleLinks,\n  IgoMap,\n  IgoSearchModule,\n  LayerOptions,\n  LayerService,\n  MapBrowserComponent,\n  MapService,\n  MapViewOptions,\n  Research,\n  SEARCH_RESULTS_DIRECTIVES,\n  SearchResult,\n  ZoomButtonComponent,\n  provideSearch,\n  withIChercheSource,\n  withWorkspaceSource\n} from '@igo2/geo';\nimport { SearchState } from '@igo2/integration';\n\nimport { Coordinate } from 'ol/coordinate';\nimport { Pixel } from 'ol/pixel';\nimport * as proj from 'ol/proj';\n\nimport { BehaviorSubject } from 'rxjs';\n\nimport { DocViewerComponent } from '../../components/doc-viewer/doc-viewer.component';\nimport { ExampleViewerComponent } from '../../components/example/example-viewer/example-viewer.component';\n\n@Component({\n  selector: 'app-search',\n  templateUrl: './search.component.html',\n  styleUrls: ['./search.component.scss'],\n  standalone: true,\n  imports: [\n    DocViewerComponent,\n    ExampleViewerComponent,\n    NgIf,\n    MapBrowserComponent,\n    ZoomButtonComponent,\n    CONTEXT_MENU_DIRECTIVES,\n    IgoSearchModule,\n    PanelComponent,\n    SEARCH_RESULTS_DIRECTIVES,\n    ActionbarComponent,\n    FeatureDetailsComponent\n  ],\n  providers: [\n    provideSearch([withIChercheSource(), withWorkspaceSource()], {\n      analytics: true\n    }),\n    SearchState\n  ]\n})\nexport class AppSearchComponent implements OnInit, OnDestroy {\n  public store: ActionStore = new ActionStore([]);\n  actionBarMode = ActionbarMode.Context;\n  public igoSearchPointerSummaryEnabled = false;\n\n  public termSplitter = '|';\n\n  public map: IgoMap = new IgoMap({\n    overlay: true,\n    controls: {\n      attribution: {\n        collapsed: true\n      }\n    }\n  });\n\n  public view: MapViewOptions = {\n    center: [-73, 47.2],\n    zoom: 7\n  };\n\n  @ViewChild('mapBrowser', { read: ElementRef, static: true })\n  mapBrowser: ElementRef;\n\n  public lonlat: Coordinate;\n  public mapProjection: string;\n  public term: string;\n\n  public settingsChange$: BehaviorSubject<boolean> =\n    new BehaviorSubject<boolean>(undefined);\n\n  get searchStore(): EntityStore<SearchResult> {\n    return this.searchState.store;\n  }\n\n  get isTouchScreen(): boolean {\n    return this.mediaService.isTouchScreen();\n  }\n\n  public selectedFeature: Feature;\n  public igoReverseSearchCoordsFormatEnabled: boolean;\n\n  constructor(\n    private mapService: MapService,\n    private layerService: LayerService,\n    private searchState: SearchState,\n    private mediaService: MediaService,\n    private storageService: StorageService\n  ) {\n    this.mapService.setMap(this.map);\n\n    this.layerService\n      .createAsyncLayer({\n        title: 'OSM',\n        baseLayer: true,\n        visible: true,\n        sourceOptions: {\n          type: 'osm'\n        }\n      } satisfies LayerOptions)\n      .subscribe((layer) => this.map.layerController.add(layer));\n\n    this.igoReverseSearchCoordsFormatEnabled =\n      Boolean(this.storageService.get('reverseSearchCoordsFormatEnabled')) ||\n      false;\n  }\n\n  onPointerSummaryStatusChange(value: boolean): void {\n    this.igoSearchPointerSummaryEnabled = value;\n  }\n\n  onSearchTermChange(term?: string): void {\n    this.term = term;\n    this.searchState.setSearchTerm(term);\n    const termWithoutHashtag: string = term.replace(/(#[^\\s]*)/g, '').trim();\n    if (termWithoutHashtag.length < 2) {\n      this.searchStore.clear();\n      this.selectedFeature = undefined;\n    }\n  }\n\n  onSearch(event: { research: Research; results: SearchResult[] }): void {\n    const results: SearchResult[] = event.results;\n    this.searchStore.state.updateAll({ focused: false, selected: false });\n    const newResults: SearchResult[] = this.searchStore.entities$.value\n      .filter((result: SearchResult) => result.source !== event.research.source)\n      .concat(results);\n    this.searchStore.updateMany(newResults);\n  }\n\n  onReverseCoordsFormatStatusChange(value: boolean): void {\n    this.storageService.set('reverseSearchCoordsFormatEnabled', value);\n    this.igoReverseSearchCoordsFormatEnabled = value;\n  }\n\n  onSearchSettingsChange(): void {\n    this.settingsChange$.next(true);\n  }\n\n  /**\n   * Try to add a feature to the map when it's being focused\n   * @internal\n   * @param result A search result that could be a feature\n   */\n  onResultFocus(result: SearchResult<Feature>): void {\n    this.tryAddFeatureToMap(result, this.searchState.featureMotion.focus);\n    this.selectedFeature = result.data;\n  }\n  /**\n   * Try to add a feature to the map when it's being selected\n   * @internal\n   * @param result A search result that could be a feature\n   */\n  onResultSelect(result: SearchResult<Feature>): void {\n    this.tryAddFeatureToMap(result, this.searchState.featureMotion.selected);\n    this.selectedFeature = result.data;\n  }\n\n  /**\n   * Try to add a feature to the map overlay\n   * @param layer A search result that could be a feature\n   */\n  private tryAddFeatureToMap(\n    layer: SearchResult<Feature>,\n    motion: FeatureMotion = FeatureMotion.Default\n  ): void | undefined {\n    if (layer.meta.dataType !== FEATURE) {\n      return undefined;\n    }\n\n    // Somethimes features have no geometry. It happens with some GetFeatureInfo\n    if (layer.data.geometry === undefined) {\n      return;\n    }\n\n    this.map.searchResultsOverlay.setFeatures([layer.data], motion);\n  }\n\n  ngOnInit(): void {\n    this.store.load([\n      {\n        id: 'coordinates',\n        title: 'coordinates',\n        handler: () => this.searchCoordinate(this.lonlat)\n      },\n      {\n        id: 'googleMaps',\n        title: 'googleMap',\n        handler: () => this.openGoogleMaps(this.lonlat)\n      },\n      {\n        id: 'googleStreetView',\n        title: 'googleStreetView',\n        handler: () => this.openGoogleStreetView(this.lonlat)\n      }\n    ]);\n  }\n\n  ngOnDestroy(): void {\n    this.store.destroy();\n  }\n\n  /*\n   * Remove a feature to the map overlay\n   */\n  removeFeatureFromMap(): void {\n    this.map.searchResultsOverlay.clear();\n  }\n\n  onContextMenuOpen(event: { x: number; y: number }): void {\n    const position: Pixel = this.mapPosition(event);\n    const coord: Coordinate = this.mapService\n      .getMap()\n      .ol.getCoordinateFromPixel(position);\n    this.mapProjection = this.mapService.getMap().projectionCode;\n    this.lonlat = proj.transform(coord, this.mapProjection, 'EPSG:4326');\n  }\n\n  mapPosition(event: { x: number; y: number }): Pixel {\n    const contextmenuPoint: { x: number; y: number } = event;\n    contextmenuPoint.y =\n      contextmenuPoint.y -\n      this.mapBrowser.nativeElement.getBoundingClientRect().top +\n      window.scrollY;\n    contextmenuPoint.x =\n      contextmenuPoint.x -\n      this.mapBrowser.nativeElement.getBoundingClientRect().left +\n      window.scrollX;\n    const position: Pixel = [contextmenuPoint.x, contextmenuPoint.y];\n    return position;\n  }\n\n  searchCoordinate(lonlat: Coordinate): void {\n    this.searchStore.clear();\n    this.term = !this.igoReverseSearchCoordsFormatEnabled\n      ? lonlat.map((c: number) => c.toFixed(6)).join(', ')\n      : lonlat\n          .reverse()\n          .map((c: number) => c.toFixed(6))\n          .join(', ');\n  }\n\n  openGoogleMaps(lonlat: Coordinate): void {\n    window.open(GoogleLinks.getGoogleMapsCoordLink(lonlat[0], lonlat[1]));\n  }\n\n  openGoogleStreetView(lonlat: Coordinate): void {\n    window.open(GoogleLinks.getGoogleStreetViewLink(lonlat[0], lonlat[1]));\n  }\n}\n","<app-doc-viewer\n  title=\"Search\"\n  subtitle=\"Geo\"\n  [dependencies]=\"['ConfigService', 'LanguageService']\"\n>\n  <app-example-viewer codeFolder=\"geo/search\" configFolder=\"environments\">\n    <span *ngIf=\"!isTouchScreen\" title=\"Details\">\n      Pointer activated: {{ igoSearchPointerSummaryEnabled }} (F2\n      activate/deactivate the pointer location).\n    </span>\n    <igo-map-browser\n      #mapBrowser\n      [map]=\"map\"\n      [view]=\"view\"\n      [igoContextMenu]=\"actionbarMenu\"\n      igoLongPress\n      igoSearchPointerSummary\n      [igoSearchPointerSummaryDelay]=\"500\"\n      [igoSearchPointerSummaryEnabled]=\"igoSearchPointerSummaryEnabled\"\n      (menuPosition)=\"onContextMenuOpen($event)\"\n    >\n      <div class=\"map-actions --vertical --bottom --right\">\n        <igo-zoom-button [map]=\"map\" color=\"primary\"> </igo-zoom-button>\n      </div>\n    </igo-map-browser>\n\n    <igo-panel title=\"Search\">\n      <igo-search-bar\n        [term]=\"term\"\n        (pointerSummaryStatus)=\"onPointerSummaryStatusChange($event)\"\n        [searchSettings]=\"true\"\n        [store]=\"searchStore\"\n        [termSplitter]=\"termSplitter\"\n        (searchTermChange)=\"onSearchTermChange($event)\"\n        (search)=\"onSearch($event)\"\n        (clearFeature)=\"removeFeatureFromMap()\"\n        (searchSettingsChange)=\"onSearchSettingsChange()\"\n        [reverseSearchCoordsFormatEnabled]=\"igoReverseSearchCoordsFormatEnabled\"\n        (reverseSearchCoordsFormatStatus)=\"\n          onReverseCoordsFormatStatusChange($event)\n        \"\n      >\n      </igo-search-bar>\n\n      <igo-search-results\n        [store]=\"searchStore\"\n        [term]=\"term\"\n        [termSplitter]=\"termSplitter\"\n        placeholder=\"false\"\n        [settingsChange$]=\"settingsChange$\"\n        (resultFocus)=\"onResultFocus($any($event))\"\n        (resultSelect)=\"onResultSelect($any($event))\"\n        (moreResults)=\"onSearch($event)\"\n      >\n        <ng-template #igoSearchItemToolbar let-result=\"result\">\n          <igo-search-add-button [map]=\"map\" [layer]=\"result\">\n          </igo-search-add-button>\n        </ng-template>\n      </igo-search-results>\n    </igo-panel>\n\n    <igo-panel *ngIf=\"selectedFeature\" title=\"Details\">\n      <igo-feature-details [feature]=\"selectedFeature\"></igo-feature-details>\n    </igo-panel>\n\n    <ng-template #actionbarMenu>\n      <igo-actionbar\n        [store]=\"store\"\n        [withIcon]=\"false\"\n        [horizontal]=\"true\"\n        [mode]=\"actionBarMode\"\n      >\n      </igo-actionbar>\n    </ng-template>\n  </app-example-viewer>\n</app-doc-viewer>\n","import { NgIf } from '@angular/common';\nimport { Component } from '@angular/core';\n\nimport { Media, MediaService } from '@igo2/core/media';\nimport {\n  IgoMap,\n  LayerService,\n  MAP_DIRECTIVES,\n  MapViewOptions\n} from '@igo2/geo';\n\nimport { DocViewerComponent } from '../../components/doc-viewer/doc-viewer.component';\nimport { ExampleViewerComponent } from '../../components/example/example-viewer/example-viewer.component';\n\n@Component({\n  selector: 'app-simple-map',\n  templateUrl: './simple-map.component.html',\n  styleUrls: ['./simple-map.component.scss'],\n  standalone: true,\n  imports: [DocViewerComponent, ExampleViewerComponent, MAP_DIRECTIVES, NgIf]\n})\nexport class AppSimpleMapComponent {\n  public pointerCoord: [number, number];\n  public pointerCoordDelay = 0;\n  public map: IgoMap = new IgoMap({\n    controls: {\n      attribution: {\n        collapsed: true\n      },\n      scaleLine: true\n    }\n  });\n\n  public view: MapViewOptions = {\n    center: [-73, 47.2],\n    zoom: 6,\n    rotation: 0.75\n  };\n\n  get media(): Media {\n    return this.mediaService.getMedia();\n  }\n\n  get isTouchScreen(): boolean {\n    return this.mediaService.isTouchScreen();\n  }\n\n  constructor(\n    private layerService: LayerService,\n    private mediaService: MediaService\n  ) {\n    this.layerService\n      .createAsyncLayer({\n        title: 'OSM',\n        sourceOptions: {\n          type: 'osm'\n        },\n        visible: true,\n        baseLayer: true\n      })\n      .subscribe((layer) => {\n        this.map.layerController.add(layer);\n      });\n  }\n\n  onPointerMove(event: [number, number]): void {\n    this.pointerCoord = event;\n  }\n}\n","<app-doc-viewer\n  title=\"Simple Map\"\n  subtitle=\"Geo\"\n  [dependencies]=\"['LanguageService']\"\n>\n  <app-example-viewer codeFolder=\"geo/simple-map\">\n    <igo-map-browser\n      [map]=\"map\"\n      [view]=\"view\"\n      igoPointerPosition\n      [pointerPositionDelay]=\"pointerCoordDelay\"\n      (pointerPositionCoord)=\"onPointerMove($event)\"\n    >\n      <igo-info-section\n        [infoContent]=\"pointerCoord?.toString()\"\n      ></igo-info-section>\n      <div class=\"map-actions --vertical --top --right\">\n        <div class=\"spinner-spacer\"></div>\n        <igo-rotation-button\n          class=\"mat-elevation-z2\"\n          [showIfNoRotation]=\"true\"\n          [map]=\"map\"\n          color=\"primary\"\n        ></igo-rotation-button>\n      </div>\n      <div class=\"map-actions --vertical --bottom --right\">\n        <igo-home-extent-button\n          class=\"mat-elevation-z2\"\n          [map]=\"map\"\n          color=\"primary\"\n        >\n        </igo-home-extent-button>\n        <igo-wake-lock-button></igo-wake-lock-button>\n        <igo-geolocate-button\n          class=\"mat-elevation-z2\"\n          [map]=\"map\"\n          color=\"primary\"\n        >\n        </igo-geolocate-button>\n        <igo-zoom-button [map]=\"map\" color=\"primary\"> </igo-zoom-button>\n      </div>\n    </igo-map-browser>\n    <p *ngIf=\"!isTouchScreen\">{{ pointerCoord }}</p>\n  </app-example-viewer>\n</app-doc-viewer>\n","import { AsyncPipe, NgIf } from '@angular/common';\nimport {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  Input,\n  OnDestroy,\n  OnInit\n} from '@angular/core';\nimport { MatGridListModule } from '@angular/material/grid-list';\nimport { MatIconRegistry } from '@angular/material/icon';\n\nimport { EntityKey, EntityStore } from '@igo2/common/entity';\nimport { PanelComponent } from '@igo2/common/panel';\nimport { LanguageService } from '@igo2/core/language';\nimport { MessageService } from '@igo2/core/message';\nimport {\n  ClusterDataSource,\n  DataSourceService,\n  FEATURE_DETAILS_DIRECTIVES,\n  FILTER_DIRECTIVES,\n  Feature,\n  FeatureMotion,\n  IgoMap,\n  IgoQueryModule,\n  Layer,\n  LayerOptions,\n  LayerService,\n  MAP_DIRECTIVES,\n  MapViewOptions,\n  MeasureLengthUnit,\n  OSMDataSource,\n  OSMDataSourceOptions,\n  QueryableDataSource,\n  QueryableDataSourceOptions,\n  SpatialFilterItemType,\n  SpatialFilterQueryType,\n  SpatialFilterService,\n  SpatialFilterThematic,\n  SpatialFilterType,\n  VectorLayer,\n  createOverlayMarkerStyle,\n  featureToOl,\n  isLayerGroup,\n  moveToOlFeatures\n} from '@igo2/geo';\n\nimport { Coordinate } from 'ol/coordinate';\nimport olFormatGeoJSON from 'ol/format/GeoJSON';\nimport olSourceCluster from 'ol/source/Cluster';\nimport olSourceVector from 'ol/source/Vector';\nimport * as olstyle from 'ol/style';\n\nimport { Observable, Subject, forkJoin } from 'rxjs';\nimport { BehaviorSubject } from 'rxjs';\nimport { take, takeUntil, tap } from 'rxjs/operators';\n\nimport { DocViewerComponent } from '../../components/doc-viewer/doc-viewer.component';\nimport { ExampleViewerComponent } from '../../components/example/example-viewer/example-viewer.component';\n\n/**\n * Spatial Filter Type\n */\n@Component({\n  selector: 'app-spatial-filter',\n  templateUrl: './spatial-filter.component.html',\n  styleUrls: ['./spatial-filter.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  standalone: true,\n  imports: [\n    DocViewerComponent,\n    ExampleViewerComponent,\n    MatGridListModule,\n    MAP_DIRECTIVES,\n    IgoQueryModule,\n    PanelComponent,\n    FILTER_DIRECTIVES,\n    NgIf,\n    FEATURE_DETAILS_DIRECTIVES,\n    AsyncPipe\n  ]\n})\nexport class AppSpatialFilterComponent implements OnInit, OnDestroy {\n  public map: IgoMap = new IgoMap({\n    controls: {\n      attribution: {\n        collapsed: true\n      }\n    }\n  });\n\n  public view: MapViewOptions = {\n    center: [-73, 47.2],\n    zoom: 6\n  };\n\n  @Input() type: SpatialFilterType;\n  @Input() itemType: SpatialFilterItemType = SpatialFilterItemType.Address;\n  @Input() freehandDrawIsActive: boolean;\n\n  public layers: Layer[] = [];\n  public activeLayers: Layer[] = [];\n\n  public queryType: SpatialFilterQueryType;\n  public thematics: SpatialFilterThematic[];\n  public zone: Feature;\n  public zoneWithBuffer: Feature;\n  public buffer = 0;\n\n  public iterator = 1;\n\n  public selectedFeature$ = new BehaviorSubject<Feature>(undefined);\n\n  private format: olFormatGeoJSON = new olFormatGeoJSON();\n\n  public store: EntityStore = new EntityStore<Feature>([]); // Store to print results at the end\n\n  public spatialListStore: EntityStore<Feature> = new EntityStore<Feature>([]);\n\n  public loading = false;\n\n  public thematicLength = 0;\n\n  public measureUnit: MeasureLengthUnit = MeasureLengthUnit.Meters;\n  private unsubscribe$ = new Subject<void>();\n\n  public defaultStyle: olstyle.Style | ((feature, resolution) => olstyle.Style);\n\n  constructor(\n    private matIconRegistry: MatIconRegistry,\n    private spatialFilterService: SpatialFilterService,\n    private dataSourceService: DataSourceService,\n    private layerService: LayerService,\n    private messageService: MessageService,\n    private languageService: LanguageService,\n    private cdRef: ChangeDetectorRef\n  ) {\n    this.dataSourceService\n      .createAsyncDataSource({\n        type: 'osm'\n      } satisfies OSMDataSourceOptions)\n      .subscribe((dataSource: OSMDataSource) => {\n        this.map.layerController.add(\n          this.layerService.createLayer({\n            title: 'OSM',\n            source: dataSource,\n            baseLayer: true,\n            visible: true\n          } satisfies LayerOptions)\n        );\n      });\n  }\n\n  ngOnInit(): void {\n    for (const layer of this.map.layerController.all) {\n      if (isLayerGroup(layer)) {\n        return;\n      }\n      if (\n        layer.title &&\n        layer.title.includes(\n          this.languageService.translate.instant(\n            'igo.geo.spatialFilter.spatialFilter'\n          )\n        )\n      ) {\n        this.layers.push(layer);\n      }\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.unsubscribe$.next();\n    this.unsubscribe$.complete();\n  }\n\n  getOutputType(event: SpatialFilterType): void {\n    this.type = event;\n    this.queryType = undefined;\n  }\n\n  getOutputQueryType(event: SpatialFilterQueryType): void {\n    this.queryType = event;\n    if (this.queryType) {\n      this.loadFilterList();\n    }\n  }\n\n  private loadFilterList(): void {\n    this.spatialFilterService\n      .loadFilterList(this.queryType)\n      .pipe(takeUntil(this.unsubscribe$))\n      .subscribe((features: Feature[]) => {\n        features.sort((a, b) => {\n          if (a.properties.nom < b.properties.nom) {\n            return -1;\n          }\n          if (a.properties.nom > b.properties.nom) {\n            return 1;\n          }\n          return 0;\n        });\n        this.spatialListStore.clear();\n        this.spatialListStore.load(features);\n      });\n  }\n\n  getOutputToggleSearch(): void {\n    this.loadThematics();\n  }\n\n  getOutputClearSearch(): void {\n    this.zone = undefined;\n    this.queryType = undefined;\n  }\n\n  clearMap(): void {\n    this.map.layerController.remove(...this.layers);\n    this.layers = [];\n    this.activeLayers = [];\n    this.thematicLength = 0;\n    this.iterator = 1;\n    if (this.type === SpatialFilterType.Predefined) {\n      this.zone = undefined;\n      this.queryType = undefined;\n    }\n  }\n\n  private loadThematics(): void {\n    this.loading = true;\n    let zeroResults = true;\n    let thematics: SpatialFilterThematic[];\n    if (this.buffer === 0 || this.type === SpatialFilterType.Point) {\n      this.tryAddFeaturesToMap([this.zone]);\n    }\n    if (this.itemType !== SpatialFilterItemType.Thematics) {\n      const theme: SpatialFilterThematic = {\n        name: ''\n      };\n      thematics = [theme];\n    } else {\n      thematics = this.thematics;\n    }\n    if (\n      this.measureUnit === MeasureLengthUnit.Kilometers &&\n      this.type !== SpatialFilterType.Point\n    ) {\n      this.buffer = this.buffer * 1000;\n    }\n    if (this.type === SpatialFilterType.Polygon) {\n      this.buffer = 0; // to avoid buffer enter a second time in terrAPI\n    }\n\n    const observables$: Observable<Feature[]>[] = [];\n    thematics.forEach((thematic: SpatialFilterThematic) => {\n      observables$.push(\n        this.spatialFilterService\n          .loadFilterItem(\n            this.zone,\n            this.itemType,\n            this.queryType,\n            thematic,\n            this.buffer\n          )\n          .pipe(\n            tap((features: Feature[]) => {\n              this.store.insertMany(features);\n              const featuresPoint: Feature[] = [];\n              const featuresLinePoly: Feature[] = [];\n              let idPoint: EntityKey;\n              let idLinePoly: EntityKey;\n              features.forEach((feature: Feature) => {\n                if (feature.geometry.type === SpatialFilterType.Point) {\n                  feature.properties.longitude =\n                    feature.geometry.coordinates[0];\n                  feature.properties.latitude = feature.geometry.coordinates[1];\n                  featuresPoint.push(feature);\n                  idPoint = feature.meta.id;\n                } else {\n                  featuresLinePoly.push(feature);\n                  idLinePoly = feature.meta.id;\n                }\n              });\n\n              this.tryAddPointToMap(featuresPoint, idPoint);\n              this.tryAddLayerToMap(featuresLinePoly, idLinePoly);\n              if (features.length) {\n                zeroResults = false;\n                this.thematicLength += 1;\n                thematic.zeroResults = false;\n                this.cdRef.detectChanges();\n              } else {\n                thematic.zeroResults = true;\n              }\n\n              if (features.length >= 10000) {\n                this.messageService.alert(\n                  'igo.geo.spatialFilter.maxSizeAlert',\n                  'igo.geo.spatialFilter.warning',\n                  { timeOut: 10000 }\n                );\n              }\n            })\n          )\n      );\n    });\n\n    forkJoin(observables$)\n      .pipe(takeUntil(this.unsubscribe$))\n      .subscribe(() => {\n        this.loading = false;\n        if (zeroResults) {\n          this.messageService.alert(\n            'igo.geo.spatialFilter.zeroResults',\n            'igo.geo.spatialFilter.warning',\n            { timeOut: 10000 }\n          );\n        }\n      });\n  }\n\n  onZoneChange(feature: Feature, buffer?: boolean): void {\n    this.zone = feature;\n    if (feature) {\n      buffer\n        ? this.tryAddFeaturesToMap([feature], true)\n        : this.tryAddFeaturesToMap([feature]);\n      this.zoomToFeatureExtent(feature);\n    }\n  }\n\n  /**\n   * Try to add zone feature to the map overlay\n   */\n  public tryAddFeaturesToMap(features: Feature[], buffer?: boolean): void {\n    let i = 1;\n    for (const feature of features) {\n      if (this.type === SpatialFilterType.Predefined) {\n        for (const layer of this.layers) {\n          if (\n            layer.options._internal &&\n            layer.options._internal.code === feature.properties.code &&\n            !buffer\n          ) {\n            if (!layer.title?.startsWith('Zone')) {\n              const index: number = this.layers.indexOf(layer);\n              this.layers.splice(index, 1);\n            }\n            return;\n          }\n          if (layer.title?.startsWith('Zone')) {\n            this.activeLayers = [];\n            const index: number = this.layers.indexOf(layer);\n            this.layers.splice(index, 1);\n            this.map.layerController.remove(layer);\n          }\n        }\n      } else {\n        if (buffer) {\n          for (const layer of this.activeLayers) {\n            if (\n              this.activeLayers.length === 1 &&\n              layer.title?.startsWith('Zone')\n            ) {\n              const index: number = this.layers.indexOf(layer);\n              this.layers.splice(index, 1);\n              this.map.layerController.remove(layer);\n            }\n          }\n        }\n        this.activeLayers = [];\n      }\n      for (const layer of this.layers) {\n        if (layer.title?.startsWith('Zone')) {\n          i++;\n        }\n      }\n      this.defaultStyle = (_feature, resolution) => {\n        const coordinates: Coordinate = features[0].geometry.coordinates;\n        return new olstyle.Style({\n          image: new olstyle.Circle({\n            radius: coordinates\n              ? this.buffer /\n                Math.cos((Math.PI / 180) * coordinates[1]) /\n                resolution\n              : undefined,\n            fill: new olstyle.Fill({\n              color: 'rgba(200, 200, 20, 0.2)'\n            }),\n            stroke: new olstyle.Stroke({\n              width: 1,\n              color: 'orange'\n            })\n          }),\n          stroke: new olstyle.Stroke({\n            width: 1,\n            color: 'orange'\n          }),\n          fill: new olstyle.Fill({\n            color: 'rgba(200, 200, 20, 0.2)'\n          })\n        });\n      };\n      this.dataSourceService\n        .createAsyncDataSource({\n          type: 'vector',\n          queryable: true\n        } as QueryableDataSourceOptions)\n        .pipe(take(1))\n        .subscribe((dataSource: QueryableDataSource) => {\n          const olLayer: VectorLayer = this.layerService.createLayer({\n            isIgoInternalLayer: true,\n            title: ('Zone ' +\n              i +\n              ' - ' +\n              this.languageService.translate.instant(\n                'igo.geo.spatialFilter.spatialFilter'\n              )) satisfies string,\n            workspace: { enabled: true },\n            _internal: {\n              code:\n                this.type === SpatialFilterType.Predefined\n                  ? feature.properties.code\n                  : undefined\n            },\n            source: dataSource,\n            visible: true\n          }) as VectorLayer;\n          const featuresOl = features.map((feature: Feature) => {\n            return featureToOl(feature, this.map.projectionCode);\n          });\n          if (this.type !== SpatialFilterType.Predefined) {\n            const type =\n              this.type === SpatialFilterType.Point ? 'Cercle' : 'Polygone';\n            featuresOl[0].set('nom', 'Zone', true);\n            featuresOl[0].set('type', type, true);\n          }\n          const ol = dataSource.ol as olSourceVector | olSourceCluster;\n          ol.addFeatures(featuresOl);\n          olLayer.ol.setStyle(this.defaultStyle);\n          this.map.layerController.add(olLayer);\n          this.layers.push(olLayer);\n          this.activeLayers.push(olLayer);\n          this.cdRef.detectChanges();\n        });\n    }\n  }\n\n  /**\n   * Try to add point features to the map\n   * Necessary to create clusters\n   */\n  private tryAddPointToMap(features: Feature[], id: EntityKey): void {\n    let i = 1;\n    if (features.length) {\n      if (this.map === undefined) {\n        return;\n      }\n      for (const layer of this.layers) {\n        if (layer.title?.startsWith(features[0].meta.title)) {\n          i++;\n        }\n      }\n      this.dataSourceService\n        .createAsyncDataSource({\n          type: 'cluster',\n          id,\n          queryable: true,\n          distance: 120,\n          meta: {\n            title: 'Cluster'\n          }\n        } as QueryableDataSourceOptions)\n        .pipe(take(1))\n        .subscribe((dataSource: ClusterDataSource) => {\n          const icon: string = features[0].meta.icon;\n          let style: olstyle.Style;\n          if (!icon) {\n            style = createOverlayMarkerStyle();\n          } else {\n            style = this.createSvgIcon(icon) || createOverlayMarkerStyle();\n          }\n\n          const olLayer = this.layerService.createLayer({\n            isIgoInternalLayer: true,\n            title: (features[0].meta.title +\n              ' ' +\n              i +\n              ' - ' +\n              this.languageService.translate.instant(\n                'igo.geo.spatialFilter.spatialFilter'\n              )) satisfies string,\n            source: dataSource,\n            visible: true,\n            style\n          });\n\n          const featuresOl = features.map((feature: Feature) => {\n            return featureToOl(feature, this.map.projectionCode);\n          });\n          const ol: olSourceCluster = dataSource.ol;\n          ol.getSource().addFeatures(featuresOl);\n          if (this.layers.find((layer) => layer.id === olLayer.id)) {\n            this.map.layerController.remove(\n              this.layers.find((layer) => layer.id === olLayer.id)\n            );\n            i = i - 1;\n            olLayer.title = (features[0].meta.title +\n              ' ' +\n              i +\n              ' - ' +\n              this.languageService.translate.instant(\n                'igo.geo.spatialFilter.spatialFilter'\n              )) satisfies string;\n            olLayer.options.title = olLayer.title;\n          }\n          this.iterator = i;\n          this.map.layerController.add(olLayer);\n          this.layers.push(olLayer);\n          this.pushLayer(olLayer);\n          this.cdRef.detectChanges();\n        });\n    }\n  }\n\n  private createSvgIcon(icon: string): olstyle.Style {\n    let style: olstyle.Style;\n    this.matIconRegistry\n      .getNamedSvgIcon(icon)\n      .subscribe((svgObj: SVGElement) => {\n        const xmlSerializer: XMLSerializer = new XMLSerializer();\n        svgObj.setAttribute('width', '30');\n        svgObj.setAttribute('height', '30');\n        svgObj.setAttribute('fill', 'rgba(0, 128, 255)');\n        svgObj.setAttribute('stroke', 'white');\n        const svg: string = xmlSerializer.serializeToString(svgObj);\n        style = new olstyle.Style({\n          image: new olstyle.Icon({\n            src: 'data:image/svg+xml;utf8,' + svg\n          })\n        });\n      });\n    return style;\n  }\n  /**\n   * Try to add line or polygon features to the map\n   */\n  private tryAddLayerToMap(features: Feature[], id: EntityKey): void {\n    let i = 1;\n    if (features.length) {\n      if (this.map === undefined) {\n        return;\n      }\n      for (const layer of this.layers) {\n        if (layer.title?.startsWith(features[0].meta.title)) {\n          i++;\n        }\n      }\n      this.dataSourceService\n        .createAsyncDataSource({\n          type: 'vector',\n          id,\n          queryable: true\n        } as QueryableDataSourceOptions)\n        .pipe(take(1))\n        .subscribe((dataSource: QueryableDataSource) => {\n          const olLayer = this.layerService.createLayer({\n            isIgoInternalLayer: true,\n            title: (features[0].meta.title +\n              ' ' +\n              i +\n              ' - ' +\n              this.languageService.translate.instant(\n                'igo.geo.spatialFilter.spatialFilter'\n              )) satisfies string,\n            source: dataSource,\n            visible: true\n          });\n          const featuresOl = features.map((feature: Feature) => {\n            return featureToOl(feature, this.map.projectionCode);\n          });\n          const ol = dataSource.ol as olSourceVector;\n          ol.addFeatures(featuresOl);\n          if (this.layers.find((layer) => layer.id === olLayer.id)) {\n            this.map.layerController.remove(\n              this.layers.find((layer) => layer.id === olLayer.id)\n            );\n            i = i - 1;\n            olLayer.title = (features[0].meta.title +\n              ' ' +\n              i +\n              ' - ' +\n              this.languageService.translate.instant(\n                'igo.geo.spatialFilter.spatialFilter'\n              )) satisfies string;\n            olLayer.options.title = olLayer.title;\n          }\n          this.map.layerController.add(olLayer);\n          this.layers.push(olLayer);\n          this.pushLayer(olLayer);\n          this.cdRef.detectChanges();\n        });\n    }\n  }\n\n  zoomToFeatureExtent(feature: Feature): void {\n    if (feature) {\n      const olFeature = this.format.readFeature(feature, {\n        dataProjection: feature.projection,\n        featureProjection: this.map.projectionCode\n      });\n      moveToOlFeatures(\n        this.map.viewController,\n        [olFeature],\n        FeatureMotion.Zoom\n      );\n    }\n  }\n\n  pushLayer(layer: Layer): void {\n    for (const activeLayer of this.activeLayers) {\n      if (activeLayer.id === layer.id) {\n        return;\n      }\n    }\n\n    this.activeLayers.push(layer);\n  }\n}\n","<app-doc-viewer\n  title=\"Spatial Filter\"\n  subtitle=\"Geo\"\n  [dependencies]=\"['LanguageService']\"\n>\n  <app-example-viewer codeFolder=\"geo/spatial-filter\">\n    <mat-grid-list cols=\"2\" rowHeight=\"500px\" gutterSize=\"16px\">\n      <mat-grid-tile>\n        <igo-map-browser\n          [map]=\"map\"\n          [view]=\"view\"\n          igoQuery\n          [queryFeatures]=\"true\"\n        >\n          <div class=\"map-actions --vertical --bottom --right\">\n            <igo-zoom-button [map]=\"map\" color=\"primary\"> </igo-zoom-button>\n          </div>\n        </igo-map-browser>\n      </mat-grid-tile>\n      <mat-grid-tile>\n        <div class=\"flex flex-col align-start h-100 w-100 overflow-y-auto\">\n          <igo-panel class=\"w-100\">\n            <igo-spatial-filter-type\n              [store]=\"spatialListStore\"\n              [selectedQueryType]=\"queryType\"\n              [zone]=\"zone\"\n              [layers]=\"activeLayers\"\n              (eventType)=\"getOutputType($event)\"\n              (eventQueryType)=\"getOutputQueryType($event)\"\n              (zoneChange)=\"onZoneChange($event)\"\n              (zoneWithBufferChange)=\"onZoneChange($event, true)\"\n              (bufferChange)=\"buffer = $event\"\n              (measureUnitChange)=\"measureUnit = $event\"\n            >\n            </igo-spatial-filter-type>\n\n            <igo-spatial-filter-item\n              [type]=\"type\"\n              [queryType]=\"queryType\"\n              [map]=\"map\"\n              [zone]=\"zone\"\n              [loading]=\"loading\"\n              [store]=\"$any(store)\"\n              [layers]=\"activeLayers\"\n              [allLayers]=\"layers\"\n              [thematicLength]=\"thematicLength\"\n              (radiusEvent)=\"buffer = $event\"\n              (bufferEvent)=\"buffer = $event\"\n              (measureUnitChange)=\"measureUnit = $event\"\n              (freehandControl)=\"freehandDrawIsActive = $event\"\n              (drawZoneEvent)=\"zone = $event\"\n              (zoneWithBufferChange)=\"onZoneChange($event, true)\"\n              (itemTypeChange)=\"itemType = $event\"\n              (thematicChange)=\"thematics = $event\"\n              (toggleSearch)=\"getOutputToggleSearch()\"\n              (clearButtonEvent)=\"clearMap()\"\n              (clearSearchEvent)=\"getOutputClearSearch()\"\n            >\n            </igo-spatial-filter-item>\n          </igo-panel>\n\n          <igo-panel class=\"w-100\">\n            <ng-container *ngIf=\"selectedFeature$ | async as feature\">\n              <igo-feature-details [feature]=\"feature\"></igo-feature-details>\n            </ng-container>\n          </igo-panel>\n        </div>\n      </mat-grid-tile>\n    </mat-grid-list>\n  </app-example-viewer>\n</app-doc-viewer>\n","import { Component } from '@angular/core';\nimport { MatGridListModule } from '@angular/material/grid-list';\n\nimport { PanelComponent } from '@igo2/common/panel';\nimport {\n  DataSourceService,\n  FILTER_DIRECTIVES,\n  IgoMap,\n  LayerOptions,\n  LayerService,\n  MAP_DIRECTIVES,\n  MapViewOptions,\n  OSMDataSource,\n  OSMDataSourceOptions,\n  TimeFilterStyle,\n  TimeFilterType,\n  TimeFilterableDataSource,\n  TimeFilterableDataSourceOptions\n} from '@igo2/geo';\n\nimport { DocViewerComponent } from '../../components/doc-viewer/doc-viewer.component';\nimport { ExampleViewerComponent } from '../../components/example/example-viewer/example-viewer.component';\n\n@Component({\n  selector: 'app-time-filter',\n  templateUrl: './time-filter.component.html',\n  styleUrls: ['./time-filter.component.scss'],\n  standalone: true,\n  imports: [\n    DocViewerComponent,\n    ExampleViewerComponent,\n    MatGridListModule,\n    MAP_DIRECTIVES,\n    PanelComponent,\n    FILTER_DIRECTIVES\n  ]\n})\nexport class AppTimeFilterComponent {\n  public map: IgoMap = new IgoMap({\n    controls: {\n      attribution: {\n        collapsed: true\n      }\n    }\n  });\n\n  public view: MapViewOptions = {\n    center: [-73, 47.2],\n    zoom: 7\n  };\n\n  constructor(\n    private dataSourceService: DataSourceService,\n    private layerService: LayerService\n  ) {\n    this.dataSourceService\n      .createAsyncDataSource({\n        type: 'osm'\n      } satisfies OSMDataSourceOptions)\n      .subscribe((dataSource: OSMDataSource) => {\n        this.map.layerController.add(\n          this.layerService.createLayer({\n            title: 'OSM',\n            baseLayer: true,\n            visible: true,\n            source: dataSource\n          } satisfies LayerOptions)\n        );\n      });\n\n    const datasourceYear: TimeFilterableDataSourceOptions = {\n      type: 'wms',\n      url: 'https://geoegl.msp.gouv.qc.ca/ws/igo_gouvouvert.fcgi',\n      params: {\n        LAYERS: 'vg_observation_v_inondation_embacle_wmst',\n        VERSION: '1.3.0'\n      },\n      timeFilterable: true,\n      timeFilter: {\n        min: '2013',\n        max: '2019',\n        range: false,\n        type: TimeFilterType.YEAR,\n        style: TimeFilterStyle.SLIDER,\n        step: 1\n      }\n    };\n\n    this.dataSourceService\n      .createAsyncDataSource(datasourceYear)\n      .subscribe((dataSource: TimeFilterableDataSource) => {\n        this.map.layerController.add(\n          this.layerService.createLayer({\n            title: 'Embâcles',\n            source: dataSource\n          } satisfies LayerOptions)\n        );\n      });\n  }\n}\n","<app-doc-viewer\n  title=\"Time filter\"\n  subtitle=\"Geo\"\n  [dependencies]=\"['LanguageService']\"\n>\n  <app-example-viewer codeFolder=\"geo/time-filter\">\n    <mat-grid-list cols=\"2\" rowHeight=\"500px\" gutterSize=\"16px\">\n      <mat-grid-tile>\n        <igo-map-browser [map]=\"map\" [view]=\"view\">\n          <div class=\"map-actions --vertical --bottom --right\">\n            <igo-zoom-button [map]=\"map\" color=\"primary\"> </igo-zoom-button>\n          </div>\n        </igo-map-browser>\n      </mat-grid-tile>\n      <mat-grid-tile>\n        <div class=\"flex align-start h-100 w-100\">\n          <igo-panel title=\"Layers\" class=\"w-100\">\n            <igo-time-filter-list\n              [layers]=\"map.layerController.all\"\n            ></igo-time-filter-list>\n          </igo-panel>\n        </div>\n      </mat-grid-tile>\n    </mat-grid-list>\n  </app-example-viewer>\n</app-doc-viewer>\n","import { AsyncPipe, NgIf } from '@angular/common';\nimport { Component, OnInit } from '@angular/core';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatPaginator } from '@angular/material/paginator';\n\nimport { Action, ActionbarComponent, ActionbarMode } from '@igo2/common/action';\nimport {\n  EntityRecord,\n  EntityTableComponent,\n  EntityTablePaginatorComponent,\n  EntityTablePaginatorOptions,\n  EntityTableScrollBehavior\n} from '@igo2/common/entity';\nimport {\n  Workspace,\n  WorkspaceSelectorComponent,\n  WorkspaceStore,\n  WorkspaceWidgetOutletComponent\n} from '@igo2/common/workspace';\nimport {\n  DataSourceService,\n  IgoGeoWorkspaceModule,\n  IgoMap,\n  LayerOptions,\n  LayerService,\n  MAP_DIRECTIVES,\n  MapViewOptions,\n  VectorLayerOptions,\n  WorkspaceSelectorDirective\n} from '@igo2/geo';\nimport { WorkspaceState } from '@igo2/integration';\n\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nimport { DocViewerComponent } from '../../components/doc-viewer/doc-viewer.component';\nimport { ExampleViewerComponent } from '../../components/example/example-viewer/example-viewer.component';\n\n@Component({\n  selector: 'app-workspace',\n  templateUrl: './workspace.component.html',\n  styleUrls: ['./workspace.component.scss'],\n  standalone: true,\n  imports: [\n    AsyncPipe,\n    DocViewerComponent,\n    ExampleViewerComponent,\n    EntityTableComponent,\n    ActionbarComponent,\n    EntityTablePaginatorComponent,\n    IgoGeoWorkspaceModule,\n    MAP_DIRECTIVES,\n    WorkspaceSelectorComponent,\n    WorkspaceSelectorDirective,\n    WorkspaceWidgetOutletComponent,\n    MatCardModule,\n    NgIf\n  ]\n})\nexport class AppWorkspaceComponent implements OnInit {\n  public workspacePaginator: MatPaginator;\n  entitySortChange$ = new BehaviorSubject<boolean>(false);\n  public paginatorOptions: EntityTablePaginatorOptions = {\n    pageSize: 5, // Number of items to display on a page.\n    pageSizeOptions: [1, 5, 10, 15, 30, 50, 100], // The set of provided page size options to display to the user.\n    showFirstLastButtons: true // Whether to show the first/last buttons UI to the user.\n  };\n\n  public map: IgoMap = new IgoMap({\n    controls: {\n      attribution: {\n        collapsed: true\n      }\n    }\n  });\n\n  public view: MapViewOptions = {\n    center: [-72, 47.2],\n    zoom: 5\n  };\n\n  get workspaceStore(): WorkspaceStore {\n    return this.workspaceState.store;\n  }\n\n  public selectedWorkspace$: Observable<Workspace>;\n\n  public actionbarMode: ActionbarMode = ActionbarMode.Overlay;\n\n  public scrollBehavior: EntityTableScrollBehavior =\n    EntityTableScrollBehavior.Instant;\n\n  constructor(\n    private dataSourceService: DataSourceService,\n    private layerService: LayerService,\n    public workspaceState: WorkspaceState\n  ) {}\n\n  ngOnInit(): void {\n    this.selectedWorkspace$ = this.workspaceStore.stateView\n      .firstBy$(\n        (record: EntityRecord<Workspace>) => record.state.selected === true\n      )\n      .pipe(\n        map((record: EntityRecord<Workspace>) => {\n          const entity: Workspace =\n            record === undefined ? undefined : record.entity;\n          if (entity) {\n            // In fact, the download action is not fully functionnal into the igo2-lib demo\n            // The button triggers a tool (importExport) and this tool is not available in the igo2-lib demo.\n            // This is why it has been removed from the actions list.\n            // Refer to the igo2 demo at https://infra-geo-ouverte.github.io/igo2/\n            entity.actionStore.view.filter((action: Action) => {\n              return action.id !== 'wfsDownload';\n            });\n          }\n          return entity;\n        })\n      );\n\n    this.layerService\n      .createLayers([\n        {\n          title: 'OSM',\n          sourceOptions: {\n            type: 'osm'\n          },\n          baseLayer: true,\n          visible: true\n        } satisfies LayerOptions,\n        {\n          title: 'Simple WFS ',\n          maxResolution: 3000,\n          visible: true,\n          workspace: {\n            enabled: true\n          },\n          sourceOptions: {\n            type: 'wfs',\n            url: 'https://ws.mapserver.transports.gouv.qc.ca/swtq',\n            params: {\n              featureTypes: 'etablissement_mtq',\n              fieldNameGeometry: 'geometry',\n              version: '2.0.0',\n              outputFormat: 'geojson'\n            },\n            sourceFields: [\n              { name: 'idetablis', alias: 'ID' },\n              { name: 'nometablis', alias: 'Name' },\n              { name: 'typetablis', alias: 'Type' }\n            ]\n          }\n        } satisfies VectorLayerOptions\n      ])\n      .subscribe((layers) => {\n        this.map.layerController.add(...layers);\n      });\n  }\n\n  paginatorChange(event: MatPaginator): void {\n    this.workspacePaginator = event;\n  }\n}\n","<app-doc-viewer title=\"Workspace\" subtitle=\"Geo\">\n  <app-example-viewer codeFolder=\"geo/workspace\">\n    <igo-map-browser [map]=\"map\" [view]=\"view\" class=\"m-b-16\">\n      <div class=\"map-actions --vertical --bottom --right\">\n        <igo-zoom-button [map]=\"map\" color=\"primary\"> </igo-zoom-button>\n      </div>\n    </igo-map-browser>\n\n    <igo-workspace-selector\n      igoWorkspaceSelector\n      [store]=\"workspaceStore\"\n      [map]=\"map\"\n    >\n    </igo-workspace-selector>\n\n    <ng-container *ngIf=\"selectedWorkspace$ | async as workspace\">\n      <igo-entity-table-paginator\n        *ngIf=\"$any(workspace).inResolutionRange$ | async\"\n        [store]=\"workspace.entityStore\"\n        [paginatorOptions]=\"paginatorOptions\"\n        [entitySortChange$]=\"entitySortChange$\"\n        (paginatorChange)=\"paginatorChange($event)\"\n      >\n      </igo-entity-table-paginator>\n    </ng-container>\n\n    <ng-container *ngIf=\"selectedWorkspace$ | async as workspace\">\n      <igo-actionbar\n        *ngIf=\"workspace.actionStore\"\n        [store]=\"workspace.actionStore\"\n        [horizontal]=\"true\"\n        [withToggleButton]=\"true\"\n        [withTitle]=\"true\"\n        [mode]=\"actionbarMode\"\n      >\n      </igo-actionbar>\n\n      <igo-entity-table\n        *ngIf=\"\n          workspace.entityStore &&\n          workspace.meta &&\n          workspace.meta.tableTemplate &&\n          ($any(workspace).inResolutionRange$ | async)\n        \"\n        class=\"table-compact table-centered\"\n        [paginator]=\"workspacePaginator\"\n        [scrollBehavior]=\"scrollBehavior\"\n        [store]=\"workspace.entityStore\"\n        [template]=\"workspace.meta.tableTemplate\"\n      >\n      </igo-entity-table>\n      <mat-card-content\n        *ngIf=\"($any(workspace).inResolutionRange$ | async) === false\"\n      >\n        No data available at this scale. Please zoom in.\n      </mat-card-content>\n\n      <igo-workspace-widget-outlet\n        [workspace]=\"workspace\"\n      ></igo-workspace-widget-outlet>\n    </ng-container>\n  </app-example-viewer>\n</app-doc-viewer>\n","import { Routes } from '@angular/router';\n\nimport { AppCatalogComponent } from './catalog/catalog.component';\nimport { AppDirectionsComponent } from './directions/directions.component';\nimport { AppDrawComponent } from './draw/draw.component';\nimport { AppFeatureComponent } from './feature/feature.component';\nimport { AppGeometryComponent } from './geometry/geometry.component';\nimport { AppHoverComponent } from './hover/hover.component';\nimport { AppImportExportComponent } from './import-export/import-export.component';\nimport { AppLayerComponent } from './layer/layer.component';\nimport { AppLegendComponent } from './legend/legend.component';\nimport { AppMeasureComponent } from './measure/measure.component';\nimport { AppOgcFilterComponent } from './ogc-filter/ogc-filter.component';\nimport { AppOverlayComponent } from './overlay/overlay.component';\nimport { AppPrintComponent } from './print/print.component';\nimport { AppQueryComponent } from './query/query.component';\nimport { AppSearchComponent } from './search/search.component';\nimport { AppSimpleMapComponent } from './simple-map/simple-map.component';\nimport { AppSpatialFilterComponent } from './spatial-filter/spatial-filter.component';\nimport { AppTimeFilterComponent } from './time-filter/time-filter.component';\nimport { AppWorkspaceComponent } from './workspace/workspace.component';\n\nexport const routes: Routes = [\n  { path: '', redirectTo: 'activity', pathMatch: 'full' },\n  {\n    title: 'Simple map',\n    path: 'simple-map',\n    component: AppSimpleMapComponent\n  },\n  {\n    title: 'Layer',\n    path: 'layer',\n    component: AppLayerComponent\n  },\n  {\n    title: 'Legend',\n    path: 'legend',\n    component: AppLegendComponent\n  },\n  {\n    title: 'Overlay',\n    path: 'overlay',\n    component: AppOverlayComponent\n  },\n  {\n    title: 'Geometry',\n    path: 'geometry',\n    component: AppGeometryComponent\n  },\n  {\n    title: 'Feature',\n    path: 'feature',\n    component: AppFeatureComponent\n  },\n  {\n    title: 'Hover',\n    path: 'hover',\n    component: AppHoverComponent\n  },\n  {\n    title: 'Measure',\n    path: 'measure',\n    component: AppMeasureComponent\n  },\n  {\n    title: 'Draw',\n    path: 'draw',\n    component: AppDrawComponent\n  },\n  {\n    title: 'Query',\n    path: 'query',\n    component: AppQueryComponent\n  },\n  {\n    title: 'Catalog',\n    path: 'catalog',\n    component: AppCatalogComponent\n  },\n  {\n    title: 'Search',\n    path: 'search',\n    component: AppSearchComponent\n  },\n  {\n    title: 'Print',\n    path: 'print',\n    component: AppPrintComponent\n  },\n  {\n    title: 'Import/Export',\n    path: 'import-export',\n    component: AppImportExportComponent\n  },\n  {\n    title: 'Directions',\n    path: 'directions',\n    component: AppDirectionsComponent\n  },\n  {\n    title: 'Time Filter',\n    path: 'time-filter',\n    component: AppTimeFilterComponent\n  },\n  {\n    title: 'OGC Filter',\n    path: 'ogc-filter',\n    component: AppOgcFilterComponent\n  },\n  {\n    title: 'Spatial Filter',\n    path: 'spatial-filter',\n    component: AppSpatialFilterComponent\n  },\n  {\n    title: 'Workspace',\n    path: 'workspace',\n    component: AppWorkspaceComponent\n  }\n];\n"],"mappings":"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","names":["AppCatalogComponent","layerService","catalogService","storageService","mapService","catalog","map","IgoMap","controls","attribution","collapsed","view","center","zoom","catalogStore","EntityStore","catalogItemStore","constructor","ngOnInit","layers","title","sourceOptions","type","baseLayer","visible","createLayers","subscribe","layerController","add","loadCatalogs","setMap","stateView","firstBy$","record","state","selected","entity","onCatalogSelectChange","event","loadCatalogItems","catalogs","clear","load","concat","get","items","ɵɵdirectiveInject","LayerService","CatalogService","StorageService","MapService","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","rf","ctx","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ɵɵlistener","$event","ɵɵproperty","ɵɵpureFunction0","_c0","ɵɵadvance","DocViewerComponent","ExampleViewerComponent","MapBrowserComponent","ZoomButtonComponent","PanelComponent","CatalogLibaryComponent","CatalogBrowserComponent","styles","AppDirectionsComponent","layerService","mapService","authService","map","IgoMap","controls","attribution","collapsed","view","center","zoom","geolocate","stopsStore","StopsStore","stopsFeatureStore","StopsFeatureStore","stepsFeatureStore","StepsFeatureStore","routesFeatureStore","RoutesFeatureStore","zoomOnActiveRoute$","Subject","authenticated$","constructor","authenticate$","setMap","layers","title","baseLayer","visible","sourceOptions","type","url","crossOrigin","createLayers","subscribe","layerController","add","ɵɵdirectiveInject","LayerService","MapService","AuthService","selectors","standalone","features","ɵɵProvidersFeature","provideDirection","withOsrmSource","provideSearch","withIChercheSource","ɵɵStandaloneFeature","decls","vars","consts","template","rf","ctx","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ɵɵproperty","ɵɵpureFunction0","_c0","ɵɵadvance","DocViewerComponent","ExampleViewerComponent","MatGridListModule","MatGridList","MatGridTile","GeolocateButtonComponent","HomeExtentButtonComponent","MapBrowserComponent","RotationButtonComponent","ZoomButtonComponent","DirectionsComponent","AppDrawComponent","layerService","mapService","map","IgoMap","controls","attribution","collapsed","scaleLine","view","center","zoom","projection","stores","constructor","setMap","layers","title","sourceOptions","type","baseLayer","visible","createLayers","subscribe","layerController","add","ɵɵdirectiveInject","LayerService","MapService","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","rf","ctx","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ɵɵproperty","ɵɵpureFunction0","_c0","ɵɵadvance","MapBrowserComponent","ZoomButtonComponent","DrawComponent","DocViewerComponent","ExampleViewerComponent","styles","AppFeatureComponent","dataSourceService","layerService","map","IgoMap","controls","attribution","collapsed","view","center","zoom","tableTemplate","selection","selectMany","sort","columns","name","title","store","FeatureStore","constructor","ngOnInit","loadingStrategy","FeatureStoreLoadingStrategy","addStrategy","selectionStrategy","FeatureStoreSelectionStrategy","motion","FeatureMotion","Default","load","meta","id","type","geometry","coordinates","projection","properties","description","createAsyncLayer","baseLayer","visible","sourceOptions","subscribe","layer","layerController","add","animation","duration","igoStyle","mapboxStyle","url","source","bindLayer","activate","ngOnDestroy","destroy","ɵɵdirectiveInject","DataSourceService","LayerService","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","rf","ctx","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ɵɵadvance","ɵɵproperty","DocViewerComponent","ExampleViewerComponent","MapBrowserComponent","ZoomButtonComponent","EntityTableComponent","styles","ɵɵelementStart","ɵɵlistener","$event","ɵɵrestoreView","_r1","ctx_r1","ɵɵnextContext","ɵɵresetView","onSubmit","ɵɵelement","fillForm","ɵɵtext","ɵɵelementEnd","clearForm","ɵɵproperty","form_r3","ɵɵpipeBind1","data$","ɵɵadvance","groups","submitDisabled","AppGeometryComponent","formService","dataSourceService","layerService","map","IgoMap","controls","attribution","collapsed","scaleLine","view","center","zoom","form$","BehaviorSubject","undefined","valueChanges$$","constructor","ngOnInit","createAsyncDataSource","type","subscribe","dataSource","layerController","add","createLayer","title","source","baseLayer","visible","fields","name","options","validator","Validators","required","inputs","geometryTypeField","geometryType","drawGuideField","drawGuide","drawGuidePlaceholder","drawStyle","Style","stroke","Stroke","color","width","fill","Fill","image","Circle","radius","config","field","form","group","control","valueChanges","valid","next","ngOnDestroy","unsubscribe","geometry","JSON","stringify","coordinates","value","reset","data","alert","ɵɵdirectiveInject","FormService","DataSourceService","LayerService","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","rf","ctx","ɵɵtemplate","AppGeometryComponent_igo_form_6_Template","DocViewerComponent","ExampleViewerComponent","MapBrowserComponent","ZoomButtonComponent","NgIf","FormComponent","FormGroupComponent","MatButtonModule","MatButton","AsyncPipe","styles","AppHoverComponent","dataSourceService","layerService","mediaService","pointerCoordDelay","pointerHoverFeatureDelay","map","IgoMap","controls","attribution","collapsed","scaleLine","view","center","zoom","projection","media","getMedia","isTouchScreen","constructor","createAsyncLayer","title","baseLayer","visible","sourceOptions","type","url","subscribe","layer","layerController","add","wfsDatasourcePoint","params","featureTypes","fieldNameGeometry","maxFeatures","version","outputFormat","undefined","outputFormatDownload","createAsyncDataSource","dataSource","layerOptions","source","igoStyle","styleByAttribute","attribute","data","stroke","fill","radius","width","hoverStyle","label","style","textAlign","textBaseline","font","color","backgroundFill","backgroundStroke","overflow","offsetX","offsetY","padding","baseStyle","circle","createLayer","ɵɵdirectiveInject","DataSourceService","LayerService","MediaService","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","rf","ctx","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ɵɵproperty","ɵɵpureFunction0","_c0","ɵɵadvance","DocViewerComponent","ExampleViewerComponent","IgoMapModule","GeolocateButtonComponent","HomeExtentButtonComponent","HoverFeatureDirective","MapBrowserComponent","RotationButtonComponent","ZoomButtonComponent","styles","AppImportExportComponent","layerService","map","IgoMap","controls","attribution","collapsed","view","center","zoom","store","WorkspaceStore","constructor","createAsyncLayer","title","baseLayer","visible","sourceOptions","type","subscribe","layer","layerController","add","ɵɵdirectiveInject","LayerService","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","rf","ctx","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ɵɵproperty","ɵɵpureFunction0","_c0","ɵɵadvance","DocViewerComponent","ExampleViewerComponent","MatGridListModule","MatGridList","MatGridTile","MapBrowserComponent","ZoomButtonComponent","ImportExportComponent","ɵɵelement","ɵɵproperty","layer_r1","ɵɵadvance","AppLayerComponent","layerService","map","IgoMap","controls","attribution","collapsed","view","center","maxLayerZoomExtent","zoom","layerViewerOptions","legend","showForVisibleLayers","queryBadge","constructor","layers","title","baseLayer","visible","sourceOptions","type","url","params","featureTypes","fieldNameGeometry","maxFeatures","version","outputFormat","srsName","outputFormatDownload","ogcFilters","enabled","editable","filters","operator","propertyName","expression","formatOptions","dataProjection","LAYERS","VERSION","legendOptions","stylesAvailable","name","refreshIntervalSec","metadata","extern","id","idbInfo","storeToIdb","preload","bypassResolution","bypassVisible","createLayers","subscribe","layerController","add","ɵɵdirectiveInject","LayerService","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","rf","ctx","ɵɵelementStart","ɵɵelementEnd","ɵɵtemplate","AppLayerComponent_ng_template_11_Template","ɵɵtemplateRefExtractor","ɵɵpureFunction0","_c0","DocViewerComponent","ExampleViewerComponent","MatGridListModule","MatGridList","MatGridTile","MapBrowserComponent","ZoomButtonComponent","LayerViewerComponent","PanelComponent","TrackFeatureButtonComponent","MetadataButtonComponent","DownloadButtonComponent","TimeFilterButtonComponent","OgcFilterButtonComponent","AppLegendComponent","dataSourceService","layerService","map","IgoMap","controls","attribution","collapsed","view","center","zoom","constructor","createAsyncDataSource","type","subscribe","dataSource","layerController","add","createLayer","title","visible","baseLayer","source","createAsyncLayer","legendOptions","display","sourceOptions","url","params","LAYERS","VERSION","layer","html","datasource","refreshIntervalSec","layerOptions","metadata","extern","ɵɵdirectiveInject","DataSourceService","LayerService","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","rf","ctx","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ɵɵproperty","ɵɵpureFunction0","_c0","ɵɵadvance","all","DocViewerComponent","ExampleViewerComponent","MapBrowserComponent","ZoomButtonComponent","PanelComponent","LayerLegendListComponent","styles","AppMeasureComponent","dataSourceService","layerService","map","IgoMap","controls","attribution","collapsed","scaleLine","view","center","zoom","projection","store","FeatureStore","constructor","createAsyncDataSource","type","subscribe","dataSource","layerController","add","createLayer","title","source","baseLayer","visible","ɵɵdirectiveInject","DataSourceService","LayerService","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","rf","ctx","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ɵɵproperty","ɵɵpureFunction0","_c0","ɵɵadvance","DocViewerComponent","ExampleViewerComponent","MapBrowserComponent","ZoomButtonComponent","MeasurerComponent","styles","AppOgcFilterComponent","dataSourceService","layerService","map","IgoMap","controls","attribution","collapsed","view","center","zoom","constructor","createAsyncDataSource","type","subscribe","dataSource","layerController","add","createLayer","title","source","baseLayer","visible","datasource","url","params","featureTypes","fieldNameGeometry","maxFeatures","version","outputFormat","undefined","outputFormatDownload","sourceFields","name","alias","excludeFromOgcFilters","values","ogcFilters","enabled","editable","allowedOperatorsType","OgcFilterOperatorType","All","filters","logical","operator","propertyName","expression","geometryName","wkt_geometry","style","Style","image","Circle","radius","fill","Fill","color","stroke","Stroke","width","datasourceDuringFilter","begin","end","minDate","maxDate","stepDate","id","datasourceDuringFilterTime","Time","datasourceDuringFilterTimeMonth","displayFormat","datasourceDuringFilterTimeYear","datasourceDuringFilterTimeInterval","datasourceDuringFilterTimeRestrictedToStep","restrictToStep","wmsOgcFilterOptions","optionsFromCapabilities","LAYERS","VERSION","filterableWMSwithPushButtons","urlWfs","pushButtons","selectorType","order","groups","ids","bundles","vertical","selectors","tooltip","checkboxes","Basic","paramsWFS","ɵɵdirectiveInject","DataSourceService","LayerService","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","rf","ctx","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ɵɵproperty","ɵɵpureFunction0","_c0","ɵɵadvance","all","DocViewerComponent","ExampleViewerComponent","MatGridListModule","MatGridList","MatGridTile","MapBrowserComponent","ZoomButtonComponent","PanelComponent","OgcFilterableListComponent","AppOverlayComponent","dataSourceService","layerService","map","IgoMap","overlay","controls","attribution","collapsed","view","center","zoom","constructor","ngOnInit","createAsyncDataSource","type","subscribe","dataSource","layerController","add","createLayer","title","source","baseLayer","visible","ngAfterViewInit","feature1","FEATURE","projection","meta","id","properties","geometry","coordinates","feature2","feature3","setFeatures","FeatureMotion","None","ɵɵdirectiveInject","DataSourceService","LayerService","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","rf","ctx","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ɵɵadvance","ɵɵproperty","DocViewerComponent","ExampleViewerComponent","MapBrowserComponent","ZoomButtonComponent","styles","AppPrintComponent","layerService","map","IgoMap","controls","attribution","collapsed","view","center","zoom","constructor","createAsyncLayer","title","baseLayer","visible","sourceOptions","type","url","crossOrigin","subscribe","layer","layerController","add","params","LAYERS","VERSION","layers","version","ɵɵdirectiveInject","LayerService","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","rf","ctx","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ɵɵproperty","ɵɵpureFunction0","_c0","ɵɵadvance","DocViewerComponent","ExampleViewerComponent","MatGridListModule","MatGridList","MatGridTile","GeolocateButtonComponent","HomeExtentButtonComponent","MapBrowserComponent","RotationButtonComponent","ZoomButtonComponent","PrintComponent","styles","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵelement","ɵɵadvance","ɵɵtextInterpolate","ctx_r1","getTitle","feature_r1","ɵɵproperty","ɵɵelementContainerStart","ɵɵtemplate","AppQueryComponent_ng_container_6_div_1_Template","features_r3","AppQueryComponent","dataSourceService","layerService","features$","BehaviorSubject","map","IgoMap","controls","attribution","collapsed","view","center","zoom","constructor","createAsyncDataSource","type","subscribe","dataSource","layerController","add","createLayer","title","source","baseLayer","visible","url","queryable","params","layers","version","queryFormat","QueryFormat","HTMLGML2","queryHtmlTarget","QueryHtmlTarget","IFRAME","createAsyncLayer","sourceOptions","queryUrls","queryLayerFeatures","layer","sourceFields","name","alias","addFeatures","mapboxStyle","feature1","olFeature","geometry","olLineString","transform","feature2","olPoint","feature3","olPolygon","ol","handleQueryResults","results","features","length","next","queryResultsOverlay","setFeatures","FeatureMotion","None","result","getEntityTitle","ɵɵdirectiveInject","DataSourceService","LayerService","selectors","standalone","ɵɵStandaloneFeature","decls","vars","consts","template","rf","ctx","ɵɵlistener","$event","AppQueryComponent_ng_container_6_Template","ɵɵpureFunction0","_c0","ɵɵpipeBind1","DocViewerComponent","ExampleViewerComponent","MapBrowserComponent","ZoomButtonComponent","IgoQueryModule","QueryDirective","PanelComponent","NgIf","NgFor","FeatureDetailsComponent","AsyncPipe","styles","ContextMenuDirective","overlay","viewContainerRef","elementRef","overlayRef","sub","menuContext","menuPosition","EventEmitter","constructor","onContextMenu","e","x","y","MouseEvent","TouchEvent","touches","pageX","pageY","close","preventDefault","emit","positionStrategy","position","flexibleConnectedTo","withPositions","originX","originY","overlayX","overlayY","create","scrollStrategy","scrollStrategies","attach","TemplatePortal","$implicit","undefined","fromEvent","document","pipe","filter","event","clickTarget","target","overlayElement","contains","take","subscribe","nativeElement","dispose","unsubscribe","ɵɵdirectiveInject","Overlay","ViewContainerRef","ElementRef","selectors","hostBindings","rf","ctx","ɵɵlistener","$event","LongPressDirective","touchTimeout","touchDuration","onlyIOS","longpress","EventEmitter","touchstart","e","touches","length","touchEnd","setTimeout","userAgent","getOSName","emit","touchend","clearTimeout","selectors","hostBindings","rf","ctx","ɵɵlistener","$event","sides","alignments","placements","acc","side","oppositeSideMap","oppositeAlignmentMap","evaluate","value","param","getSide","placement","getAlignment","getOppositeAxis","axis","getAxisLength","yAxisSides","getSideAxis","getAlignmentAxis","getAlignmentSides","rects","rtl","alignment","alignmentAxis","length","mainAlignmentSide","getOppositePlacement","getOppositeAlignmentPlacement","placement","alignment","oppositeAlignmentMap","getOppositePlacement","placement","side","oppositeSideMap","expandPaddingObject","padding","__spreadValues","getPaddingObject","rectToClientRect","rect","x","y","width","height","detectOverflow","state","options","__async","_await$platform$isEle","x","y","platform","rects","elements","strategy","boundary","rootBoundary","elementContext","altBoundary","padding","evaluate","paddingObject","getPaddingObject","element","clippingClientRect","rectToClientRect","rect","offsetParent","offsetScale","elementClientRect","getPlacementList","alignment","autoAlignment","allowedPlacements","placement","getAlignment","getSide","getOppositeAlignmentPlacement","autoPlacement","options","state","__async","_middlewareData$autoP","_middlewareData$autoP2","_placementsThatFitOnE","rects","middlewareData","platform","elements","_a","evaluate","crossAxis","placements","detectOverflowOptions","__objRest","placements$1","overflow","detectOverflow","currentIndex","currentPlacement","alignmentSides","getAlignmentSides","currentOverflows","allOverflows","nextPlacement","placementsSortedByMostSpace","d","acc","v","a","b","resetPlacement","originSides","convertValueToCoords","state","options","__async","placement","platform","elements","rtl","side","getSide","alignment","getAlignment","isVertical","getSideAxis","mainAxisMulti","crossAxisMulti","rawValue","evaluate","mainAxis","crossAxis","alignmentAxis","offset","_middlewareData$offse","_middlewareData$arrow","x","y","middlewareData","diffCoords","__spreadProps","__spreadValues","offset","autoPlacement","isMergeableObject","value","isNonNullObject","isSpecial","stringValue","isReactElement","canUseSymbol","REACT_ELEMENT_TYPE","emptyTarget","val","cloneUnlessOtherwiseSpecified","options","deepmerge","defaultArrayMerge","target","source","element","getMergeFunction","key","customMerge","getEnumerableOwnPropertySymbols","symbol","getKeys","propertyIsOnObject","object","property","propertyIsUnsafe","mergeObject","destination","sourceIsArray","targetIsArray","sourceAndTargetTypesMatch","array","prev","next","deepmerge_1","cjs","isElement$1","isHTMLElement$1","isFunction","isString","isUndefined","Evented","event","handler","ctx","once","binding","index","args","context","autoBind","self","keys","i","_setupAdvanceOnHandler","selector","step","targetIsEl","bindAdvance","el","normalizePrefix","prefix","parseAttachTo","returnOpts","shouldCenterStep","resolvedAttachToOptions","uuid","d","c","r","_extends","_objectWithoutPropertiesLoose","excluded","sourceKeys","min","max","round","floor","createCoords","v","oppositeSideMap","oppositeAlignmentMap","clamp","start","end","evaluate","param","getSide","placement","getAlignment","getOppositeAxis","axis","getAxisLength","getSideAxis","getAlignmentAxis","getAlignmentSides","rects","rtl","alignment","alignmentAxis","length","mainAlignmentSide","getOppositePlacement","getExpandedPlacements","oppositePlacement","getOppositeAlignmentPlacement","getSideList","side","isStart","lr","rl","tb","bt","getOppositeAxisPlacements","flipAlignment","direction","list","expandPaddingObject","padding","getPaddingObject","rectToClientRect","rect","_excluded2","_excluded4","computeCoordsFromPlacement","_ref","reference","floating","sideAxis","alignLength","isVertical","commonX","commonY","commonAlign","coords","computePosition$1","config","__async","strategy","middleware","platform","validMiddleware","x","y","statefulPlacement","middlewareData","resetCount","name","fn","nextX","nextY","data","reset","detectOverflow","state","_await$platform$isEle","elements","boundary","rootBoundary","elementContext","altBoundary","paddingObject","clippingClientRect","offsetParent","offsetScale","elementClientRect","arrow","arrowDimensions","isYAxis","minProp","maxProp","clientProp","endDiff","startDiff","arrowOffsetParent","clientSize","centerToReference","largestPossiblePadding","minPadding","maxPadding","min$1","center","offset","alignmentOffset","flip","_middlewareData$flip","initialPlacement","_evaluate2","checkMainAxis","checkCrossAxis","specifiedFallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","detectOverflowOptions","isBasePlacement","fallbackPlacements","placements","overflow","overflows","overflowsData","sides","_middlewareData$flip2","_overflowsData$filter","nextIndex","nextPlacement","resetPlacement","a","b","_overflowsData$map$so","acc","shift","_evaluate4","limiter","crossAxis","mainAxis","mainAxisCoord","crossAxisCoord","minSide","maxSide","limitedCoords","limitShift","rawOffset","computedOffset","len","limitMin","limitMax","_middlewareData$offse","_middlewareData$offse2","isOriginSide","getNodeName","node","isNode","getWindow","_node$ownerDocument","getDocumentElement","isElement","isHTMLElement","isShadowRoot","isOverflowElement","overflowX","overflowY","display","getComputedStyle","isTableElement","isContainingBlock","webkit","isWebKit","css","getContainingBlock","currentNode","getParentNode","isLastTraversableNode","getNodeScroll","result","getNearestOverflowAncestor","parentNode","getOverflowAncestors","_node$ownerDocument2","scrollableAncestor","isBody","win","getCssDimensions","width","height","hasOffset","offsetWidth","offsetHeight","shouldFallback","unwrapElement","getScale","domElement","$","noOffsets","getVisualOffsets","shouldAddVisualOffsets","isFixed","floatingOffsetParent","getBoundingClientRect","includeScale","isFixedStrategy","clientRect","scale","visualOffsets","offsetWin","currentIFrame","iframeScale","iframeRect","left","top","convertOffsetParentRelativeRectToViewportRelativeRect","isOffsetParentAnElement","documentElement","scroll","offsets","offsetRect","getClientRects","getWindowScrollBarX","getDocumentRect","html","body","getViewportRect","visualViewport","visualViewportBased","getInnerBoundingClientRect","getClientRectFromClippingAncestor","clippingAncestor","hasFixedPositionAncestor","stopNode","getClippingElementAncestors","cache","cachedResult","currentContainingBlockComputedStyle","elementIsFixed","computedStyle","currentNodeIsContaining","ancestor","getClippingRect","clippingAncestors","firstClippingAncestor","clippingRect","accRect","getDimensions","getRectRelativeToOffsetParent","getTrueOffsetParent","polyfill","getOffsetParent","window","getElementRects","getOffsetParentFn","getDimensionsFn","isRTL","observeMove","onMove","io","timeoutId","root","cleanup","refresh","skip","threshold","insetTop","insetRight","insetBottom","insetLeft","isFirstUpdate","handleObserve","entries","ratio","autoUpdate","update","ancestorScroll","ancestorResize","elementResize","layoutShift","animationFrame","referenceEl","ancestors","cleanupIo","reobserveFrame","resizeObserver","firstEntry","frameId","prevRefRect","frameLoop","nextRefRect","computePosition","mergedOptions","platformWithCache","setupTooltip","attachToOptions","floatingUIOptions","getFloatingUIOptions","shouldCenter","setPosition","mergeTooltipConfig","tourOptions","destroyTooltip","floatingUIposition","resolve","placeArrow","arrowEl","arrowX","arrowY","addArrow","noop","assign","tar","src","k","run","blank_object","run_all","fns","is_function","thing","safe_not_equal","is_empty","obj","append","insert","anchor","detach","destroy_each","iterations","detaching","svg_element","text","space","empty","listen","attr","attribute","always_set_through_set_attribute","set_attributes","attributes","descriptors","children","toggle_class","toggle","current_component","set_current_component","component","get_current_component","onMount","afterUpdate","dirty_components","binding_callbacks","render_callbacks","flush_callbacks","resolved_promise","update_scheduled","schedule_update","flush","add_render_callback","seen_callbacks","flushidx","saved_component","e","callback","$$","dirty","flush_render_callbacks","filtered","targets","outroing","outros","group_outros","check_outros","transition_in","block","local","transition_out","get_spread_update","levels","updates","to_null_out","accounted_for","o","n","create_component","mount_component","customElement","fragment","after_update","new_on_destroy","destroy_component","make_dirty","init","instance","create_fragment","not_equal","props","append_styles","parent_component","ready","ret","rest","nodes","SvelteComponent","type","callbacks","$$props","create_fragment$8","button","button_aria_label_value","button_class_value","mounted","dispose","new_ctx","instance$8","$$self","$$invalidate","action","classes","disabled","label","secondary","getConfigOption","option","Shepherd_button","get_each_context","child_ctx","create_if_block$3","each_1_anchor","current","each_value","each_blocks","create_each_block","out","shepherdbutton","shepherdbutton_changes","create_fragment$7","footer","if_block","instance$7","buttons","Shepherd_footer","create_fragment$6","span","instance$6","cancelIcon","handleCancelClick","Shepherd_cancel_icon","create_fragment$5","h3","instance$5","labelId","title","h3_binding","$$value","Shepherd_title","create_if_block_1$1","shepherdtitle","shepherdtitle_changes","create_if_block$2","shepherdcancelicon","shepherdcancelicon_changes","create_fragment$4","header","t","if_block0","if_block1","instance$4","Shepherd_header","create_fragment$3","div","instance$3","descriptionId","div_binding","Shepherd_text","create_if_block_2","shepherdheader","shepherdheader_changes","create_if_block_1","shepherdtext","shepherdtext_changes","create_if_block$1","shepherdfooter","shepherdfooter_changes","create_fragment$2","show_if_2","t0","show_if_1","t1","show_if","if_block2","instance$2","Shepherd_content","create_if_block","create_fragment$1","shepherdcontent","div_aria_describedby_value","div_aria_labelledby_value","div_levels","div_data","shepherdcontent_changes","KEY_TAB","KEY_ESC","LEFT_ARROW","RIGHT_ARROW","getClassesArray","className","instance$1","classPrefix","firstFocusableElement","focusableElements","lastFocusableElement","dataStepId","hasCancelIcon","hasTitle","getElement","updateDynamicClasses","removeClasses","addClasses","oldClasses","newClasses","handleKeyDown","tour","Shepherd_element","Step","scrollToOptions","stepOptions","defaultStepOptions","stepClasses","defaultStepOptionsClasses","allClasses","uniqClasses","when","content","targetElement","cleanupSteps","steps","makeOverlayPath","w","h","topLeft","topRight","bottomRight","bottomLeft","svg","path","svg_class_value","_getScrollParent","_getVisibleHeight","scrollParent","elementRect","bottom","scrollRect","scrollTop","scrollBottom","openingProperties","modalIsVisible","rafId","pathDefinition","closeModalOpening","hide","_cleanupStepEventListeners","positionModal","modalOverlayOpeningPadding","modalOverlayOpeningRadius","setupForStep","_styleForStep","show","_preventModalBodyTouch","_preventModalOverlayTouch","_addStepEventListeners","rafLoop","svg_binding","Shepherd_modal","Shepherd","Tour","defaultTourOptions","opts","confirmCancelIsFunction","cancelMessage","id","currentStep","forward","modalContainer","tourName","isServerSide","NoOp","elementIsHidden","element","makeButton","button","classes","disabled","label","secondary","type","text","builtInButtonTypes","ShepherdService","id","completeOrCancel","steps","tour","step","allElementsPresent","selectedElement","tourObject","Shepherd","__ngFactoryType__","ɵɵdefineInjectable","InteractiveTourLoader","http","configService","jsonURL","allToursOptions","constructor","getPathToConfigFile","loadConfigTour","getJSON","subscribe","data","Error","getConfig","get","pipe","catchError","e","error","caught","getTourOptionData","toolName","undefined","nameInConfigFile","replace","ɵɵinject","HttpClient","ConfigService","factory","ɵfac","InteractiveTourService","configService","mediaService","languageService","interactiveTourLoader","shepherdService","previousStep","nextIndex","constructor","isAppHaveTour","loadConfigTour","haveTour","getConfig","undefined","isToolHaveTourConfig","toolName","getTourOptionData","disabledTourButton","stepConfig","conditions","condition","document","querySelector","isMobile","isTourDisplayInMobile","showInMobile","getButtons","buttonKind","classes","text","translate","instant","type","getAction","actionName","click","toLowerCase","addProgress","self","nbTry","maxTry","checkExist","setInterval","getCurrentStep","options","attachTo","element","cancel","clearInterval","currentStepElement","getElement","querySelectorAll","forEach","classList","add","header","stepsArray","steps","progress","createElement","className","innerText","indexOf","length","insertBefore","checkNext","index","tour","service","complete","splice","nextStep","_setupModal","show","id","executeAction","step","actionConfig","charAt","slice","action","executeActionPromise","Promise","resolve","waitFor","maxWait","getShepherdSteps","tourConfig","shepherdSteps","i","position","push","on","floatingUIOptions","middleware","autoPlacement","offset","mainAxis","filter","Boolean","beforeShowPromise","all","beforeChange","beforeShow","buttons","noBackButton","class","highlightClass","scrollTo","scrollToElement","canClickTarget","disableInteraction","title","when","onShow","hide","onHide","startTour","defaultStepOptions","cancelIcon","enabled","modal","confirmCancel","addSteps","tourObject","start","ɵɵinject","ConfigService","MediaService","LanguageService","InteractiveTourLoader","ShepherdService","factory","ɵfac","providedIn","ɵɵelementStart","ɵɵlistener","ɵɵrestoreView","_r1","ctx_r1","ɵɵnextContext","ɵɵresetView","startInteractiveTour","ɵɵelement","ɵɵelementEnd","ɵɵproperty","getClass","disabledTourButton","ɵɵpipeBind1","ɵɵadvance","presentationIcon","_r3","ɵɵtext","ɵɵtextInterpolate2","discoverTitleInLocale$","name","ɵɵelementContainerStart","ɵɵtemplate","InteractiveTourComponent_ng_container_0_button_1_Template","InteractiveTourComponent_ng_container_0_ng_template_2_Template","ɵɵtemplateRefExtractor","styleButton","raisedButton_r4","InteractiveTourComponent","interactiveTourService","toolService","iconService","PRESENTATION_PLAY_ICON","tourToStart","of","toolbox","getTourToStart","activeToolName","isActiveTool","activeTool$","getValue","undefined","isToolHaveTour","isToolHaveTourConfig","showTourButton","inMobileAndShow","isMobile","isTourDisplayInMobile","constructor","registerSvg","tour","startTour","ɵɵdirectiveInject","InteractiveTourService","ToolService","IconService","selectors","inputs","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","rf","ctx","InteractiveTourComponent_ng_container_0_Template","NgIf","MatButtonModule","MatButton","MatIconButton","NgClass","MatTooltipModule","MatTooltip","MatIconModule","MatIcon","AsyncPipe","IgoLanguageModule","TranslatePipe","IgoIconComponent","styles","encapsulation","IgoInteractiveTourModule","InteractiveTourService","InteractiveTourLoader","imports","InteractiveTourComponent","ɵɵelementStart","ɵɵlistener","ɵɵrestoreView","_r1","ctx_r1","ɵɵnextContext","ɵɵresetView","openGuide","ɵɵtext","ɵɵelementEnd","ɵɵproperty","loading","ɵɵpipeBind1","ɵɵadvance","ɵɵtextInterpolate","menu_r3","guide_r5","_r4","$implicit","ɵɵtextInterpolate1","formatFileName","ɵɵelement","headerHtml","AboutToolComponent","configService","auth","http","cdRef","languageService","configOptions","_headerHtml","value","Array","isArray","join","html","_html","_discoverTitleInLocale","discoverTitleInLocale$","of","discoverTitleInLocale","trainingGuideURLs","effectiveVersion","baseUrlProfil","baseUrlGuide","constructor","translate","instant","getConfigs","configVersion","version","app","lib","storage","url","depot","guideUrl","ngOnInit","authenticated","context","get","subscribe","profil","recast","guides","detectChanges","trainingGuides","guide","responseType","window","open","name","split","index","indexOf","slice","ɵɵdirectiveInject","ConfigService","AuthService","HttpClient","ChangeDetectorRef","LanguageService","selectors","inputs","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","rf","ctx","ɵɵtemplate","AboutToolComponent_button_2_Template","AboutToolComponent_button_3_Template","AboutToolComponent_button_6_Template","AboutToolComponent_igo_custom_html_7_Template","length","ɵɵpipeBind2","ɵɵpureFunction1","_c0","InteractiveTourComponent","NgIf","MatButtonModule","MatButton","MatTooltipModule","MatTooltip","MatIconModule","MatIcon","MatMenuModule","MatMenu","MatMenuItem","MatMenuTrigger","NgFor","CustomHtmlComponent","IgoLanguageModule","TranslatePipe","styles","__decorate","ToolComponent","title","icon","__metadata","MapState","mapService","projectionService","storageService","configService","showAllLegendsValue","_legendToolShowAll","value","map","_map","constructor","IgoMap","controls","scaleLine","attribution","collapsed","setMap","ɵɵinject","MapService","ProjectionService","StorageService","ConfigService","factory","ɵfac","providedIn","CatalogState","catalogStore","_catalogStore","catalogItemsStores","Map","constructor","authService","EntityStore","authenticate$","subscribe","clearCatalogItemsStores","getCatalogItemsStore","catalog","get","id","setCatalogItemsStore","store","set","clear","ɵɵinject","AuthService","factory","ɵfac","providedIn","ɵɵelement","ɵɵproperty","ctx_r1","catalog","store_r1","map","toggleCollapsedGroup","CatalogBrowserToolComponent","catalogService","catalogState","mapState","authService","store$","BehaviorSubject","undefined","catalog$$","constructor","ngOnInit","catalog$","catalogStore","stateView","firstBy$","record","state","selected","authenticate$","combineLatest","subscribe","entity","loadCatalogItems","ngOnDestroy","unsubscribe","store","getCatalogItemsStore","next","EntityStore","setCatalogItemsStore","pipe","take","items","load","ɵɵdirectiveInject","CatalogService","CatalogState","MapState","AuthService","selectors","inputs","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","rf","ctx","ɵɵtemplate","CatalogBrowserToolComponent_igo_catalog_browser_0_Template","ɵɵpipeBind1","NgIf","CatalogBrowserComponent","AsyncPipe","encapsulation","changeDetection","__decorate","ToolComponent","name","title","parent","__metadata","ImportExportType","ImportExportMode","ImportExportState","importExportType$","BehaviorSubject","layer","selectedMode$","import","exportOptions$","undefined","setImportExportType","type","next","setMode","mode","setsExportOptions","exportOptions","factory","ɵfac","providedIn","ToolState","toolService","importExportState","toolbox","openSidenav$","BehaviorSubject","undefined","constructor","toolToActivateFromOptions","toolToActivate","tool","exportOptions","exportOptions$","value","layers","options","featureInMapExtent","setsExportOptions","setMode","ImportExportMode","export","getTool","activateTool","next","ɵɵinject","ToolService","ImportExportState","factory","ɵfac","providedIn","CatalogLibraryToolComponent","catalogService","catalogState","toolState","storageService","store","catalogStore","addCatalogAllowed","predefinedCatalogs","selectedCatalogId","id","set","StorageScope","SESSION","currentTool","toolbox","getCurrentPreviousToolName","lastTool","constructor","ngOnInit","count","loadCatalogs","onCatalogSelectChange","event","selected","activateTool","pipe","take","subscribe","catalogs","clear","load","concat","get","ɵɵdirectiveInject","CatalogService","CatalogState","ToolState","StorageService","selectors","inputs","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","rf","ctx","ɵɵelementStart","ɵɵlistener","$event","ɵɵelementEnd","ɵɵproperty","CatalogLibaryComponent","encapsulation","changeDetection","__decorate","ToolComponent","name","title","icon","__metadata","ContextEditorToolComponent","toolState","constructor","submitSuccessed","toolbox","activatePreviousTool","ɵɵdirectiveInject","ToolState","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","rf","ctx","ɵɵelementStart","ɵɵlistener","ɵɵelementEnd","ContextEditComponent","ContextEditBindingDirective","encapsulation","__decorate","ToolComponent","name","title","icon","parent","__metadata","ContextManagerToolComponent","toolState","mapState","toolToOpenOnContextChange","map","constructor","editContext","toolbox","activateTool","managePermissions","ɵɵdirectiveInject","ToolState","MapState","selectors","inputs","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","rf","ctx","ɵɵelementStart","ɵɵlistener","ɵɵelementEnd","ɵɵproperty","ContextListComponent","ContextListBindingDirective","encapsulation","__decorate","ToolComponent","name","title","icon","__metadata","ContextPermissionManagerToolComponent","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","rf","ctx","ɵɵelement","ContextPermissionsComponent","ContextPermissionsBindingDirective","encapsulation","__decorate","ToolComponent","name","title","icon","parent","LayerListToolState","keyword$","BehaviorSubject","sortAlpha$","undefined","onlyVisible$","selectedTab$","setKeyword","keyword","next","setSortAlpha","sort","setOnlyVisible","onlyVisible","setSelectedTab","tab","getLayerListControls","value","sortAlpha","factory","ɵfac","providedIn","ContextShareToolComponent","mapState","layerListToolState","map","layerListControls","getLayerListControls","constructor","ɵɵdirectiveInject","MapState","LayerListToolState","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","rf","ctx","ɵɵelement","ɵɵproperty","ShareMapComponent","encapsulation","__decorate","ToolComponent","name","title","icon","__metadata","ContextState","contextService","toolService","toolState","languageService","context$","BehaviorSubject","undefined","constructor","subscribe","context","onContextChange","toolsChanged$","updateTools","setContext","next","toolbox","tools","forEach","contextTool","baseTool","getTool","name","options","Object","assign","tool","push","parent","parentIndex","findIndex","el","children","setTools","setToolbar","toolbar","concat","ɵɵinject","ContextService","ToolService","ToolState","LanguageService","factory","ɵfac","providedIn","DirectionState","mapState","zoomToActiveRoute$","Subject","stopsStore","StopsStore","stopsFeatureStore","routesFeatureStore","stepFeatureStore","debounceTime","constructor","StopsFeatureStore","map","RoutesFeatureStore","StepsFeatureStore","layerController","all$","subscribe","getById","deleteMany","all","ɵɵinject","MapState","factory","ɵfac","providedIn","DirectionsToolComponent","directionState","mapState","languageService","messageService","storageService","contextState","authService","currentContextUri","stopsStore","debounceTime","stopsFeatureStore","routesFeatureStore","stepFeatureStore","zoomOnActiveRoute$","zoomToActiveRoute$","authenticated$","authenticate$","map","constructor","ngOnInit","get","info","timeOut","set","StorageScope","SESSION","context$","subscribe","c","authenticated","uri","ɵɵdirectiveInject","DirectionState","MapState","LanguageService","MessageService","StorageService","ContextState","AuthService","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","rf","ctx","ɵɵelement","ɵɵproperty","IgoDirectionsModule","DirectionsComponent","encapsulation","__decorate","ToolComponent","name","title","icon","__metadata","DrawState","mapState","stores","layersID","drawControls","activeDrawingLayer","constructor","map","layerController","all$","subscribe","forEach","layerId","getById","deletedStore","find","store","layer","id","deleteMany","all","splice","indexOf","drawControlIndex","findIndex","dc","FeatureStore","ɵɵinject","MapState","factory","ɵfac","providedIn","DrawingToolComponent","drawState","mapState","stores","map","layersID","drawControls","dc","activeDrawingLayer","value","addLayersID","layerID","push","addDrawControls","constructor","ɵɵdirectiveInject","DrawState","MapState","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","rf","ctx","ɵɵelementStart","ɵɵlistener","$event","ɵɵelementEnd","ɵɵproperty","DrawComponent","encapsulation","changeDetection","__decorate","ToolComponent","name","title","icon","__metadata","toolSlideInOut","speed","type","trigger","state","style","transform","transition","animate","ActiveOgcFilterToolComponent","mapState","map","layer","lay","layerController","all","isLayerItem","isSelected","animate","constructor","ɵɵdirectiveInject","MapState","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","rf","ctx","ɵɵelement","ɵɵproperty","OgcFilterableItemComponent","encapsulation","data","animation","toolSlideInOut","__decorate","ToolComponent","name","title","icon","parent","__metadata","toolSlideInOut","speed","type","trigger","state","style","transform","transition","animate","ActiveTimeFilterToolComponent","mapState","map","layer","lay","layerController","all","isLayerItem","isSelected","animate","constructor","ɵɵdirectiveInject","MapState","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","rf","ctx","ɵɵelement","ɵɵproperty","TimeFilterItemComponent","encapsulation","data","animation","toolSlideInOut","__decorate","ToolComponent","name","title","icon","parent","__metadata","OgcFilterToolComponent","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","rf","ctx","ɵɵelement","OgcFilterableListComponent","OgcFilterableListBindingDirective","encapsulation","__decorate","ToolComponent","name","title","icon","StorageState","igoStorageService","storageService","constructor","ɵɵinject","StorageService","factory","ɵfac","providedIn","import_moment","handleZoomAuto","workspace","storageService","entityStore","getStrategyOfType","FeatureStoreSelectionStrategy","setMotion","get","FeatureMotion","Default","None","getWorkspaceActions","rowsInMapExtentCheckCondition$","selectOnlyCheckCondition$","ogcFilterWidget","zoomAuto$","maximize$","languageService","mediaService","toolState","actions","id","checkbox","title","tooltip","checkCondition","handler","set","mapExtentStrategyActiveToolTip","next","value","icon","ws","state","updateMany","view","all","selected","args","availability","noElementSelected","filterStrategy","EntityStoreFilterCustomFuncStrategy","layersWithSelection","EntityStoreFilterSelectionStrategy","active","layer","toolToActivateFromOptions","tool","options","layers","featureInMapExtent","widget","activateWidget","map","translate","instant","display","pipe","v","isMobile","dateTransform","Date","doc","jsPDF","orientation","totalPagesExp","text","autoTable","startY","tableWidth","html","horizontalPageBreak","styles","cellPadding","minCellWidth","fontSize","didDrawPage","data","str","getNumberOfPages","putTotalPages","setFontSize","pageSize","internal","pageHeight","height","getHeight","settings","margin","left","save","returnActions","dataSource","ogcFilters","enabled","filter","action","printable","date","format","moment","EditionActionsService","ogcFilterWidget","storageState","languageService","mediaService","toolState","maximize$","zoomAuto$","BehaviorSubject","storageChange$$","storageService","zoomAuto","get","constructor","ngOnDestroy","unsubscribe","loadActions","workspace","rowsInMapExtentCheckCondition$","selectOnlyCheckCondition$","actions","buildActions","actionStore","load","next","storageChange$","pipe","skipWhile","storageChange","key","event","StorageServiceEventEnum","CLEARED","subscribe","handleZoomAuto","getWorkspaceActions","ɵɵinject","OgcFilterWidget","StorageState","LanguageService","MediaService","ToolState","factory","ɵfac","providedIn","FeatureActionsService","storageState","languageService","toolState","mediaService","maximize$","zoomAuto$","BehaviorSubject","storageChange$$","storageService","zoomAuto","get","constructor","ngOnDestroy","unsubscribe","loadActions","workspace","rowsInMapExtentCheckCondition$","selectOnlyCheckCondition$","actions","buildActions","actionStore","load","next","storageChange$","pipe","skipWhile","storageChange","key","event","StorageServiceEventEnum","CLEARED","subscribe","handleZoomAuto","getWorkspaceActions","undefined","ɵɵinject","StorageState","LanguageService","ToolState","MediaService","factory","ɵfac","providedIn","WfsActionsService","ogcFilterWidget","storageState","languageService","mediaService","toolState","maximize$","selectOnlyCheckCondition$","BehaviorSubject","zoomAuto$","storageChange$$","storageService","zoomAuto","get","constructor","ngOnDestroy","unsubscribe","loadActions","workspace","rowsInMapExtentCheckCondition$","actions","buildActions","actionStore","load","next","storageChange$","pipe","skipWhile","storageChange","key","event","StorageServiceEventEnum","CLEARED","subscribe","handleZoomAuto","getWorkspaceActions","ɵɵinject","OgcFilterWidget","StorageState","LanguageService","MediaService","ToolState","factory","ɵfac","providedIn","WorkspaceState","featureActionsService","wfsActionsService","editionActionsService","storageService","workspacePanelExpanded","workspaceEnabled$","BehaviorSubject","rowsInMapExtentCheckCondition$","selectOnlyCheckCondition$","workspaceMaximize$","actionMaximize$$","rowsInMapExtentCheckCondition$$","selectOnlyCheckCondition$$","activeWorkspace$$","activeWorkspaceWidget$$","activeWorkspaceWidget$","undefined","workspace$","store","_store","workspaceSelection","value","entityStore","stateView","manyBy","r","state","selected","workspaceSelection$","manyBy$","of","constructor","get","initWorkspaces","WorkspaceStore","firstBy$","record","active","subscribe","workspace","entity","next","all$","workspaces","map","wks","actionStore","empty","WfsWorkspace","loadActions","FeatureWorkspace","EditionWorkspace","push","maximize$","maximized","setWorkspaceIsMaximized","unsubscribe","widget$","widget","rowsInMapExtent","all","filterStrategy","getStrategyOfType","EntityStoreFilterCustomFuncStrategy","activate","deactivate","selectOnly","EntityStoreFilterSelectionStrategy","set","setActiveWorkspaceById","id","wksFromId","find","activateWorkspace","setActiveWorkspaceByTitle","title","wksFromTitle","ngOnDestroy","teardownWorkspaces","a","clear","ɵɵinject","FeatureActionsService","WfsActionsService","EditionActionsService","StorageService","factory","ɵfac","providedIn","ɵɵelementContainerStart","ɵɵelement","ɵɵadvance","ɵɵproperty","feature_r1","SpatialFilterToolComponent","matIconRegistry","spatialFilterService","layerService","mapState","messageService","languageService","importExportState","toolState","workspaceState","cdRef","map","type","itemType","SpatialFilterItemType","Address","freehandDrawIsActive","layers","activeLayers","queryType","thematics","zone","zoneWithBuffer","buffer","iterator","selectedFeature$","BehaviorSubject","undefined","format","olFormatGeoJSON","store","EntityStore","spatialListStore","loading","thematicLength","measureUnit","MeasureLengthUnit","Meters","unsubscribe$","Subject","defaultStyle","constructor","ngOnInit","layer","layerController","all","title","includes","translate","instant","push","ngOnDestroy","next","complete","getOutputType","event","getOutputQueryType","loadFilterList","activateExportTool","ids","re","RegExp","match","id","setMode","ImportExportMode","export","setsExportOptions","toolbox","activateTool","activateWorkspace","record","layerToOpenWks","entities$","pipe","takeUntil","subscribe","length","Thematics","thematic","zeroResults","find","name","toString","forEach","workspacePanelExpanded","setActiveWorkspaceById","selectWorkspaceEntity","ol","on","workspace","entityStore","state","updateAll","selected","added","meta","updateMany","features","sort","a","b","properties","nom","clear","load","getOutputToggleSearch","loadThematics","getOutputClearSearch","clearMap","remove","SpatialFilterType","Predefined","Point","tryAddFeaturesToMap","Kilometers","Polygon","observables$","loadFilterItem","tap","insertMany","featuresPoint","featuresLinePoly","idPoint","idLinePoly","feature","geometry","longitude","coordinates","latitude","tryAddPointToMap","tryAddLayerToMap","detectChanges","alert","timeOut","forkJoin","onZoneChange","zoomToFeatureExtent","i","isLayerItem","options","_internal","code","startsWith","index","indexOf","splice","_feature","resolution","Style","image","Circle","radius","Math","cos","PI","fill","Fill","color","stroke","Stroke","width","isIgoInternalLayer","enabled","sourceOptions","queryable","visible","createAsyncLayer","take","featuresOl","f","featureToOl","projection","set","dataSource","addFeatures","setStyle","add","icon","style","createSvgIcon","createOverlayMarkerStyle","distance","getSource","previousLayer","prevLayer","pushLayer","getNamedSvgIcon","svgObj","xmlSerializer","XMLSerializer","setAttribute","svg","serializeToString","Icon","src","olFeature","readFeature","dataProjection","featureProjection","moveToOlFeatures","viewController","FeatureMotion","Zoom","lay","ɵɵdirectiveInject","MatIconRegistry","SpatialFilterService","LayerService","MapState","MessageService","LanguageService","ImportExportState","ToolState","WorkspaceState","ChangeDetectorRef","selectors","inputs","standalone","ɵɵStandaloneFeature","decls","vars","consts","template","rf","ctx","ɵɵelementStart","ɵɵlistener","$event","ɵɵelementEnd","ɵɵtemplate","SpatialFilterToolComponent_ng_container_2_Template","ɵɵpipeBind1","SpatialFilterTypeComponent","SpatialFilterItemComponent","FeatureDetailsComponent","NgIf","AsyncPipe","styles","changeDetection","__decorate","ToolComponent","SELECTION_MARKER_ICON","__metadata","TimeFilterToolComponent","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","rf","ctx","ɵɵelement","TimeFilterListComponent","TimeFilterListBindingDirective","encapsulation","__decorate","ToolComponent","name","title","icon","ɵɵelement","ɵɵproperty","field_r3","ɵɵelementStart","ɵɵtemplate","DataIssueReporterToolComponent_igo_form_0_div_2_igo_form_field_1_Template","ɵɵelementEnd","ɵɵadvance","form_r4","fields","ɵɵlistener","$event","ɵɵrestoreView","_r1","ctx_r1","ɵɵnextContext","ɵɵresetView","onSubmit","DataIssueReporterToolComponent_igo_form_0_div_2_Template","clearForm","ɵɵtext","ɵɵpipeBind1","data$","length","ɵɵtextInterpolate1","submitDisabled","DataIssueReporterToolComponent","mapState","formService","languageService","messageService","httpClient","url","map","form$","BehaviorSubject","undefined","valueChanges$$","constructor","ngOnInit","combineLatest","language$","layerController","all$","subscribe","_language","layers","baseLayerOrShownInLayerList","filter","l","isBaseLayer","showInLayerList","value","title","id","name","translate","instant","type","inputs","geometryTypeField","geometryType","drawGuideField","drawGuide","drawGuidePlaceholder","drawStyle","Style","stroke","Stroke","color","width","fill","Fill","image","Circle","radius","overlayStyle","options","cols","choices","validator","Validators","required","email","config","field","form","control","valueChanges","valid","next","ngOnDestroy","unsubscribe","reset","data","submitTitle","post","success","alert","JSON","stringify","ɵɵdirectiveInject","MapState","FormService","LanguageService","MessageService","HttpClient","selectors","decls","vars","consts","template","rf","ctx","DataIssueReporterToolComponent_igo_form_0_Template","__decorate","ToolComponent","icon","__metadata","ɵɵelementStart","ɵɵlistener","$event","ɵɵrestoreView","_r1","ctx_r1","ɵɵnextContext","ɵɵresetView","modeChanged","exportOptionsChange","ɵɵelementEnd","ɵɵelement","ɵɵadvance","ɵɵproperty","ɵɵpipeBind1","contextState","context$","uri","map","selectFirstProj","projectionsLimitations","workspaceStore","importExportState","selectedMode$","exportOptions$","_r3","ImportExportToolComponent","mapState","workspaceState","store","importExportType","ImportExportType","layer","importExportShowBothType","constructor","ngOnInit","selectType","selectMode","importExportType$","next","userSelectedType","value","undefined","setImportExportType","userSelectedMode","setMode","ImportExportMode","import","mode","exportOptions","setsExportOptions","importExportTypeChange","event","ɵɵdirectiveInject","MapState","ImportExportState","WorkspaceState","ContextState","selectors","inputs","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","rf","ctx","ɵɵtemplate","ImportExportToolComponent_mat_tab_group_0_Template","ImportExportToolComponent_igo_import_export_1_Template","ImportExportToolComponent_igo_context_import_export_2_Template","NgIf","MatTabsModule","MatTab","MatTabGroup","ImportExportComponent","ContextImportExportComponent","AsyncPipe","IgoLanguageModule","TranslatePipe","styles","changeDetection","__decorate","ToolComponent","name","title","icon","__metadata","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵelement","ɵɵadvance","ɵɵtextInterpolate","ɵɵpipeBind1","ɵɵproperty","ctx_r1","coordinates","ɵɵlistener","$event","i0","ɵɵrestoreView","_r3","ɵɵresetView","stopPropagation","projection_r4","ɵɵtextInterpolate1","translatedValue","alias","AdvancedCoordinatesComponent","mapState","languageService","messageService","cdRef","storageService","config","formBuilder","formattedScale$","BehaviorSubject","projections$","form","currentCenterDefaultProj","center","inMtmZone","inLambert2","mapState$$","formStatus$$","_projectionsLimitations","projectionsConstraints","defaultProj","currentZones","utm","undefined","mtm","units","map","inputProj","get","value","patchValue","projectionsLimitations","constructor","translate","instant","code","translateKey","zone","def","extent","computeProjections","buildForm","ngOnInit","viewController","state$","pipe","debounceTime","subscribe","setScaleValue","updateCoordinates","valueChanges","tempInputProj","find","val","pos","positionInList","updateZoneMtmUtm","mapCenter$","next","getCoordinates","getCenter","ngOnDestroy","unsubscribe","formatScale","getScale","zoneMtm","zoneUtm","decimal","includes","c","toFixed","currentMtmZone","currentUtmZone","back2quebec","zoneChange","updateProjectionsZoneChange","checkLambert","set","StorageScope","SESSION","copyTextToClipboard","Clipboard","copy","toString","success","displayCenter","toggle","group","Validators","required","modifiedProj","p","filter","computeProjectionsConstraints","projections","wgs84","push","nad83","webMercator","splice","order","configProjection","projFromConfig","getConfig","concat","pushMtm","tk","position","iter","projection","forEach","match","currentExtentWGS","transformExtent","ɵɵdirectiveInject","MapState","LanguageService","MessageService","ChangeDetectorRef","StorageService","ConfigService","UntypedFormBuilder","selectors","inputs","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","rf","ctx","ɵɵtemplate","AdvancedCoordinatesComponent_mat_form_field_2_Template","AdvancedCoordinatesComponent_ng_template_3_Template","ɵɵtemplateRefExtractor","AdvancedCoordinatesComponent_mat_form_field_5_Template","AdvancedCoordinatesComponent_ng_template_6_Template","_r1","ɵɵtwoWayListener","ɵɵtwoWayBindingSet","AdvancedCoordinatesComponent_mat_option_19_Template","checked","elseBlock_r5","elseBlock2_r6","ɵɵtwoWayProperty","ɵɵtextInterpolate2","getZoom","ɵɵpipeBind2","getResolution","NgIf","MatFormFieldModule","MatFormField","MatLabel","MatInputModule","MatInput","MatButtonModule","MatIconButton","MatIconModule","MatIcon","FormsModule","ɵNgNoValidate","NgControlStatusGroup","ReactiveFormsModule","FormGroupDirective","MatSelectModule","MatSelect","MatOption","NgFor","MatOptionModule","MatSlideToggleModule","MatSlideToggle","AsyncPipe","DecimalPipe","IgoLanguageModule","TranslatePipe","styles","ɵɵelementStart","ɵɵlistener","ɵɵrestoreView","_r4","ɵɵnextContext","e_r2","ɵɵreference","ctx_r2","ɵɵresetView","applyNewLayers","ɵɵtext","ɵɵelementEnd","ɵɵproperty","layer_r5","ɵɵadvance","ɵɵtextInterpolate","title","_r1","selectAll","ɵɵelement","ɵɵtemplate","AdvancedSwipeComponent_div_0_mat_option_12_Template","$event","startSwipe","checked","form","ɵɵpipeBind1","ɵɵtextInterpolate1","userControlledLayerList","swipe","_r6","searchEmit","catalogEmit","contextEmit","AdvancedSwipeComponent","mapState","formBuilder","toolState","layerList","layers","res","listForSwipe","map","constructor","buildForm","ngOnInit","layerController","all$","subscribe","filter","layer","isLayerItem","baseLayer","showInLayerList","displayed","ngOnDestroy","swipeEnabled$","next","group","Validators","required","toggle","value","push","selectedFeatures$","e","_selected","allLayers","length","controls","setValue","toolbox","activateTool","ɵɵdirectiveInject","MapState","UntypedFormBuilder","ToolState","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","rf","ctx","AdvancedSwipeComponent_div_0_Template","AdvancedSwipeComponent_ng_template_1_Template","ɵɵtemplateRefExtractor","noLayersBlock_r7","NgIf","FormsModule","ɵNgNoValidate","NgControlStatus","NgControlStatusGroup","ReactiveFormsModule","FormGroupDirective","FormControlName","MatFormFieldModule","MatFormField","MatLabel","MatSelectModule","MatSelect","MatOption","MatOptionModule","MatDividerModule","MatDivider","NgFor","MatSlideToggleModule","MatSlideToggle","MatListModule","MatList","MatListItem","MatListItemIcon","MatListItemTitle","MatIconModule","MatIcon","IgoLanguageModule","TranslatePipe","styles","AdvancedMapToolComponent","mapState","tracking$","map","geolocationController","followPosition$","constructor","toggleTracking","value","tracking","toggleFollow","followPosition","ɵɵdirectiveInject","MapState","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵelement","ɵɵlistener","$event","checked","ɵɵadvance","ɵɵtextInterpolate1","ɵɵpipeBind1","ɵɵproperty","AdvancedSwipeComponent","MatDividerModule","MatDivider","AdvancedCoordinatesComponent","MatSlideToggleModule","MatSlideToggle","AsyncPipe","IgoLanguageModule","TranslatePipe","styles","__decorate","ToolComponent","name","title","icon","__metadata","ɵɵelementStart","ɵɵlistener","ɵɵrestoreView","_r1","ctx_r1","ɵɵnextContext","ɵɵresetView","activateWorkspace","ɵɵtext","ɵɵelementEnd","ɵɵproperty","ɵɵpipeBind1","color","WorkspaceButtonComponent","workspaceState","hasWorkspace$","BehaviorSubject","hasWorkspace$$","layer$","undefined","layer","value","_layer","next","constructor","ngOnInit","combineLatest","workspaceEnabled$","subscribe","enabled","isLayerItem","options","workspace","ngOnDestroy","unsubscribe","workspace$","id","workspacePanelExpanded","setActiveWorkspaceById","ɵɵdirectiveInject","WorkspaceState","selectors","inputs","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","rf","ctx","ɵɵtemplate","WorkspaceButtonComponent_button_0_Template","NgIf","MatButtonModule","MatIconButton","MatTooltipModule","MatTooltip","MatIconModule","MatIcon","AsyncPipe","IgoLanguageModule","TranslatePipe","changeDetection","ɵɵelement","ɵɵelementStart","ɵɵlistener","layer_r2","ɵɵrestoreView","_r1","layer","ctx_r2","ɵɵnextContext","ɵɵresetView","activateExport","ɵɵelementEnd","ɵɵproperty","ɵɵadvance","ogcButton","timeButton","ɵɵtemplate","MapDetailsToolComponent_igo_layer_viewer_0_ng_template_1_Template","ɵɵtemplateRefExtractor","map","layerViewerOptions","excludeBaseLayers","isDesktop","ɵɵtext","ɵɵtextInterpolate1","ɵɵpipeBind1","_r4","searchEmit","_r5","catalogEmit","_r6","contextEmit","MapDetailsToolComponent_ng_template_2_mat_list_0_p_4_Template","MapDetailsToolComponent_ng_template_2_mat_list_0_mat_list_item_5_Template","MapDetailsToolComponent_ng_template_2_mat_list_0_mat_list_item_6_Template","MapDetailsToolComponent_ng_template_2_mat_list_0_mat_list_item_7_Template","layerAdditionAllowed","searchToolInToolbar","catalogToolInToolbar","contextToolInToolbar","MapDetailsToolComponent_ng_template_2_mat_list_0_Template","delayedShowEmptyMapContent","MapDetailsToolComponent","mapState","toolState","searchSourceService","importExportState","configService","mediaService","cdr","toggleLegendOnVisibilityChange","expandLegendOfVisibleLayers","updateLegendOnResolutionChange","layerListControls","queryBadge","_layerViewerOptions","__spreadValues","filterAndSortOptions","layerFilterAndSortOptions","legend","showForVisibleLayers","showOnVisibilityChange","updateOnResolutionChange","layers$","layerController","all$","filterSortOptions","Object","assign","showToolbar","LayerListControlsEnum","default","always","never","toolbox","getToolbar","indexOf","getSources","filter","sourceCanSearch","s","available","getType","length","constructor","getConfig","ngOnInit","handleMedia","setTimeout","detectChanges","activateTool","id","options","workspace","workspaceId","setsExportOptions","layers","setMode","ImportExportMode","export","media$","subscribe","result","Media","Desktop","ɵɵdirectiveInject","MapState","ToolState","SearchSourceService","ImportExportState","ConfigService","MediaService","ChangeDetectorRef","selectors","inputs","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","rf","ctx","MapDetailsToolComponent_igo_layer_viewer_0_Template","MapDetailsToolComponent_ng_template_2_Template","empty_r7","NgIf","LayerViewerComponent","WorkspaceButtonComponent","ExportButtonComponent","OgcFilterButtonComponent","TimeFilterButtonComponent","TrackFeatureButtonComponent","MetadataButtonComponent","MatListModule","MatList","MatListItem","MatListItemIcon","MatListItemTitle","MatIconModule","MatIcon","AsyncPipe","IgoLanguageModule","TranslatePipe","styles","__decorate","ToolComponent","name","title","icon","__metadata","ɵɵelementStart","ɵɵlistener","$event","ɵɵrestoreView","_r1","ctx_r1","ɵɵnextContext","ɵɵresetView","onShowAllLegends","ɵɵelementEnd","ɵɵproperty","excludeBaseLayers","allowShowAllLegends","updateLegendOnResolutionChange","ɵɵpipeBind1","showAllLegendsValue$","ɵɵtemplate","MapLegendToolComponent_1_ng_template_0_Template","ɵɵtext","ɵɵadvance","ɵɵtextInterpolate1","visibleLayers$","length","_r3","searchEmit","_r4","catalogEmit","_r5","contextEmit","MapLegendToolComponent_ng_template_6_mat_list_0_p_4_Template","MapLegendToolComponent_ng_template_6_mat_list_0_mat_list_item_5_Template","MapLegendToolComponent_ng_template_6_mat_list_0_mat_list_item_6_Template","MapLegendToolComponent_ng_template_6_mat_list_0_mat_list_item_7_Template","layerAdditionAllowed","searchToolInToolbar","catalogToolInToolbar","contextToolInToolbar","MapLegendToolComponent_ng_template_6_mat_list_0_Template","delayedShowEmptyMapContent","MapLegendToolComponent","mapState","toolState","searchSourceService","cdRef","layers$","BehaviorSubject","change$","ReplaySubject","resolution$$","visibleOrInRangeLayers$$","showAllLegendsValue","layerListControls","map","visibleOrInRangeLayers$","pipe","layers","filter","layer","displayed","visible","toolbox","getToolbar","indexOf","getSources","sourceCanSearch","s","available","getType","constructor","ngOnInit","combineLatest","layerController","all$","viewController","resolution$","debounceTime","subscribe","bunch","next","showInLayerList","isBaseLayer","undefined","setTimeout","detectChanges","event","showAllLegend","getValue","visibleOrInRangeLayers","value","ngOnDestroy","unsubscribe","activateTool","ɵɵdirectiveInject","MapState","ToolState","SearchSourceService","ChangeDetectorRef","selectors","inputs","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","rf","ctx","MapLegendToolComponent_igo_layer_legend_list_0_Template","MapLegendToolComponent_1_Template","MapLegendToolComponent_p_3_Template","MapLegendToolComponent_ng_template_6_Template","ɵɵtemplateRefExtractor","emptyLayers_r6","NgIf","LayerLegendListComponent","LayerLegendListBindingDirective","MatListModule","MatList","MatListItem","MatListItemIcon","MatListItemTitle","MatIconModule","MatIcon","AsyncPipe","IgoLanguageModule","TranslatePipe","styles","__decorate","ToolComponent","name","title","icon","__metadata","MapProximityState","mapState","storageService","defaultProximityRadiusValue","enabled$","BehaviorSubject","proximityRadiusValue$","proximitylocationType$","proximityFeatureStore","subs$$","currentPositionCoordinate$","undefined","map","constructor","FeatureStore","get","ol","once","subscribeProximityMonitor","push","combineLatest","interval","geolocationController","position$","pipe","debounceTime","subscribe","bunch","clear","enabled","layers","layerController","all","currentPos","value","locationType","proximityRadiusValue","set","coord","position","transform","projection","mapCenter$","next","viewController","getCenter","coordLonLat","roundedCoordLonLat","roundCoordTo","filter","layer","isLayerItem","olLayerVector","dataSource","options","queryable","visible","isInResolutionsRange","layerToMonitor","layerSource","getSource","olFeaturesAtCoordinate","getFeaturesAtCoordinate","length","olFeatureAtCoordinate","featureAtThisPosition","featureFromOl","title","getQueryTitle","addFeatureToStore","closestOlFeature","getClosestFeatureToCoordinate","closestOlGeom","getGeometry","closestFeature","geometryClosestPoint","getClosestPoint","linebetween","olLineString","lineLength","measureOlGeometryLength","coordFromCalculatedDistance","feature","distance","featureId","uuid","getView","getProjection","olGeometry","geometry","GeoJSON","writeGeometryObject","featureProjection","dataProjection","update","type","FEATURE","getCode","properties","__spreadProps","__spreadValues","id","element","layerSrcId","layerSrcTitle","meta","source","dataSourceOptions","queryTitle","getLabelMatch","labelMatch","label","labelToGet","Array","from","matchAll","forEach","v","replace","ɵɵinject","MapState","StorageService","factory","ɵfac","providedIn","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ɵɵadvance","ɵɵproperty","ɵɵpipeBind1","coord_r2","coord2_r3","ɵɵlistener","ɵɵrestoreView","_r4","ctx_r4","ɵɵnextContext","ɵɵresetView","copyTextToClipboard","ɵɵtext","MapProximityToolComponent","mapState","mapProximityState","languageService","messageService","subs$$","table","maxDistance","proximityRadiusValue$","value","next","map","userDefinedMapCenter","userDefinedFollowPosition","tableTemplate","constructor","selection","selectMany","selectionCheckbox","sort","columns","name","title","translate","instant","valueAccessor","localFeature","properties","element","NumberUtils","roundToNDecimal","distance","ngOnInit","enabled$","geolocationController","followPosition","mapCenter$","push","proximitylocationType$","subscribe","v","ngOnDestroy","s","unsubscribe","onLocationTypeChange","e","Clipboard","copy","currentPositionCoordinate$","toString","success","ɵɵdirectiveInject","MapState","MapProximityState","LanguageService","MessageService","selectors","viewQuery","rf","ctx","ɵɵtemplate","MapProximityToolComponent_mat_form_field_3_Template","MapProximityToolComponent_mat_form_field_5_Template","MapProximityToolComponent_button_7_Template","$event","i0","_r1","ɵɵtwoWayListener","ɵɵtwoWayBindingSet","proximityFeatureStore","length","ɵɵtextInterpolate","ɵɵpropertyInterpolate","ɵɵtwoWayProperty","EntityTableComponent","NgIf","MatFormFieldModule","MatFormField","MatLabel","MatInputModule","MatInput","MatButtonModule","MatIconButton","MatIconModule","MatIcon","MatRadioModule","MatRadioGroup","MatRadioButton","FormsModule","DefaultValueAccessor","NumberValueAccessor","NgControlStatus","PatternValidator","NgModel","AsyncPipe","IgoLanguageModule","TranslatePipe","styles","__decorate","ToolComponent","icon","__metadata","ɵɵelement","ɵɵelementStart","ɵɵlistener","layer_r2","ɵɵrestoreView","_r1","layer","ctx_r2","ɵɵnextContext","ɵɵresetView","activateExport","ɵɵelementEnd","ɵɵproperty","ɵɵadvance","ogcButton","timeButton","MapToolComponent","mapState","toolState","importExportState","configService","mediaService","cdr","isDesktop","toggleLegendOnVisibilityChange","expandLegendOfVisibleLayers","updateLegendOnResolutionChange","layerListControls","queryBadge","map","excludeBaseLayers","layerFilterAndSortOptions","filterSortOptions","Object","assign","showToolbar","LayerListControlsEnum","default","always","never","_layerViewerOptions","layerViewerOptions","__spreadValues","filterAndSortOptions","legend","showForVisibleLayers","showOnVisibilityChange","updateOnResolutionChange","constructor","getConfig","ngOnInit","handleMedia","id","options","workspace","workspaceId","setsExportOptions","layers","setMode","ImportExportMode","export","toolbox","activateTool","media$","subscribe","result","Media","Desktop","detectChanges","ɵɵdirectiveInject","MapState","ToolState","ImportExportState","ConfigService","MediaService","ChangeDetectorRef","selectors","inputs","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","rf","ctx","ɵɵtemplate","MapToolComponent_ng_template_4_Template","ɵɵtemplateRefExtractor","ɵɵpipeBind1","MatTabsModule","MatTab","MatTabGroup","WorkspaceButtonComponent","ExportButtonComponent","OgcFilterButtonComponent","TimeFilterButtonComponent","TrackFeatureButtonComponent","MetadataButtonComponent","LayerViewerComponent","ContextListComponent","ContextListBindingDirective","IgoLanguageModule","TranslatePipe","styles","changeDetection","__decorate","ToolComponent","name","title","icon","__metadata","ɵɵelement","ɵɵproperty","layer_r2","ɵɵelementStart","ɵɵlistener","ɵɵrestoreView","_r3","ctx_r3","ɵɵnextContext","ɵɵresetView","activateTimeFilter","ɵɵelementEnd","timeButton","_r5","activateOgcFilter","ogcButton","_r6","layer","activateExport","ɵɵtemplate","MapToolsComponent_ng_template_6_igo_style_modal_layer_button_0_Template","MapToolsComponent_ng_template_6_igo_time_filter_button_3_Template","MapToolsComponent_ng_template_6_igo_ogc_filter_button_4_Template","MapToolsComponent_ng_template_6_igo_export_button_5_Template","isStyleEditButton","ɵɵadvance","isTimeFilterButton","isOGCFilterButton","isExportButton","$event","_r7","onShowAllLegends","allowShowAllLegends","ɵɵpipeBind1","showAllLegendsValue$","excludeBaseLayers","updateLegendOnResolutionChange","MapToolsComponent_13_ng_template_0_Template","ɵɵtext","ɵɵtextInterpolate1","visibleLayers$","length","_r8","searchEmit","_r9","catalogEmit","_r10","contextEmit","MapToolsComponent_ng_template_18_mat_list_0_p_4_Template","MapToolsComponent_ng_template_18_mat_list_0_mat_list_item_5_Template","MapToolsComponent_ng_template_18_mat_list_0_mat_list_item_6_Template","MapToolsComponent_ng_template_18_mat_list_0_mat_list_item_7_Template","layerAdditionAllowed","searchToolInToolbar","catalogToolInToolbar","contextToolInToolbar","MapToolsComponent_ng_template_18_mat_list_0_Template","delayedShowEmptyMapContent","MapToolsComponent","layerListToolState","toolState","mapState","searchSourceService","importExportState","configService","mediaService","cdr","isDesktop","layers$","BehaviorSubject","resolution$$","visibleOrInRangeLayers$$","showAllLegendsValue","toggleLegendOnVisibilityChange","expandLegendOfVisibleLayers","selectedTabAtOpening","layerListControls","_layerListControls","value","stateOptions","getLayerListControls","stateKeyword","keyword","stateOnlyVisible","onlyVisible","stateSortAlpha","sortAlpha","undefined","map","queryBadge","visibleOrInRangeLayers$","pipe","layers","filter","displayed","visible","layerFilterAndSortOptions","filterSortOptions","Object","assign","showToolbar","LayerListControlsEnum","default","always","never","_layerViewerOptions","layerViewerOptions","__spreadValues","filterAndSortOptions","legend","showForVisibleLayers","showOnVisibilityChange","updateOnResolutionChange","tabGroup","toolbox","getToolbar","indexOf","getSources","sourceCanSearch","s","available","getType","constructor","getConfig","ngOnInit","handleMedia","selectedTab","combineLatest","layerController","all$","viewController","resolution$","debounceTime","subscribe","next","setTimeout","ngOnDestroy","unsubscribe","event","userSelectedTab","selectedTab$","setSelectedTab","tabChanged","tab","index","all","onLayerListChange","appliedFilters","setKeyword","setSortAlpha","setOnlyVisible","showAllLegend","getValue","visibleOrInRangeLayers","id","options","workspace","workspaceId","setsExportOptions","setMode","ImportExportMode","export","activateTool","dataSource","timeFilterable","timeFilter","ogcFilters","enabled","pushButtons","checkboxes","radioButtons","select","autocomplete","editable","VectorLayer","exportable","download","url","igoStyle","media$","result","Media","Desktop","detectChanges","ɵɵdirectiveInject","LayerListToolState","ToolState","MapState","SearchSourceService","ImportExportState","ConfigService","MediaService","ChangeDetectorRef","selectors","viewQuery","rf","ctx","i0","_r1","MapToolsComponent_ng_template_6_Template","ɵɵtemplateRefExtractor","ɵɵelementContainerStart","MapToolsComponent_ng_template_9_Template","MapToolsComponent_igo_layer_legend_list_12_Template","MapToolsComponent_13_Template","MapToolsComponent_p_15_Template","MapToolsComponent_ng_template_18_Template","emptyLayers_r11","MatTabsModule","MatTab","MatTabGroup","NgIf","NgTemplateOutlet","LayerViewerComponent","StyleModalLayerButtonComponent","MetadataButtonComponent","TrackFeatureButtonComponent","TimeFilterButtonComponent","OgcFilterButtonComponent","ExportButtonComponent","WorkspaceButtonComponent","LayerLegendListComponent","LayerLegendListBindingDirective","MatListModule","MatList","MatListItem","MatListItemIcon","MatListItemTitle","MatIconModule","MatIcon","AsyncPipe","IgoLanguageModule","TranslatePipe","styles","changeDetection","__decorate","ToolComponent","name","title","icon","__metadata","MeasureState","mapState","store","constructor","FeatureStore","map","layerController","all$","subscribe","layers","some","l","id","startsWith","deleteMany","all","ol","getOverlays","getArray","filter","overlay","options","className","includes","removeOverlay","ɵɵinject","MapState","factory","ɵfac","providedIn","MeasurerToolComponent","measureState","mapState","store","map","constructor","ɵɵdirectiveInject","MeasureState","MapState","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","rf","ctx","ɵɵelement","ɵɵproperty","MeasurerComponent","encapsulation","changeDetection","__decorate","ToolComponent","name","title","icon","__metadata","PrintToolComponent","mapState","map","constructor","ɵɵdirectiveInject","MapState","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","rf","ctx","ɵɵelement","ɵɵproperty","PrintComponent","encapsulation","__decorate","ToolComponent","name","title","icon","__metadata","SearchState","searchSourceService","storageService","workspaceState","configService","mapState","searchLayerStores","searchOverlayStyle","searchOverlayStyleSelection","searchOverlayStyleFocus","focusedOrResolution$$","selectedOrResolution$$","featureMotion","selected","FeatureMotion","Default","focus","None","searchTermSplitter$","BehaviorSubject","searchTerm$","undefined","searchType$","searchDisabled$","searchResultsGeometryEnabled$","searchSettingsChange$","selectedResult$","store","EntityStore","searchTypes","getEnabledSources","map","source","constructor","type","getConfig","base","selection","searchResultsGeometryEnabled","get","next","addStrategy","createCustomFilterTermStrategy","wksSource","getSources","find","getId","entities$","subscribe","e","searchableWks","filter","fw","FeatureWorkspace","layer","options","workspace","searchIndexEnabled","setWorkspaces","monitorLayerDeletion","layerController","all$","layers","forEach","l","id","index","indexOf","splice","filterClauseFunc","record","entity","meta","score","EntityStoreFilterCustomFuncStrategy","activateCustomFilterTermStrategy","strategy","getStrategyOfType","activate","deactivateCustomFilterTermStrategy","deactivate","enableSearch","disableSearch","setSearchTerm","searchTerm","setSearchType","searchType","enableSourcesByType","setSearchSettingsChange","setSelectedResult","result","setSearchResultsGeometryStatus","value","set","ɵɵinject","SearchSourceService","StorageService","WorkspaceState","ConfigService","MapState","factory","ɵfac","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵelement","ɵɵadvance","ɵɵtextInterpolate","ɵɵpipeBind1","ɵɵproperty","ɵɵsanitizeHtml","ctx_r1","map","store","stores","result_r3","saveSearchResultInLayer","ɵɵlistener","ɵɵrestoreView","_r5","ɵɵnextContext","ɵɵresetView","zoomToFeatureExtent","isSelectedResultOutOfView$","$event","_r4","toggleTopPanel","ɵɵtemplate","SearchResultsToolComponent_igo_flexible_2_igo_panel_8_button_5_Template","getRoute","featureTitle","topPanelState$","feature","geometry","feature$","toolState","toolbox","_r1","onResultFocus","onResultSelect","onResultUnfocus","onSearch","SearchResultsToolComponent_igo_flexible_2_ng_template_5_Template","ɵɵtemplateRefExtractor","SearchResultsToolComponent_igo_flexible_2_igo_panel_8_Template","topPanelState","showIcons","term","termSplitter","settingsChange$","SearchResultsToolComponent","mapState","searchState","elRef","directionState","topPanelStateDefault","hasFeatureEmphasisOnSelection","showResultsGeometries$$","getRoute$$","shownResultsGeometries","shownResultsEmphasisGeometries","focusedResult$","BehaviorSubject","undefined","isSelectedResultOutOfView$$","abstractFocusedResult","abstractSelectedResult","debouncedEmpty$","debouncedEmpty$$","getEntityTitle","stateView","firstBy$","e","state","focused","pipe","element","entity","data","searchTerm$$","topPanelState$$","value","next","searchTermSplitter$","format","olFormatGeoJSON","searchLayerStores","constructor","configService","getConfig","ngOnInit","searchTerm$","subscribe","searchTerm","res","all$","get","selected","searchSettingsChange$","igoList","computeElementRef","setTimeout","isScrolledIntoView","adjustTopPanel","FlexibleComponent","transitionTime","focusedOrResolution$$","combineLatest","viewController","resolution$","bunch","buildResultEmphasis","selectedOrResolution$$","selectedResult$","monitorResultOutOfView","searchResultsGeometryEnabled$","searchResultsGeometryEnabled","searchResults","clearFeatureEmphasis","result","queryResultsOverlay","removeFeature","filter","meta","dataType","FEATURE","style","getCommonVectorStyle","Object","assign","searchOverlayStyle","base","push","addFeature","FeatureMotion","None","empty$","debounceTime","empty","state$","selectedResult","selectedOlFeature","featureToOl","projection","selectedOlFeatureExtent","computeOlFeaturesExtent","getOlProjection","featuresAreOutOfView","getExtent","trigger","olGeometry","getGeometry","featuresAreTooDeepInView","extent","x","y","feature1","olFeature","name","olPoint","abstractResult","featureFromOl","computedStyle","zIndexOffset","getCommonVectorSelectedStyle","searchOverlayStyleFocus","focus","searchOverlayStyleSelection","selection","setZIndex","searchResultsOverlay","featureMotion","shownResult","ngOnDestroy","unsubscribe","dataSource","ol","getFeatureById","id","setStyle","clear","tryAddFeatureToMap","setSelectedResult","event","results","newResults","entities$","source","research","concat","load","all","update","nativeElement","querySelector","moreResults","request","getId","scrollTop","offsetTop","offsetHeight","clientHeight","items","document","getElementsByTagName","selectedItem","i","length","className","includes","elemSource","elem","children","target","localOlFeature","readFeature","dataProjection","featureProjection","projectionCode","moveToOlFeatures","Zoom","motion","Default","docViewTop","docViewBottom","elemTop","padding","activateTool","stopsStore","clearStops","routingCoordLoaded","storeInitialized$","stop","find","position","coord","type","coordinates","point","pointOnFeature","text","geolocationController","position$","currentPos","currentCoord","transform","roundCoordTo","join","ɵɵdirectiveInject","MapState","SearchState","ElementRef","ToolState","DirectionState","ConfigService","selectors","inputs","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","rf","ctx","SearchResultsToolComponent_div_0_Template","SearchResultsToolComponent_igo_flexible_2_Template","NgIf","SearchResultsComponent","SearchResultAddButtonComponent","PanelComponent","MatButtonModule","MatIconButton","MatIconModule","MatIcon","MatTooltipModule","MatTooltip","MatBadgeModule","MatBadge","FeatureDetailsComponent","AsyncPipe","IgoLanguageModule","TranslatePipe","SanitizeHtmlPipe","encapsulation","changeDetection","__decorate","ToolComponent","title","icon","__metadata","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","ctx_r1","igoSearchPointerSummaryEnabled","ɵɵelement","ɵɵproperty","map","result_r3","selectedFeature","store","actionBarMode","AppSearchComponent","mapService","layerService","searchState","mediaService","storageService","ActionStore","ActionbarMode","Context","termSplitter","IgoMap","overlay","controls","attribution","collapsed","view","center","zoom","mapBrowser","lonlat","mapProjection","term","settingsChange$","BehaviorSubject","undefined","searchStore","isTouchScreen","igoReverseSearchCoordsFormatEnabled","constructor","setMap","createAsyncLayer","title","baseLayer","visible","sourceOptions","type","subscribe","layer","layerController","add","Boolean","get","onPointerSummaryStatusChange","value","onSearchTermChange","setSearchTerm","replace","trim","length","clear","onSearch","event","results","state","updateAll","focused","selected","newResults","entities$","filter","result","source","research","concat","updateMany","onReverseCoordsFormatStatusChange","set","onSearchSettingsChange","next","onResultFocus","tryAddFeatureToMap","featureMotion","focus","data","onResultSelect","motion","FeatureMotion","Default","meta","dataType","FEATURE","geometry","searchResultsOverlay","setFeatures","ngOnInit","load","id","handler","searchCoordinate","openGoogleMaps","openGoogleStreetView","ngOnDestroy","destroy","removeFeatureFromMap","onContextMenuOpen","position","mapPosition","coord","getMap","ol","getCoordinateFromPixel","projectionCode","transform","contextmenuPoint","y","nativeElement","getBoundingClientRect","top","window","scrollY","x","left","scrollX","reverse","c","toFixed","join","open","GoogleLinks","getGoogleMapsCoordLink","getGoogleStreetViewLink","ɵɵdirectiveInject","MapService","LayerService","SearchState","MediaService","StorageService","selectors","viewQuery","rf","ctx","ElementRef","provideSearch","withIChercheSource","withWorkspaceSource","analytics","ɵɵStandaloneFeature","decls","vars","consts","template","ɵɵtemplate","AppSearchComponent_span_2_Template","ɵɵlistener","$event","i0","ɵɵrestoreView","_r1","ɵɵresetView","AppSearchComponent_ng_template_10_Template","ɵɵtemplateRefExtractor","AppSearchComponent_igo_panel_12_Template","AppSearchComponent_ng_template_13_Template","ɵɵpureFunction0","_c1","actionbarMenu_r4","DocViewerComponent","ExampleViewerComponent","NgIf","MapBrowserComponent","ZoomButtonComponent","ContextMenuDirective","LongPressDirective","IgoSearchModule","SearchBarComponent","SearchResultsComponent","SearchResultAddButtonComponent","SearchPointerSummaryDirective","PanelComponent","ActionbarComponent","FeatureDetailsComponent","styles","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate","ctx_r0","pointerCoord","AppSimpleMapComponent","layerService","mediaService","pointerCoordDelay","map","IgoMap","controls","attribution","collapsed","scaleLine","view","center","zoom","rotation","media","getMedia","isTouchScreen","constructor","createAsyncLayer","title","sourceOptions","type","visible","baseLayer","subscribe","layer","layerController","add","onPointerMove","event","ɵɵdirectiveInject","LayerService","MediaService","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","rf","ctx","ɵɵlistener","$event","ɵɵelement","ɵɵtemplate","AppSimpleMapComponent_p_12_Template","ɵɵproperty","ɵɵpureFunction0","_c0","toString","DocViewerComponent","ExampleViewerComponent","GeolocateButtonComponent","HomeExtentButtonComponent","InfoSectionComponent","MapBrowserComponent","PointerPositionDirective","RotationButtonComponent","WakeLockButtonComponent","ZoomButtonComponent","NgIf","styles","ɵɵelementContainerStart","ɵɵelement","ɵɵadvance","ɵɵproperty","feature_r1","AppSpatialFilterComponent","matIconRegistry","spatialFilterService","dataSourceService","layerService","messageService","languageService","cdRef","map","IgoMap","controls","attribution","collapsed","view","center","zoom","type","itemType","SpatialFilterItemType","Address","freehandDrawIsActive","layers","activeLayers","queryType","thematics","zone","zoneWithBuffer","buffer","iterator","selectedFeature$","BehaviorSubject","undefined","format","olFormatGeoJSON","store","EntityStore","spatialListStore","loading","thematicLength","measureUnit","MeasureLengthUnit","Meters","unsubscribe$","Subject","defaultStyle","constructor","createAsyncDataSource","subscribe","dataSource","layerController","add","createLayer","title","source","baseLayer","visible","ngOnInit","layer","all","isLayerGroup","includes","translate","instant","push","ngOnDestroy","next","complete","getOutputType","event","getOutputQueryType","loadFilterList","pipe","takeUntil","features","sort","a","b","properties","nom","clear","load","getOutputToggleSearch","loadThematics","getOutputClearSearch","clearMap","remove","SpatialFilterType","Predefined","zeroResults","Point","tryAddFeaturesToMap","Thematics","name","Kilometers","Polygon","observables$","forEach","thematic","loadFilterItem","tap","insertMany","featuresPoint","featuresLinePoly","idPoint","idLinePoly","feature","geometry","longitude","coordinates","latitude","meta","id","tryAddPointToMap","tryAddLayerToMap","length","detectChanges","alert","timeOut","forkJoin","onZoneChange","zoomToFeatureExtent","i","options","_internal","code","startsWith","index","indexOf","splice","_feature","resolution","Style","image","Circle","radius","Math","cos","PI","fill","Fill","color","stroke","Stroke","width","queryable","take","olLayer","isIgoInternalLayer","workspace","enabled","featuresOl","featureToOl","projectionCode","set","ol","addFeatures","setStyle","distance","icon","style","createSvgIcon","createOverlayMarkerStyle","getSource","find","pushLayer","getNamedSvgIcon","svgObj","xmlSerializer","XMLSerializer","setAttribute","svg","serializeToString","Icon","src","olFeature","readFeature","dataProjection","projection","featureProjection","moveToOlFeatures","viewController","FeatureMotion","Zoom","activeLayer","ɵɵdirectiveInject","MatIconRegistry","SpatialFilterService","DataSourceService","LayerService","MessageService","LanguageService","ChangeDetectorRef","selectors","inputs","standalone","ɵɵStandaloneFeature","decls","vars","consts","template","rf","ctx","ɵɵelementStart","ɵɵelementEnd","ɵɵlistener","$event","ɵɵtemplate","AppSpatialFilterComponent_ng_container_13_Template","ɵɵpureFunction0","_c0","ɵɵpipeBind1","DocViewerComponent","ExampleViewerComponent","MatGridListModule","MatGridList","MatGridTile","MapBrowserComponent","ZoomButtonComponent","IgoQueryModule","QueryDirective","PanelComponent","SpatialFilterTypeComponent","SpatialFilterItemComponent","NgIf","FeatureDetailsComponent","AsyncPipe","styles","changeDetection","AppTimeFilterComponent","dataSourceService","layerService","map","IgoMap","controls","attribution","collapsed","view","center","zoom","constructor","createAsyncDataSource","type","subscribe","dataSource","layerController","add","createLayer","title","baseLayer","visible","source","datasourceYear","url","params","LAYERS","VERSION","timeFilterable","timeFilter","min","max","range","TimeFilterType","YEAR","style","TimeFilterStyle","SLIDER","step","ɵɵdirectiveInject","DataSourceService","LayerService","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","rf","ctx","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ɵɵproperty","ɵɵpureFunction0","_c0","ɵɵadvance","all","DocViewerComponent","ExampleViewerComponent","MatGridListModule","MatGridList","MatGridTile","MapBrowserComponent","ZoomButtonComponent","PanelComponent","TimeFilterListComponent","ɵɵelementStart","ɵɵlistener","$event","ɵɵrestoreView","_r1","ctx_r1","ɵɵnextContext","ɵɵresetView","paginatorChange","ɵɵelementEnd","ɵɵproperty","workspace_r3","entityStore","paginatorOptions","entitySortChange$","ɵɵelementContainerStart","ɵɵtemplate","AppWorkspaceComponent_ng_container_6_igo_entity_table_paginator_1_Template","ɵɵadvance","ɵɵpipeBind1","inResolutionRange$","ɵɵelement","workspace_r4","actionStore","actionbarMode","workspacePaginator","scrollBehavior","meta","tableTemplate","ɵɵtext","AppWorkspaceComponent_ng_container_8_igo_actionbar_1_Template","AppWorkspaceComponent_ng_container_8_igo_entity_table_2_Template","AppWorkspaceComponent_ng_container_8_mat_card_content_4_Template","AppWorkspaceComponent","dataSourceService","layerService","workspaceState","BehaviorSubject","pageSize","pageSizeOptions","showFirstLastButtons","map","IgoMap","controls","attribution","collapsed","view","center","zoom","workspaceStore","store","selectedWorkspace$","ActionbarMode","Overlay","EntityTableScrollBehavior","Instant","constructor","ngOnInit","stateView","firstBy$","record","state","selected","pipe","entity","undefined","filter","action","id","createLayers","title","sourceOptions","type","baseLayer","visible","maxResolution","workspace","enabled","url","params","featureTypes","fieldNameGeometry","version","outputFormat","sourceFields","name","alias","subscribe","layers","layerController","add","event","ɵɵdirectiveInject","DataSourceService","LayerService","WorkspaceState","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","rf","ctx","AppWorkspaceComponent_ng_container_6_Template","AppWorkspaceComponent_ng_container_8_Template","AsyncPipe","DocViewerComponent","ExampleViewerComponent","EntityTableComponent","ActionbarComponent","EntityTablePaginatorComponent","IgoGeoWorkspaceModule","MapBrowserComponent","ZoomButtonComponent","WorkspaceSelectorComponent","WorkspaceSelectorDirective","WorkspaceWidgetOutletComponent","MatCardModule","MatCardContent","NgIf","styles","routes","path","redirectTo","pathMatch","title","component","AppSimpleMapComponent","AppLayerComponent","AppLegendComponent","AppOverlayComponent","AppGeometryComponent","AppFeatureComponent","AppHoverComponent","AppMeasureComponent","AppDrawComponent","AppQueryComponent","AppCatalogComponent","AppSearchComponent","AppPrintComponent","AppImportExportComponent","AppDirectionsComponent","AppTimeFilterComponent","AppOgcFilterComponent","AppSpatialFilterComponent","AppWorkspaceComponent"],"x_google_ignoreList":[30,31,32,33,34]}