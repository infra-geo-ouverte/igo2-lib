{"version":3,"sources":["node_modules/@angular/material/fesm2022/sidenav.mjs","node_modules/@angular/material/fesm2022/grid-list.mjs","packages/context/src/lib/context-manager/shared/context.enum.ts","packages/context/src/lib/context-manager/shared/context.service.ts","packages/context/src/lib/context-import-export/shared/context-export.errors.ts","packages/context/src/lib/context-import-export/shared/context-export.service.ts","packages/context/src/lib/context-import-export/shared/context-export.utils.ts","packages/context/src/lib/context-import-export/shared/context-import.errors.ts","packages/context/src/lib/context-import-export/shared/context-import.utils.ts","packages/context/src/lib/context-import-export/shared/context-import.service.ts","packages/context/src/lib/context-import-export/context-import-export/context-import-export.component.ts","packages/context/src/lib/context-import-export/context-import-export/context-import-export.component.html","packages/context/src/lib/context-map-button/bookmark-button/bookmark-dialog.component.ts","packages/context/src/lib/context-map-button/bookmark-button/bookmark-dialog.component.html","packages/context/src/lib/context-manager/context-item/context-item.component.ts","packages/context/src/lib/context-manager/context-item/context-item.component.html","packages/context/src/lib/context-manager/context-list/context-list.enum.ts","packages/context/src/lib/context-manager/context-list/context-list.component.ts","packages/context/src/lib/context-manager/context-list/context-list.component.html","packages/context/src/lib/context-manager/context-list/context-list-binding.directive.ts","packages/context/src/lib/context-manager/shared/layer-context.directive.ts","packages/context/src/lib/context-manager/shared/map-context.directive.ts","packages/context/src/lib/context-manager/context-form/context-form.component.ts","packages/context/src/lib/context-manager/context-form/context-form.component.html","packages/context/src/lib/context-manager/context-edit/context-edit.component.ts","packages/context/src/lib/context-manager/context-edit/context-edit.component.html","packages/context/src/lib/context-manager/context-edit/context-edit-binding.directive.ts","packages/context/src/lib/context-manager/context-permissions/context-permissions.component.ts","packages/context/src/lib/context-manager/context-permissions/context-permissions.component.html","packages/context/src/lib/context-manager/context-permissions/context-permissions-binding.directive.ts","packages/context/src/lib/share-map/shared/share-map.service.ts","packages/context/src/lib/share-map/share-map/share-map-api.component.ts","packages/context/src/lib/share-map/share-map/share-map-api.component.html","packages/context/src/lib/share-map/share-map/share-map-url.component.ts","packages/context/src/lib/share-map/share-map/share-map-url.component.html","packages/context/src/lib/share-map/share-map/share-map.component.ts","packages/context/src/lib/share-map/share-map/share-map.component.html"],"sourcesContent":["import * as i1 from '@angular/cdk/scrolling';\nimport { CdkScrollable, CdkScrollableModule } from '@angular/cdk/scrolling';\nimport * as i0 from '@angular/core';\nimport { InjectionToken, forwardRef, Component, ChangeDetectionStrategy, ViewEncapsulation, Inject, EventEmitter, inject, Injector, ChangeDetectorRef, afterNextRender, Optional, Input, Output, ViewChild, QueryList, AfterRenderPhase, ANIMATION_MODULE_TYPE, ContentChildren, ContentChild, NgModule } from '@angular/core';\nimport { MatCommonModule } from '@angular/material/core';\nimport * as i2 from '@angular/cdk/a11y';\nimport * as i4 from '@angular/cdk/bidi';\nimport { coerceBooleanProperty, coerceNumberProperty } from '@angular/cdk/coercion';\nimport { ESCAPE, hasModifierKey } from '@angular/cdk/keycodes';\nimport * as i3 from '@angular/cdk/platform';\nimport { DOCUMENT } from '@angular/common';\nimport { Subject, fromEvent, merge } from 'rxjs';\nimport { filter, map, mapTo, takeUntil, take, startWith, debounceTime } from 'rxjs/operators';\nimport { trigger, state, style, transition, animate } from '@angular/animations';\n\n/**\n * Animations used by the Material drawers.\n * @docs-private\n */\nconst _c0 = [\"*\"];\nconst _c1 = [\"content\"];\nconst _c2 = [[[\"mat-drawer\"]], [[\"mat-drawer-content\"]], \"*\"];\nconst _c3 = [\"mat-drawer\", \"mat-drawer-content\", \"*\"];\nfunction MatDrawerContainer_Conditional_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 1);\n    i0.ɵɵlistener(\"click\", function MatDrawerContainer_Conditional_0_Template_div_click_0_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1._onBackdropClicked());\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵclassProp(\"mat-drawer-shown\", ctx_r1._isShowingBackdrop());\n  }\n}\nfunction MatDrawerContainer_Conditional_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-drawer-content\");\n    i0.ɵɵprojection(1, 2);\n    i0.ɵɵelementEnd();\n  }\n}\nconst _c4 = [[[\"mat-sidenav\"]], [[\"mat-sidenav-content\"]], \"*\"];\nconst _c5 = [\"mat-sidenav\", \"mat-sidenav-content\", \"*\"];\nfunction MatSidenavContainer_Conditional_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 1);\n    i0.ɵɵlistener(\"click\", function MatSidenavContainer_Conditional_0_Template_div_click_0_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1._onBackdropClicked());\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵclassProp(\"mat-drawer-shown\", ctx_r1._isShowingBackdrop());\n  }\n}\nfunction MatSidenavContainer_Conditional_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-sidenav-content\");\n    i0.ɵɵprojection(1, 2);\n    i0.ɵɵelementEnd();\n  }\n}\nconst _c6 = \".mat-drawer-container{position:relative;z-index:1;color:var(--mat-sidenav-content-text-color, var(--mat-app-on-background));background-color:var(--mat-sidenav-content-background-color, var(--mat-app-background));box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible;background-color:var(--mat-sidenav-scrim-color)}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;color:var(--mat-sidenav-container-text-color, var(--mat-app-on-surface-variant));box-shadow:var(--mat-sidenav-container-elevation-shadow);background-color:var(--mat-sidenav-container-background-color, var(--mat-app-surface));border-top-right-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));border-bottom-right-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));width:var(--mat-sidenav-container-width);display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0);border-top-left-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));border-bottom-left-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));border-top-right-radius:0;border-bottom-right-radius:0}[dir=rtl] .mat-drawer{border-top-left-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));border-bottom-left-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));border-top-right-radius:0;border-bottom-right-radius:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{border-top-right-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));border-bottom-right-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));border-top-left-radius:0;border-bottom-left-radius:0;left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*=\\\"visibility: hidden\\\"]{display:none}.mat-drawer-side{box-shadow:none;border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid}.mat-drawer-side.mat-drawer-end{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side.mat-drawer-end{border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid;border-left:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\";\nconst matDrawerAnimations = {\n  /** Animation that slides a drawer in and out. */\n  transformDrawer: /*#__PURE__*/trigger('transform', [\n  /*#__PURE__*/\n  // We remove the `transform` here completely, rather than setting it to zero, because:\n  // 1. Having a transform can cause elements with ripples or an animated\n  //    transform to shift around in Chrome with an RTL layout (see #10023).\n  // 2. 3d transforms causes text to appear blurry on IE and Edge.\n  state('open, open-instant', /*#__PURE__*/style({\n    'transform': 'none',\n    'visibility': 'visible'\n  })), /*#__PURE__*/state('void', /*#__PURE__*/style({\n    // Avoids the shadow showing up when closed in SSR.\n    'box-shadow': 'none',\n    'visibility': 'hidden'\n  })), /*#__PURE__*/transition('void => open-instant', /*#__PURE__*/animate('0ms')), /*#__PURE__*/transition('void <=> open, open-instant => void', /*#__PURE__*/animate('400ms cubic-bezier(0.25, 0.8, 0.25, 1)'))])\n};\n\n/**\n * Throws an exception when two MatDrawer are matching the same position.\n * @docs-private\n */\nfunction throwMatDuplicatedDrawerError(position) {\n  throw Error(`A drawer was already declared for 'position=\"${position}\"'`);\n}\n/** Configures whether drawers should use auto sizing by default. */\nconst MAT_DRAWER_DEFAULT_AUTOSIZE = /*#__PURE__*/new InjectionToken('MAT_DRAWER_DEFAULT_AUTOSIZE', {\n  providedIn: 'root',\n  factory: MAT_DRAWER_DEFAULT_AUTOSIZE_FACTORY\n});\n/**\n * Used to provide a drawer container to a drawer while avoiding circular references.\n * @docs-private\n */\nconst MAT_DRAWER_CONTAINER = /*#__PURE__*/new InjectionToken('MAT_DRAWER_CONTAINER');\n/** @docs-private */\nfunction MAT_DRAWER_DEFAULT_AUTOSIZE_FACTORY() {\n  return false;\n}\nlet MatDrawerContent = /*#__PURE__*/(() => {\n  class MatDrawerContent extends CdkScrollable {\n    constructor(_changeDetectorRef, _container, elementRef, scrollDispatcher, ngZone) {\n      super(elementRef, scrollDispatcher, ngZone);\n      this._changeDetectorRef = _changeDetectorRef;\n      this._container = _container;\n    }\n    ngAfterContentInit() {\n      this._container._contentMarginChanges.subscribe(() => {\n        this._changeDetectorRef.markForCheck();\n      });\n    }\n    static {\n      this.ɵfac = function MatDrawerContent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || MatDrawerContent)(i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(forwardRef(() => MatDrawerContainer)), i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i1.ScrollDispatcher), i0.ɵɵdirectiveInject(i0.NgZone));\n      };\n    }\n    static {\n      this.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n        type: MatDrawerContent,\n        selectors: [[\"mat-drawer-content\"]],\n        hostAttrs: [1, \"mat-drawer-content\"],\n        hostVars: 4,\n        hostBindings: function MatDrawerContent_HostBindings(rf, ctx) {\n          if (rf & 2) {\n            i0.ɵɵstyleProp(\"margin-left\", ctx._container._contentMargins.left, \"px\")(\"margin-right\", ctx._container._contentMargins.right, \"px\");\n          }\n        },\n        standalone: true,\n        features: [i0.ɵɵProvidersFeature([{\n          provide: CdkScrollable,\n          useExisting: MatDrawerContent\n        }]), i0.ɵɵInheritDefinitionFeature, i0.ɵɵStandaloneFeature],\n        ngContentSelectors: _c0,\n        decls: 1,\n        vars: 0,\n        template: function MatDrawerContent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵprojectionDef();\n            i0.ɵɵprojection(0);\n          }\n        },\n        encapsulation: 2,\n        changeDetection: 0\n      });\n    }\n  }\n  return MatDrawerContent;\n})();\n/*#__PURE__*/(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * This component corresponds to a drawer that can be opened on the drawer container.\n */\nlet MatDrawer = /*#__PURE__*/(() => {\n  class MatDrawer {\n    /** The side that the drawer is attached to. */\n    get position() {\n      return this._position;\n    }\n    set position(value) {\n      // Make sure we have a valid value.\n      value = value === 'end' ? 'end' : 'start';\n      if (value !== this._position) {\n        // Static inputs in Ivy are set before the element is in the DOM.\n        if (this._isAttached) {\n          this._updatePositionInParent(value);\n        }\n        this._position = value;\n        this.onPositionChanged.emit();\n      }\n    }\n    /** Mode of the drawer; one of 'over', 'push' or 'side'. */\n    get mode() {\n      return this._mode;\n    }\n    set mode(value) {\n      this._mode = value;\n      this._updateFocusTrapState();\n      this._modeChanged.next();\n    }\n    /** Whether the drawer can be closed with the escape key or by clicking on the backdrop. */\n    get disableClose() {\n      return this._disableClose;\n    }\n    set disableClose(value) {\n      this._disableClose = coerceBooleanProperty(value);\n    }\n    /**\n     * Whether the drawer should focus the first focusable element automatically when opened.\n     * Defaults to false in when `mode` is set to `side`, otherwise defaults to `true`. If explicitly\n     * enabled, focus will be moved into the sidenav in `side` mode as well.\n     * @breaking-change 14.0.0 Remove boolean option from autoFocus. Use string or AutoFocusTarget\n     * instead.\n     */\n    get autoFocus() {\n      const value = this._autoFocus;\n      // Note that usually we don't allow autoFocus to be set to `first-tabbable` in `side` mode,\n      // because we don't know how the sidenav is being used, but in some cases it still makes\n      // sense to do it. The consumer can explicitly set `autoFocus`.\n      if (value == null) {\n        if (this.mode === 'side') {\n          return 'dialog';\n        } else {\n          return 'first-tabbable';\n        }\n      }\n      return value;\n    }\n    set autoFocus(value) {\n      if (value === 'true' || value === 'false' || value == null) {\n        value = coerceBooleanProperty(value);\n      }\n      this._autoFocus = value;\n    }\n    /**\n     * Whether the drawer is opened. We overload this because we trigger an event when it\n     * starts or end.\n     */\n    get opened() {\n      return this._opened;\n    }\n    set opened(value) {\n      this.toggle(coerceBooleanProperty(value));\n    }\n    constructor(_elementRef, _focusTrapFactory, _focusMonitor, _platform, _ngZone, _interactivityChecker, _doc, _container) {\n      this._elementRef = _elementRef;\n      this._focusTrapFactory = _focusTrapFactory;\n      this._focusMonitor = _focusMonitor;\n      this._platform = _platform;\n      this._ngZone = _ngZone;\n      this._interactivityChecker = _interactivityChecker;\n      this._doc = _doc;\n      this._container = _container;\n      this._focusTrap = null;\n      this._elementFocusedBeforeDrawerWasOpened = null;\n      /** Whether the drawer is initialized. Used for disabling the initial animation. */\n      this._enableAnimations = false;\n      this._position = 'start';\n      this._mode = 'over';\n      this._disableClose = false;\n      this._opened = false;\n      /** Emits whenever the drawer has started animating. */\n      this._animationStarted = new Subject();\n      /** Emits whenever the drawer is done animating. */\n      this._animationEnd = new Subject();\n      /** Current state of the sidenav animation. */\n      this._animationState = 'void';\n      /** Event emitted when the drawer open state is changed. */\n      this.openedChange =\n      // Note this has to be async in order to avoid some issues with two-bindings (see #8872).\n      new EventEmitter(/* isAsync */true);\n      /** Event emitted when the drawer has been opened. */\n      this._openedStream = this.openedChange.pipe(filter(o => o), map(() => {}));\n      /** Event emitted when the drawer has started opening. */\n      this.openedStart = this._animationStarted.pipe(filter(e => e.fromState !== e.toState && e.toState.indexOf('open') === 0), mapTo(undefined));\n      /** Event emitted when the drawer has been closed. */\n      this._closedStream = this.openedChange.pipe(filter(o => !o), map(() => {}));\n      /** Event emitted when the drawer has started closing. */\n      this.closedStart = this._animationStarted.pipe(filter(e => e.fromState !== e.toState && e.toState === 'void'), mapTo(undefined));\n      /** Emits when the component is destroyed. */\n      this._destroyed = new Subject();\n      /** Event emitted when the drawer's position changes. */\n      // tslint:disable-next-line:no-output-on-prefix\n      this.onPositionChanged = new EventEmitter();\n      /**\n       * An observable that emits when the drawer mode changes. This is used by the drawer container to\n       * to know when to when the mode changes so it can adapt the margins on the content.\n       */\n      this._modeChanged = new Subject();\n      this._injector = inject(Injector);\n      this._changeDetectorRef = inject(ChangeDetectorRef);\n      this.openedChange.pipe(takeUntil(this._destroyed)).subscribe(opened => {\n        if (opened) {\n          if (this._doc) {\n            this._elementFocusedBeforeDrawerWasOpened = this._doc.activeElement;\n          }\n          this._takeFocus();\n        } else if (this._isFocusWithinDrawer()) {\n          this._restoreFocus(this._openedVia || 'program');\n        }\n      });\n      /**\n       * Listen to `keydown` events outside the zone so that change detection is not run every\n       * time a key is pressed. Instead we re-enter the zone only if the `ESC` key is pressed\n       * and we don't have close disabled.\n       */\n      this._ngZone.runOutsideAngular(() => {\n        fromEvent(this._elementRef.nativeElement, 'keydown').pipe(filter(event => {\n          return event.keyCode === ESCAPE && !this.disableClose && !hasModifierKey(event);\n        }), takeUntil(this._destroyed)).subscribe(event => this._ngZone.run(() => {\n          this.close();\n          event.stopPropagation();\n          event.preventDefault();\n        }));\n      });\n      this._animationEnd.subscribe(event => {\n        const {\n          fromState,\n          toState\n        } = event;\n        if (toState.indexOf('open') === 0 && fromState === 'void' || toState === 'void' && fromState.indexOf('open') === 0) {\n          this.openedChange.emit(this._opened);\n        }\n      });\n    }\n    /**\n     * Focuses the provided element. If the element is not focusable, it will add a tabIndex\n     * attribute to forcefully focus it. The attribute is removed after focus is moved.\n     * @param element The element to focus.\n     */\n    _forceFocus(element, options) {\n      if (!this._interactivityChecker.isFocusable(element)) {\n        element.tabIndex = -1;\n        // The tabindex attribute should be removed to avoid navigating to that element again\n        this._ngZone.runOutsideAngular(() => {\n          const callback = () => {\n            element.removeEventListener('blur', callback);\n            element.removeEventListener('mousedown', callback);\n            element.removeAttribute('tabindex');\n          };\n          element.addEventListener('blur', callback);\n          element.addEventListener('mousedown', callback);\n        });\n      }\n      element.focus(options);\n    }\n    /**\n     * Focuses the first element that matches the given selector within the focus trap.\n     * @param selector The CSS selector for the element to set focus to.\n     */\n    _focusByCssSelector(selector, options) {\n      let elementToFocus = this._elementRef.nativeElement.querySelector(selector);\n      if (elementToFocus) {\n        this._forceFocus(elementToFocus, options);\n      }\n    }\n    /**\n     * Moves focus into the drawer. Note that this works even if\n     * the focus trap is disabled in `side` mode.\n     */\n    _takeFocus() {\n      if (!this._focusTrap) {\n        return;\n      }\n      const element = this._elementRef.nativeElement;\n      // When autoFocus is not on the sidenav, if the element cannot be focused or does\n      // not exist, focus the sidenav itself so the keyboard navigation still works.\n      // We need to check that `focus` is a function due to Universal.\n      switch (this.autoFocus) {\n        case false:\n        case 'dialog':\n          return;\n        case true:\n        case 'first-tabbable':\n          afterNextRender(() => {\n            const hasMovedFocus = this._focusTrap.focusInitialElement();\n            if (!hasMovedFocus && typeof element.focus === 'function') {\n              element.focus();\n            }\n          }, {\n            injector: this._injector\n          });\n          break;\n        case 'first-heading':\n          this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role=\"heading\"]');\n          break;\n        default:\n          this._focusByCssSelector(this.autoFocus);\n          break;\n      }\n    }\n    /**\n     * Restores focus to the element that was originally focused when the drawer opened.\n     * If no element was focused at that time, the focus will be restored to the drawer.\n     */\n    _restoreFocus(focusOrigin) {\n      if (this.autoFocus === 'dialog') {\n        return;\n      }\n      if (this._elementFocusedBeforeDrawerWasOpened) {\n        this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened, focusOrigin);\n      } else {\n        this._elementRef.nativeElement.blur();\n      }\n      this._elementFocusedBeforeDrawerWasOpened = null;\n    }\n    /** Whether focus is currently within the drawer. */\n    _isFocusWithinDrawer() {\n      const activeEl = this._doc.activeElement;\n      return !!activeEl && this._elementRef.nativeElement.contains(activeEl);\n    }\n    ngAfterViewInit() {\n      this._isAttached = true;\n      // Only update the DOM position when the sidenav is positioned at\n      // the end since we project the sidenav before the content by default.\n      if (this._position === 'end') {\n        this._updatePositionInParent('end');\n      }\n      // Needs to happen after the position is updated\n      // so the focus trap anchors are in the right place.\n      if (this._platform.isBrowser) {\n        this._focusTrap = this._focusTrapFactory.create(this._elementRef.nativeElement);\n        this._updateFocusTrapState();\n      }\n    }\n    ngAfterContentChecked() {\n      // Enable the animations after the lifecycle hooks have run, in order to avoid animating\n      // drawers that are open by default. When we're on the server, we shouldn't enable the\n      // animations, because we don't want the drawer to animate the first time the user sees\n      // the page.\n      if (this._platform.isBrowser) {\n        this._enableAnimations = true;\n      }\n    }\n    ngOnDestroy() {\n      this._focusTrap?.destroy();\n      this._anchor?.remove();\n      this._anchor = null;\n      this._animationStarted.complete();\n      this._animationEnd.complete();\n      this._modeChanged.complete();\n      this._destroyed.next();\n      this._destroyed.complete();\n    }\n    /**\n     * Open the drawer.\n     * @param openedVia Whether the drawer was opened by a key press, mouse click or programmatically.\n     * Used for focus management after the sidenav is closed.\n     */\n    open(openedVia) {\n      return this.toggle(true, openedVia);\n    }\n    /** Close the drawer. */\n    close() {\n      return this.toggle(false);\n    }\n    /** Closes the drawer with context that the backdrop was clicked. */\n    _closeViaBackdropClick() {\n      // If the drawer is closed upon a backdrop click, we always want to restore focus. We\n      // don't need to check whether focus is currently in the drawer, as clicking on the\n      // backdrop causes blurs the active element.\n      return this._setOpen(/* isOpen */false, /* restoreFocus */true, 'mouse');\n    }\n    /**\n     * Toggle this drawer.\n     * @param isOpen Whether the drawer should be open.\n     * @param openedVia Whether the drawer was opened by a key press, mouse click or programmatically.\n     * Used for focus management after the sidenav is closed.\n     */\n    toggle(isOpen = !this.opened, openedVia) {\n      // If the focus is currently inside the drawer content and we are closing the drawer,\n      // restore the focus to the initially focused element (when the drawer opened).\n      if (isOpen && openedVia) {\n        this._openedVia = openedVia;\n      }\n      const result = this._setOpen(isOpen, /* restoreFocus */!isOpen && this._isFocusWithinDrawer(), this._openedVia || 'program');\n      if (!isOpen) {\n        this._openedVia = null;\n      }\n      return result;\n    }\n    /**\n     * Toggles the opened state of the drawer.\n     * @param isOpen Whether the drawer should open or close.\n     * @param restoreFocus Whether focus should be restored on close.\n     * @param focusOrigin Origin to use when restoring focus.\n     */\n    _setOpen(isOpen, restoreFocus, focusOrigin) {\n      this._opened = isOpen;\n      if (isOpen) {\n        this._animationState = this._enableAnimations ? 'open' : 'open-instant';\n      } else {\n        this._animationState = 'void';\n        if (restoreFocus) {\n          this._restoreFocus(focusOrigin);\n        }\n      }\n      // Needed to ensure that the closing sequence fires off correctly.\n      this._changeDetectorRef.markForCheck();\n      this._updateFocusTrapState();\n      return new Promise(resolve => {\n        this.openedChange.pipe(take(1)).subscribe(open => resolve(open ? 'open' : 'close'));\n      });\n    }\n    _getWidth() {\n      return this._elementRef.nativeElement ? this._elementRef.nativeElement.offsetWidth || 0 : 0;\n    }\n    /** Updates the enabled state of the focus trap. */\n    _updateFocusTrapState() {\n      if (this._focusTrap) {\n        // Trap focus only if the backdrop is enabled. Otherwise, allow end user to interact with the\n        // sidenav content.\n        this._focusTrap.enabled = !!this._container?.hasBackdrop && this.opened;\n      }\n    }\n    /**\n     * Updates the position of the drawer in the DOM. We need to move the element around ourselves\n     * when it's in the `end` position so that it comes after the content and the visual order\n     * matches the tab order. We also need to be able to move it back to `start` if the sidenav\n     * started off as `end` and was changed to `start`.\n     */\n    _updatePositionInParent(newPosition) {\n      // Don't move the DOM node around on the server, because it can throw off hydration.\n      if (!this._platform.isBrowser) {\n        return;\n      }\n      const element = this._elementRef.nativeElement;\n      const parent = element.parentNode;\n      if (newPosition === 'end') {\n        if (!this._anchor) {\n          this._anchor = this._doc.createComment('mat-drawer-anchor');\n          parent.insertBefore(this._anchor, element);\n        }\n        parent.appendChild(element);\n      } else if (this._anchor) {\n        this._anchor.parentNode.insertBefore(element, this._anchor);\n      }\n    }\n    static {\n      this.ɵfac = function MatDrawer_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || MatDrawer)(i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i2.FocusTrapFactory), i0.ɵɵdirectiveInject(i2.FocusMonitor), i0.ɵɵdirectiveInject(i3.Platform), i0.ɵɵdirectiveInject(i0.NgZone), i0.ɵɵdirectiveInject(i2.InteractivityChecker), i0.ɵɵdirectiveInject(DOCUMENT, 8), i0.ɵɵdirectiveInject(MAT_DRAWER_CONTAINER, 8));\n      };\n    }\n    static {\n      this.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n        type: MatDrawer,\n        selectors: [[\"mat-drawer\"]],\n        viewQuery: function MatDrawer_Query(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵviewQuery(_c1, 5);\n          }\n          if (rf & 2) {\n            let _t;\n            i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._content = _t.first);\n          }\n        },\n        hostAttrs: [\"tabIndex\", \"-1\", 1, \"mat-drawer\"],\n        hostVars: 12,\n        hostBindings: function MatDrawer_HostBindings(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵsyntheticHostListener(\"@transform.start\", function MatDrawer_animation_transform_start_HostBindingHandler($event) {\n              return ctx._animationStarted.next($event);\n            })(\"@transform.done\", function MatDrawer_animation_transform_done_HostBindingHandler($event) {\n              return ctx._animationEnd.next($event);\n            });\n          }\n          if (rf & 2) {\n            i0.ɵɵsyntheticHostProperty(\"@transform\", ctx._animationState);\n            i0.ɵɵattribute(\"align\", null);\n            i0.ɵɵclassProp(\"mat-drawer-end\", ctx.position === \"end\")(\"mat-drawer-over\", ctx.mode === \"over\")(\"mat-drawer-push\", ctx.mode === \"push\")(\"mat-drawer-side\", ctx.mode === \"side\")(\"mat-drawer-opened\", ctx.opened);\n          }\n        },\n        inputs: {\n          position: \"position\",\n          mode: \"mode\",\n          disableClose: \"disableClose\",\n          autoFocus: \"autoFocus\",\n          opened: \"opened\"\n        },\n        outputs: {\n          openedChange: \"openedChange\",\n          _openedStream: \"opened\",\n          openedStart: \"openedStart\",\n          _closedStream: \"closed\",\n          closedStart: \"closedStart\",\n          onPositionChanged: \"positionChanged\"\n        },\n        exportAs: [\"matDrawer\"],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        ngContentSelectors: _c0,\n        decls: 3,\n        vars: 0,\n        consts: [[\"content\", \"\"], [\"cdkScrollable\", \"\", 1, \"mat-drawer-inner-container\"]],\n        template: function MatDrawer_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵprojectionDef();\n            i0.ɵɵelementStart(0, \"div\", 1, 0);\n            i0.ɵɵprojection(2);\n            i0.ɵɵelementEnd();\n          }\n        },\n        dependencies: [CdkScrollable],\n        encapsulation: 2,\n        data: {\n          animation: [matDrawerAnimations.transformDrawer]\n        },\n        changeDetection: 0\n      });\n    }\n  }\n  return MatDrawer;\n})();\n/*#__PURE__*/(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * `<mat-drawer-container>` component.\n *\n * This is the parent component to one or two `<mat-drawer>`s that validates the state internally\n * and coordinates the backdrop and content styling.\n */\nlet MatDrawerContainer = /*#__PURE__*/(() => {\n  class MatDrawerContainer {\n    /** The drawer child with the `start` position. */\n    get start() {\n      return this._start;\n    }\n    /** The drawer child with the `end` position. */\n    get end() {\n      return this._end;\n    }\n    /**\n     * Whether to automatically resize the container whenever\n     * the size of any of its drawers changes.\n     *\n     * **Use at your own risk!** Enabling this option can cause layout thrashing by measuring\n     * the drawers on every change detection cycle. Can be configured globally via the\n     * `MAT_DRAWER_DEFAULT_AUTOSIZE` token.\n     */\n    get autosize() {\n      return this._autosize;\n    }\n    set autosize(value) {\n      this._autosize = coerceBooleanProperty(value);\n    }\n    /**\n     * Whether the drawer container should have a backdrop while one of the sidenavs is open.\n     * If explicitly set to `true`, the backdrop will be enabled for drawers in the `side`\n     * mode as well.\n     */\n    get hasBackdrop() {\n      return this._drawerHasBackdrop(this._start) || this._drawerHasBackdrop(this._end);\n    }\n    set hasBackdrop(value) {\n      this._backdropOverride = value == null ? null : coerceBooleanProperty(value);\n    }\n    /** Reference to the CdkScrollable instance that wraps the scrollable content. */\n    get scrollable() {\n      return this._userContent || this._content;\n    }\n    constructor(_dir, _element, _ngZone, _changeDetectorRef, viewportRuler, defaultAutosize = false, _animationMode) {\n      this._dir = _dir;\n      this._element = _element;\n      this._ngZone = _ngZone;\n      this._changeDetectorRef = _changeDetectorRef;\n      this._animationMode = _animationMode;\n      /** Drawers that belong to this container. */\n      this._drawers = new QueryList();\n      /** Event emitted when the drawer backdrop is clicked. */\n      this.backdropClick = new EventEmitter();\n      /** Emits when the component is destroyed. */\n      this._destroyed = new Subject();\n      /** Emits on every ngDoCheck. Used for debouncing reflows. */\n      this._doCheckSubject = new Subject();\n      /**\n       * Margins to be applied to the content. These are used to push / shrink the drawer content when a\n       * drawer is open. We use margin rather than transform even for push mode because transform breaks\n       * fixed position elements inside of the transformed element.\n       */\n      this._contentMargins = {\n        left: null,\n        right: null\n      };\n      this._contentMarginChanges = new Subject();\n      this._injector = inject(Injector);\n      // If a `Dir` directive exists up the tree, listen direction changes\n      // and update the left/right properties to point to the proper start/end.\n      if (_dir) {\n        _dir.change.pipe(takeUntil(this._destroyed)).subscribe(() => {\n          this._validateDrawers();\n          this.updateContentMargins();\n        });\n      }\n      // Since the minimum width of the sidenav depends on the viewport width,\n      // we need to recompute the margins if the viewport changes.\n      viewportRuler.change().pipe(takeUntil(this._destroyed)).subscribe(() => this.updateContentMargins());\n      this._autosize = defaultAutosize;\n    }\n    ngAfterContentInit() {\n      this._allDrawers.changes.pipe(startWith(this._allDrawers), takeUntil(this._destroyed)).subscribe(drawer => {\n        this._drawers.reset(drawer.filter(item => !item._container || item._container === this));\n        this._drawers.notifyOnChanges();\n      });\n      this._drawers.changes.pipe(startWith(null)).subscribe(() => {\n        this._validateDrawers();\n        this._drawers.forEach(drawer => {\n          this._watchDrawerToggle(drawer);\n          this._watchDrawerPosition(drawer);\n          this._watchDrawerMode(drawer);\n        });\n        if (!this._drawers.length || this._isDrawerOpen(this._start) || this._isDrawerOpen(this._end)) {\n          this.updateContentMargins();\n        }\n        this._changeDetectorRef.markForCheck();\n      });\n      // Avoid hitting the NgZone through the debounce timeout.\n      this._ngZone.runOutsideAngular(() => {\n        this._doCheckSubject.pipe(debounceTime(10),\n        // Arbitrary debounce time, less than a frame at 60fps\n        takeUntil(this._destroyed)).subscribe(() => this.updateContentMargins());\n      });\n    }\n    ngOnDestroy() {\n      this._contentMarginChanges.complete();\n      this._doCheckSubject.complete();\n      this._drawers.destroy();\n      this._destroyed.next();\n      this._destroyed.complete();\n    }\n    /** Calls `open` of both start and end drawers */\n    open() {\n      this._drawers.forEach(drawer => drawer.open());\n    }\n    /** Calls `close` of both start and end drawers */\n    close() {\n      this._drawers.forEach(drawer => drawer.close());\n    }\n    /**\n     * Recalculates and updates the inline styles for the content. Note that this should be used\n     * sparingly, because it causes a reflow.\n     */\n    updateContentMargins() {\n      // 1. For drawers in `over` mode, they don't affect the content.\n      // 2. For drawers in `side` mode they should shrink the content. We do this by adding to the\n      //    left margin (for left drawer) or right margin (for right the drawer).\n      // 3. For drawers in `push` mode the should shift the content without resizing it. We do this by\n      //    adding to the left or right margin and simultaneously subtracting the same amount of\n      //    margin from the other side.\n      let left = 0;\n      let right = 0;\n      if (this._left && this._left.opened) {\n        if (this._left.mode == 'side') {\n          left += this._left._getWidth();\n        } else if (this._left.mode == 'push') {\n          const width = this._left._getWidth();\n          left += width;\n          right -= width;\n        }\n      }\n      if (this._right && this._right.opened) {\n        if (this._right.mode == 'side') {\n          right += this._right._getWidth();\n        } else if (this._right.mode == 'push') {\n          const width = this._right._getWidth();\n          right += width;\n          left -= width;\n        }\n      }\n      // If either `right` or `left` is zero, don't set a style to the element. This\n      // allows users to specify a custom size via CSS class in SSR scenarios where the\n      // measured widths will always be zero. Note that we reset to `null` here, rather\n      // than below, in order to ensure that the types in the `if` below are consistent.\n      left = left || null;\n      right = right || null;\n      if (left !== this._contentMargins.left || right !== this._contentMargins.right) {\n        this._contentMargins = {\n          left,\n          right\n        };\n        // Pull back into the NgZone since in some cases we could be outside. We need to be careful\n        // to do it only when something changed, otherwise we can end up hitting the zone too often.\n        this._ngZone.run(() => this._contentMarginChanges.next(this._contentMargins));\n      }\n    }\n    ngDoCheck() {\n      // If users opted into autosizing, do a check every change detection cycle.\n      if (this._autosize && this._isPushed()) {\n        // Run outside the NgZone, otherwise the debouncer will throw us into an infinite loop.\n        this._ngZone.runOutsideAngular(() => this._doCheckSubject.next());\n      }\n    }\n    /**\n     * Subscribes to drawer events in order to set a class on the main container element when the\n     * drawer is open and the backdrop is visible. This ensures any overflow on the container element\n     * is properly hidden.\n     */\n    _watchDrawerToggle(drawer) {\n      drawer._animationStarted.pipe(filter(event => event.fromState !== event.toState), takeUntil(this._drawers.changes)).subscribe(event => {\n        // Set the transition class on the container so that the animations occur. This should not\n        // be set initially because animations should only be triggered via a change in state.\n        if (event.toState !== 'open-instant' && this._animationMode !== 'NoopAnimations') {\n          this._element.nativeElement.classList.add('mat-drawer-transition');\n        }\n        this.updateContentMargins();\n        this._changeDetectorRef.markForCheck();\n      });\n      if (drawer.mode !== 'side') {\n        drawer.openedChange.pipe(takeUntil(this._drawers.changes)).subscribe(() => this._setContainerClass(drawer.opened));\n      }\n    }\n    /**\n     * Subscribes to drawer onPositionChanged event in order to\n     * re-validate drawers when the position changes.\n     */\n    _watchDrawerPosition(drawer) {\n      if (!drawer) {\n        return;\n      }\n      // NOTE: We need to wait for the microtask queue to be empty before validating,\n      // since both drawers may be swapping positions at the same time.\n      drawer.onPositionChanged.pipe(takeUntil(this._drawers.changes)).subscribe(() => {\n        afterNextRender(() => {\n          this._validateDrawers();\n        }, {\n          injector: this._injector,\n          phase: AfterRenderPhase.Read\n        });\n      });\n    }\n    /** Subscribes to changes in drawer mode so we can run change detection. */\n    _watchDrawerMode(drawer) {\n      if (drawer) {\n        drawer._modeChanged.pipe(takeUntil(merge(this._drawers.changes, this._destroyed))).subscribe(() => {\n          this.updateContentMargins();\n          this._changeDetectorRef.markForCheck();\n        });\n      }\n    }\n    /** Toggles the 'mat-drawer-opened' class on the main 'mat-drawer-container' element. */\n    _setContainerClass(isAdd) {\n      const classList = this._element.nativeElement.classList;\n      const className = 'mat-drawer-container-has-open';\n      if (isAdd) {\n        classList.add(className);\n      } else {\n        classList.remove(className);\n      }\n    }\n    /** Validate the state of the drawer children components. */\n    _validateDrawers() {\n      this._start = this._end = null;\n      // Ensure that we have at most one start and one end drawer.\n      this._drawers.forEach(drawer => {\n        if (drawer.position == 'end') {\n          if (this._end != null && (typeof ngDevMode === 'undefined' || ngDevMode)) {\n            throwMatDuplicatedDrawerError('end');\n          }\n          this._end = drawer;\n        } else {\n          if (this._start != null && (typeof ngDevMode === 'undefined' || ngDevMode)) {\n            throwMatDuplicatedDrawerError('start');\n          }\n          this._start = drawer;\n        }\n      });\n      this._right = this._left = null;\n      // Detect if we're LTR or RTL.\n      if (this._dir && this._dir.value === 'rtl') {\n        this._left = this._end;\n        this._right = this._start;\n      } else {\n        this._left = this._start;\n        this._right = this._end;\n      }\n    }\n    /** Whether the container is being pushed to the side by one of the drawers. */\n    _isPushed() {\n      return this._isDrawerOpen(this._start) && this._start.mode != 'over' || this._isDrawerOpen(this._end) && this._end.mode != 'over';\n    }\n    _onBackdropClicked() {\n      this.backdropClick.emit();\n      this._closeModalDrawersViaBackdrop();\n    }\n    _closeModalDrawersViaBackdrop() {\n      // Close all open drawers where closing is not disabled and the mode is not `side`.\n      [this._start, this._end].filter(drawer => drawer && !drawer.disableClose && this._drawerHasBackdrop(drawer)).forEach(drawer => drawer._closeViaBackdropClick());\n    }\n    _isShowingBackdrop() {\n      return this._isDrawerOpen(this._start) && this._drawerHasBackdrop(this._start) || this._isDrawerOpen(this._end) && this._drawerHasBackdrop(this._end);\n    }\n    _isDrawerOpen(drawer) {\n      return drawer != null && drawer.opened;\n    }\n    // Whether argument drawer should have a backdrop when it opens\n    _drawerHasBackdrop(drawer) {\n      if (this._backdropOverride == null) {\n        return !!drawer && drawer.mode !== 'side';\n      }\n      return this._backdropOverride;\n    }\n    static {\n      this.ɵfac = function MatDrawerContainer_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || MatDrawerContainer)(i0.ɵɵdirectiveInject(i4.Directionality, 8), i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i0.NgZone), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i1.ViewportRuler), i0.ɵɵdirectiveInject(MAT_DRAWER_DEFAULT_AUTOSIZE), i0.ɵɵdirectiveInject(ANIMATION_MODULE_TYPE, 8));\n      };\n    }\n    static {\n      this.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n        type: MatDrawerContainer,\n        selectors: [[\"mat-drawer-container\"]],\n        contentQueries: function MatDrawerContainer_ContentQueries(rf, ctx, dirIndex) {\n          if (rf & 1) {\n            i0.ɵɵcontentQuery(dirIndex, MatDrawerContent, 5);\n            i0.ɵɵcontentQuery(dirIndex, MatDrawer, 5);\n          }\n          if (rf & 2) {\n            let _t;\n            i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._content = _t.first);\n            i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._allDrawers = _t);\n          }\n        },\n        viewQuery: function MatDrawerContainer_Query(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵviewQuery(MatDrawerContent, 5);\n          }\n          if (rf & 2) {\n            let _t;\n            i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._userContent = _t.first);\n          }\n        },\n        hostAttrs: [1, \"mat-drawer-container\"],\n        hostVars: 2,\n        hostBindings: function MatDrawerContainer_HostBindings(rf, ctx) {\n          if (rf & 2) {\n            i0.ɵɵclassProp(\"mat-drawer-container-explicit-backdrop\", ctx._backdropOverride);\n          }\n        },\n        inputs: {\n          autosize: \"autosize\",\n          hasBackdrop: \"hasBackdrop\"\n        },\n        outputs: {\n          backdropClick: \"backdropClick\"\n        },\n        exportAs: [\"matDrawerContainer\"],\n        standalone: true,\n        features: [i0.ɵɵProvidersFeature([{\n          provide: MAT_DRAWER_CONTAINER,\n          useExisting: MatDrawerContainer\n        }]), i0.ɵɵStandaloneFeature],\n        ngContentSelectors: _c3,\n        decls: 4,\n        vars: 2,\n        consts: [[1, \"mat-drawer-backdrop\", 3, \"mat-drawer-shown\"], [1, \"mat-drawer-backdrop\", 3, \"click\"]],\n        template: function MatDrawerContainer_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵprojectionDef(_c2);\n            i0.ɵɵtemplate(0, MatDrawerContainer_Conditional_0_Template, 1, 2, \"div\", 0);\n            i0.ɵɵprojection(1);\n            i0.ɵɵprojection(2, 1);\n            i0.ɵɵtemplate(3, MatDrawerContainer_Conditional_3_Template, 2, 0, \"mat-drawer-content\");\n          }\n          if (rf & 2) {\n            i0.ɵɵconditional(ctx.hasBackdrop ? 0 : -1);\n            i0.ɵɵadvance(3);\n            i0.ɵɵconditional(!ctx._content ? 3 : -1);\n          }\n        },\n        dependencies: [MatDrawerContent],\n        styles: [\".mat-drawer-container{position:relative;z-index:1;color:var(--mat-sidenav-content-text-color, var(--mat-app-on-background));background-color:var(--mat-sidenav-content-background-color, var(--mat-app-background));box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible;background-color:var(--mat-sidenav-scrim-color)}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;color:var(--mat-sidenav-container-text-color, var(--mat-app-on-surface-variant));box-shadow:var(--mat-sidenav-container-elevation-shadow);background-color:var(--mat-sidenav-container-background-color, var(--mat-app-surface));border-top-right-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));border-bottom-right-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));width:var(--mat-sidenav-container-width);display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0);border-top-left-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));border-bottom-left-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));border-top-right-radius:0;border-bottom-right-radius:0}[dir=rtl] .mat-drawer{border-top-left-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));border-bottom-left-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));border-top-right-radius:0;border-bottom-right-radius:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{border-top-right-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));border-bottom-right-radius:var(--mat-sidenav-container-shape, var(--mat-app-corner-large));border-top-left-radius:0;border-bottom-left-radius:0;left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*=\\\"visibility: hidden\\\"]{display:none}.mat-drawer-side{box-shadow:none;border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid}.mat-drawer-side.mat-drawer-end{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side{border-left-color:var(--mat-sidenav-container-divider-color);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side.mat-drawer-end{border-right-color:var(--mat-sidenav-container-divider-color);border-right-width:1px;border-right-style:solid;border-left:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\"],\n        encapsulation: 2,\n        changeDetection: 0\n      });\n    }\n  }\n  return MatDrawerContainer;\n})();\n/*#__PURE__*/(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet MatSidenavContent = /*#__PURE__*/(() => {\n  class MatSidenavContent extends MatDrawerContent {\n    constructor(changeDetectorRef, container, elementRef, scrollDispatcher, ngZone) {\n      super(changeDetectorRef, container, elementRef, scrollDispatcher, ngZone);\n    }\n    static {\n      this.ɵfac = function MatSidenavContent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || MatSidenavContent)(i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(forwardRef(() => MatSidenavContainer)), i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i1.ScrollDispatcher), i0.ɵɵdirectiveInject(i0.NgZone));\n      };\n    }\n    static {\n      this.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n        type: MatSidenavContent,\n        selectors: [[\"mat-sidenav-content\"]],\n        hostAttrs: [1, \"mat-drawer-content\", \"mat-sidenav-content\"],\n        hostVars: 4,\n        hostBindings: function MatSidenavContent_HostBindings(rf, ctx) {\n          if (rf & 2) {\n            i0.ɵɵstyleProp(\"margin-left\", ctx._container._contentMargins.left, \"px\")(\"margin-right\", ctx._container._contentMargins.right, \"px\");\n          }\n        },\n        standalone: true,\n        features: [i0.ɵɵProvidersFeature([{\n          provide: CdkScrollable,\n          useExisting: MatSidenavContent\n        }]), i0.ɵɵInheritDefinitionFeature, i0.ɵɵStandaloneFeature],\n        ngContentSelectors: _c0,\n        decls: 1,\n        vars: 0,\n        template: function MatSidenavContent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵprojectionDef();\n            i0.ɵɵprojection(0);\n          }\n        },\n        encapsulation: 2,\n        changeDetection: 0\n      });\n    }\n  }\n  return MatSidenavContent;\n})();\n/*#__PURE__*/(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet MatSidenav = /*#__PURE__*/(() => {\n  class MatSidenav extends MatDrawer {\n    constructor() {\n      super(...arguments);\n      this._fixedInViewport = false;\n      this._fixedTopGap = 0;\n      this._fixedBottomGap = 0;\n    }\n    /** Whether the sidenav is fixed in the viewport. */\n    get fixedInViewport() {\n      return this._fixedInViewport;\n    }\n    set fixedInViewport(value) {\n      this._fixedInViewport = coerceBooleanProperty(value);\n    }\n    /**\n     * The gap between the top of the sidenav and the top of the viewport when the sidenav is in fixed\n     * mode.\n     */\n    get fixedTopGap() {\n      return this._fixedTopGap;\n    }\n    set fixedTopGap(value) {\n      this._fixedTopGap = coerceNumberProperty(value);\n    }\n    /**\n     * The gap between the bottom of the sidenav and the bottom of the viewport when the sidenav is in\n     * fixed mode.\n     */\n    get fixedBottomGap() {\n      return this._fixedBottomGap;\n    }\n    set fixedBottomGap(value) {\n      this._fixedBottomGap = coerceNumberProperty(value);\n    }\n    static {\n      this.ɵfac = /* @__PURE__ */(() => {\n        let ɵMatSidenav_BaseFactory;\n        return function MatSidenav_Factory(__ngFactoryType__) {\n          return (ɵMatSidenav_BaseFactory || (ɵMatSidenav_BaseFactory = i0.ɵɵgetInheritedFactory(MatSidenav)))(__ngFactoryType__ || MatSidenav);\n        };\n      })();\n    }\n    static {\n      this.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n        type: MatSidenav,\n        selectors: [[\"mat-sidenav\"]],\n        hostAttrs: [\"tabIndex\", \"-1\", 1, \"mat-drawer\", \"mat-sidenav\"],\n        hostVars: 17,\n        hostBindings: function MatSidenav_HostBindings(rf, ctx) {\n          if (rf & 2) {\n            i0.ɵɵattribute(\"align\", null);\n            i0.ɵɵstyleProp(\"top\", ctx.fixedInViewport ? ctx.fixedTopGap : null, \"px\")(\"bottom\", ctx.fixedInViewport ? ctx.fixedBottomGap : null, \"px\");\n            i0.ɵɵclassProp(\"mat-drawer-end\", ctx.position === \"end\")(\"mat-drawer-over\", ctx.mode === \"over\")(\"mat-drawer-push\", ctx.mode === \"push\")(\"mat-drawer-side\", ctx.mode === \"side\")(\"mat-drawer-opened\", ctx.opened)(\"mat-sidenav-fixed\", ctx.fixedInViewport);\n          }\n        },\n        inputs: {\n          fixedInViewport: \"fixedInViewport\",\n          fixedTopGap: \"fixedTopGap\",\n          fixedBottomGap: \"fixedBottomGap\"\n        },\n        exportAs: [\"matSidenav\"],\n        standalone: true,\n        features: [i0.ɵɵInheritDefinitionFeature, i0.ɵɵStandaloneFeature],\n        ngContentSelectors: _c0,\n        decls: 3,\n        vars: 0,\n        consts: [[\"content\", \"\"], [\"cdkScrollable\", \"\", 1, \"mat-drawer-inner-container\"]],\n        template: function MatSidenav_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵprojectionDef();\n            i0.ɵɵelementStart(0, \"div\", 1, 0);\n            i0.ɵɵprojection(2);\n            i0.ɵɵelementEnd();\n          }\n        },\n        dependencies: [CdkScrollable],\n        encapsulation: 2,\n        data: {\n          animation: [matDrawerAnimations.transformDrawer]\n        },\n        changeDetection: 0\n      });\n    }\n  }\n  return MatSidenav;\n})();\n/*#__PURE__*/(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet MatSidenavContainer = /*#__PURE__*/(() => {\n  class MatSidenavContainer extends MatDrawerContainer {\n    constructor() {\n      super(...arguments);\n      this._allDrawers = undefined;\n      // We need an initializer here to avoid a TS error.\n      this._content = undefined;\n    }\n    static {\n      this.ɵfac = /* @__PURE__ */(() => {\n        let ɵMatSidenavContainer_BaseFactory;\n        return function MatSidenavContainer_Factory(__ngFactoryType__) {\n          return (ɵMatSidenavContainer_BaseFactory || (ɵMatSidenavContainer_BaseFactory = i0.ɵɵgetInheritedFactory(MatSidenavContainer)))(__ngFactoryType__ || MatSidenavContainer);\n        };\n      })();\n    }\n    static {\n      this.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n        type: MatSidenavContainer,\n        selectors: [[\"mat-sidenav-container\"]],\n        contentQueries: function MatSidenavContainer_ContentQueries(rf, ctx, dirIndex) {\n          if (rf & 1) {\n            i0.ɵɵcontentQuery(dirIndex, MatSidenavContent, 5);\n            i0.ɵɵcontentQuery(dirIndex, MatSidenav, 5);\n          }\n          if (rf & 2) {\n            let _t;\n            i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._content = _t.first);\n            i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._allDrawers = _t);\n          }\n        },\n        hostAttrs: [1, \"mat-drawer-container\", \"mat-sidenav-container\"],\n        hostVars: 2,\n        hostBindings: function MatSidenavContainer_HostBindings(rf, ctx) {\n          if (rf & 2) {\n            i0.ɵɵclassProp(\"mat-drawer-container-explicit-backdrop\", ctx._backdropOverride);\n          }\n        },\n        exportAs: [\"matSidenavContainer\"],\n        standalone: true,\n        features: [i0.ɵɵProvidersFeature([{\n          provide: MAT_DRAWER_CONTAINER,\n          useExisting: MatSidenavContainer\n        }]), i0.ɵɵInheritDefinitionFeature, i0.ɵɵStandaloneFeature],\n        ngContentSelectors: _c5,\n        decls: 4,\n        vars: 2,\n        consts: [[1, \"mat-drawer-backdrop\", 3, \"mat-drawer-shown\"], [1, \"mat-drawer-backdrop\", 3, \"click\"]],\n        template: function MatSidenavContainer_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵprojectionDef(_c4);\n            i0.ɵɵtemplate(0, MatSidenavContainer_Conditional_0_Template, 1, 2, \"div\", 0);\n            i0.ɵɵprojection(1);\n            i0.ɵɵprojection(2, 1);\n            i0.ɵɵtemplate(3, MatSidenavContainer_Conditional_3_Template, 2, 0, \"mat-sidenav-content\");\n          }\n          if (rf & 2) {\n            i0.ɵɵconditional(ctx.hasBackdrop ? 0 : -1);\n            i0.ɵɵadvance(3);\n            i0.ɵɵconditional(!ctx._content ? 3 : -1);\n          }\n        },\n        dependencies: [MatSidenavContent],\n        styles: [_c6],\n        encapsulation: 2,\n        changeDetection: 0\n      });\n    }\n  }\n  return MatSidenavContainer;\n})();\n/*#__PURE__*/(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet MatSidenavModule = /*#__PURE__*/(() => {\n  class MatSidenavModule {\n    static {\n      this.ɵfac = function MatSidenavModule_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || MatSidenavModule)();\n      };\n    }\n    static {\n      this.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n        type: MatSidenavModule\n      });\n    }\n    static {\n      this.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n        imports: [MatCommonModule, CdkScrollableModule, CdkScrollableModule, MatCommonModule]\n      });\n    }\n  }\n  return MatSidenavModule;\n})();\n/*#__PURE__*/(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { MAT_DRAWER_DEFAULT_AUTOSIZE, MAT_DRAWER_DEFAULT_AUTOSIZE_FACTORY, MatDrawer, MatDrawerContainer, MatDrawerContent, MatSidenav, MatSidenavContainer, MatSidenavContent, MatSidenavModule, matDrawerAnimations, throwMatDuplicatedDrawerError };\n","import * as i0 from '@angular/core';\nimport { InjectionToken, Component, ViewEncapsulation, ChangeDetectionStrategy, Optional, Inject, Input, ContentChildren, Directive, NgModule } from '@angular/core';\nimport { setLines, MatLine, MatLineModule, MatCommonModule } from '@angular/material/core';\nimport { coerceNumberProperty } from '@angular/cdk/coercion';\nimport * as i1 from '@angular/cdk/bidi';\n\n/**\n * Class for determining, from a list of tiles, the (row, col) position of each of those tiles\n * in the grid. This is necessary (rather than just rendering the tiles in normal document flow)\n * because the tiles can have a rowspan.\n *\n * The positioning algorithm greedily places each tile as soon as it encounters a gap in the grid\n * large enough to accommodate it so that the tiles still render in the same order in which they\n * are given.\n *\n * The basis of the algorithm is the use of an array to track the already placed tiles. Each\n * element of the array corresponds to a column, and the value indicates how many cells in that\n * column are already occupied; zero indicates an empty cell. Moving \"down\" to the next row\n * decrements each value in the tracking array (indicating that the column is one cell closer to\n * being free).\n *\n * @docs-private\n */\nconst _c0 = [\"*\"];\nconst _c1 = [[[\"\", \"mat-grid-avatar\", \"\"], [\"\", \"matGridAvatar\", \"\"]], [[\"\", \"mat-line\", \"\"], [\"\", \"matLine\", \"\"]], \"*\"];\nconst _c2 = [\"[mat-grid-avatar], [matGridAvatar]\", \"[mat-line], [matLine]\", \"*\"];\nconst _c3 = \".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-header{font-size:var(--mat-grid-list-tile-header-primary-text-size, var(--mat-app-body-large))}.mat-grid-tile-header .mat-line{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-grid-tile-header .mat-line:nth-child(n+2){font-size:var(--mat-grid-list-tile-header-secondary-text-size, var(--mat-app-body-medium))}.mat-grid-tile-footer{font-size:var(--mat-grid-list-tile-footer-primary-text-size, var(--mat-app-body-large))}.mat-grid-tile-footer .mat-line{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-grid-tile-footer .mat-line:nth-child(n+2){font-size:var(--mat-grid-list-tile-footer-secondary-text-size, var(--mat-app-body-medium))}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}\";\nclass TileCoordinator {\n  constructor() {\n    /** Index at which the search for the next gap will start. */\n    this.columnIndex = 0;\n    /** The current row index. */\n    this.rowIndex = 0;\n  }\n  /** Gets the total number of rows occupied by tiles */\n  get rowCount() {\n    return this.rowIndex + 1;\n  }\n  /**\n   * Gets the total span of rows occupied by tiles.\n   * Ex: A list with 1 row that contains a tile with rowspan 2 will have a total rowspan of 2.\n   */\n  get rowspan() {\n    const lastRowMax = Math.max(...this.tracker);\n    // if any of the tiles has a rowspan that pushes it beyond the total row count,\n    // add the difference to the rowcount\n    return lastRowMax > 1 ? this.rowCount + lastRowMax - 1 : this.rowCount;\n  }\n  /**\n   * Updates the tile positions.\n   * @param numColumns Amount of columns in the grid.\n   * @param tiles Tiles to be positioned.\n   */\n  update(numColumns, tiles) {\n    this.columnIndex = 0;\n    this.rowIndex = 0;\n    this.tracker = new Array(numColumns);\n    this.tracker.fill(0, 0, this.tracker.length);\n    this.positions = tiles.map(tile => this._trackTile(tile));\n  }\n  /** Calculates the row and col position of a tile. */\n  _trackTile(tile) {\n    // Find a gap large enough for this tile.\n    const gapStartIndex = this._findMatchingGap(tile.colspan);\n    // Place tile in the resulting gap.\n    this._markTilePosition(gapStartIndex, tile);\n    // The next time we look for a gap, the search will start at columnIndex, which should be\n    // immediately after the tile that has just been placed.\n    this.columnIndex = gapStartIndex + tile.colspan;\n    return new TilePosition(this.rowIndex, gapStartIndex);\n  }\n  /** Finds the next available space large enough to fit the tile. */\n  _findMatchingGap(tileCols) {\n    if (tileCols > this.tracker.length && (typeof ngDevMode === 'undefined' || ngDevMode)) {\n      throw Error(`mat-grid-list: tile with colspan ${tileCols} is wider than ` + `grid with cols=\"${this.tracker.length}\".`);\n    }\n    // Start index is inclusive, end index is exclusive.\n    let gapStartIndex = -1;\n    let gapEndIndex = -1;\n    // Look for a gap large enough to fit the given tile. Empty spaces are marked with a zero.\n    do {\n      // If we've reached the end of the row, go to the next row.\n      if (this.columnIndex + tileCols > this.tracker.length) {\n        this._nextRow();\n        gapStartIndex = this.tracker.indexOf(0, this.columnIndex);\n        gapEndIndex = this._findGapEndIndex(gapStartIndex);\n        continue;\n      }\n      gapStartIndex = this.tracker.indexOf(0, this.columnIndex);\n      // If there are no more empty spaces in this row at all, move on to the next row.\n      if (gapStartIndex == -1) {\n        this._nextRow();\n        gapStartIndex = this.tracker.indexOf(0, this.columnIndex);\n        gapEndIndex = this._findGapEndIndex(gapStartIndex);\n        continue;\n      }\n      gapEndIndex = this._findGapEndIndex(gapStartIndex);\n      // If a gap large enough isn't found, we want to start looking immediately after the current\n      // gap on the next iteration.\n      this.columnIndex = gapStartIndex + 1;\n      // Continue iterating until we find a gap wide enough for this tile. Since gapEndIndex is\n      // exclusive, gapEndIndex is 0 means we didn't find a gap and should continue.\n    } while (gapEndIndex - gapStartIndex < tileCols || gapEndIndex == 0);\n    // If we still didn't manage to find a gap, ensure that the index is\n    // at least zero so the tile doesn't get pulled out of the grid.\n    return Math.max(gapStartIndex, 0);\n  }\n  /** Move \"down\" to the next row. */\n  _nextRow() {\n    this.columnIndex = 0;\n    this.rowIndex++;\n    // Decrement all spaces by one to reflect moving down one row.\n    for (let i = 0; i < this.tracker.length; i++) {\n      this.tracker[i] = Math.max(0, this.tracker[i] - 1);\n    }\n  }\n  /**\n   * Finds the end index (exclusive) of a gap given the index from which to start looking.\n   * The gap ends when a non-zero value is found.\n   */\n  _findGapEndIndex(gapStartIndex) {\n    for (let i = gapStartIndex + 1; i < this.tracker.length; i++) {\n      if (this.tracker[i] != 0) {\n        return i;\n      }\n    }\n    // The gap ends with the end of the row.\n    return this.tracker.length;\n  }\n  /** Update the tile tracker to account for the given tile in the given space. */\n  _markTilePosition(start, tile) {\n    for (let i = 0; i < tile.colspan; i++) {\n      this.tracker[start + i] = tile.rowspan;\n    }\n  }\n}\n/**\n * Simple data structure for tile position (row, col).\n * @docs-private\n */\nclass TilePosition {\n  constructor(row, col) {\n    this.row = row;\n    this.col = col;\n  }\n}\n\n/**\n * Injection token used to provide a grid list to a tile and to avoid circular imports.\n * @docs-private\n */\nconst MAT_GRID_LIST = /*#__PURE__*/new InjectionToken('MAT_GRID_LIST');\nlet MatGridTile = /*#__PURE__*/(() => {\n  class MatGridTile {\n    constructor(_element, _gridList) {\n      this._element = _element;\n      this._gridList = _gridList;\n      this._rowspan = 1;\n      this._colspan = 1;\n    }\n    /** Amount of rows that the grid tile takes up. */\n    get rowspan() {\n      return this._rowspan;\n    }\n    set rowspan(value) {\n      this._rowspan = Math.round(coerceNumberProperty(value));\n    }\n    /** Amount of columns that the grid tile takes up. */\n    get colspan() {\n      return this._colspan;\n    }\n    set colspan(value) {\n      this._colspan = Math.round(coerceNumberProperty(value));\n    }\n    /**\n     * Sets the style of the grid-tile element.  Needs to be set manually to avoid\n     * \"Changed after checked\" errors that would occur with HostBinding.\n     */\n    _setStyle(property, value) {\n      this._element.nativeElement.style[property] = value;\n    }\n    static {\n      this.ɵfac = function MatGridTile_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || MatGridTile)(i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(MAT_GRID_LIST, 8));\n      };\n    }\n    static {\n      this.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n        type: MatGridTile,\n        selectors: [[\"mat-grid-tile\"]],\n        hostAttrs: [1, \"mat-grid-tile\"],\n        hostVars: 2,\n        hostBindings: function MatGridTile_HostBindings(rf, ctx) {\n          if (rf & 2) {\n            i0.ɵɵattribute(\"rowspan\", ctx.rowspan)(\"colspan\", ctx.colspan);\n          }\n        },\n        inputs: {\n          rowspan: \"rowspan\",\n          colspan: \"colspan\"\n        },\n        exportAs: [\"matGridTile\"],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        ngContentSelectors: _c0,\n        decls: 2,\n        vars: 0,\n        consts: [[1, \"mat-grid-tile-content\"]],\n        template: function MatGridTile_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵprojectionDef();\n            i0.ɵɵelementStart(0, \"div\", 0);\n            i0.ɵɵprojection(1);\n            i0.ɵɵelementEnd();\n          }\n        },\n        styles: [\".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-header{font-size:var(--mat-grid-list-tile-header-primary-text-size, var(--mat-app-body-large))}.mat-grid-tile-header .mat-line{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-grid-tile-header .mat-line:nth-child(n+2){font-size:var(--mat-grid-list-tile-header-secondary-text-size, var(--mat-app-body-medium))}.mat-grid-tile-footer{font-size:var(--mat-grid-list-tile-footer-primary-text-size, var(--mat-app-body-large))}.mat-grid-tile-footer .mat-line{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-grid-tile-footer .mat-line:nth-child(n+2){font-size:var(--mat-grid-list-tile-footer-secondary-text-size, var(--mat-app-body-medium))}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}\"],\n        encapsulation: 2,\n        changeDetection: 0\n      });\n    }\n  }\n  return MatGridTile;\n})();\n/*#__PURE__*/(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet MatGridTileText = /*#__PURE__*/(() => {\n  class MatGridTileText {\n    constructor(_element) {\n      this._element = _element;\n    }\n    ngAfterContentInit() {\n      setLines(this._lines, this._element);\n    }\n    static {\n      this.ɵfac = function MatGridTileText_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || MatGridTileText)(i0.ɵɵdirectiveInject(i0.ElementRef));\n      };\n    }\n    static {\n      this.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n        type: MatGridTileText,\n        selectors: [[\"mat-grid-tile-header\"], [\"mat-grid-tile-footer\"]],\n        contentQueries: function MatGridTileText_ContentQueries(rf, ctx, dirIndex) {\n          if (rf & 1) {\n            i0.ɵɵcontentQuery(dirIndex, MatLine, 5);\n          }\n          if (rf & 2) {\n            let _t;\n            i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._lines = _t);\n          }\n        },\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        ngContentSelectors: _c2,\n        decls: 4,\n        vars: 0,\n        consts: [[1, \"mat-grid-list-text\"]],\n        template: function MatGridTileText_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵprojectionDef(_c1);\n            i0.ɵɵprojection(0);\n            i0.ɵɵelementStart(1, \"div\", 0);\n            i0.ɵɵprojection(2, 1);\n            i0.ɵɵelementEnd();\n            i0.ɵɵprojection(3, 2);\n          }\n        },\n        encapsulation: 2,\n        changeDetection: 0\n      });\n    }\n  }\n  return MatGridTileText;\n})();\n/*#__PURE__*/(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * Directive whose purpose is to add the mat- CSS styling to this selector.\n * @docs-private\n */\nlet MatGridAvatarCssMatStyler = /*#__PURE__*/(() => {\n  class MatGridAvatarCssMatStyler {\n    static {\n      this.ɵfac = function MatGridAvatarCssMatStyler_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || MatGridAvatarCssMatStyler)();\n      };\n    }\n    static {\n      this.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n        type: MatGridAvatarCssMatStyler,\n        selectors: [[\"\", \"mat-grid-avatar\", \"\"], [\"\", \"matGridAvatar\", \"\"]],\n        hostAttrs: [1, \"mat-grid-avatar\"],\n        standalone: true\n      });\n    }\n  }\n  return MatGridAvatarCssMatStyler;\n})();\n/*#__PURE__*/(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * Directive whose purpose is to add the mat- CSS styling to this selector.\n * @docs-private\n */\nlet MatGridTileHeaderCssMatStyler = /*#__PURE__*/(() => {\n  class MatGridTileHeaderCssMatStyler {\n    static {\n      this.ɵfac = function MatGridTileHeaderCssMatStyler_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || MatGridTileHeaderCssMatStyler)();\n      };\n    }\n    static {\n      this.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n        type: MatGridTileHeaderCssMatStyler,\n        selectors: [[\"mat-grid-tile-header\"]],\n        hostAttrs: [1, \"mat-grid-tile-header\"],\n        standalone: true\n      });\n    }\n  }\n  return MatGridTileHeaderCssMatStyler;\n})();\n/*#__PURE__*/(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * Directive whose purpose is to add the mat- CSS styling to this selector.\n * @docs-private\n */\nlet MatGridTileFooterCssMatStyler = /*#__PURE__*/(() => {\n  class MatGridTileFooterCssMatStyler {\n    static {\n      this.ɵfac = function MatGridTileFooterCssMatStyler_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || MatGridTileFooterCssMatStyler)();\n      };\n    }\n    static {\n      this.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n        type: MatGridTileFooterCssMatStyler,\n        selectors: [[\"mat-grid-tile-footer\"]],\n        hostAttrs: [1, \"mat-grid-tile-footer\"],\n        standalone: true\n      });\n    }\n  }\n  return MatGridTileFooterCssMatStyler;\n})();\n/*#__PURE__*/(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n/**\n * RegExp that can be used to check whether a value will\n * be allowed inside a CSS `calc()` expression.\n */\nconst cssCalcAllowedValue = /^-?\\d+((\\.\\d+)?[A-Za-z%$]?)+$/;\n/**\n * Sets the style properties for an individual tile, given the position calculated by the\n * Tile Coordinator.\n * @docs-private\n */\nclass TileStyler {\n  constructor() {\n    this._rows = 0;\n    this._rowspan = 0;\n  }\n  /**\n   * Adds grid-list layout info once it is available. Cannot be processed in the constructor\n   * because these properties haven't been calculated by that point.\n   *\n   * @param gutterSize Size of the grid's gutter.\n   * @param tracker Instance of the TileCoordinator.\n   * @param cols Amount of columns in the grid.\n   * @param direction Layout direction of the grid.\n   */\n  init(gutterSize, tracker, cols, direction) {\n    this._gutterSize = normalizeUnits(gutterSize);\n    this._rows = tracker.rowCount;\n    this._rowspan = tracker.rowspan;\n    this._cols = cols;\n    this._direction = direction;\n  }\n  /**\n   * Computes the amount of space a single 1x1 tile would take up (width or height).\n   * Used as a basis for other calculations.\n   * @param sizePercent Percent of the total grid-list space that one 1x1 tile would take up.\n   * @param gutterFraction Fraction of the gutter size taken up by one 1x1 tile.\n   * @return The size of a 1x1 tile as an expression that can be evaluated via CSS calc().\n   */\n  getBaseTileSize(sizePercent, gutterFraction) {\n    // Take the base size percent (as would be if evenly dividing the size between cells),\n    // and then subtracting the size of one gutter. However, since there are no gutters on the\n    // edges, each tile only uses a fraction (gutterShare = numGutters / numCells) of the gutter\n    // size. (Imagine having one gutter per tile, and then breaking up the extra gutter on the\n    // edge evenly among the cells).\n    return `(${sizePercent}% - (${this._gutterSize} * ${gutterFraction}))`;\n  }\n  /**\n   * Gets The horizontal or vertical position of a tile, e.g., the 'top' or 'left' property value.\n   * @param offset Number of tiles that have already been rendered in the row/column.\n   * @param baseSize Base size of a 1x1 tile (as computed in getBaseTileSize).\n   * @return Position of the tile as a CSS calc() expression.\n   */\n  getTilePosition(baseSize, offset) {\n    // The position comes the size of a 1x1 tile plus gutter for each previous tile in the\n    // row/column (offset).\n    return offset === 0 ? '0' : calc(`(${baseSize} + ${this._gutterSize}) * ${offset}`);\n  }\n  /**\n   * Gets the actual size of a tile, e.g., width or height, taking rowspan or colspan into account.\n   * @param baseSize Base size of a 1x1 tile (as computed in getBaseTileSize).\n   * @param span The tile's rowspan or colspan.\n   * @return Size of the tile as a CSS calc() expression.\n   */\n  getTileSize(baseSize, span) {\n    return `(${baseSize} * ${span}) + (${span - 1} * ${this._gutterSize})`;\n  }\n  /**\n   * Sets the style properties to be applied to a tile for the given row and column index.\n   * @param tile Tile to which to apply the styling.\n   * @param rowIndex Index of the tile's row.\n   * @param colIndex Index of the tile's column.\n   */\n  setStyle(tile, rowIndex, colIndex) {\n    // Percent of the available horizontal space that one column takes up.\n    let percentWidthPerTile = 100 / this._cols;\n    // Fraction of the vertical gutter size that each column takes up.\n    // For example, if there are 5 columns, each column uses 4/5 = 0.8 times the gutter width.\n    let gutterWidthFractionPerTile = (this._cols - 1) / this._cols;\n    this.setColStyles(tile, colIndex, percentWidthPerTile, gutterWidthFractionPerTile);\n    this.setRowStyles(tile, rowIndex, percentWidthPerTile, gutterWidthFractionPerTile);\n  }\n  /** Sets the horizontal placement of the tile in the list. */\n  setColStyles(tile, colIndex, percentWidth, gutterWidth) {\n    // Base horizontal size of a column.\n    let baseTileWidth = this.getBaseTileSize(percentWidth, gutterWidth);\n    // The width and horizontal position of each tile is always calculated the same way, but the\n    // height and vertical position depends on the rowMode.\n    let side = this._direction === 'rtl' ? 'right' : 'left';\n    tile._setStyle(side, this.getTilePosition(baseTileWidth, colIndex));\n    tile._setStyle('width', calc(this.getTileSize(baseTileWidth, tile.colspan)));\n  }\n  /**\n   * Calculates the total size taken up by gutters across one axis of a list.\n   */\n  getGutterSpan() {\n    return `${this._gutterSize} * (${this._rowspan} - 1)`;\n  }\n  /**\n   * Calculates the total size taken up by tiles across one axis of a list.\n   * @param tileHeight Height of the tile.\n   */\n  getTileSpan(tileHeight) {\n    return `${this._rowspan} * ${this.getTileSize(tileHeight, 1)}`;\n  }\n  /**\n   * Calculates the computed height and returns the correct style property to set.\n   * This method can be implemented by each type of TileStyler.\n   * @docs-private\n   */\n  getComputedHeight() {\n    return null;\n  }\n}\n/**\n * This type of styler is instantiated when the user passes in a fixed row height.\n * Example `<mat-grid-list cols=\"3\" rowHeight=\"100px\">`\n * @docs-private\n */\nclass FixedTileStyler extends TileStyler {\n  constructor(fixedRowHeight) {\n    super();\n    this.fixedRowHeight = fixedRowHeight;\n  }\n  init(gutterSize, tracker, cols, direction) {\n    super.init(gutterSize, tracker, cols, direction);\n    this.fixedRowHeight = normalizeUnits(this.fixedRowHeight);\n    if (!cssCalcAllowedValue.test(this.fixedRowHeight) && (typeof ngDevMode === 'undefined' || ngDevMode)) {\n      throw Error(`Invalid value \"${this.fixedRowHeight}\" set as rowHeight.`);\n    }\n  }\n  setRowStyles(tile, rowIndex) {\n    tile._setStyle('top', this.getTilePosition(this.fixedRowHeight, rowIndex));\n    tile._setStyle('height', calc(this.getTileSize(this.fixedRowHeight, tile.rowspan)));\n  }\n  getComputedHeight() {\n    return ['height', calc(`${this.getTileSpan(this.fixedRowHeight)} + ${this.getGutterSpan()}`)];\n  }\n  reset(list) {\n    list._setListStyle(['height', null]);\n    if (list._tiles) {\n      list._tiles.forEach(tile => {\n        tile._setStyle('top', null);\n        tile._setStyle('height', null);\n      });\n    }\n  }\n}\n/**\n * This type of styler is instantiated when the user passes in a width:height ratio\n * for the row height.  Example `<mat-grid-list cols=\"3\" rowHeight=\"3:1\">`\n * @docs-private\n */\nclass RatioTileStyler extends TileStyler {\n  constructor(value) {\n    super();\n    this._parseRatio(value);\n  }\n  setRowStyles(tile, rowIndex, percentWidth, gutterWidth) {\n    let percentHeightPerTile = percentWidth / this.rowHeightRatio;\n    this.baseTileHeight = this.getBaseTileSize(percentHeightPerTile, gutterWidth);\n    // Use padding-top and margin-top to maintain the given aspect ratio, as\n    // a percentage-based value for these properties is applied versus the *width* of the\n    // containing block. See http://www.w3.org/TR/CSS2/box.html#margin-properties\n    tile._setStyle('marginTop', this.getTilePosition(this.baseTileHeight, rowIndex));\n    tile._setStyle('paddingTop', calc(this.getTileSize(this.baseTileHeight, tile.rowspan)));\n  }\n  getComputedHeight() {\n    return ['paddingBottom', calc(`${this.getTileSpan(this.baseTileHeight)} + ${this.getGutterSpan()}`)];\n  }\n  reset(list) {\n    list._setListStyle(['paddingBottom', null]);\n    list._tiles.forEach(tile => {\n      tile._setStyle('marginTop', null);\n      tile._setStyle('paddingTop', null);\n    });\n  }\n  _parseRatio(value) {\n    const ratioParts = value.split(':');\n    if (ratioParts.length !== 2 && (typeof ngDevMode === 'undefined' || ngDevMode)) {\n      throw Error(`mat-grid-list: invalid ratio given for row-height: \"${value}\"`);\n    }\n    this.rowHeightRatio = parseFloat(ratioParts[0]) / parseFloat(ratioParts[1]);\n  }\n}\n/**\n * This type of styler is instantiated when the user selects a \"fit\" row height mode.\n * In other words, the row height will reflect the total height of the container divided\n * by the number of rows.  Example `<mat-grid-list cols=\"3\" rowHeight=\"fit\">`\n *\n * @docs-private\n */\nclass FitTileStyler extends TileStyler {\n  setRowStyles(tile, rowIndex) {\n    // Percent of the available vertical space that one row takes up.\n    let percentHeightPerTile = 100 / this._rowspan;\n    // Fraction of the horizontal gutter size that each column takes up.\n    let gutterHeightPerTile = (this._rows - 1) / this._rows;\n    // Base vertical size of a column.\n    let baseTileHeight = this.getBaseTileSize(percentHeightPerTile, gutterHeightPerTile);\n    tile._setStyle('top', this.getTilePosition(baseTileHeight, rowIndex));\n    tile._setStyle('height', calc(this.getTileSize(baseTileHeight, tile.rowspan)));\n  }\n  reset(list) {\n    if (list._tiles) {\n      list._tiles.forEach(tile => {\n        tile._setStyle('top', null);\n        tile._setStyle('height', null);\n      });\n    }\n  }\n}\n/** Wraps a CSS string in a calc function */\nfunction calc(exp) {\n  return `calc(${exp})`;\n}\n/** Appends pixels to a CSS string if no units are given. */\nfunction normalizeUnits(value) {\n  return value.match(/([A-Za-z%]+)$/) ? value : `${value}px`;\n}\n\n// TODO(kara): Conditional (responsive) column count / row size.\n// TODO(kara): Re-layout on window resize / media change (debounced).\n// TODO(kara): gridTileHeader and gridTileFooter.\nconst MAT_FIT_MODE = 'fit';\nlet MatGridList = /*#__PURE__*/(() => {\n  class MatGridList {\n    constructor(_element, _dir) {\n      this._element = _element;\n      this._dir = _dir;\n      /** The amount of space between tiles. This will be something like '5px' or '2em'. */\n      this._gutter = '1px';\n    }\n    /** Amount of columns in the grid list. */\n    get cols() {\n      return this._cols;\n    }\n    set cols(value) {\n      this._cols = Math.max(1, Math.round(coerceNumberProperty(value)));\n    }\n    /** Size of the grid list's gutter in pixels. */\n    get gutterSize() {\n      return this._gutter;\n    }\n    set gutterSize(value) {\n      this._gutter = `${value == null ? '' : value}`;\n    }\n    /** Set internal representation of row height from the user-provided value. */\n    get rowHeight() {\n      return this._rowHeight;\n    }\n    set rowHeight(value) {\n      const newValue = `${value == null ? '' : value}`;\n      if (newValue !== this._rowHeight) {\n        this._rowHeight = newValue;\n        this._setTileStyler(this._rowHeight);\n      }\n    }\n    ngOnInit() {\n      this._checkCols();\n      this._checkRowHeight();\n    }\n    /**\n     * The layout calculation is fairly cheap if nothing changes, so there's little cost\n     * to run it frequently.\n     */\n    ngAfterContentChecked() {\n      this._layoutTiles();\n    }\n    /** Throw a friendly error if cols property is missing */\n    _checkCols() {\n      if (!this.cols && (typeof ngDevMode === 'undefined' || ngDevMode)) {\n        throw Error(`mat-grid-list: must pass in number of columns. ` + `Example: <mat-grid-list cols=\"3\">`);\n      }\n    }\n    /** Default to equal width:height if rowHeight property is missing */\n    _checkRowHeight() {\n      if (!this._rowHeight) {\n        this._setTileStyler('1:1');\n      }\n    }\n    /** Creates correct Tile Styler subtype based on rowHeight passed in by user */\n    _setTileStyler(rowHeight) {\n      if (this._tileStyler) {\n        this._tileStyler.reset(this);\n      }\n      if (rowHeight === MAT_FIT_MODE) {\n        this._tileStyler = new FitTileStyler();\n      } else if (rowHeight && rowHeight.indexOf(':') > -1) {\n        this._tileStyler = new RatioTileStyler(rowHeight);\n      } else {\n        this._tileStyler = new FixedTileStyler(rowHeight);\n      }\n    }\n    /** Computes and applies the size and position for all children grid tiles. */\n    _layoutTiles() {\n      if (!this._tileCoordinator) {\n        this._tileCoordinator = new TileCoordinator();\n      }\n      const tracker = this._tileCoordinator;\n      const tiles = this._tiles.filter(tile => !tile._gridList || tile._gridList === this);\n      const direction = this._dir ? this._dir.value : 'ltr';\n      this._tileCoordinator.update(this.cols, tiles);\n      this._tileStyler.init(this.gutterSize, tracker, this.cols, direction);\n      tiles.forEach((tile, index) => {\n        const pos = tracker.positions[index];\n        this._tileStyler.setStyle(tile, pos.row, pos.col);\n      });\n      this._setListStyle(this._tileStyler.getComputedHeight());\n    }\n    /** Sets style on the main grid-list element, given the style name and value. */\n    _setListStyle(style) {\n      if (style) {\n        this._element.nativeElement.style[style[0]] = style[1];\n      }\n    }\n    static {\n      this.ɵfac = function MatGridList_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || MatGridList)(i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i1.Directionality, 8));\n      };\n    }\n    static {\n      this.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n        type: MatGridList,\n        selectors: [[\"mat-grid-list\"]],\n        contentQueries: function MatGridList_ContentQueries(rf, ctx, dirIndex) {\n          if (rf & 1) {\n            i0.ɵɵcontentQuery(dirIndex, MatGridTile, 5);\n          }\n          if (rf & 2) {\n            let _t;\n            i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._tiles = _t);\n          }\n        },\n        hostAttrs: [1, \"mat-grid-list\"],\n        hostVars: 1,\n        hostBindings: function MatGridList_HostBindings(rf, ctx) {\n          if (rf & 2) {\n            i0.ɵɵattribute(\"cols\", ctx.cols);\n          }\n        },\n        inputs: {\n          cols: \"cols\",\n          gutterSize: \"gutterSize\",\n          rowHeight: \"rowHeight\"\n        },\n        exportAs: [\"matGridList\"],\n        standalone: true,\n        features: [i0.ɵɵProvidersFeature([{\n          provide: MAT_GRID_LIST,\n          useExisting: MatGridList\n        }]), i0.ɵɵStandaloneFeature],\n        ngContentSelectors: _c0,\n        decls: 2,\n        vars: 0,\n        template: function MatGridList_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵprojectionDef();\n            i0.ɵɵelementStart(0, \"div\");\n            i0.ɵɵprojection(1);\n            i0.ɵɵelementEnd();\n          }\n        },\n        styles: [_c3],\n        encapsulation: 2,\n        changeDetection: 0\n      });\n    }\n  }\n  return MatGridList;\n})();\n/*#__PURE__*/(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet MatGridListModule = /*#__PURE__*/(() => {\n  class MatGridListModule {\n    static {\n      this.ɵfac = function MatGridListModule_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || MatGridListModule)();\n      };\n    }\n    static {\n      this.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n        type: MatGridListModule\n      });\n    }\n    static {\n      this.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n        imports: [MatLineModule, MatCommonModule, MatLineModule, MatCommonModule]\n      });\n    }\n  }\n  return MatGridListModule;\n})();\n/*#__PURE__*/(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n// Privately exported for the grid-list harness.\nconst ɵTileCoordinator = TileCoordinator;\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { MatGridAvatarCssMatStyler, MatGridList, MatGridListModule, MatGridTile, MatGridTileFooterCssMatStyler, MatGridTileHeaderCssMatStyler, MatGridTileText, ɵTileCoordinator };\n","export enum TypePermission {\n  null,\n  read,\n  write\n}\n\nexport enum Scope {\n  public,\n  protected,\n  private\n}\n","import { HttpClient, HttpErrorResponse } from '@angular/common/http';\nimport { Injectable, Optional } from '@angular/core';\n\nimport { AuthService } from '@igo2/auth';\nimport { Tool } from '@igo2/common/tool';\nimport { ConfigService } from '@igo2/core/config';\nimport { LanguageService } from '@igo2/core/language';\nimport { Message, MessageService } from '@igo2/core/message';\nimport { RouteService } from '@igo2/core/route';\nimport { StorageService } from '@igo2/core/storage';\nimport type { AnyLayer, IgoMap, Layer } from '@igo2/geo';\nimport { ExportService, isLayerGroup } from '@igo2/geo';\nimport { ObjectUtils, uuid } from '@igo2/utils';\n\nimport GeoJSON from 'ol/format/GeoJSON';\nimport { Geometry } from 'ol/geom';\nimport olPoint from 'ol/geom/Point';\nimport Cluster from 'ol/source/Cluster';\nimport olVectorSource from 'ol/source/Vector';\n\nimport { Feature } from 'ol';\nimport { BehaviorSubject, Observable, Subject, of } from 'rxjs';\nimport {\n  catchError,\n  debounceTime,\n  first,\n  map,\n  mergeMap,\n  skip,\n  tap\n} from 'rxjs/operators';\n\nimport { TypePermission } from './context.enum';\nimport {\n  Context,\n  ContextMapView,\n  ContextPermission,\n  ContextProfils,\n  ContextServiceOptions,\n  ContextsList,\n  DetailedContext,\n  ExtraFeatures\n} from './context.interface';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ContextService {\n  public context$ = new BehaviorSubject<DetailedContext>(undefined);\n  public contexts$ = new BehaviorSubject<ContextsList>({ ours: [] });\n  public defaultContextId$ = new BehaviorSubject<string>(undefined);\n  public editedContext$ = new BehaviorSubject<DetailedContext>(undefined);\n  public importedContext: DetailedContext[] = [];\n  public toolsChanged$ = new Subject<DetailedContext>();\n  private mapViewFromRoute: ContextMapView = {};\n  private options: ContextServiceOptions;\n  private baseUrl: string;\n\n  // Until the ContextService is completely refactored, this is needed\n  // to track the current tools\n  private tools: Tool[];\n  private toolbar: string[];\n\n  get defaultContextUri(): string {\n    return (\n      (this.storageService.get('favorite.context.uri') as string) ||\n      this._defaultContextUri ||\n      this.options.defaultContextUri\n    );\n  }\n  set defaultContextUri(uri: string) {\n    this._defaultContextUri = uri;\n  }\n  private _defaultContextUri: string;\n\n  constructor(\n    private http: HttpClient,\n    private authService: AuthService,\n    private languageService: LanguageService,\n    private config: ConfigService,\n    private messageService: MessageService,\n    private storageService: StorageService,\n    private exportService: ExportService,\n    @Optional() private route: RouteService\n  ) {\n    this.options = Object.assign(\n      {\n        basePath: 'contexts',\n        contextListFile: '_contexts.json',\n        defaultContextUri: '_default'\n      },\n      this.config.getConfig('context')\n    );\n\n    this.baseUrl = this.options.url ?? '';\n\n    this.readParamsFromRoute();\n\n    if (this.authService.hasAuthService) {\n      this.authService.logged$.subscribe((logged) => {\n        if (logged) {\n          this.contexts$.pipe(skip(1), first()).subscribe(() => {\n            this.handleContextsChange();\n          });\n          this.loadContexts();\n        }\n      });\n    } else {\n      this.loadContexts();\n      this.handleContextsChange(false);\n    }\n  }\n\n  get(permissions?: string[], hidden?: boolean): Observable<ContextsList> {\n    let url = this.baseUrl + '/contexts';\n    if (permissions && this.authService.authenticated) {\n      url += '?permission=' + permissions.join();\n      if (hidden) {\n        url += '&hidden=true';\n      }\n    }\n    return this.http.get<ContextsList>(url);\n  }\n\n  getById(id: string): Observable<Context> {\n    const url = this.baseUrl + '/contexts/' + id;\n    return this.http.get<Context>(url);\n  }\n\n  getDetails(id: string): Observable<DetailedContext> {\n    const url = `${this.baseUrl}/contexts/${id}/details`;\n    return this.http.get<DetailedContext>(url).pipe(\n      catchError((res) => {\n        this.handleError(res, id);\n        throw res;\n      })\n    );\n  }\n\n  getDefault(): Observable<DetailedContext> {\n    if (this.authService.authenticated) {\n      const url = this.baseUrl + '/contexts/default';\n      return this.http.get<DetailedContext>(url).pipe(\n        tap((context) => {\n          this.defaultContextId$.next(context.id);\n        })\n      );\n    } else {\n      const uri = this.storageService.get('favorite.context.uri') as string;\n      this.defaultContextId$.next(uri);\n      return this.getContextByUri(uri);\n    }\n  }\n\n  getProfilByUser(): Observable<ContextProfils[]> {\n    if (this.baseUrl) {\n      const url = this.baseUrl + '/profils?';\n      return this.http.get<ContextProfils[]>(url);\n    }\n    return of([]);\n  }\n\n  setDefault(id: string): Observable<any> {\n    if (this.authService.authenticated) {\n      const url = this.baseUrl + '/contexts/default';\n      return this.http.post(url, { defaultContextId: id });\n    } else {\n      this.storageService.set('favorite.context.uri', id);\n      return of(undefined);\n    }\n  }\n\n  hideContext(id: string) {\n    const url = this.baseUrl + '/contexts/' + id + '/hide';\n    return this.http.post(url, {});\n  }\n\n  showContext(id: string) {\n    const url = this.baseUrl + '/contexts/' + id + '/show';\n    return this.http.post(url, {});\n  }\n\n  delete(id: string, imported = false): Observable<void> {\n    const contexts: ContextsList = { ours: [] };\n    Object.keys(this.contexts$.value).forEach(\n      (key) =>\n        (contexts[key] = this.contexts$.value[key].filter((c) => c.id !== id))\n    );\n\n    if (imported) {\n      this.importedContext = this.importedContext.filter((c) => c.id !== id);\n      return of(this.contexts$.next(contexts));\n    }\n\n    const url = this.baseUrl + '/contexts/' + id;\n    return this.http.delete<void>(url).pipe(\n      tap(() => {\n        this.contexts$.next(contexts);\n      })\n    );\n  }\n\n  create(context: DetailedContext): Observable<Context> {\n    const url = this.baseUrl + '/contexts';\n    return this.http.post<Context>(url, context).pipe(\n      map((contextCreated) => {\n        if (this.authService.authenticated) {\n          contextCreated.permission = TypePermission[TypePermission.write];\n        } else {\n          contextCreated.permission = TypePermission[TypePermission.read];\n        }\n        this.contexts$.value.ours.unshift(contextCreated);\n        this.contexts$.next(this.contexts$.value);\n        return contextCreated;\n      })\n    );\n  }\n\n  clone(id: string, properties = {}): Observable<Context> {\n    const url = this.baseUrl + '/contexts/' + id + '/clone';\n    return this.http.post<Context>(url, properties).pipe(\n      map((contextCloned) => {\n        contextCloned.permission = TypePermission[TypePermission.write];\n        this.contexts$.value.ours.unshift(contextCloned);\n        this.contexts$.next(this.contexts$.value);\n        return contextCloned;\n      })\n    );\n  }\n\n  update(id: string, context: DetailedContext): Observable<Context> {\n    const url = this.baseUrl + '/contexts/' + id;\n    return this.http.patch<Context>(url, context);\n  }\n\n  // =================================================================\n\n  addToolAssociation(contextId: string, toolId: string): Observable<void> {\n    const url = `${this.baseUrl}/contexts/${contextId}/tools`;\n    const association = {\n      toolId\n    };\n    return this.http.post<void>(url, association);\n  }\n\n  deleteToolAssociation(contextId: string, toolId: string): Observable<any> {\n    const url = `${this.baseUrl}/contexts/${contextId}/tools/${toolId}`;\n    return this.http.delete(url);\n  }\n\n  getPermissions(id: string): Observable<ContextPermission[]> {\n    const url = this.baseUrl + '/contexts/' + id + '/permissions';\n    return this.http.get<ContextPermission[]>(url);\n  }\n\n  addPermissionAssociation(\n    contextId: string,\n    profil: string,\n    type: TypePermission\n  ): Observable<ContextPermission[]> {\n    const url = `${this.baseUrl}/contexts/${contextId}/permissions`;\n    const association = {\n      profil,\n      typePermission: type\n    };\n\n    return this.http.post<ContextPermission[]>(url, association).pipe(\n      catchError((res) => {\n        this.handleError(res, undefined, true);\n        throw [res]; // TODO Not sure about this.\n      })\n    );\n  }\n\n  deletePermissionAssociation(\n    contextId: string,\n    permissionId: string\n  ): Observable<void> {\n    const url = `${this.baseUrl}/contexts/${contextId}/permissions/${permissionId}`;\n    return this.http.delete<void>(url);\n  }\n\n  // ======================================================================\n\n  getLocalContexts(): Observable<ContextsList> {\n    const url = this.getPath(this.options.contextListFile);\n    return this.http.get<ContextsList>(url).pipe(\n      map((res: any) => {\n        return { ours: res };\n      })\n    );\n  }\n\n  getLocalContext(uri: string): Observable<DetailedContext> {\n    const url = this.getPath(`${uri}.json`);\n    return this.http.get<DetailedContext>(url).pipe(\n      mergeMap((res) => {\n        if (!res.base) {\n          return of(res);\n        }\n        const urlBase = this.getPath(`${res.base}.json`);\n        return this.http.get<DetailedContext>(urlBase).pipe(\n          map((resBase: DetailedContext) => {\n            const resMerge = res;\n            resMerge.map = ObjectUtils.mergeDeep(resBase.map, res.map);\n            resMerge.layers = (resBase.layers || [])\n              .concat(res.layers || [])\n              .reverse()\n              .filter(\n                (l, index, self) =>\n                  !l.id || self.findIndex((l2) => l2.id === l.id) === index\n              )\n              .reverse();\n            resMerge.toolbar = res.toolbar || resBase.toolbar;\n            resMerge.message = res.message || resBase.message;\n            resMerge.messages = res.messages || resBase.messages;\n            resMerge.tools = (res.tools || [])\n              .concat(resBase.tools || [])\n              .filter(\n                (t, index, self) =>\n                  self.findIndex((t2) => t2.name === t.name) === index\n              );\n            return resMerge;\n          }),\n          catchError((err) => {\n            this.handleError(err, uri);\n            throw err;\n          })\n        );\n      }),\n      catchError((err2) => {\n        this.handleError(err2, uri);\n        throw err2;\n      })\n    );\n  }\n\n  loadContexts(permissions?: string[], hidden?: boolean) {\n    let request;\n    if (this.baseUrl) {\n      request = this.get(permissions, hidden);\n    } else {\n      request = this.getLocalContexts();\n    }\n    request.subscribe((contexts) => {\n      contexts.ours = this.importedContext.concat(contexts.ours);\n      this.contexts$.next(contexts);\n    });\n  }\n\n  loadDefaultContext() {\n    const loadFct = (direct = false) => {\n      if (!direct && this.baseUrl && this.authService.authenticated) {\n        this.getDefault().subscribe(\n          (_context: DetailedContext) => {\n            this.defaultContextUri = _context.uri;\n            this.addContextToList(_context);\n            this.setContext(_context);\n          },\n          () => {\n            this.defaultContextId$.next(undefined);\n            this.loadContext(this.defaultContextUri);\n          }\n        );\n      } else {\n        this.loadContext(this.defaultContextUri);\n      }\n    };\n\n    if (this.route && this.route.options.contextKey) {\n      this.route.queryParams.pipe(debounceTime(100)).subscribe((params) => {\n        const contextParam = params[this.route.options.contextKey as string];\n        let direct = false;\n        if (contextParam) {\n          this.defaultContextUri = contextParam;\n          direct = true;\n        }\n        loadFct(direct);\n      });\n    } else {\n      loadFct();\n    }\n  }\n\n  loadContext(uri: string) {\n    const context = this.context$.value;\n\n    if (context && context.uri === uri) {\n      return;\n    }\n\n    this.getContextByUri(uri)\n      .pipe(first())\n      .subscribe(\n        (_context: DetailedContext) => {\n          this.addContextToList(_context);\n          this.setContext(_context);\n        },\n        () => {\n          if (uri !== this.options.defaultContextUri) {\n            this.loadContext(this.options.defaultContextUri);\n          }\n        }\n      );\n  }\n\n  setContext(context: DetailedContext) {\n    this.handleContextMessage(context);\n    const currentContext = this.context$.value;\n    if (currentContext && context && context.id === currentContext.id) {\n      if (context.map.view.keepCurrentView === undefined) {\n        context.map.view.keepCurrentView = true;\n      }\n      this.context$.next(context);\n      return;\n    }\n\n    if (!context.map) {\n      context.map = { view: {} };\n    }\n\n    Object.assign(context.map.view, this.mapViewFromRoute);\n\n    this.context$.next(context);\n  }\n\n  loadEditedContext(uri: string) {\n    this.getContextByUri(uri).subscribe((_context: DetailedContext) => {\n      this.setEditedContext(_context);\n    });\n  }\n\n  setEditedContext(context: DetailedContext) {\n    this.editedContext$.next(context);\n  }\n\n  getContextFromMap(igoMap: IgoMap, empty?: boolean): DetailedContext {\n    const view = igoMap.ol.getView();\n    const proj = view.getProjection().getCode();\n    const center = new olPoint(view.getCenter()).transform(proj, 'EPSG:4326');\n\n    const context: DetailedContext = {\n      uri: uuid(),\n      title: '',\n      scope: 'private',\n      map: {\n        view: {\n          center: center.getCoordinates() as [number, number],\n          zoom: view.getZoom(),\n          projection: proj,\n          maxZoomOnExtent: igoMap.viewController.maxZoomOnExtent\n        }\n      },\n      layers: [],\n      tools: []\n    };\n\n    const layers: AnyLayer[] = empty\n      ? []\n      : [...igoMap.layerController.treeLayers];\n\n    const baseLayer = igoMap.layerController.baseLayer;\n    if (baseLayer) {\n      layers.unshift(baseLayer);\n    }\n\n    // Remove null for the first level, the LayerGroup is already doing that for it's children\n    context.layers = layers\n      .map((layer) => layer.saveableOptions)\n      .filter(Boolean);\n\n    context.tools = this.tools.map((tool) => {\n      return {\n        id: String(tool.id),\n        global: tool.global\n      } as Tool;\n    });\n\n    return context;\n  }\n\n  getContextFromLayers(\n    igoMap: IgoMap,\n    layers: AnyLayer[],\n    name: string,\n    keepCurrentView?: boolean\n  ): DetailedContext {\n    const view = igoMap.ol.getView();\n    const proj = view.getProjection().getCode();\n    const center = new olPoint(view.getCenter()).transform(proj, 'EPSG:4326');\n\n    const context: DetailedContext = {\n      uri: name,\n      title: name,\n      map: {\n        view: {\n          center: center.getCoordinates() as [number, number],\n          zoom: view.getZoom(),\n          projection: proj,\n          keepCurrentView\n        }\n      },\n      layers: [],\n      toolbar: [],\n      tools: [],\n      extraFeatures: []\n    };\n\n    context.layers = igoMap.layerController.baseLayers.map((l: Layer) => {\n      return {\n        baseLayer: true,\n        sourceOptions: l.options.sourceOptions,\n        title: l.options.title,\n        visible: l.visible\n      };\n    });\n\n    layers.forEach((layer) => {\n      if (isLayerGroup(layer)) {\n        return context.layers.push(layer.options);\n      }\n      if (!(layer.ol.getSource() instanceof olVectorSource)) {\n        const layerOptions = layer.options;\n        layerOptions.zIndex = layer.zIndex;\n        layerOptions.visible = layer.visible;\n        layerOptions.opacity = layer.opacity;\n        delete layerOptions.source;\n        context.layers.push(layerOptions);\n      } else {\n        if (!(layer.ol.getSource() instanceof olVectorSource)) {\n          const catalogLayer = layer.options;\n          catalogLayer.zIndex = layer.zIndex;\n          catalogLayer.visible = layer.visible;\n          catalogLayer.opacity = layer.opacity;\n          delete catalogLayer.source;\n          context.layers.push(catalogLayer);\n        } else {\n          const extraFeatures = this.getExtraFeatures(layer);\n          extraFeatures.name = layer.options.title;\n          extraFeatures.opacity = layer.opacity;\n          extraFeatures.visible = layer.visible;\n          context.extraFeatures.push(extraFeatures);\n        }\n      }\n    });\n\n    context.toolbar = this.toolbar;\n    context.tools = this.tools;\n\n    return context;\n  }\n\n  private getExtraFeatures(layer: Layer): ExtraFeatures {\n    const writer = new GeoJSON();\n    let olFeatures: Feature<Geometry>[];\n    if (layer.ol.getSource() instanceof Cluster) {\n      const clusterSource = layer.ol.getSource() as Cluster;\n      olFeatures = clusterSource.getFeatures();\n      olFeatures = (olFeatures as any).flatMap((cluster: any) =>\n        cluster.get('features')\n      );\n    } else {\n      const source = layer.ol.getSource() as olVectorSource;\n      olFeatures = source.getFeatures();\n    }\n    const cleanedOlFeatures = this.exportService.cleanFeatures(\n      olFeatures,\n      'GeoJSON',\n      '_featureStore'\n    );\n    const features = writer.writeFeatures(cleanedOlFeatures, {\n      dataProjection: 'EPSG:4326',\n      featureProjection: 'EPSG:3857'\n    });\n    return JSON.parse(features);\n  }\n\n  setTools(tools: Tool[]) {\n    this.tools = tools;\n  }\n\n  setToolbar(toolbar: string[]) {\n    this.toolbar = toolbar;\n  }\n\n  private handleContextMessage(context: DetailedContext) {\n    if (\n      this.context$.value &&\n      context.uri &&\n      this.context$.value.uri !== context.uri\n    ) {\n      this.messageService.removeAllAreNotError();\n    }\n\n    context.messages = context.messages ? context.messages : [];\n    context.messages.push(context.message);\n    context.messages.map((message) => {\n      if (message) {\n        this.messageService.message(message as Message);\n      }\n    });\n  }\n\n  private getContextByUri(uri: string): Observable<DetailedContext> {\n    if (this.baseUrl) {\n      let contextToLoad;\n      for (const key of Object.keys(this.contexts$.value)) {\n        contextToLoad = this.contexts$.value[key].find((c) => {\n          return c.uri === uri;\n        });\n        if (contextToLoad) {\n          break;\n        }\n      }\n\n      if (contextToLoad && contextToLoad.imported) {\n        return of(contextToLoad);\n      }\n\n      // TODO : use always id or uri\n      const id = contextToLoad ? contextToLoad.id : uri;\n      return this.getDetails(id);\n    }\n\n    const importedContext = this.contexts$.value.ours.find((currentContext) => {\n      return currentContext.uri === uri && currentContext.imported === true;\n    });\n\n    if (importedContext) {\n      return of(importedContext);\n    } else {\n      return this.getLocalContext(uri);\n    }\n  }\n\n  getContextLayers(map: IgoMap) {\n    return map.layerController.treeLayers;\n  }\n\n  private readParamsFromRoute() {\n    if (!this.route) {\n      return;\n    }\n\n    this.route.queryParams.subscribe((params) => {\n      const centerKey = this.route.options.centerKey;\n      if (centerKey && params[centerKey as string]) {\n        const centerParams = params[centerKey as string];\n        this.mapViewFromRoute.center = centerParams.split(',').map(Number);\n      }\n\n      const projectionKey = this.route.options.projectionKey;\n      if (projectionKey && params[projectionKey as string]) {\n        const projectionParam = params[projectionKey as string];\n        this.mapViewFromRoute.projection = projectionParam;\n      }\n\n      const zoomKey = this.route.options.zoomKey;\n      if (zoomKey && params[zoomKey as string]) {\n        const zoomParam = params[zoomKey as string];\n        this.mapViewFromRoute.zoom = Number(zoomParam);\n      }\n    });\n  }\n\n  private getPath(file: string) {\n    const basePath = this.options.basePath.replace(/\\/$/, '');\n\n    return `${basePath}/${file}`;\n  }\n\n  private handleError(\n    error: HttpErrorResponse,\n    uri: string,\n    permissionError?: boolean\n  ) {\n    const context = this.contexts$.value.ours.find((obj) => obj.uri === uri);\n    const titleContext = context ? context.title : uri;\n    error.error.title = this.languageService.translate.instant(\n      'igo.context.contextManager.invalid.title'\n    );\n\n    error.error.message = this.languageService.translate.instant(\n      'igo.context.contextManager.invalid.text',\n      { value: titleContext }\n    );\n\n    error.error.toDisplay = true;\n\n    if (permissionError) {\n      error.error.title = this.languageService.translate.instant(\n        'igo.context.contextManager.errors.addPermissionTitle'\n      );\n      error.error.message = this.languageService.translate.instant(\n        'igo.context.contextManager.errors.addPermission'\n      );\n    }\n    this.messageService.error(\n      'igo.context.contextManager.errors.addPermission',\n      'igo.context.contextManager.errors.addPermissionTitle'\n    );\n  }\n\n  private handleContextsChange(keepCurrentContext = true) {\n    const context = this.context$.value;\n    const editedContext = this.editedContext$.value;\n    if (!context || context.uri === this.options.defaultContextUri) {\n      keepCurrentContext = false;\n    }\n    if (!keepCurrentContext || !this.findContext(context)) {\n      this.defaultContextUri = undefined;\n      this.loadDefaultContext();\n    } else {\n      this.getContextByUri(context.uri)\n        .pipe(first())\n        .subscribe((newContext) => {\n          this.toolsChanged$.next(newContext);\n        });\n\n      if (this.baseUrl && this.authService.authenticated) {\n        this.getDefault().subscribe();\n      }\n    }\n    const editedFound = this.findContext(editedContext);\n    if (!editedFound || editedFound.permission !== 'write') {\n      this.setEditedContext(undefined);\n    }\n  }\n\n  private addContextToList(context: Context) {\n    const contextFound = this.findContext(context);\n    if (!contextFound) {\n      const contextSimplifie = {\n        id: context.id,\n        uri: context.uri,\n        title: context.title,\n        scope: context.scope,\n        permission: TypePermission[TypePermission.read]\n      };\n\n      if (this.contexts$.value && this.contexts$.value.public) {\n        this.contexts$.value.public.push(contextSimplifie);\n        this.contexts$.next(this.contexts$.value);\n      }\n    }\n  }\n\n  private findContext(context: Context) {\n    if (!context) {\n      return false;\n    }\n\n    const contexts = this.contexts$.value;\n    let found;\n    for (const key of Object.keys(contexts)) {\n      const value = contexts[key];\n      found = value.find(\n        (c) =>\n          (context.id && c.id === context.id) ||\n          (context.uri && c.uri === context.uri)\n      );\n      if (found) {\n        break;\n      }\n    }\n\n    return found;\n  }\n}\n","export class ExportError extends Error {}\n\nexport class ExportInvalidFileError extends ExportError {\n  constructor() {\n    super('Invalid context');\n    Object.setPrototypeOf(this, ExportInvalidFileError.prototype);\n  }\n}\n\nexport class ExportNothingToExportError extends ExportError {\n  constructor() {\n    super('Nothing to export');\n    Object.setPrototypeOf(this, ExportNothingToExportError.prototype);\n  }\n}\n","import { Injectable } from '@angular/core';\n\nimport { downloadContent } from '@igo2/utils';\n\nimport { Observable, Observer } from 'rxjs';\n\nimport { DetailedContext } from '../../context-manager/shared/context.interface';\nimport { ExportNothingToExportError } from './context-export.errors';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ContextExportService {\n  export(res: DetailedContext): Observable<void> {\n    return this.exportAsync(res);\n  }\n\n  protected exportAsync(res: DetailedContext): Observable<void> {\n    const doExport = (observer: Observer<void>) => {\n      const nothingToExport = this.nothingToExport(res);\n      if (nothingToExport === true) {\n        observer.error(new ExportNothingToExportError());\n        return;\n      }\n      const contextJSON = JSON.stringify(res);\n      downloadContent(\n        contextJSON,\n        'text/json;charset=utf-8',\n        `${res.uri}.json`\n      );\n      observer.complete();\n    };\n    return new Observable(doExport);\n  }\n\n  protected nothingToExport(res: DetailedContext): boolean {\n    if (res.map === undefined) {\n      return true;\n    }\n    return false;\n  }\n}\n","import { MessageService } from '@igo2/core/message';\n\nimport { ExportNothingToExportError } from './context-export.errors';\n\nexport function handleFileExportError(\n  error: Error,\n  messageService: MessageService\n) {\n  if (error instanceof ExportNothingToExportError) {\n    this.handleNothingToExportError(messageService);\n    return;\n  }\n  messageService.error(\n    'igo.context.contextImportExport.export.failed.text',\n    'igo.context.contextImportExport.export.failed.title'\n  );\n}\n\nexport function handleFileExportSuccess(messageService: MessageService) {\n  messageService.success(\n    'igo.context.contextImportExport.export.success.text',\n    'igo.context.contextImportExport.export.success.title'\n  );\n}\n\nexport function handleNothingToExportError(messageService: MessageService) {\n  messageService.error(\n    'igo.context.contextImportExport.export.nothing.text',\n    'igo.context.contextImportExport.export.nothing.title'\n  );\n}\n","export class ImportError extends Error {}\n\nexport class ImportInvalidFileError extends ImportError {\n  constructor() {\n    super('Invalid file');\n    Object.setPrototypeOf(this, ImportInvalidFileError.prototype);\n  }\n}\n\nexport class ImportUnreadableFileError extends ImportError {\n  constructor() {\n    super('Failed to read file');\n    Object.setPrototypeOf(this, ImportUnreadableFileError.prototype);\n  }\n}\n\nexport class ImportNothingToImportError extends ImportError {\n  constructor() {\n    super('Nothing to import');\n    Object.setPrototypeOf(this, ImportNothingToImportError.prototype);\n  }\n}\n\nexport class ImportSizeError extends ImportError {\n  constructor() {\n    super('File is too large');\n    Object.setPrototypeOf(this, ImportNothingToImportError.prototype);\n  }\n}\n\nexport class ImportSRSError extends ImportError {\n  constructor() {\n    super('Invalid SRS definition');\n    Object.setPrototypeOf(this, ImportNothingToImportError.prototype);\n  }\n}\n","import { MessageService } from '@igo2/core/message';\nimport {\n  ClusterDataSource,\n  ClusterDataSourceOptions,\n  ClusterParam,\n  FeatureDataSource,\n  FeatureDataSourceOptions,\n  IgoMap,\n  QueryableDataSourceOptions,\n  StyleByAttribute,\n  StyleListService,\n  StyleService,\n  VectorLayer,\n  featureRandomStyle,\n  featureRandomStyleFunction\n} from '@igo2/geo';\n\nimport OlFeature from 'ol/Feature';\nimport GeoJSON from 'ol/format/GeoJSON';\nimport type { default as OlGeometry } from 'ol/geom/Geometry';\n\nimport {\n  DetailedContext,\n  ExtraFeatures\n} from '../../context-manager/shared/context.interface';\nimport { ContextService } from '../../context-manager/shared/context.service';\n\nexport function handleFileImportSuccess(\n  file: File,\n  context: DetailedContext,\n  messageService: MessageService,\n  contextService: ContextService\n) {\n  if (Object.keys(context).length <= 0) {\n    handleNothingToImportError(file, messageService);\n    return;\n  }\n\n  const contextTitle = computeLayerTitleFromFile(file);\n\n  addContextToContextList(context, contextTitle, contextService);\n\n  messageService.success(\n    'igo.context.contextImportExport.import.success.text',\n    'igo.context.contextImportExport.import.success.title',\n    undefined,\n    {\n      value: contextTitle\n    }\n  );\n}\n\nexport function handleFileImportError(\n  file: File,\n  error: Error,\n  messageService: MessageService,\n  sizeMb?: number\n) {\n  sizeMb = sizeMb ? sizeMb : 30;\n  const errMapping = {\n    'Invalid file': handleInvalidFileImportError,\n    'File is too large': handleSizeFileImportError,\n    'Failed to read file': handleUnreadbleFileImportError\n  };\n  errMapping[error.message](file, error, messageService, sizeMb);\n}\n\nexport function handleInvalidFileImportError(\n  file: File,\n  error: Error,\n  messageService: MessageService\n) {\n  messageService.error(\n    'igo.context.contextImportExport.import.invalid.text',\n    'igo.context.contextImportExport.import.invalid.title',\n    undefined,\n    {\n      value: file.name,\n      mimeType: file.type\n    }\n  );\n}\n\nexport function handleSizeFileImportError(\n  file: File,\n  error: Error,\n  messageService: MessageService,\n  sizeMb: number\n) {\n  messageService.error(\n    'igo.context.contextImportExport.import.tooLarge.text',\n    'igo.context.contextImportExport.import.tooLarge.title',\n    undefined,\n    {\n      value: file.name,\n      size: sizeMb\n    }\n  );\n}\n\nexport function handleUnreadbleFileImportError(\n  file: File,\n  error: Error,\n  messageService: MessageService\n) {\n  messageService.error(\n    'igo.context.contextImportExport.import.unreadable.text',\n    'igo.context.contextImportExport.import.unreadable.title',\n    undefined,\n    {\n      value: file.name\n    }\n  );\n}\n\nexport function handleNothingToImportError(\n  file: File,\n  messageService: MessageService\n) {\n  messageService.error(\n    'igo.context.contextImportExport.import.empty.text',\n    'igo.context.contextImportExport.import.empty.title',\n    undefined,\n    { value: file.name }\n  );\n}\n\nexport function addContextToContextList(\n  context: DetailedContext,\n  contextTitle: string,\n  contextService: ContextService\n) {\n  context.title = contextTitle;\n  context.imported = true;\n  contextService.contexts$.value.ours.unshift(context);\n  contextService.contexts$.next(contextService.contexts$.value);\n  contextService.importedContext.unshift(context);\n  contextService.loadContext(context.uri);\n}\n\nexport function getFileExtension(file: File): string {\n  return file.name.split('.').pop().toLowerCase();\n}\n\nexport function computeLayerTitleFromFile(file: File): string {\n  return file.name.substr(0, file.name.lastIndexOf('.'));\n}\n\nexport function addImportedFeaturesToMap(\n  extraFeatures: ExtraFeatures,\n  map: IgoMap\n): VectorLayer {\n  const sourceOptions: FeatureDataSourceOptions & QueryableDataSourceOptions = {\n    type: 'vector',\n    queryable: true\n  };\n\n  const olFeatures = collectFeaturesFromExtraFeatures(extraFeatures);\n  const source = new FeatureDataSource(sourceOptions);\n  source.ol.addFeatures(olFeatures);\n\n  let randomStyle;\n  let editable = false;\n  const featureKeys = olFeatures[0]?.getKeys() ?? [];\n  if (featureKeys.includes('_style') || featureKeys.includes('_mapTitle')) {\n    randomStyle = featureRandomStyleFunction();\n  } else {\n    randomStyle = featureRandomStyle();\n    editable = true;\n  }\n  const layer = new VectorLayer({\n    title: extraFeatures.name,\n    isIgoInternalLayer: true,\n    source,\n    igoStyle: { editable },\n    style: randomStyle,\n    visible: extraFeatures.visible,\n    opacity: extraFeatures.opacity\n  });\n  map.layerController.add(layer);\n\n  return layer;\n}\n\nexport function addImportedFeaturesStyledToMap(\n  extraFeatures: ExtraFeatures,\n  map: IgoMap,\n  styleListService: StyleListService,\n  styleService: StyleService\n): VectorLayer {\n  let style;\n  let distance: number;\n\n  if (styleListService.getStyleList(extraFeatures.name + '.styleByAttribute')) {\n    const styleByAttribute: StyleByAttribute = styleListService.getStyleList(\n      extraFeatures.name + '.styleByAttribute'\n    );\n\n    style = (feature, resolution) => {\n      return styleService.createStyleByAttribute(\n        feature,\n        styleByAttribute,\n        resolution\n      );\n    };\n  } else if (\n    styleListService.getStyleList(extraFeatures.name + '.clusterStyle')\n  ) {\n    const clusterParam: ClusterParam = styleListService.getStyleList(\n      extraFeatures.name + '.clusterParam'\n    );\n    distance = styleListService.getStyleList(extraFeatures.name + '.distance');\n\n    style = (feature, resolution) => {\n      const baseStyle = styleService.createStyle(\n        styleListService.getStyleList(extraFeatures.name + '.clusterStyle'),\n        feature,\n        resolution\n      );\n      return styleService.createClusterStyle(\n        feature,\n        resolution,\n        clusterParam,\n        baseStyle\n      );\n    };\n  } else if (styleListService.getStyleList(extraFeatures.name + '.style')) {\n    style = (feature, resolution) =>\n      styleService.createStyle(\n        styleListService.getStyleList(extraFeatures.name + '.style'),\n        feature,\n        resolution\n      );\n  } else {\n    style = (feature, resolution) =>\n      styleService.createStyle(\n        styleListService.getStyleList('default.style'),\n        feature,\n        resolution\n      );\n  }\n  let source;\n  const olFeatures = collectFeaturesFromExtraFeatures(extraFeatures);\n  if (styleListService.getStyleList(extraFeatures.name + '.clusterStyle')) {\n    const sourceOptions: ClusterDataSourceOptions & QueryableDataSourceOptions =\n      {\n        distance,\n        type: 'cluster',\n        queryable: true\n      };\n    source = new ClusterDataSource(sourceOptions);\n    source.ol.source.addFeatures(olFeatures);\n  } else {\n    const sourceOptions: FeatureDataSourceOptions & QueryableDataSourceOptions =\n      {\n        type: 'vector',\n        queryable: true\n      };\n    source = new FeatureDataSource(sourceOptions);\n    source.ol.addFeatures(olFeatures);\n  }\n\n  const layer = new VectorLayer({\n    title: extraFeatures.name,\n    isIgoInternalLayer: true,\n    source,\n    style,\n    opacity: extraFeatures.opacity,\n    visible: extraFeatures.visible\n  });\n  map.layerController.add(layer);\n\n  return layer;\n}\n\nfunction collectFeaturesFromExtraFeatures(\n  featureCollection: ExtraFeatures\n): OlFeature<OlGeometry>[] {\n  const format = new GeoJSON();\n  const features = format.readFeatures(featureCollection, {\n    dataProjection: 'EPSG:4326',\n    featureProjection: 'EPSG:3857'\n  });\n  return features;\n}\n","import { Injectable } from '@angular/core';\n\nimport { ConfigService } from '@igo2/core/config';\n\nimport { Observable, Observer } from 'rxjs';\n\nimport { DetailedContext } from '../../context-manager/shared/context.interface';\nimport {\n  ImportInvalidFileError,\n  ImportSizeError,\n  ImportUnreadableFileError\n} from './context-import.errors';\nimport { getFileExtension } from './context-import.utils';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ContextImportService {\n  static allowedMimeTypes = ['application/json'];\n\n  static allowedExtensions = 'json';\n\n  private clientSideFileSizeMax: number;\n\n  constructor(private config: ConfigService) {\n    const configFileSizeMb = this.config.getConfig(\n      'importExport.clientSideFileSizeMaxMb'\n    );\n    this.clientSideFileSizeMax =\n      (configFileSizeMb ? configFileSizeMb : 30) * Math.pow(1024, 2);\n  }\n\n  import(file: File): Observable<DetailedContext> {\n    return this.importAsync(file);\n  }\n\n  private getFileImporter(\n    file: File\n  ): (\n    file: File,\n    observer: Observer<DetailedContext>,\n    projectionIn: string,\n    projectionOut: string\n  ) => void {\n    const extension = getFileExtension(file);\n    const mimeType = file.type;\n    const allowedMimeTypes = [...ContextImportService.allowedMimeTypes];\n    const allowedExtensions = ContextImportService.allowedExtensions;\n\n    if (\n      allowedMimeTypes.indexOf(mimeType) < 0 &&\n      allowedExtensions.indexOf(extension) < 0\n    ) {\n      return undefined;\n    } else if (\n      mimeType === 'application/json' ||\n      extension === ContextImportService.allowedExtensions\n    ) {\n      return this.importFile;\n    }\n    return undefined;\n  }\n\n  private importAsync(file: File): Observable<DetailedContext> {\n    const doImport = (observer: Observer<DetailedContext>) => {\n      if (file.size >= this.clientSideFileSizeMax) {\n        observer.error(new ImportSizeError());\n        return;\n      }\n      const importer = this.getFileImporter(file);\n      if (importer === undefined) {\n        observer.error(new ImportInvalidFileError());\n        return;\n      }\n\n      importer.call(this, file, observer);\n    };\n\n    return new Observable(doImport);\n  }\n\n  private importFile(file: File, observer: Observer<DetailedContext>) {\n    const reader = new FileReader();\n\n    reader.onload = (event: any) => {\n      try {\n        const context = this.parseContextFromFile(file, event.target.result);\n        observer.next(context);\n      } catch {\n        observer.error(new ImportUnreadableFileError());\n      }\n\n      observer.complete();\n    };\n\n    reader.onerror = () => {\n      observer.error(new ImportUnreadableFileError());\n    };\n\n    reader.readAsText(file, 'UTF-8');\n  }\n\n  private parseContextFromFile(file: File, data: string): DetailedContext {\n    const context: DetailedContext = JSON.parse(data);\n    return context;\n  }\n}\n","import { AsyncPipe, NgFor, NgIf } from '@angular/common';\nimport { Component, Input, OnInit } from '@angular/core';\nimport {\n  FormsModule,\n  ReactiveFormsModule,\n  UntypedFormBuilder,\n  UntypedFormGroup,\n  Validators\n} from '@angular/forms';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatButtonToggleModule } from '@angular/material/button-toggle';\nimport { MatOptionModule } from '@angular/material/core';\nimport { MatDividerModule } from '@angular/material/divider';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatSelectModule } from '@angular/material/select';\n\nimport { SpinnerComponent } from '@igo2/common/spinner';\nimport { ConfigService } from '@igo2/core/config';\nimport { IgoLanguageModule } from '@igo2/core/language';\nimport { MessageService } from '@igo2/core/message';\nimport { type AnyLayer, type IgoMap, VectorLayer } from '@igo2/geo';\n\nimport { BehaviorSubject } from 'rxjs';\nimport { take } from 'rxjs/operators';\n\nimport { DetailedContext } from '../../context-manager/shared/context.interface';\nimport { ContextService } from '../../context-manager/shared/context.service';\nimport { ContextExportService } from '../shared/context-export.service';\nimport { handleFileExportError } from '../shared/context-export.utils';\nimport { handleFileExportSuccess } from '../shared/context-export.utils';\nimport { ContextImportService } from '../shared/context-import.service';\nimport {\n  handleFileImportError,\n  handleFileImportSuccess\n} from '../shared/context-import.utils';\n\n@Component({\n  selector: 'igo-context-import-export',\n  templateUrl: './context-import-export.component.html',\n  styleUrls: ['./context-import-export.component.scss'],\n  standalone: true,\n  imports: [\n    MatButtonToggleModule,\n    NgIf,\n    FormsModule,\n    MatButtonModule,\n    SpinnerComponent,\n    ReactiveFormsModule,\n    MatFormFieldModule,\n    MatInputModule,\n    MatSelectModule,\n    MatOptionModule,\n    MatDividerModule,\n    NgFor,\n    AsyncPipe,\n    IgoLanguageModule\n  ]\n})\nexport class ContextImportExportComponent implements OnInit {\n  public form: UntypedFormGroup;\n  public layers: VectorLayer[];\n  public inputProj = 'EPSG:4326';\n  public loading$ = new BehaviorSubject(false);\n  public forceNaming = false;\n  public layerList: AnyLayer[];\n  public userControlledLayerList: readonly AnyLayer[];\n  public res: DetailedContext;\n  private clientSideFileSizeMax: number;\n  public fileSizeMb: number;\n  public activeImportExport = 'import';\n\n  @Input() map: IgoMap;\n\n  constructor(\n    private contextImportService: ContextImportService,\n    private contextExportService: ContextExportService,\n    private messageService: MessageService,\n    private formBuilder: UntypedFormBuilder,\n    private config: ConfigService,\n    private contextService: ContextService\n  ) {\n    this.buildForm();\n  }\n\n  ngOnInit() {\n    const configFileSizeMb = this.config.getConfig(\n      'importExport.clientSideFileSizeMaxMb'\n    );\n    this.clientSideFileSizeMax =\n      (configFileSizeMb ? configFileSizeMb : 30) * Math.pow(1024, 2);\n    this.fileSizeMb = this.clientSideFileSizeMax / Math.pow(1024, 2);\n\n    this.layerList = this.map.layerController.all;\n    this.userControlledLayerList = this.map.layerController.treeLayers;\n  }\n\n  importFiles(files: File[]) {\n    this.loading$.next(true);\n    for (const file of files) {\n      this.contextImportService\n        .import(file)\n        .pipe(take(1))\n        .subscribe(\n          (context: DetailedContext) => this.onFileImportSuccess(file, context),\n          (error: Error) => this.onFileImportError(file, error),\n          () => {\n            this.loading$.next(false);\n          }\n        );\n    }\n  }\n\n  handleExportFormSubmit(contextOptions) {\n    this.loading$.next(true);\n    this.res = this.contextService.getContextFromLayers(\n      this.map,\n      contextOptions.layers,\n      contextOptions.name,\n      false\n    );\n    this.res.imported = true;\n    this.contextExportService\n      .export(this.res)\n      .pipe(take(1))\n      .subscribe({\n        error: (error: Error) => this.onFileExportError(error),\n        complete: () => {\n          this.onFileExportSuccess();\n          this.loading$.next(false);\n        }\n      });\n  }\n\n  private buildForm() {\n    this.form = this.formBuilder.group({\n      layers: ['', [Validators.required]],\n      name: ['', [Validators.required]]\n    });\n  }\n\n  private onFileImportSuccess(file: File, context: DetailedContext) {\n    handleFileImportSuccess(\n      file,\n      context,\n      this.messageService,\n      this.contextService\n    );\n  }\n\n  private onFileImportError(file: File, error: Error) {\n    this.loading$.next(false);\n    handleFileImportError(file, error, this.messageService, this.fileSizeMb);\n  }\n\n  private onFileExportError(error: Error) {\n    this.loading$.next(false);\n    handleFileExportError(error, this.messageService);\n  }\n\n  private onFileExportSuccess() {\n    handleFileExportSuccess(this.messageService);\n  }\n\n  selectAll(e) {\n    if (e._selected) {\n      this.form.controls.layers.setValue(this.userControlledLayerList);\n      e._selected = true;\n    }\n    if (e._selected === false) {\n      this.form.controls.layers.setValue([]);\n    }\n  }\n\n  onImportExportChange(event) {\n    this.activeImportExport = event.value;\n  }\n}\n","<div class=\"import-export-toggle mat-typography\">\n  <mat-button-toggle-group\n    [value]=\"activeImportExport\"\n    (change)=\"onImportExportChange($event)\"\n  >\n    <mat-button-toggle [value]=\"'import'\">\n      {{ 'igo.geo.importExportForm.importTabTitle' | translate }}\n    </mat-button-toggle>\n    <mat-button-toggle [value]=\"'export'\">\n      {{ 'igo.geo.importExportForm.exportTabTitle' | translate }}\n    </mat-button-toggle>\n  </mat-button-toggle-group>\n</div>\n\n<div *ngIf=\"activeImportExport === 'import'\">\n  <form class=\"igo-form\">\n    <div class=\"igo-form-button-group\">\n      <button\n        mat-raised-button\n        type=\"button\"\n        (click)=\"fileInput.click()\"\n        [disabled]=\"loading$ | async\"\n      >\n        {{ 'igo.geo.importExportForm.importButton' | translate }}\n      </button>\n      <igo-spinner [shown]=\"loading$ | async\"></igo-spinner>\n      <input\n        #fileInput\n        type=\"file\"\n        [style.display]=\"'none'\"\n        (click)=\"fileInput.value = null\"\n        (change)=\"importFiles($any($event.target).files)\"\n      />\n    </div>\n  </form>\n  <section class=\"mat-typography\">\n    <h4>{{ 'igo.geo.importExportForm.importClarifications' | translate }}</h4>\n    <ul>\n      <li>\n        {{\n          'igo.geo.importExportForm.importSizeMax'\n            | translate: { size: fileSizeMb }\n        }}\n      </li>\n    </ul>\n  </section>\n</div>\n\n<form\n  class=\"igo-form\"\n  *ngIf=\"activeImportExport === 'export'\"\n  [formGroup]=\"form\"\n>\n  <div class=\"igo-input-container\">\n    <mat-form-field class=\"example-full-width\">\n      <mat-label>{{\n        'igo.context.contextImportExport.export.exportContextName' | translate\n      }}</mat-label>\n      <input formControlName=\"name\" matInput [value]=\"\" />\n    </mat-form-field>\n  </div>\n  <div class=\"igo-input-container\">\n    <mat-form-field>\n      <mat-label>{{\n        'igo.context.contextImportExport.export.exportPlaceHolder' | translate\n      }}</mat-label>\n      <mat-select formControlName=\"layers\" multiple>\n        <mat-option [value]=\"1\" (click)=\"selectAll(e)\" #e>\n          {{\n            'igo.context.contextImportExport.export.exportSelectAll' | translate\n          }}\n        </mat-option>\n        <mat-divider></mat-divider>\n        <mat-option\n          *ngFor=\"let layer of userControlledLayerList\"\n          [value]=\"layer\"\n          >{{ layer.title }}</mat-option\n        >\n      </mat-select>\n    </mat-form-field>\n  </div>\n  <div class=\"igo-form-button-group\">\n    <button\n      mat-raised-button\n      type=\"button\"\n      [disabled]=\"!form.valid || (loading$ | async)\"\n      (click)=\"handleExportFormSubmit(form.value)\"\n    >\n      {{ 'igo.geo.importExportForm.exportButton' | translate }}\n    </button>\n    <igo-spinner [shown]=\"loading$ | async\"></igo-spinner>\n  </div>\n</form>\n","import { Component } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { MatButtonModule } from '@angular/material/button';\nimport {\n  MatDialogActions,\n  MatDialogContent,\n  MatDialogRef,\n  MatDialogTitle\n} from '@angular/material/dialog';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatInputModule } from '@angular/material/input';\n\nimport { IgoLanguageModule } from '@igo2/core/language';\n\n@Component({\n  selector: 'igo-bookmark-dialog',\n  templateUrl: './bookmark-dialog.component.html',\n  standalone: true,\n  imports: [\n    MatDialogTitle,\n    MatDialogContent,\n    MatFormFieldModule,\n    MatInputModule,\n    FormsModule,\n    MatDialogActions,\n    MatButtonModule,\n    IgoLanguageModule\n  ]\n})\nexport class BookmarkDialogComponent {\n  public title: string;\n\n  constructor(public dialogRef: MatDialogRef<BookmarkDialogComponent>) {}\n}\n","<h1 mat-dialog-title class=\"mat-typography\">\n  {{ 'igo.context.bookmarkButton.dialog.title' | translate }}\n</h1>\n<div mat-dialog-content class=\"mat-typography\">\n  <mat-form-field>\n    <input\n      matInput\n      required\n      autocomplete=\"off\"\n      maxlength=\"128\"\n      [placeholder]=\"\n        'igo.context.bookmarkButton.dialog.placeholder' | translate\n      \"\n      [(ngModel)]=\"title\"\n    />\n  </mat-form-field>\n</div>\n<div mat-dialog-actions>\n  <button\n    mat-button\n    color=\"primary\"\n    [disabled]=\"!title\"\n    (click)=\"dialogRef.close(title)\"\n  >\n    {{ 'igo.common.confirmDialog.confirmBtn' | translate }}\n  </button>\n  <button mat-button (click)=\"dialogRef.close(false)\">\n    {{ 'igo.common.confirmDialog.cancelBtn' | translate }}\n  </button>\n</div>\n","import { NgClass, NgIf } from '@angular/common';\nimport {\n  ChangeDetectionStrategy,\n  Component,\n  EventEmitter,\n  Input,\n  Output\n} from '@angular/core';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatListModule } from '@angular/material/list';\nimport { MatTooltipModule } from '@angular/material/tooltip';\n\nimport { AuthService } from '@igo2/auth';\nimport { CollapseDirective } from '@igo2/common/collapsible';\nimport { StopPropagationDirective } from '@igo2/common/stop-propagation';\nimport { IgoLanguageModule } from '@igo2/core/language';\nimport { StorageService } from '@igo2/core/storage';\n\nimport { TypePermission } from '../shared/context.enum';\nimport { DetailedContext } from '../shared/context.interface';\n\n@Component({\n  selector: 'igo-context-item',\n  templateUrl: './context-item.component.html',\n  styleUrls: ['./context-item.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  standalone: true,\n  imports: [\n    MatListModule,\n    NgClass,\n    NgIf,\n    MatButtonModule,\n    StopPropagationDirective,\n    MatTooltipModule,\n    MatIconModule,\n    CollapseDirective,\n    IgoLanguageModule\n  ]\n})\nexport class ContextItemComponent {\n  public typePermission = TypePermission;\n  public color = 'primary';\n  public collapsed = true;\n\n  @Input() showFavorite = true;\n  @Input() context: DetailedContext;\n  @Input() default: boolean;\n  @Input() selected: boolean;\n\n  @Output() edit = new EventEmitter<DetailedContext>();\n  @Output() delete = new EventEmitter<DetailedContext>();\n  @Output() save = new EventEmitter<DetailedContext>();\n  @Output() clone = new EventEmitter<DetailedContext>();\n  @Output() hide = new EventEmitter<DetailedContext>();\n  @Output() show = new EventEmitter<DetailedContext>();\n  @Output() favorite = new EventEmitter<DetailedContext>();\n  @Output() managePermissions = new EventEmitter<DetailedContext>();\n  @Output() manageTools = new EventEmitter<DetailedContext>();\n\n  get hidden(): boolean {\n    return this.context.hidden;\n  }\n\n  get canShare(): boolean {\n    return this.storageService.get('canShare') === true;\n  }\n\n  constructor(\n    public auth: AuthService,\n    private storageService: StorageService\n  ) {}\n\n  favoriteClick(context: DetailedContext) {\n    this.favorite.emit(context);\n  }\n}\n","<mat-list-item\n  class=\"mat-list-item\"\n  [ngClass]=\"{ 'mat-list-item-light': hidden }\"\n>\n  <button\n    *ngIf=\"auth.authenticated\"\n    matListItemAvatar\n    mat-icon-button\n    igoStopPropagation\n    [matTooltip]=\"\n      auth.authenticated\n        ? ('igo.context.contextManager.favorite' | translate)\n        : ''\n    \"\n    matTooltipShowDelay=\"500\"\n    [color]=\"default ? 'primary' : 'default'\"\n    (click)=\"favoriteClick(context)\"\n  >\n    <mat-icon *ngIf=\"!context.iconImage\">{{\n      context.icon\n        ? context.icon\n        : context.scope === 'public'\n          ? 'public'\n          : 'star'\n    }}</mat-icon>\n    <img *ngIf=\"context.iconImage\" [src]=\"context.iconImage\" />\n  </button>\n  <button\n    matListItemAvatar\n    *ngIf=\"!auth.authenticated && showFavorite\"\n    mat-icon-button\n    igoStopPropagation\n    [matTooltip]=\"'igo.context.contextManager.favorite' | translate\"\n    matTooltipShowDelay=\"500\"\n    [color]=\"default ? 'primary' : 'default'\"\n    (click)=\"favoriteClick(context)\"\n  >\n    <mat-icon>star</mat-icon>\n  </button>\n  <span matListItemTitle>{{ context.title }}</span>\n\n  <div\n    *ngIf=\"auth.authenticated\"\n    matListItemMeta\n    igoStopPropagation\n    class=\"igo-actions-container\"\n  >\n    <button\n      *ngIf=\"\n        collapsed &&\n        selected &&\n        (context.permission === typePermission[typePermission.write] ||\n          context.imported)\n      \"\n      class=\"save-button\"\n      mat-icon-button\n      [matTooltip]=\"'igo.context.contextManager.save' | translate\"\n      matTooltipShowDelay=\"500\"\n      [color]=\"color\"\n      (click)=\"save.emit(context)\"\n    >\n      <mat-icon>save</mat-icon>\n    </button>\n\n    <div #actions class=\"igo-actions-expand-container\">\n      <button\n        *ngIf=\"canShare && !context.imported\"\n        mat-icon-button\n        [matTooltip]=\"\n          'igo.context.contextManager.managePermissions' | translate\n        \"\n        matTooltipShowDelay=\"500\"\n        [color]=\"color\"\n        (click)=\"managePermissions.emit(context)\"\n      >\n        <mat-icon>manage_accounts</mat-icon>\n      </button>\n\n      <button\n        *ngIf=\"!context.imported\"\n        class=\"clone-button\"\n        mat-icon-button\n        [matTooltip]=\"'igo.context.contextManager.clone' | translate\"\n        matTooltipShowDelay=\"500\"\n        [color]=\"color\"\n        (click)=\"clone.emit(context)\"\n      >\n        <mat-icon>content_copy</mat-icon>\n      </button>\n\n      <button\n        *ngIf=\"\n          context.permission === typePermission[typePermission.write] &&\n          !context.imported\n        \"\n        class=\"edit-button\"\n        mat-icon-button\n        [color]=\"color\"\n        [matTooltip]=\"'igo.context.contextManager.edit' | translate\"\n        matTooltipShowDelay=\"500\"\n        (click)=\"edit.emit(context)\"\n      >\n        <mat-icon>edit</mat-icon>\n      </button>\n\n      <button\n        *ngIf=\"!context.hidden && !context.imported\"\n        class=\"hide-button\"\n        mat-icon-button\n        [color]=\"color\"\n        [matTooltip]=\"'igo.context.contextManager.hide' | translate\"\n        matTooltipShowDelay=\"500\"\n        (click)=\"hide.emit(context)\"\n      >\n        <mat-icon>visibility</mat-icon>\n      </button>\n\n      <button\n        *ngIf=\"context.hidden && !context.imported\"\n        class=\"hide-button\"\n        mat-icon-button\n        [color]=\"color\"\n        [matTooltip]=\"'igo.context.contextManager.show' | translate\"\n        matTooltipShowDelay=\"500\"\n        (click)=\"show.emit(context)\"\n      >\n        <mat-icon>visibility_off</mat-icon>\n      </button>\n\n      <button\n        *ngIf=\"\n          context.permission === typePermission[typePermission.write] ||\n          context.imported\n        \"\n        class=\"delete-button\"\n        mat-icon-button\n        color=\"warn\"\n        [matTooltip]=\"'igo.context.contextManager.delete' | translate\"\n        matTooltipShowDelay=\"500\"\n        (click)=\"delete.emit(context)\"\n      >\n        <mat-icon>delete</mat-icon>\n      </button>\n    </div>\n\n    <button\n      class=\"actions-button\"\n      mat-icon-button\n      igoCollapse\n      [color]=\"color\"\n      [target]=\"actions\"\n      [collapsed]=\"collapsed\"\n      (click)=\"collapsed = !collapsed\"\n    >\n      <mat-icon>more_horiz</mat-icon>\n    </button>\n  </div>\n</mat-list-item>\n","export enum ContextListControlsEnum {\n  always = 'always',\n  never = 'never',\n  default = 'default'\n}\n","import { AsyncPipe, KeyValuePipe, NgFor, NgIf } from '@angular/common';\nimport {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  EventEmitter,\n  Input,\n  OnDestroy,\n  OnInit,\n  Output\n} from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCheckboxModule } from '@angular/material/checkbox';\nimport { MatDialog } from '@angular/material/dialog';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatMenuModule } from '@angular/material/menu';\nimport { MatTooltipModule } from '@angular/material/tooltip';\n\nimport { AuthService } from '@igo2/auth';\nimport {\n  ActionStore,\n  ActionbarComponent,\n  ActionbarMode\n} from '@igo2/common/action';\nimport { CollapsibleComponent } from '@igo2/common/collapsible';\nimport { ListComponent, ListItemDirective } from '@igo2/common/list';\nimport { ConfigService } from '@igo2/core/config';\nimport { LanguageService } from '@igo2/core/language';\nimport { IgoLanguageModule } from '@igo2/core/language';\nimport { StorageService } from '@igo2/core/storage';\nimport type { IgoMap } from '@igo2/geo';\n\nimport { BehaviorSubject, ReplaySubject, Subscription, timer } from 'rxjs';\nimport { take } from 'rxjs/operators';\nimport { debounce } from 'rxjs/operators';\n\nimport { BookmarkDialogComponent } from '../../context-map-button/bookmark-button/bookmark-dialog.component';\nimport { ContextItemComponent } from '../context-item/context-item.component';\nimport {\n  ContextProfils,\n  ContextServiceOptions,\n  ContextUserPermission,\n  ContextsList,\n  DetailedContext\n} from '../shared/context.interface';\nimport { ContextListControlsEnum } from './context-list.enum';\n\n@Component({\n  selector: 'igo-context-list',\n  templateUrl: './context-list.component.html',\n  styleUrls: ['./context-list.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  standalone: true,\n  imports: [\n    ListComponent,\n    NgIf,\n    MatFormFieldModule,\n    MatInputModule,\n    FormsModule,\n    MatButtonModule,\n    MatIconModule,\n    MatTooltipModule,\n    ActionbarComponent,\n    MatMenuModule,\n    NgFor,\n    MatCheckboxModule,\n    CollapsibleComponent,\n    ContextItemComponent,\n    ListItemDirective,\n    AsyncPipe,\n    KeyValuePipe,\n    IgoLanguageModule\n  ]\n})\nexport class ContextListComponent implements OnInit, OnDestroy {\n  public contextConfigs: ContextServiceOptions;\n  private contextsInitial: ContextsList = { ours: [] };\n  contexts$ = new BehaviorSubject<ContextsList>(this.contextsInitial);\n\n  change$ = new ReplaySubject<void>(1);\n\n  private change$$: Subscription;\n\n  @Input()\n  get contexts(): ContextsList {\n    return this._contexts;\n  }\n  set contexts(value: ContextsList) {\n    this._contexts = value;\n    this.next();\n  }\n  private _contexts: ContextsList = { ours: [] };\n\n  @Input() selectedContext: DetailedContext;\n\n  @Input() map: IgoMap;\n\n  @Input()\n  get defaultContextId(): string {\n    return this.contextConfigs\n      ? this._defaultContextId\n      : (this.storageService.get('favorite.context.uri') as string) ||\n          this._defaultContextId;\n  }\n  set defaultContextId(value: string) {\n    this._defaultContextId = value;\n  }\n  private _defaultContextId: string;\n\n  public collapsed: { contextScope }[] = [];\n\n  @Output() select = new EventEmitter<DetailedContext>();\n  @Output() unselect = new EventEmitter<DetailedContext>();\n  @Output() edit = new EventEmitter<DetailedContext>();\n  @Output() delete = new EventEmitter<DetailedContext>();\n  @Output() save = new EventEmitter<DetailedContext>();\n  @Output() clone = new EventEmitter<DetailedContext>();\n  @Output() create = new EventEmitter<{ title: string; empty: boolean }>();\n  @Output() hide = new EventEmitter<DetailedContext>();\n  @Output() show = new EventEmitter<DetailedContext>();\n  @Output() showHiddenContexts = new EventEmitter<boolean>();\n  @Output() favorite = new EventEmitter<DetailedContext>();\n  @Output() managePermissions = new EventEmitter<DetailedContext>();\n  @Output() manageTools = new EventEmitter<DetailedContext>();\n  @Output() filterPermissionsChanged = new EventEmitter<\n    ContextUserPermission[]\n  >();\n\n  public titleMapping = {\n    ours: 'igo.context.contextManager.ourContexts',\n    shared: 'igo.context.contextManager.sharedContexts',\n    public: 'igo.context.contextManager.publicContexts'\n  };\n\n  public users: ContextProfils[];\n  public permissions: ContextUserPermission[] = [];\n\n  public actionStore = new ActionStore([]);\n  public actionbarMode = ActionbarMode.Overlay;\n\n  public color = 'primary';\n\n  public showHidden = false;\n\n  /**\n   * Context filter term\n   */\n  @Input()\n  set term(value: string) {\n    this._term = value;\n    this.next();\n  }\n  get term(): string {\n    return this._term;\n  }\n  public _term = '';\n\n  get sortedAlpha(): boolean {\n    return this._sortedAlpha;\n  }\n  set sortedAlpha(value: boolean) {\n    this._sortedAlpha = value;\n    this.next();\n  }\n  private _sortedAlpha: boolean = undefined;\n\n  public showContextFilter = ContextListControlsEnum.always;\n\n  public thresholdToFilter = 5;\n\n  get isEmpty(): boolean {\n    return (\n      !this.contexts.ours.length &&\n      !this.contexts.public?.length &&\n      !this.contexts.shared?.length\n    );\n  }\n\n  constructor(\n    private cdRef: ChangeDetectorRef,\n    public configService: ConfigService,\n    public auth: AuthService,\n    private dialog: MatDialog,\n    private languageService: LanguageService,\n    private storageService: StorageService\n  ) {\n    this.contextConfigs = this.configService.getConfig('context');\n  }\n\n  ngOnInit() {\n    this.change$$ = this.change$\n      .pipe(debounce(() => timer(50)))\n      .subscribe(() => {\n        this.contexts$.next(this.filterContextsList(this.contexts));\n      });\n\n    this.actionStore.load([\n      {\n        id: 'emptyContext',\n        title: this.languageService.translate.instant(\n          'igo.context.contextManager.emptyContext'\n        ),\n        icon: 'star',\n        tooltip: this.languageService.translate.instant(\n          'igo.context.contextManager.emptyContextTooltip'\n        ),\n        handler: () => {\n          this.createContext(true);\n        }\n      },\n      {\n        id: 'contextFromMap',\n        title: this.languageService.translate.instant(\n          'igo.context.contextManager.contextMap'\n        ),\n        icon: 'map',\n        tooltip: this.languageService.translate.instant(\n          'igo.context.contextManager.contextMapTooltip'\n        ),\n        handler: () => {\n          this.createContext(false);\n        }\n      }\n    ]);\n  }\n\n  private next() {\n    this.change$.next();\n  }\n\n  private filterContextsList(contexts: ContextsList): ContextsList {\n    if (this.term === '') {\n      if (this.sortedAlpha) {\n        contexts = this.sortContextsList(contexts);\n      }\n      return contexts;\n    } else {\n      const ours = contexts.ours.filter((context) => {\n        const filterNormalized = this.term\n          .toLowerCase()\n          .normalize('NFD')\n          .replace(/[\\u0300-\\u036f]/g, '');\n        const contextTitleNormalized = context.title\n          .toLowerCase()\n          .normalize('NFD')\n          .replace(/[\\u0300-\\u036f]/g, '');\n        return contextTitleNormalized.includes(filterNormalized);\n      });\n\n      let updateContexts: ContextsList = {\n        ours\n      };\n\n      if (this.contexts.public) {\n        const publics = contexts.public.filter((context) => {\n          const filterNormalized = this.term\n            .toLowerCase()\n            .normalize('NFD')\n            .replace(/[\\u0300-\\u036f]/g, '');\n          const contextTitleNormalized = context.title\n            .toLowerCase()\n            .normalize('NFD')\n            .replace(/[\\u0300-\\u036f]/g, '');\n          return contextTitleNormalized.includes(filterNormalized);\n        });\n        updateContexts.public = publics;\n      }\n\n      if (this.contexts.shared) {\n        const shared = contexts.shared.filter((context) => {\n          const filterNormalized = this.term\n            .toLowerCase()\n            .normalize('NFD')\n            .replace(/[\\u0300-\\u036f]/g, '');\n          const contextTitleNormalized = context.title\n            .toLowerCase()\n            .normalize('NFD')\n            .replace(/[\\u0300-\\u036f]/g, '');\n          return contextTitleNormalized.includes(filterNormalized);\n        });\n        updateContexts.shared = shared;\n      }\n\n      if (this.sortedAlpha) {\n        updateContexts = this.sortContextsList(updateContexts);\n      }\n      return updateContexts;\n    }\n  }\n\n  ngOnDestroy() {\n    this.change$$.unsubscribe();\n  }\n\n  public showFilter() {\n    switch (this.showContextFilter) {\n      case ContextListControlsEnum.always:\n        return true;\n      case ContextListControlsEnum.never:\n        return false;\n      default: {\n        let totalLength = this.contexts.ours.length;\n\n        this.contexts.public\n          ? (totalLength += this.contexts.public.length)\n          : (totalLength += 0);\n\n        this.contexts.shared\n          ? (totalLength += this.contexts.shared.length)\n          : (totalLength += 0);\n        if (totalLength >= this.thresholdToFilter) {\n          return true;\n        }\n        return false;\n      }\n    }\n  }\n\n  sortContextsList(contexts: ContextsList) {\n    if (contexts) {\n      const contextsList = JSON.parse(JSON.stringify(contexts));\n      contextsList.ours.sort((a, b) => {\n        if (this.normalize(a.title) < this.normalize(b.title)) {\n          return -1;\n        }\n        if (this.normalize(a.title) > this.normalize(b.title)) {\n          return 1;\n        }\n        return 0;\n      });\n\n      if (contextsList.shared) {\n        contextsList.shared.sort((a, b) => {\n          if (this.normalize(a.title) < this.normalize(b.title)) {\n            return -1;\n          }\n          if (this.normalize(a.title) > this.normalize(b.title)) {\n            return 1;\n          }\n          return 0;\n        });\n      } else if (contextsList.public) {\n        contextsList.public.sort((a, b) => {\n          if (this.normalize(a.title) < this.normalize(b.title)) {\n            return -1;\n          }\n          if (this.normalize(a.title) > this.normalize(b.title)) {\n            return 1;\n          }\n          return 0;\n        });\n      }\n      return contextsList;\n    }\n  }\n\n  normalize(str: string) {\n    return str\n      .normalize('NFD')\n      .replace(/[\\u0300-\\u036f]/g, '')\n      .toLowerCase();\n  }\n\n  toggleSort() {\n    this.sortedAlpha = !this.sortedAlpha;\n  }\n\n  clearFilter() {\n    this.term = '';\n  }\n\n  createContext(empty?: boolean) {\n    this.dialog\n      .open(BookmarkDialogComponent, { disableClose: false })\n      .afterClosed()\n      .pipe(take(1))\n      .subscribe((title: string) => {\n        if (title) {\n          this.create.emit({ title, empty });\n        }\n      });\n  }\n\n  getPermission(user?): ContextUserPermission {\n    if (user) {\n      const permission = this.permissions.find((p) => p.name === user.name);\n      return permission;\n    }\n  }\n\n  handleToggleCategory(user, parent?) {\n    const permission = this.getPermission(user);\n    if (permission) {\n      permission.checked = !permission.checked;\n      this.storageService.set(\n        'contexts.permissions.' + permission.name,\n        permission.checked\n      );\n      permission.indeterminate = false;\n    }\n\n    if (parent) {\n      let indeterminate = false;\n\n      for (const c of parent.childs) {\n        const cPermission = this.getPermission(c);\n        if (cPermission.checked !== permission.checked) {\n          indeterminate = true;\n          break;\n        }\n      }\n      const parentPermission = this.getPermission(parent);\n      if (parentPermission) {\n        parentPermission.checked = permission.checked;\n        this.storageService.set(\n          'contexts.permissions.' + parentPermission.name,\n          permission.checked\n        );\n        parentPermission.indeterminate = indeterminate;\n      }\n    }\n\n    if (user.childs) {\n      for (const c of user.childs) {\n        const childrenPermission = this.getPermission(c);\n        if (\n          childrenPermission &&\n          childrenPermission.checked !== permission.checked\n        ) {\n          childrenPermission.checked = permission.checked;\n          this.storageService.set(\n            'contexts.permissions.' + childrenPermission.name,\n            permission.checked\n          );\n        }\n      }\n    }\n\n    this.filterPermissionsChanged.emit(this.permissions);\n  }\n\n  hideContext(context: DetailedContext) {\n    context.hidden = true;\n    if (!this.showHidden) {\n      const contexts: ContextsList = { ours: [], shared: [], public: [] };\n      contexts.ours = this.contexts.ours.filter((c) => c.id !== context.id);\n      contexts.shared = this.contexts.shared.filter((c) => c.id !== context.id);\n      contexts.public = this.contexts.public.filter((c) => c.id !== context.id);\n      this.contexts = contexts;\n    }\n    this.hide.emit(context);\n  }\n\n  showContext(context: DetailedContext) {\n    context.hidden = false;\n    this.show.emit(context);\n  }\n}\n","<igo-list [navigation]=\"true\">\n  <div class=\"context-filter-container\">\n    <mat-form-field *ngIf=\"showFilter()\" floatLabel=\"always\">\n      <mat-label>{{\n        'igo.context.contextManager.filterPlaceHolder' | translate\n      }}</mat-label>\n      <input\n        matInput\n        type=\"text\"\n        [placeholder]=\"\n          'igo.context.contextManager.filterPlaceHolder' | translate\n        \"\n        [(ngModel)]=\"term\"\n      />\n      <button\n        mat-icon-button\n        matSuffix\n        class=\"clear-button\"\n        *ngIf=\"term.length\"\n        aria-label=\"Clear\"\n        color=\"warn\"\n        (click)=\"clearFilter()\"\n      >\n        <mat-icon>close</mat-icon>\n      </button>\n    </mat-form-field>\n\n    <div class=\"actions-container\">\n      <button\n        class=\"sort-alpha\"\n        [class.--active]=\"sortedAlpha\"\n        mat-icon-button\n        [matTooltip]=\"\n          'igo.context.contextManager.sortAlphabetically' | translate\n        \"\n        matTooltipShowDelay=\"500\"\n        (click)=\"toggleSort()\"\n      >\n        <mat-icon color=\"primary\">sort_by_alpha</mat-icon>\n      </button>\n\n      <igo-actionbar\n        *ngIf=\"auth.authenticated && contextConfigs\"\n        class=\"add-context-button\"\n        [iconColor]=\"color\"\n        [store]=\"actionStore\"\n        [withIcon]=\"true\"\n        icon=\"add\"\n        [withTitle]=\"actionbarMode === 'overlay'\"\n        [horizontal]=\"false\"\n        [mode]=\"actionbarMode\"\n      >\n      </igo-actionbar>\n\n      <button\n        *ngIf=\"auth.authenticated && contextConfigs\"\n        class=\"users-filter\"\n        mat-icon-button\n        [matTooltip]=\"'igo.context.contextManager.filterUser' | translate\"\n        matTooltipShowDelay=\"500\"\n        [matMenuTriggerFor]=\"accountMenu\"\n      >\n        <mat-icon color=\"primary\">fitler_alt</mat-icon>\n      </button>\n      <mat-menu #accountMenu=\"matMenu\">\n        <ng-container *ngFor=\"let user of users\">\n          <button\n            *ngIf=\"!user.childs; else withSubMenu\"\n            mat-menu-item\n            class=\"profil-menu\"\n          >\n            <mat-checkbox\n              [checked]=\"getPermission(user).checked\"\n              [indeterminate]=\"getPermission(user).indeterminate\"\n              (click)=\"$event.stopPropagation()\"\n              (change)=\"handleToggleCategory(user)\"\n            >\n            </mat-checkbox>\n            <span>{{ user.title }}</span>\n          </button>\n          <ng-template #withSubMenu>\n            <button\n              mat-menu-item\n              [matMenuTriggerFor]=\"subAccountMenu\"\n              class=\"profil-menu\"\n            >\n              <mat-checkbox\n                [checked]=\"getPermission(user).checked\"\n                [indeterminate]=\"getPermission(user).indeterminate\"\n                (click)=\"$event.stopPropagation()\"\n                (change)=\"handleToggleCategory(user)\"\n              >\n              </mat-checkbox>\n              <span>{{ user.title }}</span>\n            </button>\n\n            <mat-menu #subAccountMenu=\"matMenu\">\n              <button\n                mat-menu-item\n                *ngFor=\"let child of user.childs\"\n                class=\"profil-menu\"\n              >\n                <mat-checkbox\n                  [checked]=\"getPermission(child).checked\"\n                  (click)=\"$event.stopPropagation()\"\n                  (change)=\"handleToggleCategory(child, user)\"\n                >\n                  {{ child.title }}\n                </mat-checkbox>\n              </button>\n            </mat-menu>\n          </ng-template>\n        </ng-container>\n\n        <button mat-menu-item class=\"profil-menu\">\n          <mat-checkbox\n            [checked]=\"showHidden\"\n            (click)=\"$event.stopPropagation()\"\n            (change)=\"showHiddenContexts.emit()\"\n          >\n          </mat-checkbox>\n          <span>\n            {{ 'igo.context.contextManager.showHidden' | translate }}\n          </span>\n        </button>\n      </mat-menu>\n    </div>\n  </div>\n\n  <ng-template\n    ngFor\n    let-groupContexts\n    [ngForOf]=\"$any(contexts$ | async) | keyvalue\"\n  >\n    <igo-collapsible\n      *ngIf=\"$any(groupContexts).value.length && auth.authenticated\"\n      [title]=\"titleMapping[$any(groupContexts).key] | translate\"\n      [collapsed]=\"$any(collapsed[titleMapping[$any(groupContexts).key]])\"\n      (toggle)=\"collapsed[titleMapping[$any(groupContexts).key]] = $any($event)\"\n    >\n      <ng-template ngFor let-context [ngForOf]=\"$any(groupContexts).value\">\n        <igo-context-item\n          igoListItem\n          color=\"accent\"\n          [selected]=\"selectedContext && selectedContext.uri === context.uri\"\n          [context]=\"context\"\n          [default]=\"\n            context.id &&\n            this.defaultContextId &&\n            this.defaultContextId === context.id\n          \"\n          (edit)=\"edit.emit(context)\"\n          (delete)=\"delete.emit(context)\"\n          (clone)=\"clone.emit(context)\"\n          (save)=\"save.emit(context)\"\n          (hide)=\"hideContext(context)\"\n          (show)=\"showContext(context)\"\n          (favorite)=\"favorite.emit(context)\"\n          (manageTools)=\"manageTools.emit(context)\"\n          (managePermissions)=\"managePermissions.emit(context)\"\n          (select)=\"select.emit(context)\"\n          (unselect)=\"unselect.emit(context)\"\n        >\n        </igo-context-item>\n      </ng-template>\n    </igo-collapsible>\n\n    <ng-template\n      *ngIf=\"$any(groupContexts).value.length && !auth.authenticated\"\n      ngFor\n      let-context\n      [ngForOf]=\"$any(groupContexts).value\"\n    >\n      <igo-context-item\n        igoListItem\n        color=\"accent\"\n        [showFavorite]=\"\n          configService.getConfig('favoriteContext4NonAuthenticated')\n        \"\n        [selected]=\"selectedContext && selectedContext.uri === context.uri\"\n        [context]=\"context\"\n        [default]=\"\n          contextConfigs\n            ? defaultContextId === context.id\n            : defaultContextId === context.uri\n        \"\n        (favorite)=\"favorite.emit(context)\"\n        (select)=\"select.emit(context)\"\n        (unselect)=\"unselect.emit(context)\"\n      >\n      </igo-context-item>\n    </ng-template>\n  </ng-template>\n\n  <div *ngIf=\"isEmpty\" class=\"no-result\">\n    {{ 'igo.context.contextManager.noResult' | translate }}\n  </div>\n</igo-list>\n","import {\n  ChangeDetectorRef,\n  Directive,\n  HostListener,\n  OnDestroy,\n  OnInit,\n  Self\n} from '@angular/core';\n\nimport { AuthService } from '@igo2/auth';\nimport { ConfirmDialogService } from '@igo2/common/confirm-dialog';\nimport { LanguageService } from '@igo2/core/language';\nimport { MessageService } from '@igo2/core/message';\nimport { StorageService } from '@igo2/core/storage';\nimport { MapService } from '@igo2/geo';\n\nimport { Subscription } from 'rxjs';\nimport { debounceTime } from 'rxjs/operators';\n\nimport {\n  Context,\n  ContextUserPermission,\n  ContextsList,\n  DetailedContext\n} from '../shared/context.interface';\nimport { ContextService } from '../shared/context.service';\nimport { ContextListComponent } from './context-list.component';\n\n@Directive({\n  selector: '[igoContextListBinding]',\n  standalone: true,\n  providers: [ConfirmDialogService]\n})\nexport class ContextListBindingDirective implements OnInit, OnDestroy {\n  private component: ContextListComponent;\n  private contexts$$: Subscription;\n  private selectedContext$$: Subscription;\n  private defaultContextId$$: Subscription;\n  private previousMessageId;\n\n  @HostListener('select', ['$event'])\n  onSelect(context: Context) {\n    this.contextService.loadContext(context.uri);\n  }\n\n  @HostListener('edit', ['$event'])\n  onEdit(context: Context) {\n    this.contextService.loadEditedContext(context.uri);\n  }\n\n  @HostListener('save', ['$event'])\n  onSave(context: Context) {\n    const map = this.mapService.getMap();\n    const contextFromMap = this.contextService.getContextFromMap(map);\n\n    const msgSuccess = () => {\n      this.messageService.success(\n        'igo.context.contextManager.dialog.saveMsg',\n        'igo.context.contextManager.dialog.saveTitle',\n        undefined,\n        {\n          value: context.title\n        }\n      );\n    };\n\n    if (context.imported) {\n      contextFromMap.title = context.title;\n      this.contextService.delete(context.id, true);\n      this.contextService.create(contextFromMap).subscribe((contextCreated) => {\n        this.contextService.loadContext(contextCreated.uri);\n        msgSuccess();\n      });\n      return;\n    }\n\n    const changes: DetailedContext = {\n      layers: contextFromMap.layers,\n      map: {\n        view: contextFromMap.map.view\n      }\n    };\n\n    this.contextService.update(context.id, changes).subscribe(() => {\n      msgSuccess();\n    });\n  }\n\n  @HostListener('favorite', ['$event'])\n  onFavorite(context: Context) {\n    if (!context.id) {\n      context.id = context.uri;\n    }\n    this.contextService.setDefault(context.id).subscribe(() => {\n      if (this.previousMessageId) {\n        this.messageService.remove(this.previousMessageId);\n      }\n      this.contextService.defaultContextId$.next(context.id);\n      const messageObj = this.messageService.success(\n        'igo.context.contextManager.dialog.favoriteMsg',\n        'igo.context.contextManager.dialog.favoriteTitle',\n        undefined,\n        {\n          value: context.title\n        }\n      );\n      this.previousMessageId = messageObj.toastId;\n      this.cdRef.detectChanges();\n    });\n  }\n\n  @HostListener('manageTools', ['$event'])\n  onManageTools(context: Context) {\n    this.contextService.loadEditedContext(context.uri);\n  }\n\n  @HostListener('managePermissions', ['$event'])\n  onManagePermissions(context: Context) {\n    this.contextService.loadEditedContext(context.uri);\n  }\n\n  @HostListener('delete', ['$event'])\n  onDelete(context: Context) {\n    const translate = this.languageService.translate;\n    this.confirmDialogService\n      .open(\n        translate.instant('igo.context.contextManager.dialog.confirmDelete')\n      )\n      .subscribe((confirm) => {\n        if (confirm) {\n          this.contextService\n            .delete(context.id, context.imported)\n            .subscribe(() => {\n              this.messageService.info(\n                'igo.context.contextManager.dialog.deleteMsg',\n                'igo.context.contextManager.dialog.deleteTitle',\n                undefined,\n                { value: context.title }\n              );\n            });\n        }\n      });\n  }\n\n  @HostListener('clone', ['$event'])\n  onClone(context: DetailedContext) {\n    const properties = {\n      title: context.title + '-copy',\n      uri: context.uri + '-copy'\n    };\n    this.contextService.clone(context.id, properties).subscribe(() => {\n      this.messageService.success(\n        'igo.context.contextManager.dialog.cloneMsg',\n        'igo.context.contextManager.dialog.cloneTitle',\n        undefined,\n        { value: context.title }\n      );\n    });\n  }\n\n  @HostListener('create', ['$event'])\n  onCreate(opts: { title: string; empty: boolean }) {\n    const { title, empty } = opts;\n    const context = this.contextService.getContextFromMap(\n      this.component.map,\n      empty\n    );\n    context.title = title;\n    this.contextService.create(context).subscribe(() => {\n      this.messageService.success(\n        'igo.context.bookmarkButton.dialog.createMsg',\n        'igo.context.bookmarkButton.dialog.createTitle',\n        undefined,\n        { value: context.title }\n      );\n      this.contextService.loadContext(context.uri);\n    });\n  }\n\n  @HostListener('filterPermissionsChanged')\n  loadContexts() {\n    const permissions = ['none'];\n    for (const p of this.component.permissions) {\n      if (p.checked === true || p.indeterminate === true) {\n        permissions.push(p.name);\n      }\n    }\n\n    this.contextService.loadContexts(permissions, this.component.showHidden);\n  }\n\n  @HostListener('showHiddenContexts')\n  showHiddenContexts() {\n    this.component.showHidden = !this.component.showHidden;\n    this.storageService.set('contexts.showHidden', this.component.showHidden);\n    this.loadContexts();\n  }\n\n  @HostListener('show', ['$event'])\n  onShowContext(context: DetailedContext) {\n    this.contextService.showContext(context.id).subscribe();\n  }\n\n  @HostListener('hide', ['$event'])\n  onHideContext(context: DetailedContext) {\n    this.contextService.hideContext(context.id).subscribe();\n  }\n\n  constructor(\n    @Self() component: ContextListComponent,\n    private contextService: ContextService,\n    private mapService: MapService,\n    private languageService: LanguageService,\n    private confirmDialogService: ConfirmDialogService,\n    private messageService: MessageService,\n    private auth: AuthService,\n    private storageService: StorageService,\n    private cdRef: ChangeDetectorRef\n  ) {\n    this.component = component;\n  }\n\n  ngOnInit() {\n    // Override input contexts\n    this.component.contexts = { ours: [] };\n    this.component.showHidden = this.storageService.get(\n      'contexts.showHidden'\n    ) as boolean;\n\n    this.contexts$$ = this.contextService.contexts$.subscribe((contexts) =>\n      this.handleContextsChange(contexts)\n    );\n\n    this.defaultContextId$$ = this.contextService.defaultContextId$.subscribe(\n      (id) => {\n        this.component.defaultContextId = id;\n      }\n    );\n    const storedContextUri = this.storageService.get(\n      'favorite.context.uri'\n    ) as string;\n    if (storedContextUri && !this.auth.authenticated) {\n      this.contextService.defaultContextId$.next(storedContextUri);\n    }\n\n    // See feature-list.component for an explanation about the debounce time\n    this.selectedContext$$ = this.contextService.context$\n      .pipe(debounceTime(100))\n      .subscribe((context) => (this.component.selectedContext = context));\n\n    this.auth.authenticate$.subscribe((authenticate) => {\n      if (authenticate) {\n        this.contextService.getProfilByUser().subscribe((profils) => {\n          this.component.users = profils;\n          this.component.permissions = [];\n          const profilsAcc = this.component.users.reduce((acc, cur) => {\n            acc = acc.concat(cur);\n            acc = cur.childs ? acc.concat(cur.childs) : acc;\n            return acc;\n          }, []);\n\n          for (const user of profilsAcc) {\n            const permission: ContextUserPermission = {\n              name: user.name,\n              checked: this.storageService.get(\n                'contexts.permissions.' + user.name\n              ) as boolean\n            };\n            if (permission.checked === null) {\n              permission.checked = true;\n            }\n            this.component.permissions.push(permission);\n          }\n\n          const permissions = ['none'];\n          for (const p of this.component.permissions) {\n            if (p.checked === true || p.indeterminate === true) {\n              permissions.push(p.name);\n            }\n          }\n\n          this.contextService.loadContexts(\n            permissions,\n            this.component.showHidden\n          );\n        });\n      }\n    });\n  }\n\n  ngOnDestroy() {\n    this.contexts$$.unsubscribe();\n    this.selectedContext$$.unsubscribe();\n    this.defaultContextId$$.unsubscribe();\n  }\n\n  private handleContextsChange(contexts: ContextsList) {\n    this.component.contexts = contexts;\n  }\n}\n","import { Directive, Input, OnDestroy, OnInit, Optional } from '@angular/core';\nimport { Params } from '@angular/router';\n\nimport { ConfigService } from '@igo2/core/config';\nimport { RouteService } from '@igo2/core/route';\nimport {\n  LayerService,\n  MapBrowserComponent,\n  StyleListService,\n  StyleService,\n  isLayerGroupOptions,\n  sortLayersByZindex\n} from '@igo2/geo';\nimport type { AnyLayer, AnyLayerOptions, IgoMap } from '@igo2/geo';\nimport { ObjectUtils } from '@igo2/utils';\n\nimport { Subscription } from 'rxjs';\nimport { debounceTime, filter, first } from 'rxjs/operators';\n\nimport {\n  addImportedFeaturesStyledToMap,\n  addImportedFeaturesToMap\n} from '../../context-import-export/shared/context-import.utils';\nimport { DetailedContext } from './context.interface';\nimport { ContextService } from './context.service';\n\n@Directive({\n  selector: '[igoLayerContext]',\n  standalone: true\n})\nexport class LayerContextDirective implements OnInit, OnDestroy {\n  private context$$: Subscription;\n  private queryParams: Params;\n\n  private contextLayers: AnyLayer[] = [];\n\n  @Input() removeLayersOnContextChange = true;\n\n  get map(): IgoMap {\n    return this.component.map;\n  }\n\n  constructor(\n    private component: MapBrowserComponent,\n    private contextService: ContextService,\n    private layerService: LayerService,\n    private configService: ConfigService,\n    private styleListService: StyleListService,\n    private styleService: StyleService,\n    @Optional() private route: RouteService\n  ) {}\n\n  ngOnInit() {\n    this.context$$ = this.contextService.context$\n      .pipe(filter((context) => context !== undefined))\n      .subscribe((context) => this.handleContextChange(context));\n\n    if (\n      this.route &&\n      this.route.options.visibleOnLayersKey &&\n      this.route.options.visibleOffLayersKey &&\n      this.route.options.contextKey\n    ) {\n      this.route.queryParams\n        .pipe(first((params) => !ObjectUtils.isEmpty(params)))\n        .subscribe((params) => {\n          this.queryParams = params;\n        });\n    }\n  }\n\n  ngOnDestroy() {\n    this.context$$.unsubscribe();\n  }\n\n  private handleContextChange(context: DetailedContext) {\n    if (context.layers === undefined) {\n      return;\n    }\n\n    if (this.removeLayersOnContextChange === true) {\n      this.map.layerController.reset();\n    } else {\n      this.map.layerController.remove(...this.contextLayers);\n    }\n    this.contextLayers = [];\n    this.layerService.unavailableLayers = [];\n\n    const importExportOptions = this.configService.getConfig('importExport');\n\n    this.layerService\n      .createLayers(context.layers, context.uri)\n      .subscribe((layers) => {\n        this.handleAddLayers(layers);\n\n        if (context.extraFeatures) {\n          context.extraFeatures.forEach((featureCollection) => {\n            if (!importExportOptions?.importWithStyle) {\n              addImportedFeaturesToMap(featureCollection, this.map);\n            } else {\n              addImportedFeaturesStyledToMap(\n                featureCollection,\n                this.map,\n                this.styleListService,\n                this.styleService\n              );\n            }\n          });\n        }\n      });\n    if (this.configService.getConfig('importExport.allowToStoreLayer', false)) {\n      this.layerService\n        .createAsyncIdbLayers(context.uri)\n        .pipe(debounceTime(500))\n        .subscribe((layers) => this.handleAddLayers(layers));\n    }\n  }\n\n  private getFlattenOptions(options: AnyLayerOptions[]): AnyLayerOptions[] {\n    return options.reduce((accumulator, option) => {\n      if (isLayerGroupOptions(option)) {\n        const children = option.children\n          ? this.getFlattenOptions(option.children)\n          : [];\n        accumulator.push(option, ...children);\n      } else {\n        accumulator.push(option);\n      }\n      return accumulator;\n    }, []);\n  }\n\n  private handleAddLayers(layers: (AnyLayer | undefined)[]) {\n    const layersFiltrered = layers\n      .filter((layer) => layer)\n      .map((layer) => {\n        layer.visible = this.computeLayerVisibilityFromUrl(layer);\n        return layer;\n      });\n\n    const layersSorted = sortLayersByZindex(layersFiltrered, 'asc');\n    this.contextLayers.concat(layersSorted);\n    this.map.layerController.add(...layersSorted);\n  }\n\n  private computeLayerVisibilityFromUrl(layer: AnyLayer): boolean {\n    const params = this.queryParams;\n    const currentContext = this.contextService.context$.value.uri;\n    const currentLayerid: string = layer.id;\n\n    let visible = layer.visible;\n    if (!params || !currentLayerid) {\n      return visible;\n    }\n\n    const contextParams = params[this.route.options.contextKey as string];\n    if (contextParams === currentContext || !contextParams) {\n      let visibleOnLayersParams = '';\n      let visibleOffLayersParams = '';\n      let visiblelayers: string[] = [];\n      let invisiblelayers: string[] = [];\n\n      if (\n        this.route.options.visibleOnLayersKey &&\n        params[this.route.options.visibleOnLayersKey as string]\n      ) {\n        visibleOnLayersParams =\n          params[this.route.options.visibleOnLayersKey as string];\n      }\n      if (\n        this.route.options.visibleOffLayersKey &&\n        params[this.route.options.visibleOffLayersKey as string]\n      ) {\n        visibleOffLayersParams =\n          params[this.route.options.visibleOffLayersKey as string];\n      }\n\n      /* This order is important because to control whichever\n       the order of * param. First whe open and close everything.*/\n      if (visibleOnLayersParams === '*') {\n        visible = true;\n      }\n      if (visibleOffLayersParams === '*') {\n        visible = false;\n      }\n\n      // After, managing named layer by id (context.json OR id from datasource)\n      visiblelayers = visibleOnLayersParams.split(',');\n      invisiblelayers = visibleOffLayersParams.split(',');\n      if (\n        visiblelayers.indexOf(currentLayerid) > -1 ||\n        visiblelayers.indexOf(currentLayerid.toString()) > -1\n      ) {\n        visible = true;\n      }\n      if (\n        invisiblelayers.indexOf(currentLayerid) > -1 ||\n        invisiblelayers.indexOf(currentLayerid.toString()) > -1\n      ) {\n        visible = false;\n      }\n    }\n\n    return visible;\n  }\n}\n","import { Directive, OnDestroy, OnInit } from '@angular/core';\n\nimport { MediaService } from '@igo2/core/media';\nimport {\n  MapBrowserComponent,\n  MapControlsOptions,\n  MapScaleLineOptions,\n  MapViewOptions\n} from '@igo2/geo';\nimport type { IgoMap } from '@igo2/geo';\n\nimport { Subscription } from 'rxjs';\nimport { filter } from 'rxjs/operators';\n\nimport { ContextMapView, DetailedContext } from './context.interface';\nimport { ContextService } from './context.service';\n\n@Directive({\n  selector: '[igoMapContext]',\n  standalone: true\n})\nexport class MapContextDirective implements OnInit, OnDestroy {\n  private component: MapBrowserComponent;\n  private context$$: Subscription;\n\n  get map(): IgoMap {\n    return this.component.map;\n  }\n\n  constructor(\n    component: MapBrowserComponent,\n    private contextService: ContextService,\n    private mediaService: MediaService\n  ) {\n    this.component = component;\n  }\n\n  ngOnInit() {\n    this.context$$ = this.contextService.context$\n      .pipe(filter((context) => context !== undefined))\n      .subscribe((context) => this.handleContextChange(context));\n  }\n\n  ngOnDestroy() {\n    this.context$$.unsubscribe();\n  }\n\n  private handleContextChange(context: DetailedContext) {\n    if (context.map === undefined) {\n      return;\n    }\n\n    const viewContext: ContextMapView = context.map.view;\n    if (\n      !this.component.view ||\n      viewContext.keepCurrentView !== true ||\n      context.map.view.projection !== this.map.projection\n    ) {\n      this.component.view = viewContext as MapViewOptions;\n    }\n    if (this.component.map.geolocationController) {\n      this.component.map.geolocationController.updateGeolocationOptions(\n        viewContext\n      );\n    }\n\n    const controlsContext: MapControlsOptions = context.map.controls;\n    if (!this.component.controls && controlsContext) {\n      if (this.mediaService.isMobile()) {\n        if (typeof controlsContext.scaleLine !== 'boolean') {\n          const scaleLineOption =\n            controlsContext.scaleLine as MapScaleLineOptions;\n          if (!scaleLineOption.minWidth) {\n            scaleLineOption.minWidth = Math.min(64, scaleLineOption.minWidth);\n            controlsContext.scaleLine = scaleLineOption;\n          }\n        }\n      }\n      this.component.controls = controlsContext;\n    }\n  }\n}\n","import { NgIf } from '@angular/common';\nimport { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport {\n  FormsModule,\n  ReactiveFormsModule,\n  UntypedFormBuilder,\n  UntypedFormGroup\n} from '@angular/forms';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatTooltipModule } from '@angular/material/tooltip';\n\nimport { IgoLanguageModule } from '@igo2/core/language';\nimport { MessageService } from '@igo2/core/message';\nimport { Clipboard, ObjectUtils } from '@igo2/utils';\n\nimport { Context } from '../shared/context.interface';\n\n@Component({\n  selector: 'igo-context-form',\n  templateUrl: './context-form.component.html',\n  styleUrls: ['./context-form.component.scss'],\n  standalone: true,\n  imports: [\n    FormsModule,\n    ReactiveFormsModule,\n    MatFormFieldModule,\n    MatInputModule,\n    NgIf,\n    MatButtonModule,\n    MatTooltipModule,\n    MatIconModule,\n    IgoLanguageModule\n  ]\n})\nexport class ContextFormComponent implements OnInit {\n  public form: UntypedFormGroup;\n  public prefix: string;\n\n  @Input()\n  get btnSubmitText(): string {\n    return this._btnSubmitText;\n  }\n  set btnSubmitText(value: string) {\n    this._btnSubmitText = value;\n  }\n  private _btnSubmitText: string;\n\n  @Input()\n  get context(): Context {\n    return this._context;\n  }\n  set context(value: Context) {\n    this._context = value;\n    this.buildForm();\n  }\n  private _context: Context;\n\n  @Input()\n  get disabled(): boolean {\n    return this._disabled;\n  }\n  set disabled(value: boolean) {\n    this._disabled = value;\n  }\n  private _disabled = false;\n\n  // TODO: replace any by ContextOptions or Context\n  @Output() submitForm = new EventEmitter<any>();\n  @Output() clone = new EventEmitter<any>();\n  @Output() delete = new EventEmitter<any>();\n\n  constructor(\n    private formBuilder: UntypedFormBuilder,\n    private messageService: MessageService\n  ) {}\n\n  ngOnInit(): void {\n    this.buildForm();\n  }\n\n  public handleFormSubmit(value) {\n    let inputs = Object.assign({}, value);\n    inputs = ObjectUtils.removeNull(inputs);\n    inputs.uri = inputs.uri.replace(' ', '');\n    if (inputs.uri) {\n      inputs.uri = this.prefix + '-' + inputs.uri;\n    } else {\n      inputs.uri = this.prefix;\n    }\n    this.submitForm.emit(inputs);\n  }\n\n  public copyTextToClipboard() {\n    const text = this.prefix + '-' + this.form.value.uri.replace(' ', '');\n    const successful = Clipboard.copy(text);\n    if (successful) {\n      this.messageService.success(\n        'igo.context.contextManager.dialog.copyMsg',\n        'igo.context.contextManager.dialog.copyTitle'\n      );\n    }\n  }\n\n  private buildForm(): void {\n    const context: any = this.context || {};\n\n    const uriSplit = context.uri.split('-');\n    this.prefix = uriSplit.shift();\n    const uri = uriSplit.join('-');\n\n    this.form = this.formBuilder.group({\n      title: [context.title],\n      uri: [uri || ' ']\n    });\n  }\n}\n","<form\n  class=\"igo-form\"\n  [formGroup]=\"form\"\n  (ngSubmit)=\"handleFormSubmit(form.value)\"\n>\n  <mat-form-field class=\"full-width\">\n    <input\n      matInput\n      required\n      maxlength=\"128\"\n      [placeholder]=\"'igo.context.contextManager.form.title' | translate\"\n      formControlName=\"title\"\n    />\n    <mat-error>\n      {{ 'igo.context.contextManager.form.titleRequired' | translate }}\n    </mat-error>\n  </mat-form-field>\n\n  <mat-form-field id=\"uriInput\" class=\"full-width\">\n    <span *ngIf=\"prefix\" class=\"prefix\">{{ prefix }}-</span>\n    <span class=\"fieldWrapper\">\n      <input\n        matInput\n        maxlength=\"64\"\n        floatLabel=\"always\"\n        [placeholder]=\"'igo.context.contextManager.form.uri' | translate\"\n        formControlName=\"uri\"\n      />\n    </span>\n  </mat-form-field>\n\n  <button\n    id=\"copyButton\"\n    type=\"button\"\n    mat-icon-button\n    tooltip-position=\"below\"\n    matTooltipShowDelay=\"500\"\n    [matTooltip]=\"'igo.context.contextManager.form.copy' | translate\"\n    color=\"primary\"\n    (click)=\"copyTextToClipboard()\"\n  >\n    <mat-icon>content_copy</mat-icon>\n  </button>\n\n  <div class=\"igo-form-button-group\">\n    <button\n      mat-raised-button\n      type=\"submit\"\n      [disabled]=\"!form.valid || disabled\"\n    >\n      {{ 'igo.context.contextManager.form.edit' | translate }}\n    </button>\n  </div>\n</form>\n","import { NgIf } from '@angular/common';\nimport {\n  ChangeDetectorRef,\n  Component,\n  EventEmitter,\n  Input,\n  Output\n} from '@angular/core';\n\nimport { IgoLanguageModule } from '@igo2/core/language';\n\nimport { ContextFormComponent } from '../context-form/context-form.component';\nimport { Context } from '../shared/context.interface';\n\n@Component({\n  selector: 'igo-context-edit',\n  templateUrl: './context-edit.component.html',\n  standalone: true,\n  imports: [NgIf, ContextFormComponent, IgoLanguageModule]\n})\nexport class ContextEditComponent {\n  @Input()\n  get context(): Context {\n    return this._context;\n  }\n  set context(value: Context) {\n    this._context = value;\n    this.refresh();\n  }\n  private _context: Context;\n\n  @Output() submitForm = new EventEmitter<Context>();\n\n  constructor(private cd: ChangeDetectorRef) {}\n\n  refresh() {\n    this.cd.detectChanges();\n  }\n}\n","<igo-context-form\n  *ngIf=\"context\"\n  [btnSubmitText]=\"'igo.context.contextManager.save' | translate\"\n  [context]=\"context\"\n  (submitForm)=\"submitForm.emit($event)\"\n>\n</igo-context-form>\n","import {\n  Directive,\n  EventEmitter,\n  HostListener,\n  OnDestroy,\n  OnInit,\n  Output,\n  Self\n} from '@angular/core';\n\nimport { MessageService } from '@igo2/core/message';\n\nimport { Subscription } from 'rxjs';\n\nimport { Context, DetailedContext } from '../shared/context.interface';\nimport { ContextService } from '../shared/context.service';\nimport { ContextEditComponent } from './context-edit.component';\n\n@Directive({\n  selector: '[igoContextEditBinding]',\n  standalone: true\n})\nexport class ContextEditBindingDirective implements OnInit, OnDestroy {\n  private component: ContextEditComponent;\n  private editedContext$$: Subscription;\n\n  @Output() submitSuccessed = new EventEmitter<Context>();\n\n  @HostListener('submitForm', ['$event'])\n  onEdit(context: Context) {\n    const id = this.component.context.id;\n    this.contextService.update(id, context).subscribe(() => {\n      this.messageService.success(\n        'igo.context.contextManager.dialog.saveMsg',\n        'igo.context.contextManager.dialog.saveTitle',\n        undefined,\n        {\n          value: context.title || this.component.context.title\n        }\n      );\n      this.contextService.setEditedContext(undefined);\n      this.submitSuccessed.emit(context);\n    });\n  }\n\n  constructor(\n    @Self() component: ContextEditComponent,\n    private contextService: ContextService,\n    private messageService: MessageService\n  ) {\n    this.component = component;\n  }\n\n  ngOnInit() {\n    this.editedContext$$ = this.contextService.editedContext$.subscribe(\n      (context) => this.handleEditedContextChange(context)\n    );\n  }\n\n  ngOnDestroy() {\n    this.editedContext$$.unsubscribe();\n  }\n\n  private handleEditedContextChange(context: DetailedContext) {\n    this.component.context = context;\n  }\n}\n","import { KeyValuePipe, NgFor, NgIf } from '@angular/common';\nimport { HttpClient } from '@angular/common/http';\nimport {\n  ChangeDetectorRef,\n  Component,\n  EventEmitter,\n  Input,\n  OnInit,\n  Output\n} from '@angular/core';\nimport {\n  FormsModule,\n  ReactiveFormsModule,\n  UntypedFormBuilder,\n  UntypedFormControl,\n  UntypedFormGroup\n} from '@angular/forms';\nimport { MatAutocompleteModule } from '@angular/material/autocomplete';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatOptionModule } from '@angular/material/core';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatListModule } from '@angular/material/list';\nimport { MatRadioModule } from '@angular/material/radio';\nimport { MatTooltipModule } from '@angular/material/tooltip';\n\nimport { AuthService } from '@igo2/auth';\nimport { CollapsibleComponent } from '@igo2/common/collapsible';\nimport { ListComponent } from '@igo2/common/list';\nimport { StopPropagationDirective } from '@igo2/common/stop-propagation';\nimport { ConfigService } from '@igo2/core/config';\nimport { IgoLanguageModule } from '@igo2/core/language';\n\nimport { Subscription } from 'rxjs';\n\nimport { TypePermission } from '../shared/context.enum';\nimport {\n  Context,\n  ContextPermission,\n  ContextPermissionsList,\n  ContextProfils\n} from '../shared/context.interface';\n\n@Component({\n  selector: 'igo-context-permissions',\n  templateUrl: './context-permissions.component.html',\n  styleUrls: ['./context-permissions.component.scss'],\n  standalone: true,\n  imports: [\n    NgIf,\n    MatRadioModule,\n    FormsModule,\n    ReactiveFormsModule,\n    MatFormFieldModule,\n    MatInputModule,\n    MatAutocompleteModule,\n    NgFor,\n    MatOptionModule,\n    MatButtonModule,\n    ListComponent,\n    CollapsibleComponent,\n    MatListModule,\n    MatIconModule,\n    StopPropagationDirective,\n    MatTooltipModule,\n    KeyValuePipe,\n    IgoLanguageModule\n  ]\n})\nexport class ContextPermissionsComponent implements OnInit {\n  public form: UntypedFormGroup;\n\n  @Input()\n  get context(): Context {\n    return this._context;\n  }\n  set context(value: Context) {\n    this._context = value;\n    this.cd.detectChanges();\n  }\n  private _context: Context;\n\n  @Input()\n  get permissions(): ContextPermissionsList {\n    return this._permissions;\n  }\n  set permissions(value: ContextPermissionsList) {\n    this._permissions = value;\n    this.cd.detectChanges();\n  }\n  private _permissions: ContextPermissionsList;\n\n  get profils(): ContextProfils[] {\n    return this._profils;\n  }\n  set profils(value: ContextProfils[]) {\n    this._profils = value;\n    this.cd.detectChanges();\n  }\n  private _profils: ContextProfils[] = [];\n\n  get canWrite(): boolean {\n    return this.context.permission === TypePermission[TypePermission.write];\n  }\n\n  private baseUrlProfils;\n\n  public formControl = new UntypedFormControl();\n  formValueChanges$$: Subscription;\n\n  @Output() addPermission = new EventEmitter<ContextPermission>();\n  @Output() removePermission = new EventEmitter<ContextPermission>();\n  @Output() scopeChanged = new EventEmitter<Context>();\n\n  constructor(\n    private formBuilder: UntypedFormBuilder,\n    private cd: ChangeDetectorRef,\n    private http: HttpClient,\n    public authService: AuthService,\n    private config: ConfigService\n  ) {}\n\n  ngOnInit(): void {\n    this.buildForm();\n\n    this.baseUrlProfils =\n      this.config.getConfig('context.url') + '/profils-users?';\n\n    this.formValueChanges$$ = this.formControl.valueChanges.subscribe(\n      (value) => {\n        if (value.length) {\n          this.http\n            .get(this.baseUrlProfils + 'q=' + value)\n            .subscribe((profils) => {\n              this.profils = profils as ContextProfils[];\n            });\n          this.profils.filter((profil) => {\n            const filterNormalized = value\n              .toLowerCase()\n              .normalize('NFD')\n              .replace(/[\\u0300-\\u036f]/g, '');\n            const profilTitleNormalized = profil.title\n              .toLowerCase()\n              .normalize('NFD')\n              .replace(/[\\u0300-\\u036f]/g, '');\n            const profilNameNormalized = profil.name\n              .toLowerCase()\n              .normalize('NFD')\n              .replace(/[\\u0300-\\u036f]/g, '');\n            const profilNormalized =\n              profilNameNormalized + profilTitleNormalized;\n            return profilNormalized.includes(filterNormalized);\n          });\n        } else {\n          this.profils = [];\n        }\n      }\n    );\n  }\n\n  displayFn(profil?: ContextProfils): string | undefined {\n    return profil ? profil.title : undefined;\n  }\n\n  public handleFormSubmit(value) {\n    this.addPermission.emit(value);\n  }\n\n  private buildForm(): void {\n    this.form = this.formBuilder.group({\n      profil: [],\n      typePermission: ['read']\n    });\n  }\n\n  onProfilSelected(value) {\n    this.form.setValue({\n      profil: value.name,\n      typePermission: this.form.value.typePermission\n    });\n  }\n}\n","<div *ngIf=\"context\">\n  <div *ngIf=\"!canWrite\" class=\"scopeForm\">\n    <h4>{{ 'igo.context.permission.readOnlyTitle' | translate }}</h4>\n    <p>{{ 'igo.context.permission.readOnlyMsg' | translate }}</p>\n  </div>\n\n  <div *ngIf=\"canWrite\" class=\"scopeForm\">\n    <mat-radio-group\n      [(ngModel)]=\"context.scope\"\n      (change)=\"scopeChanged.emit(context)\"\n    >\n      <mat-radio-button value=\"private\">\n        {{ 'igo.context.permission.scope.private' | translate }}\n      </mat-radio-button>\n      <mat-radio-button value=\"protected\">\n        {{ 'igo.context.permission.scope.shared' | translate }}\n      </mat-radio-button>\n      <mat-radio-button *ngIf=\"authService.isAdmin\" value=\"public\">\n        {{ 'igo.context.permission.scope.public' | translate }}\n      </mat-radio-button>\n    </mat-radio-group>\n  </div>\n\n  <form\n    *ngIf=\"context.scope !== 'private' && canWrite\"\n    [formGroup]=\"form\"\n    (ngSubmit)=\"handleFormSubmit(form.value)\"\n  >\n    <mat-form-field class=\"full-width\">\n      <input\n        matInput\n        required\n        [placeholder]=\"'igo.context.permission.user' | translate\"\n        [formControl]=\"formControl\"\n        [matAutocomplete]=\"auto\"\n      />\n      <mat-autocomplete\n        #auto=\"matAutocomplete\"\n        (optionSelected)=\"onProfilSelected($event.option.value)\"\n        [displayWith]=\"displayFn\"\n      >\n        <mat-option *ngFor=\"let profil of this.profils\" [value]=\"profil\">\n          {{ profil.title }}<br />\n          <small class=\"mat-typography\">{{ profil.name }}</small>\n        </mat-option>\n      </mat-autocomplete>\n      <mat-error>\n        {{ 'igo.context.permission.profilRequired' | translate }}\n      </mat-error>\n    </mat-form-field>\n\n    <mat-radio-group formControlName=\"typePermission\">\n      <mat-radio-button value=\"read\">\n        {{ 'igo.context.permission.read' | translate }}\n      </mat-radio-button>\n      <mat-radio-button value=\"write\">\n        {{ 'igo.context.permission.write' | translate }}\n      </mat-radio-button>\n    </mat-radio-group>\n\n    <div class=\"igo-form-button-group\">\n      <button mat-raised-button type=\"submit\" [disabled]=\"!form.valid\">\n        {{ 'igo.context.permission.addBtn' | translate }}\n      </button>\n    </div>\n  </form>\n\n  <igo-list *ngIf=\"permissions && context.scope !== 'private'\">\n    <ng-template ngFor let-groupPermissions [ngForOf]=\"permissions | keyvalue\">\n      <igo-collapsible\n        *ngIf=\"groupPermissions.value.length\"\n        [title]=\"'igo.context.permission.' + groupPermissions.key | translate\"\n      >\n        <ng-template ngFor let-permission [ngForOf]=\"groupPermissions.value\">\n          <mat-list-item>\n            <mat-icon matListItemIcon>person</mat-icon>\n            <h4 matListItemTitle>\n              {{ permission.profilTitle }}\n              <small class=\"mat-typography\">{{ permission.profil }}</small>\n            </h4>\n\n            <div\n              matListItemMeta\n              igoStopPropagation\n              class=\"igo-actions-container\"\n            >\n              <button\n                *ngIf=\"\n                  canWrite ||\n                  permission.profil === authService.decodeToken().user.sourceId\n                \"\n                mat-icon-button\n                [matTooltip]=\"'igo.context.permission.delete' | translate\"\n                matTooltipShowDelay=\"500\"\n                color=\"warn\"\n                (click)=\"removePermission.emit(permission)\"\n              >\n                <mat-icon>delete</mat-icon>\n              </button>\n            </div>\n          </mat-list-item>\n        </ng-template>\n      </igo-collapsible>\n    </ng-template>\n  </igo-list>\n</div>\n","import {\n  ChangeDetectorRef,\n  Directive,\n  HostListener,\n  OnDestroy,\n  OnInit,\n  Self\n} from '@angular/core';\n\nimport { LanguageService } from '@igo2/core/language';\nimport { MessageService } from '@igo2/core/message';\n\nimport { Subscription } from 'rxjs';\n\nimport {\n  Context,\n  ContextPermission,\n  DetailedContext\n} from '../shared/context.interface';\nimport { ContextService } from '../shared/context.service';\nimport { ContextPermissionsComponent } from './context-permissions.component';\n\n@Directive({\n  selector: '[igoContextPermissionsBinding]',\n  standalone: true\n})\nexport class ContextPermissionsBindingDirective implements OnInit, OnDestroy {\n  private component: ContextPermissionsComponent;\n  private editedContext$$: Subscription;\n\n  @HostListener('addPermission', ['$event'])\n  onAddPermission(permission: ContextPermission) {\n    if (!permission.profil) {\n      this.messageService.error(\n        'igo.context.contextManager.errors.addPermissionEmpty',\n        'igo.context.contextManager.errors.addPermissionTitle'\n      );\n      return;\n    }\n    const contextId = this.component.context.id;\n    this.contextService\n      .addPermissionAssociation(\n        contextId,\n        permission.profil,\n        permission.typePermission\n      )\n      .subscribe((profils) => {\n        for (const p of profils) {\n          this.component.permissions[permission.typePermission].push(p);\n        }\n        const profil = permission.profil;\n        this.messageService.success(\n          'igo.context.permission.dialog.addMsg',\n          'igo.context.permission.dialog.addTitle',\n          undefined,\n          { value: profil }\n        );\n        this.cd.detectChanges();\n      });\n  }\n\n  @HostListener('removePermission', ['$event'])\n  onRemovePermission(permission: ContextPermission) {\n    const contextId = this.component.context.id;\n    this.contextService\n      .deletePermissionAssociation(contextId, permission.id)\n      .subscribe(() => {\n        const index = this.component.permissions[\n          permission.typePermission\n        ].findIndex((p) => {\n          return p.id === permission.id;\n        });\n        this.component.permissions[permission.typePermission].splice(index, 1);\n\n        const profil = permission.profil;\n        this.messageService.success(\n          'igo.context.permission.dialog.deleteMsg',\n          'igo.context.permission.dialog.deleteTitle',\n          undefined,\n          { value: profil }\n        );\n        this.cd.detectChanges();\n      });\n  }\n\n  @HostListener('scopeChanged', ['$event'])\n  onScopeChanged(context: Context) {\n    const scope = context.scope;\n    this.contextService.update(context.id, { scope }).subscribe(() => {\n      this.messageService.success(\n        'igo.context.permission.dialog.scopeChangedMsg',\n        'igo.context.permission.dialog.scopeChangedTitle',\n        undefined,\n        { value: 'igo.context.permission.scope.' + scope }\n      );\n    });\n  }\n\n  constructor(\n    @Self() component: ContextPermissionsComponent,\n    private contextService: ContextService,\n    private languageService: LanguageService,\n    private messageService: MessageService,\n    private cd: ChangeDetectorRef\n  ) {\n    this.component = component;\n  }\n\n  ngOnInit() {\n    this.editedContext$$ = this.contextService.editedContext$.subscribe(\n      (context) => this.handleEditedContextChange(context)\n    );\n  }\n\n  ngOnDestroy() {\n    this.editedContext$$.unsubscribe();\n    this.contextService.editedContext$.next(undefined);\n  }\n\n  private handleEditedContextChange(context: DetailedContext) {\n    this.component.context = context;\n\n    if (context) {\n      this.contextService\n        .getPermissions(context.id)\n        .subscribe((permissionsArray) => {\n          permissionsArray = permissionsArray || [];\n          const permissions = {\n            read: permissionsArray.filter((p) => {\n              return p.typePermission.toString() === 'read';\n            }),\n            write: permissionsArray.filter((p) => {\n              return p.typePermission.toString() === 'write';\n            })\n          };\n          return (this.component.permissions = permissions);\n        });\n    }\n  }\n}\n","import { Injectable, Optional } from '@angular/core';\n\nimport { RouteService } from '@igo2/core/route';\nimport { WMSDataSourceOptions, isLayerItem } from '@igo2/geo';\nimport type { IgoMap, Layer } from '@igo2/geo';\n\nimport { DetailedContext } from '../../context-manager/shared/context.interface';\nimport { ContextService } from '../../context-manager/shared/context.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ShareMapService {\n  private language = '';\n\n  constructor(\n    private contextService: ContextService,\n    @Optional() private route: RouteService\n  ) {\n    this.route.queryParams.subscribe((params) => {\n      if (params['lang']) {\n        this.language = params['lang'];\n      }\n    });\n  }\n\n  getUrlWithApi(formValues) {\n    return this.language\n      ? `${location.origin + location.pathname}?context=${\n          formValues.uri\n        }&lang=${this.language}`\n      : `${location.origin + location.pathname}?context=${formValues.uri}`;\n  }\n\n  createContextShared(map: IgoMap, formValues) {\n    const context = this.contextService.getContextFromMap(map);\n    context.scope = 'public';\n    context.title = formValues.title;\n    context.uri = formValues.uri;\n    return this.contextService.create(context);\n  }\n\n  updateContextShared(map: IgoMap, formValues, id: string) {\n    const context = this.contextService.getContextFromMap(map);\n    return this.contextService.update(id, {\n      title: formValues.title,\n      map: context.map\n    } as DetailedContext);\n  }\n\n  getUrlWithoutApi(map: IgoMap, publicShareOption) {\n    if (\n      !this.route ||\n      !this.route.options.visibleOnLayersKey ||\n      !this.route.options.visibleOffLayersKey ||\n      !map.viewController.getZoom()\n    ) {\n      return;\n    }\n    const llc = publicShareOption.layerlistControls.querystring;\n\n    let visibleKey = this.route.options.visibleOnLayersKey;\n    let invisibleKey = this.route.options.visibleOffLayersKey;\n    const layers = map.layerController.all.filter((layer) =>\n      isLayerItem(layer)\n    ) as Layer[];\n\n    const visibleLayers = layers.filter(\n      (lay) => lay.visible && !lay.isIgoInternalLayer\n    );\n    const invisibleLayers = layers.filter(\n      (lay) => !lay.visible && !lay.isIgoInternalLayer\n    );\n\n    if (visibleLayers.length === 0) {\n      visibleKey = '';\n    }\n    if (invisibleLayers.length === 0) {\n      invisibleKey = '';\n    }\n\n    let layersUrl = '';\n    let layersToLoop = [];\n    if (visibleLayers.length > invisibleLayers.length) {\n      layersUrl = `${visibleKey}=*&${invisibleKey}=`;\n      layersToLoop = invisibleLayers;\n    } else {\n      layersUrl = `${invisibleKey}=*&${visibleKey}=`;\n      layersToLoop = visibleLayers;\n    }\n\n    for (const layer of layersToLoop) {\n      if (layer.id) {\n        layersUrl += layer.id + ',';\n      }\n    }\n    const contextLayersID = [];\n    const contextLayers = this.contextService.context$.value.layers;\n    for (const contextLayer of contextLayers) {\n      if (\n        typeof contextLayer.id !== 'undefined' ||\n        typeof (contextLayer as any).source !== 'undefined'\n      ) {\n        contextLayersID.push(\n          contextLayer.id || (contextLayer as any).source.id\n        );\n      }\n    }\n\n    const addedLayersQueryParamsWms = this.makeLayersByService(\n      layers,\n      contextLayersID,\n      'wms'\n    );\n    const addedLayersQueryParamsWmts = this.makeLayersByService(\n      layers,\n      contextLayersID,\n      'wmts'\n    );\n    const addedLayersQueryParamsArcgisRest = this.makeLayersByService(\n      layers,\n      contextLayersID,\n      'arcgisrest'\n    );\n    const addedLayersQueryParamsImageArcgisRest = this.makeLayersByService(\n      layers,\n      contextLayersID,\n      'imagearcgisrest'\n    );\n    const addedLayersQueryParamsTileArcgisRest = this.makeLayersByService(\n      layers,\n      contextLayersID,\n      'tilearcgisrest'\n    );\n\n    layersUrl = layersUrl.substr(0, layersUrl.length - 1);\n\n    const zoomKey = this.route.options.zoomKey;\n    const centerKey = this.route.options.centerKey;\n    const contextKey = this.route.options.contextKey;\n\n    const zoom = `${zoomKey}=${map.viewController.getZoom()}`;\n    const arrayCenter = map.viewController.getCenter('EPSG:4326') || [];\n    const long = arrayCenter[0].toFixed(5).replace(/\\.([^0]+)0+$/, '.$1');\n    const lat = arrayCenter[1].toFixed(5).replace(/\\.([^0]+)0+$/, '.$1');\n    const center = `${centerKey}=${long},${lat}`.replace(/.00000/g, '');\n    let context = '';\n    if (this.contextService.context$.value) {\n      context = `${contextKey}=${this.contextService.context$.value.uri}`;\n    }\n\n    let url = this.language\n      ? `${location.origin}${location.pathname}?${context}&${zoom}&${center}&${layersUrl}&${llc}&${addedLayersQueryParamsWms}&${llc}&${addedLayersQueryParamsWmts}&${addedLayersQueryParamsArcgisRest}&${addedLayersQueryParamsImageArcgisRest}&${addedLayersQueryParamsTileArcgisRest}&lang=${this.language}`\n      : `${location.origin}${location.pathname}?${context}&${zoom}&${center}&${layersUrl}&${llc}&${addedLayersQueryParamsWms}&${llc}&${addedLayersQueryParamsWmts}&${addedLayersQueryParamsArcgisRest}&${addedLayersQueryParamsImageArcgisRest}&${addedLayersQueryParamsTileArcgisRest}`;\n    for (let i = 0; i < 5; i++) {\n      url = url.replace(/&&/g, '&');\n      url = url.endsWith('&') ? url.slice(0, -1) : url;\n    }\n    url = url.endsWith('&') ? url.slice(0, -1) : url;\n    url = url.replace('?&wm', '&wm');\n    url = url.replace('?&', '?');\n\n    return url;\n  }\n\n  private makeLayersByService(\n    layers: Layer[],\n    contextLayersID: any[],\n    typeService: string\n  ): string {\n    const addedLayersByService = [];\n    for (const layer of layers.filter(\n      (l) => l.dataSource.options?.type === typeService\n    )) {\n      if (contextLayersID.indexOf(layer.id) === -1) {\n        let linkUrl = encodeURIComponent((layer.dataSource.options as any).url);\n        let addedLayer = '';\n        let layerVersion: string;\n        switch (layer.dataSource.options.type.toLowerCase()) {\n          case 'wms': {\n            const datasourceOptions = layer.dataSource\n              .options as WMSDataSourceOptions;\n            addedLayer = encodeURIComponent(datasourceOptions.params.LAYERS);\n            layerVersion =\n              datasourceOptions.params.VERSION === '1.3.0'\n                ? layerVersion\n                : datasourceOptions.params.VERSION;\n            break;\n          }\n          case 'wmts':\n          case 'arcgisrest':\n          case 'imagearcgisrest':\n          case 'tilearcgisrest':\n            addedLayer = encodeURIComponent(\n              (layer.dataSource.options as any).layer\n            );\n            break;\n        }\n        const addedLayerPosition = `${addedLayer}:igoz${layer.zIndex}`;\n\n        let version = '';\n        if (layerVersion) {\n          const operator =\n            (layer.dataSource.options as any).url.indexOf('?') === -1\n              ? '?'\n              : '&';\n          version = encodeURIComponent(`${operator}VERSION=${layerVersion}`);\n        }\n        linkUrl = `${linkUrl}${version}`;\n\n        if (\n          !addedLayersByService.find((definedUrl) => definedUrl.url === linkUrl)\n        ) {\n          addedLayersByService.push({\n            url: linkUrl,\n            layers: [addedLayerPosition]\n          });\n        } else {\n          addedLayersByService.forEach((service) => {\n            if (service.url === linkUrl) {\n              service.layers.push(addedLayerPosition);\n            }\n          });\n        }\n      }\n    }\n\n    let addedLayersQueryParams = '';\n    if (addedLayersByService.length >= 1) {\n      let linkUrlKey;\n      let layersKey;\n      /*\n      const linkUrlKey = (typeService === 'wms') ? this.route.options.wmsUrlKey :\n        (typeService === 'wmts') ? this.route.options.wmtsUrlKey : '' ;\n      const layersKey = (typeService === 'wms') ? this.route.options.wmsLayersKey :\n        (typeService === 'wmts') ? this.route.options.wmtsLayersKey : '' ;\n*/\n      switch (typeService.toLowerCase()) {\n        case 'wms':\n          linkUrlKey = this.route.options.wmsUrlKey;\n          layersKey = this.route.options.wmsLayersKey;\n          break;\n        case 'wmts':\n          linkUrlKey = this.route.options.wmtsUrlKey;\n          layersKey = this.route.options.wmtsLayersKey;\n          break;\n        case 'arcgisrest':\n          linkUrlKey = this.route.options.arcgisUrlKey;\n          layersKey = this.route.options.arcgisLayersKey;\n          break;\n        case 'imagearcgisrest':\n          linkUrlKey = this.route.options.iarcgisUrlKey;\n          layersKey = this.route.options.iarcgisLayersKey;\n          break;\n        case 'tilearcgisrest':\n          linkUrlKey = this.route.options.tarcgisUrlKey;\n          layersKey = this.route.options.tarcgisLayersKey;\n          break;\n        default:\n          linkUrlKey = '';\n          layersKey = '';\n      }\n\n      let linkUrlQueryParams = '';\n      let layersQueryParams = '';\n      addedLayersByService.forEach((service) => {\n        linkUrlQueryParams += `${service.url},`;\n        layersQueryParams += `(${service.layers.join(',')}),`;\n      });\n      linkUrlQueryParams = linkUrlQueryParams.endsWith(',')\n        ? linkUrlQueryParams.slice(0, -1)\n        : linkUrlQueryParams;\n      layersQueryParams = layersQueryParams.endsWith(',')\n        ? layersQueryParams.slice(0, -1)\n        : layersQueryParams;\n      addedLayersQueryParams = `${linkUrlKey}=${linkUrlQueryParams}&${layersKey}=${layersQueryParams}`;\n    }\n\n    return addedLayersQueryParams;\n  }\n}\n","import { NgIf } from '@angular/common';\nimport { Component, Input, OnInit } from '@angular/core';\nimport {\n  FormsModule,\n  ReactiveFormsModule,\n  UntypedFormBuilder,\n  UntypedFormGroup\n} from '@angular/forms';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatTooltipModule } from '@angular/material/tooltip';\n\nimport { AuthService } from '@igo2/auth';\nimport { LanguageService } from '@igo2/core/language';\nimport { IgoLanguageModule } from '@igo2/core/language';\nimport { MessageService } from '@igo2/core/message';\nimport type { IgoMap } from '@igo2/geo';\nimport { Clipboard, uuid } from '@igo2/utils';\n\nimport { ShareMapService } from '../shared/share-map.service';\n\n@Component({\n  selector: 'igo-share-map-api',\n  templateUrl: './share-map-api.component.html',\n  styleUrls: ['./share-map-api.component.scss'],\n  standalone: true,\n  imports: [\n    FormsModule,\n    ReactiveFormsModule,\n    MatFormFieldModule,\n    MatInputModule,\n    NgIf,\n    MatButtonModule,\n    MatTooltipModule,\n    MatIconModule,\n    IgoLanguageModule\n  ]\n})\nexport class ShareMapApiComponent implements OnInit {\n  public form: UntypedFormGroup;\n\n  @Input() map: IgoMap;\n\n  public url: string;\n  public userId: string;\n  public idContextShared: string;\n\n  constructor(\n    private languageService: LanguageService,\n    private messageService: MessageService,\n    private auth: AuthService,\n    private shareMapService: ShareMapService,\n    private formBuilder: UntypedFormBuilder\n  ) {}\n\n  ngOnInit(): void {\n    this.auth.authenticate$.subscribe(() => {\n      const decodeToken = this.auth.decodeToken();\n      this.userId = decodeToken?.user?.id.toString();\n      this.buildForm();\n    });\n  }\n\n  createUrl(values: any = {}) {\n    const inputs = Object.assign({}, values);\n    inputs.uri = this.userId ? `${this.userId}-${values.uri}` : values.uri;\n    this.url = this.shareMapService.getUrlWithApi(inputs);\n    this.shareMapService.createContextShared(this.map, inputs).subscribe(\n      (rep) => {\n        this.idContextShared = rep.id;\n        this.messageService.success(\n          'igo.context.contextManager.dialog.saveMsg',\n          'igo.context.contextManager.dialog.saveTitle',\n          undefined,\n          { value: inputs.title }\n        );\n      },\n      (err) => {\n        err.error.title = this.languageService.translate.instant(\n          'igo.context.shareMap.errorTitle'\n        );\n        this.messageService.showError(err);\n      }\n    );\n  }\n\n  updateContextShared(values: any = {}) {\n    const inputs = Object.assign({}, values);\n    inputs.uri = this.userId ? `${this.userId}-${values.uri}` : values.uri;\n    this.shareMapService\n      .updateContextShared(this.map, inputs, this.idContextShared)\n      .subscribe(\n        () => {\n          this.messageService.success(\n            'igo.context.contextManager.dialog.saveMsg',\n            'igo.context.contextManager.dialog.saveTitle',\n            undefined,\n            { value: inputs.title }\n          );\n        },\n        (err) => {\n          err.error.title = this.languageService.translate.instant(\n            'igo.context.shareMap.errorTitle'\n          );\n          this.messageService.showError(err);\n        }\n      );\n  }\n\n  copyTextToClipboard(textArea) {\n    const successful = Clipboard.copy(textArea);\n    if (successful) {\n      this.messageService.success(\n        'igo.context.shareMap.dialog.copyMsg',\n        'igo.context.shareMap.dialog.copyTitle'\n      );\n    }\n  }\n\n  buildForm(): void {\n    this.url = undefined;\n    const id = uuid();\n    let title = 'Partage ';\n    title += this.userId ? `(${this.userId}-${id})` : `(${id})`;\n    this.form = this.formBuilder.group({\n      title: [title],\n      uri: [id]\n    });\n  }\n}\n","<form class=\"igo-form\" [formGroup]=\"form\" (ngSubmit)=\"createUrl(form.value)\">\n  <div class=\"igo-input-container\">\n    <mat-form-field>\n      <input\n        matInput\n        required\n        [placeholder]=\"'igo.context.contextManager.form.title' | translate\"\n        formControlName=\"title\"\n      />\n      <mat-error>\n        {{ 'igo.context.contextManager.form.titleRequired' | translate }}\n      </mat-error>\n    </mat-form-field>\n  </div>\n\n  <div id=\"uriInput\" class=\"igo-input-container\">\n    <mat-form-field>\n      <span *ngIf=\"userId\" class=\"prefix\">{{ userId }}-</span>\n      <span class=\"fieldWrapper\">\n        <input\n          matInput\n          required\n          [readonly]=\"!userId\"\n          [placeholder]=\"'igo.context.contextManager.form.uri' | translate\"\n          formControlName=\"uri\"\n        />\n      </span>\n      <mat-error>\n        {{ 'igo.context.contextManager.form.uriRequired' | translate }}\n      </mat-error>\n    </mat-form-field>\n  </div>\n\n  <div class=\"igo-form-button-group\">\n    <button\n      *ngIf=\"!url\"\n      mat-raised-button\n      type=\"submit\"\n      [disabled]=\"!form.valid\"\n    >\n      {{ 'igo.context.shareMap.button' | translate }}\n    </button>\n    <button\n      *ngIf=\"url\"\n      mat-raised-button\n      type=\"button\"\n      (click)=\"updateContextShared(form.value)\"\n    >\n      {{ 'igo.context.shareMap.refreshBtn' | translate }}\n    </button>\n  </div>\n</form>\n\n<div *ngIf=\"url\" class=\"igo-input-container linkToShare\">\n  <mat-form-field>\n    <textarea\n      #textArea\n      matInput\n      readonly\n      rows=\"3\"\n      class=\"textAreaWithButton\"\n      [placeholder]=\"'igo.context.shareMap.placeholderLink' | translate\"\n      [value]=\"url\"\n    ></textarea>\n    <button\n      mat-icon-button\n      tooltip-position=\"below\"\n      matTooltipShowDelay=\"500\"\n      [matTooltip]=\"'igo.context.shareMap.copy' | translate\"\n      color=\"primary\"\n      (click)=\"copyTextToClipboard(textArea)\"\n    >\n      <mat-icon>content_copy</mat-icon>\n    </button>\n  </mat-form-field>\n  <div></div>\n</div>\n","import { NgIf } from '@angular/common';\nimport {\n  AfterViewInit,\n  ChangeDetectorRef,\n  Component,\n  Input,\n  OnDestroy,\n  OnInit\n} from '@angular/core';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatInputModule } from '@angular/material/input';\n\nimport { CustomHtmlComponent } from '@igo2/common/custom-html';\nimport { IgoLanguageModule } from '@igo2/core/language';\nimport { MessageService } from '@igo2/core/message';\nimport type { IgoMap } from '@igo2/geo';\nimport { Clipboard } from '@igo2/utils';\n\nimport { Subscription, combineLatest } from 'rxjs';\n\nimport { ShareMapService } from '../shared/share-map.service';\n\n@Component({\n  selector: 'igo-share-map-url',\n  templateUrl: './share-map-url.component.html',\n  styleUrls: ['./share-map-url.component.scss'],\n  standalone: true,\n  imports: [\n    MatFormFieldModule,\n    MatInputModule,\n    MatButtonModule,\n    MatIconModule,\n    NgIf,\n    CustomHtmlComponent,\n    IgoLanguageModule\n  ]\n})\nexport class ShareMapUrlComponent implements AfterViewInit, OnInit, OnDestroy {\n  private mapState$$: Subscription;\n\n  @Input() map: IgoMap;\n\n  public url: string;\n  public publicShareOption = {\n    layerlistControls: { querystring: '' }\n  };\n\n  constructor(\n    private messageService: MessageService,\n    private shareMapService: ShareMapService,\n    private cdRef: ChangeDetectorRef\n  ) {}\n\n  ngOnInit(): void {\n    this.resetUrl();\n    this.mapState$$ = combineLatest([\n      this.map.viewController.state$,\n      this.map.status$\n    ]).subscribe(() => {\n      this.resetUrl();\n      this.cdRef.detectChanges();\n    });\n  }\n\n  ngAfterViewInit(): void {\n    this.resetUrl();\n  }\n\n  ngOnDestroy(): void {\n    this.mapState$$.unsubscribe();\n  }\n\n  resetUrl() {\n    this.url = this.shareMapService.getUrlWithoutApi(\n      this.map,\n      this.publicShareOption\n    );\n  }\n\n  copyTextToClipboard(textArea) {\n    const successful = Clipboard.copy(textArea);\n    if (successful) {\n      this.messageService.success(\n        'igo.context.shareMap.dialog.copyMsg',\n        'igo.context.shareMap.dialog.copyTitle'\n      );\n    }\n  }\n}\n","<div class=\"igo-input-container linkToShare\">\n  <mat-form-field>\n    <textarea\n      #textArea\n      matInput\n      readonly\n      rows=\"3\"\n      [placeholder]=\"'igo.context.shareMap.placeholderLink' | translate\"\n      [value]=\"url\"\n    ></textarea>\n  </mat-form-field>\n\n  <div class=\"igo-form-button-group\">\n    <button mat-raised-button (click)=\"copyTextToClipboard(textArea)\">\n      <mat-icon>content_copy</mat-icon>\n      {{ 'igo.context.shareMap.copy' | translate }}\n    </button>\n  </div>\n  <div>\n    <br />\n    <section class=\"mat-typography\">\n      <div\n        *ngIf=\"('igo.context.shareMap.htmlClarifications' | translate) === ''\"\n      >\n        <h4 *ngIf=\"('igo.context.shareMap.included' | translate) !== ''\">\n          {{ 'igo.context.shareMap.included' | translate }}\n        </h4>\n        <ul>\n          <li *ngIf=\"('igo.context.shareMap.context' | translate) !== ''\">\n            {{ 'igo.context.shareMap.context' | translate }}\n          </li>\n          <li *ngIf=\"('igo.context.shareMap.center' | translate) !== ''\">\n            {{ 'igo.context.shareMap.center' | translate }}\n          </li>\n          <li *ngIf=\"('igo.context.shareMap.zoom' | translate) !== ''\">\n            {{ 'igo.context.shareMap.zoom' | translate }}\n          </li>\n          <li *ngIf=\"('igo.context.shareMap.addedLayers' | translate) !== ''\">\n            {{ 'igo.context.shareMap.addedLayers' | translate }}\n          </li>\n          <li\n            *ngIf=\"('igo.context.shareMap.visibleInvisible' | translate) !== ''\"\n          >\n            {{ 'igo.context.shareMap.visibleInvisible' | translate }}\n          </li>\n        </ul>\n\n        <h4 *ngIf=\"('igo.context.shareMap.excluded' | translate) !== ''\">\n          {{ 'igo.context.shareMap.excluded' | translate }}\n        </h4>\n        <ul>\n          <li *ngIf=\"('igo.context.shareMap.order' | translate) !== ''\">\n            {{ 'igo.context.shareMap.order' | translate }}\n          </li>\n          <li *ngIf=\"('igo.context.shareMap.opacity' | translate) !== ''\">\n            {{ 'igo.context.shareMap.opacity' | translate }}\n          </li>\n          <li *ngIf=\"('igo.context.shareMap.filterOgc' | translate) !== ''\">\n            {{ 'igo.context.shareMap.filterOgc' | translate }}\n          </li>\n          <li *ngIf=\"('igo.context.shareMap.filterTime' | translate) !== ''\">\n            {{ 'igo.context.shareMap.filterTime' | translate }}\n          </li>\n        </ul>\n      </div>\n      <igo-custom-html\n        class=\"shareCustomPadding\"\n        *ngIf=\"('igo.context.shareMap.htmlClarifications' | translate) !== ''\"\n        class=\"mat-typography\"\n        [html]=\"'igo.context.shareMap.htmlClarifications' | translate\"\n      >\n      </igo-custom-html>\n    </section>\n  </div>\n</div>\n","import { NgIf } from '@angular/common';\nimport { Component, Input } from '@angular/core';\nimport { MatTabsModule } from '@angular/material/tabs';\n\nimport { ConfigService } from '@igo2/core/config';\nimport { IgoLanguageModule } from '@igo2/core/language';\nimport type { IgoMap } from '@igo2/geo';\n\nimport { ShareMapApiComponent } from './share-map-api.component';\nimport { ShareMapUrlComponent } from './share-map-url.component';\n\n@Component({\n  selector: 'igo-share-map',\n  templateUrl: './share-map.component.html',\n  styleUrls: ['./share-map.component.scss'],\n  standalone: true,\n  imports: [\n    NgIf,\n    MatTabsModule,\n    ShareMapApiComponent,\n    ShareMapUrlComponent,\n    IgoLanguageModule\n  ]\n})\nexport class ShareMapComponent {\n  @Input() map: IgoMap;\n\n  public hasApi = false;\n\n  constructor(private config: ConfigService) {\n    this.hasApi = this.config.getConfig('context.url') ? true : false;\n  }\n}\n","<mat-tab-group *ngIf=\"hasApi\">\n  <mat-tab [label]=\"'igo.context.shareMap.shareWithApi' | translate\">\n    <igo-share-map-api [map]=\"map\"></igo-share-map-api>\n  </mat-tab>\n  <mat-tab [label]=\"'igo.context.shareMap.shareWithUrl' | translate\">\n    <igo-share-map-url [map]=\"map\"></igo-share-map-url>\n  </mat-tab>\n</mat-tab-group>\n\n<igo-share-map-url *ngIf=\"!hasApi\" [map]=\"map\"></igo-share-map-url>\n"],"mappings":"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","names":["_c0","_c1","_c2","_c3","MatDrawerContainer_Conditional_0_Template","rf","ctx","_r1","ɵɵgetCurrentView","ɵɵelementStart","ɵɵlistener","ɵɵrestoreView","ctx_r1","ɵɵnextContext","ɵɵresetView","ɵɵelementEnd","ɵɵclassProp","MatDrawerContainer_Conditional_3_Template","ɵɵprojection","_c4","_c5","MatSidenavContainer_Conditional_0_Template","MatSidenavContainer_Conditional_3_Template","_c6","matDrawerAnimations","trigger","state","style","transition","animate","MAT_DRAWER_DEFAULT_AUTOSIZE","InjectionToken","MAT_DRAWER_DEFAULT_AUTOSIZE_FACTORY","MAT_DRAWER_CONTAINER","MatDrawerContent","CdkScrollable","_changeDetectorRef","_container","elementRef","scrollDispatcher","ngZone","__ngFactoryType__","ɵɵdirectiveInject","ChangeDetectorRef","forwardRef","MatDrawerContainer","ElementRef","ScrollDispatcher","NgZone","ɵɵdefineComponent","rf","ctx","ɵɵstyleProp","ɵɵProvidersFeature","ɵɵInheritDefinitionFeature","ɵɵStandaloneFeature","_c0","ɵɵprojectionDef","ɵɵprojection","MatDrawer","value","coerceBooleanProperty","_elementRef","_focusTrapFactory","_focusMonitor","_platform","_ngZone","_interactivityChecker","_doc","Subject","EventEmitter","filter","o","map","e","mapTo","inject","Injector","takeUntil","opened","fromEvent","event","hasModifierKey","fromState","toState","element","options","callback","selector","elementToFocus","afterNextRender","focusOrigin","activeEl","openedVia","isOpen","result","restoreFocus","resolve","take","open","newPosition","parent","FocusTrapFactory","FocusMonitor","Platform","InteractivityChecker","DOCUMENT","ɵɵviewQuery","_c1","_t","ɵɵqueryRefresh","ɵɵloadQuery","ɵɵsyntheticHostListener","$event","ɵɵsyntheticHostProperty","ɵɵattribute","ɵɵclassProp","ɵɵelementStart","ɵɵelementEnd","matDrawerAnimations","_dir","_element","viewportRuler","defaultAutosize","_animationMode","QueryList","startWith","drawer","item","debounceTime","left","right","width","AfterRenderPhase","merge","isAdd","classList","className","Directionality","ViewportRuler","ANIMATION_MODULE_TYPE","dirIndex","ɵɵcontentQuery","_c3","_c2","ɵɵtemplate","MatDrawerContainer_Conditional_0_Template","MatDrawerContainer_Conditional_3_Template","ɵɵconditional","ɵɵadvance","MatSidenavContent","changeDetectorRef","container","MatSidenavContainer","MatSidenav","coerceNumberProperty","ɵMatSidenav_BaseFactory","ɵɵgetInheritedFactory","ɵMatSidenavContainer_BaseFactory","_c5","_c4","MatSidenavContainer_Conditional_0_Template","MatSidenavContainer_Conditional_3_Template","_c6","MatSidenavModule","ɵɵdefineNgModule","ɵɵdefineInjector","MatCommonModule","CdkScrollableModule","_c0","_c3","TileCoordinator","lastRowMax","numColumns","tiles","tile","gapStartIndex","TilePosition","tileCols","gapEndIndex","i","start","row","col","MAT_GRID_LIST","InjectionToken","MatGridTile","_element","_gridList","value","coerceNumberProperty","property","__ngFactoryType__","ɵɵdirectiveInject","ElementRef","ɵɵdefineComponent","rf","ctx","ɵɵattribute","ɵɵStandaloneFeature","_c0","ɵɵprojectionDef","ɵɵelementStart","ɵɵprojection","ɵɵelementEnd","cssCalcAllowedValue","TileStyler","gutterSize","tracker","cols","direction","normalizeUnits","sizePercent","gutterFraction","baseSize","offset","calc","span","tile","rowIndex","colIndex","percentWidthPerTile","gutterWidthFractionPerTile","percentWidth","gutterWidth","baseTileWidth","side","tileHeight","FixedTileStyler","fixedRowHeight","list","RatioTileStyler","value","percentHeightPerTile","ratioParts","FitTileStyler","gutterHeightPerTile","baseTileHeight","exp","MAT_FIT_MODE","MatGridList","_element","_dir","coerceNumberProperty","newValue","rowHeight","TileCoordinator","tiles","index","pos","style","__ngFactoryType__","ɵɵdirectiveInject","ElementRef","Directionality","ɵɵdefineComponent","rf","ctx","dirIndex","ɵɵcontentQuery","MatGridTile","_t","ɵɵqueryRefresh","ɵɵloadQuery","ɵɵattribute","ɵɵProvidersFeature","MAT_GRID_LIST","ɵɵStandaloneFeature","_c0","ɵɵprojectionDef","ɵɵelementStart","ɵɵprojection","ɵɵelementEnd","_c3","MatGridListModule","ɵɵdefineNgModule","ɵɵdefineInjector","MatLineModule","MatCommonModule","TypePermission","ContextService","http","authService","languageService","config","messageService","storageService","exportService","route","context$","BehaviorSubject","undefined","contexts$","ours","defaultContextId$","editedContext$","importedContext","toolsChanged$","Subject","mapViewFromRoute","options","baseUrl","tools","toolbar","defaultContextUri","get","_defaultContextUri","uri","constructor","Object","assign","basePath","contextListFile","getConfig","url","readParamsFromRoute","hasAuthService","logged$","subscribe","logged","pipe","skip","first","handleContextsChange","loadContexts","permissions","hidden","authenticated","join","getById","id","getDetails","catchError","res","handleError","getDefault","tap","context","next","getContextByUri","getProfilByUser","of","setDefault","post","defaultContextId","set","hideContext","showContext","delete","imported","contexts","keys","value","forEach","key","filter","c","create","map","contextCreated","permission","TypePermission","write","read","unshift","clone","properties","contextCloned","update","patch","addToolAssociation","contextId","toolId","association","deleteToolAssociation","getPermissions","addPermissionAssociation","profil","type","typePermission","deletePermissionAssociation","permissionId","getLocalContexts","getPath","getLocalContext","mergeMap","base","urlBase","resBase","resMerge","ObjectUtils","mergeDeep","layers","concat","reverse","l","index","self","findIndex","l2","message","messages","t","t2","name","err","err2","request","loadDefaultContext","loadFct","direct","_context","addContextToList","setContext","loadContext","contextKey","queryParams","debounceTime","params","contextParam","handleContextMessage","currentContext","view","keepCurrentView","loadEditedContext","setEditedContext","getContextFromMap","igoMap","empty","ol","getView","proj","getProjection","getCode","center","olPoint","getCenter","transform","uuid","title","scope","getCoordinates","zoom","getZoom","projection","maxZoomOnExtent","viewController","layerController","treeLayers","baseLayer","layer","saveableOptions","Boolean","tool","String","global","getContextFromLayers","extraFeatures","baseLayers","sourceOptions","visible","isLayerGroup","push","getSource","olVectorSource","getExtraFeatures","opacity","catalogLayer","zIndex","source","layerOptions","writer","GeoJSON","olFeatures","Cluster","getFeatures","flatMap","cluster","cleanedOlFeatures","cleanFeatures","features","writeFeatures","dataProjection","featureProjection","JSON","parse","setTools","setToolbar","removeAllAreNotError","contextToLoad","find","getContextLayers","centerKey","centerParams","split","Number","projectionKey","projectionParam","zoomKey","zoomParam","file","replace","error","permissionError","obj","titleContext","translate","instant","toDisplay","keepCurrentContext","editedContext","findContext","newContext","editedFound","contextSimplifie","public","found","ɵɵinject","HttpClient","AuthService","LanguageService","ConfigService","MessageService","StorageService","ExportService","RouteService","factory","ɵfac","providedIn","ExportError","Error","ExportNothingToExportError","ExportError","constructor","Object","setPrototypeOf","prototype","ContextExportService","export","res","exportAsync","doExport","observer","nothingToExport","error","ExportNothingToExportError","contextJSON","JSON","stringify","downloadContent","uri","complete","Observable","map","undefined","factory","ɵfac","providedIn","handleFileExportError","error","messageService","ExportNothingToExportError","handleNothingToExportError","handleFileExportSuccess","success","ImportError","Error","ImportInvalidFileError","constructor","Object","setPrototypeOf","prototype","ImportUnreadableFileError","ImportNothingToImportError","ImportSizeError","handleFileImportSuccess","file","context","messageService","contextService","Object","keys","length","handleNothingToImportError","contextTitle","computeLayerTitleFromFile","addContextToContextList","success","undefined","value","handleFileImportError","error","sizeMb","handleInvalidFileImportError","handleSizeFileImportError","handleUnreadbleFileImportError","message","name","mimeType","type","size","title","imported","contexts$","ours","unshift","next","importedContext","loadContext","uri","getFileExtension","split","pop","toLowerCase","substr","lastIndexOf","addImportedFeaturesToMap","extraFeatures","map","sourceOptions","queryable","olFeatures","collectFeaturesFromExtraFeatures","source","FeatureDataSource","ol","addFeatures","randomStyle","editable","featureKeys","getKeys","includes","featureRandomStyleFunction","featureRandomStyle","layer","VectorLayer","isIgoInternalLayer","igoStyle","style","visible","opacity","layerController","add","addImportedFeaturesStyledToMap","styleListService","styleService","distance","getStyleList","styleByAttribute","feature","resolution","createStyleByAttribute","clusterParam","baseStyle","createStyle","createClusterStyle","ClusterDataSource","featureCollection","GeoJSON","readFeatures","dataProjection","featureProjection","ContextImportService","config","allowedMimeTypes","allowedExtensions","clientSideFileSizeMax","constructor","configFileSizeMb","getConfig","Math","pow","import","file","importAsync","getFileImporter","extension","getFileExtension","mimeType","type","indexOf","importFile","doImport","observer","size","error","ImportSizeError","importer","undefined","ImportInvalidFileError","call","Observable","reader","FileReader","onload","event","context","parseContextFromFile","target","result","next","ImportUnreadableFileError","complete","onerror","readAsText","data","JSON","parse","ɵɵinject","ConfigService","factory","ɵfac","providedIn","ɵɵelementStart","ɵɵlistener","ɵɵrestoreView","_r1","fileInput_r2","ɵɵreference","ɵɵresetView","click","ɵɵtext","ɵɵelementEnd","ɵɵelement","value","$event","ctx_r2","ɵɵnextContext","importFiles","target","files","ɵɵadvance","ɵɵproperty","ɵɵpipeBind1","loading$","ɵɵtextInterpolate1","ɵɵstyleProp","ɵɵtextInterpolate","ɵɵpipeBind2","ɵɵpureFunction1","_c0","fileSizeMb","layer_r6","title","_r4","e_r5","selectAll","ɵɵtemplate","ContextImportExportComponent_form_9_mat_option_18_Template","handleExportFormSubmit","form","userControlledLayerList","valid","ContextImportExportComponent","contextImportService","contextExportService","messageService","formBuilder","config","contextService","layers","inputProj","BehaviorSubject","forceNaming","layerList","res","clientSideFileSizeMax","activeImportExport","map","constructor","buildForm","ngOnInit","configFileSizeMb","getConfig","Math","pow","layerController","all","treeLayers","next","file","import","pipe","take","subscribe","context","onFileImportSuccess","error","onFileImportError","contextOptions","getContextFromLayers","name","imported","export","onFileExportError","complete","onFileExportSuccess","group","Validators","required","handleFileImportSuccess","handleFileImportError","handleFileExportError","handleFileExportSuccess","e","_selected","controls","setValue","onImportExportChange","event","ɵɵdirectiveInject","ContextImportService","ContextExportService","MessageService","UntypedFormBuilder","ConfigService","ContextService","selectors","inputs","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","rf","ctx","ContextImportExportComponent_div_8_Template","ContextImportExportComponent_form_9_Template","MatButtonToggleModule","MatButtonToggleGroup","MatButtonToggle","NgIf","FormsModule","ɵNgNoValidate","DefaultValueAccessor","NgControlStatus","NgControlStatusGroup","NgForm","MatButtonModule","MatButton","SpinnerComponent","ReactiveFormsModule","FormGroupDirective","FormControlName","MatFormFieldModule","MatFormField","MatLabel","MatInputModule","MatInput","MatSelectModule","MatSelect","MatOption","MatOptionModule","MatDividerModule","MatDivider","NgFor","AsyncPipe","IgoLanguageModule","TranslatePipe","styles","BookmarkDialogComponent","dialogRef","title","constructor","ɵɵdirectiveInject","MatDialogRef","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵtwoWayListener","$event","i0","ɵɵtwoWayBindingSet","ɵɵlistener","close","ɵɵadvance","ɵɵtextInterpolate1","ɵɵpipeBind1","ɵɵproperty","ɵɵtwoWayProperty","MatDialogTitle","MatDialogContent","MatFormFieldModule","MatFormField","MatInputModule","MatInput","FormsModule","DefaultValueAccessor","NgControlStatus","RequiredValidator","MaxLengthValidator","NgModel","MatDialogActions","MatButtonModule","MatButton","IgoLanguageModule","TranslatePipe","encapsulation","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate","ctx_r1","context","icon","scope","ɵɵelement","ɵɵproperty","iconImage","ɵɵsanitizeUrl","ɵɵlistener","ɵɵrestoreView","_r1","ɵɵnextContext","ɵɵresetView","favoriteClick","ɵɵtemplate","ContextItemComponent_button_1_mat_icon_2_Template","ContextItemComponent_button_1_img_3_Template","auth","authenticated","ɵɵpipeBind1","default","_r3","_r5","save","emit","color","_r6","managePermissions","_r7","clone","_r8","edit","_r9","hide","_r10","show","_r11","delete","ContextItemComponent_div_5_button_1_Template","ContextItemComponent_div_5_button_4_Template","ContextItemComponent_div_5_button_5_Template","ContextItemComponent_div_5_button_6_Template","ContextItemComponent_div_5_button_7_Template","ContextItemComponent_div_5_button_8_Template","ContextItemComponent_div_5_button_9_Template","_r4","collapsed","selected","permission","typePermission","write","imported","canShare","hidden","actions_r12","ContextItemComponent","storageService","TypePermission","showFavorite","EventEmitter","favorite","manageTools","get","constructor","ɵɵdirectiveInject","AuthService","StorageService","selectors","inputs","outputs","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","rf","ctx","ContextItemComponent_button_1_Template","ContextItemComponent_button_2_Template","ContextItemComponent_div_5_Template","ɵɵpureFunction1","_c0","title","MatListModule","MatListItem","MatListItemAvatar","MatListItemTitle","MatListItemMeta","NgClass","NgIf","MatButtonModule","MatIconButton","StopPropagationDirective","MatTooltipModule","MatTooltip","MatIconModule","MatIcon","CollapseDirective","IgoLanguageModule","TranslatePipe","styles","changeDetection","ContextListControlsEnum","ɵɵelementStart","ɵɵlistener","ɵɵrestoreView","_r4","ctx_r2","ɵɵnextContext","ɵɵresetView","clearFilter","ɵɵtext","ɵɵelementEnd","ɵɵtwoWayListener","$event","_r2","i0","ɵɵtwoWayBindingSet","term","ɵɵtemplate","ContextListComponent_mat_form_field_2_button_6_Template","ɵɵadvance","ɵɵtextInterpolate","ɵɵpipeBind1","ɵɵproperty","ɵɵtwoWayProperty","length","ɵɵelement","color","actionStore","actionbarMode","accountMenu_r5","_r6","stopPropagation","user_r7","$implicit","handleToggleCategory","getPermission","checked","indeterminate","title","_r9","child_r10","ɵɵtextInterpolate1","_r8","ContextListComponent_ng_container_12_ng_template_2_button_6_Template","subAccountMenu_r11","childs","ɵɵelementContainerStart","ContextListComponent_ng_container_12_button_1_Template","ContextListComponent_ng_container_12_ng_template_2_Template","ɵɵtemplateRefExtractor","withSubMenu_r12","context_r16","_r15","edit","emit","delete","clone","save","hideContext","showContext","favorite","manageTools","managePermissions","select","unselect","selectedContext","uri","id","defaultContextId","_r13","groupContexts_r14","collapsed","titleMapping","key","ContextListComponent_ng_template_18_igo_collapsible_0_ng_template_2_Template","value","context_r18","_r17","configService","getConfig","contextConfigs","ContextListComponent_ng_template_18_1_ng_template_0_Template","ContextListComponent_ng_template_18_igo_collapsible_0_Template","ContextListComponent_ng_template_18_1_Template","auth","authenticated","ContextListComponent","cdRef","dialog","languageService","storageService","contextsInitial","ours","contexts$","BehaviorSubject","change$","ReplaySubject","change$$","contexts","_contexts","next","map","_defaultContextId","get","EventEmitter","create","hide","show","showHiddenContexts","filterPermissionsChanged","shared","public","users","permissions","ActionStore","ActionbarMode","Overlay","showHidden","_term","sortedAlpha","_sortedAlpha","undefined","showContextFilter","ContextListControlsEnum","always","thresholdToFilter","isEmpty","constructor","ngOnInit","pipe","debounce","timer","subscribe","filterContextsList","load","translate","instant","icon","tooltip","handler","createContext","sortContextsList","updateContexts","filter","context","filterNormalized","toLowerCase","normalize","replace","includes","publics","ngOnDestroy","unsubscribe","showFilter","never","totalLength","contextsList","JSON","parse","stringify","sort","a","b","str","toggleSort","empty","open","BookmarkDialogComponent","disableClose","afterClosed","take","user","find","p","name","parent","permission","set","c","parentPermission","childrenPermission","hidden","ɵɵdirectiveInject","ChangeDetectorRef","ConfigService","AuthService","MatDialog","LanguageService","StorageService","selectors","inputs","outputs","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","rf","ctx","ContextListComponent_mat_form_field_2_Template","_r1","ContextListComponent_igo_actionbar_8_Template","ContextListComponent_button_9_Template","ContextListComponent_ng_container_12_Template","ContextListComponent_ng_template_18_Template","ContextListComponent_div_21_Template","ɵɵclassProp","ListComponent","NgIf","MatFormFieldModule","MatFormField","MatLabel","MatSuffix","MatInputModule","MatInput","FormsModule","DefaultValueAccessor","NgControlStatus","NgModel","MatButtonModule","MatIconButton","MatIconModule","MatIcon","MatTooltipModule","MatTooltip","ActionbarComponent","MatMenuModule","MatMenu","MatMenuItem","MatMenuTrigger","NgFor","MatCheckboxModule","MatCheckbox","CollapsibleComponent","ContextItemComponent","ListItemDirective","AsyncPipe","KeyValuePipe","IgoLanguageModule","TranslatePipe","styles","changeDetection","ContextListBindingDirective","contextService","mapService","languageService","confirmDialogService","messageService","auth","storageService","cdRef","component","contexts$$","selectedContext$$","defaultContextId$$","previousMessageId","onSelect","context","loadContext","uri","onEdit","loadEditedContext","onSave","map","getMap","contextFromMap","getContextFromMap","msgSuccess","success","undefined","value","title","imported","delete","id","create","subscribe","contextCreated","changes","layers","view","update","onFavorite","setDefault","remove","defaultContextId$","next","messageObj","toastId","detectChanges","onManageTools","onManagePermissions","onDelete","translate","open","instant","confirm","info","onClone","properties","clone","onCreate","opts","empty","loadContexts","permissions","p","checked","indeterminate","push","name","showHidden","showHiddenContexts","set","onShowContext","showContext","onHideContext","hideContext","constructor","ngOnInit","contexts","ours","get","contexts$","handleContextsChange","defaultContextId","storedContextUri","authenticated","context$","pipe","debounceTime","selectedContext","authenticate$","authenticate","getProfilByUser","profils","users","profilsAcc","reduce","acc","cur","concat","childs","user","permission","ngOnDestroy","unsubscribe","ɵɵdirectiveInject","ContextListComponent","ContextService","MapService","LanguageService","ConfirmDialogService","MessageService","AuthService","StorageService","ChangeDetectorRef","selectors","hostBindings","rf","ctx","ɵɵlistener","$event","LayerContextDirective","component","contextService","layerService","configService","styleListService","styleService","route","context$$","queryParams","contextLayers","removeLayersOnContextChange","map","constructor","ngOnInit","context$","pipe","filter","context","undefined","subscribe","handleContextChange","options","visibleOnLayersKey","visibleOffLayersKey","contextKey","first","params","ObjectUtils","isEmpty","ngOnDestroy","unsubscribe","layers","layerController","reset","remove","unavailableLayers","importExportOptions","getConfig","createLayers","uri","handleAddLayers","extraFeatures","forEach","featureCollection","importWithStyle","addImportedFeaturesStyledToMap","addImportedFeaturesToMap","createAsyncIdbLayers","debounceTime","getFlattenOptions","reduce","accumulator","option","isLayerGroupOptions","children","push","layersFiltrered","layer","visible","computeLayerVisibilityFromUrl","layersSorted","sortLayersByZindex","concat","add","currentContext","value","currentLayerid","id","contextParams","visibleOnLayersParams","visibleOffLayersParams","visiblelayers","invisiblelayers","split","indexOf","toString","ɵɵdirectiveInject","MapBrowserComponent","ContextService","LayerService","ConfigService","StyleListService","StyleService","RouteService","selectors","inputs","standalone","MapContextDirective","contextService","mediaService","component","context$$","map","constructor","ngOnInit","context$","pipe","filter","context","undefined","subscribe","handleContextChange","ngOnDestroy","unsubscribe","viewContext","view","keepCurrentView","projection","geolocationController","updateGeolocationOptions","controlsContext","controls","isMobile","scaleLine","scaleLineOption","minWidth","Math","min","ɵɵdirectiveInject","MapBrowserComponent","ContextService","MediaService","selectors","standalone","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","ctx_r0","prefix","ContextFormComponent","formBuilder","messageService","form","btnSubmitText","_btnSubmitText","value","context","_context","buildForm","disabled","_disabled","submitForm","EventEmitter","clone","delete","constructor","ngOnInit","handleFormSubmit","inputs","Object","assign","ObjectUtils","removeNull","uri","replace","emit","copyTextToClipboard","text","Clipboard","copy","success","uriSplit","split","shift","join","group","title","ɵɵdirectiveInject","UntypedFormBuilder","MessageService","selectors","outputs","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","rf","ctx","ɵɵlistener","ɵɵelement","ɵɵtemplate","ContextFormComponent_span_8_Template","ɵɵproperty","ɵɵpipeBind1","valid","FormsModule","ɵNgNoValidate","DefaultValueAccessor","NgControlStatus","NgControlStatusGroup","RequiredValidator","MaxLengthValidator","ReactiveFormsModule","FormGroupDirective","FormControlName","MatFormFieldModule","MatFormField","MatError","MatInputModule","MatInput","NgIf","MatButtonModule","MatButton","MatIconButton","MatTooltipModule","MatTooltip","MatIconModule","MatIcon","IgoLanguageModule","TranslatePipe","styles","ɵɵelementStart","ɵɵlistener","$event","ɵɵrestoreView","_r1","ctx_r1","ɵɵnextContext","ɵɵresetView","submitForm","emit","ɵɵelementEnd","ɵɵproperty","ɵɵpipeBind1","context","ContextEditComponent","cd","_context","value","refresh","EventEmitter","constructor","detectChanges","ɵɵdirectiveInject","ChangeDetectorRef","selectors","inputs","outputs","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","rf","ctx","ɵɵtemplate","ContextEditComponent_igo_context_form_0_Template","NgIf","ContextFormComponent","IgoLanguageModule","TranslatePipe","encapsulation","ContextEditBindingDirective","contextService","messageService","component","editedContext$$","submitSuccessed","EventEmitter","onEdit","context","id","update","subscribe","success","undefined","value","title","setEditedContext","emit","constructor","ngOnInit","editedContext$","handleEditedContextChange","ngOnDestroy","unsubscribe","ɵɵdirectiveInject","ContextEditComponent","ContextService","MessageService","selectors","hostBindings","rf","ctx","ɵɵlistener","$event","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate","ɵɵpipeBind1","ɵɵtextInterpolate1","ɵɵtwoWayListener","$event","ɵɵrestoreView","_r1","ctx_r1","ɵɵnextContext","i0","ɵɵtwoWayBindingSet","context","scope","ɵɵresetView","ɵɵlistener","scopeChanged","emit","ɵɵtemplate","ContextPermissionsComponent_div_0_div_2_mat_radio_button_8_Template","ɵɵtwoWayProperty","ɵɵproperty","authService","isAdmin","ɵɵelement","profil_r4","title","name","_r3","handleFormSubmit","form","value","onProfilSelected","option","ContextPermissionsComponent_div_0_form_3_mat_option_6_Template","formControl","auto_r5","displayFn","profils","valid","_r6","permission_r7","$implicit","removePermission","ContextPermissionsComponent_div_0_igo_list_4_ng_template_1_igo_collapsible_0_ng_template_2_button_8_Template","profilTitle","profil","canWrite","decodeToken","user","sourceId","ContextPermissionsComponent_div_0_igo_list_4_ng_template_1_igo_collapsible_0_ng_template_2_Template","groupPermissions_r8","key","ContextPermissionsComponent_div_0_igo_list_4_ng_template_1_igo_collapsible_0_Template","length","ContextPermissionsComponent_div_0_igo_list_4_ng_template_1_Template","permissions","ContextPermissionsComponent_div_0_div_1_Template","ContextPermissionsComponent_div_0_div_2_Template","ContextPermissionsComponent_div_0_form_3_Template","ContextPermissionsComponent_div_0_igo_list_4_Template","ContextPermissionsComponent","formBuilder","cd","http","config","_context","detectChanges","_permissions","_profils","permission","TypePermission","write","baseUrlProfils","UntypedFormControl","formValueChanges$$","addPermission","EventEmitter","constructor","ngOnInit","buildForm","getConfig","valueChanges","subscribe","get","filter","filterNormalized","toLowerCase","normalize","replace","profilTitleNormalized","includes","undefined","group","typePermission","setValue","ɵɵdirectiveInject","UntypedFormBuilder","ChangeDetectorRef","HttpClient","AuthService","ConfigService","selectors","inputs","outputs","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","rf","ctx","ContextPermissionsComponent_div_0_Template","NgIf","MatRadioModule","MatRadioGroup","MatRadioButton","FormsModule","ɵNgNoValidate","DefaultValueAccessor","NgControlStatus","NgControlStatusGroup","RequiredValidator","NgModel","ReactiveFormsModule","FormControlDirective","FormGroupDirective","FormControlName","MatFormFieldModule","MatFormField","MatError","MatInputModule","MatInput","MatAutocompleteModule","MatAutocomplete","MatOption","MatAutocompleteTrigger","NgFor","MatOptionModule","MatButtonModule","MatButton","MatIconButton","ListComponent","CollapsibleComponent","MatListModule","MatListItem","MatListItemIcon","MatListItemTitle","MatListItemMeta","MatIconModule","MatIcon","StopPropagationDirective","MatTooltipModule","MatTooltip","KeyValuePipe","IgoLanguageModule","TranslatePipe","styles","ContextPermissionsBindingDirective","contextService","languageService","messageService","cd","component","editedContext$$","onAddPermission","permission","profil","error","contextId","context","id","addPermissionAssociation","typePermission","subscribe","profils","p","permissions","push","success","undefined","value","detectChanges","onRemovePermission","deletePermissionAssociation","index","findIndex","splice","onScopeChanged","scope","update","constructor","ngOnInit","editedContext$","handleEditedContextChange","ngOnDestroy","unsubscribe","next","getPermissions","permissionsArray","read","filter","toString","write","ɵɵdirectiveInject","ContextPermissionsComponent","ContextService","LanguageService","MessageService","ChangeDetectorRef","selectors","hostBindings","rf","ctx","ɵɵlistener","$event","ShareMapService","contextService","route","language","constructor","queryParams","subscribe","params","getUrlWithApi","formValues","location","origin","pathname","uri","createContextShared","map","context","getContextFromMap","scope","title","create","updateContextShared","id","update","getUrlWithoutApi","publicShareOption","options","visibleOnLayersKey","visibleOffLayersKey","viewController","getZoom","llc","layerlistControls","querystring","visibleKey","invisibleKey","layers","layerController","all","filter","layer","isLayerItem","visibleLayers","lay","visible","isIgoInternalLayer","invisibleLayers","length","layersUrl","layersToLoop","contextLayersID","contextLayers","context$","value","contextLayer","source","push","addedLayersQueryParamsWms","makeLayersByService","addedLayersQueryParamsWmts","addedLayersQueryParamsArcgisRest","addedLayersQueryParamsImageArcgisRest","addedLayersQueryParamsTileArcgisRest","substr","zoomKey","centerKey","contextKey","zoom","arrayCenter","getCenter","long","toFixed","replace","lat","center","url","i","endsWith","slice","typeService","addedLayersByService","l","dataSource","type","indexOf","linkUrl","encodeURIComponent","addedLayer","layerVersion","toLowerCase","datasourceOptions","LAYERS","VERSION","addedLayerPosition","zIndex","version","operator","find","definedUrl","forEach","service","addedLayersQueryParams","linkUrlKey","layersKey","wmsUrlKey","wmsLayersKey","wmtsUrlKey","wmtsLayersKey","arcgisUrlKey","arcgisLayersKey","iarcgisUrlKey","iarcgisLayersKey","tarcgisUrlKey","tarcgisLayersKey","linkUrlQueryParams","layersQueryParams","join","ɵɵinject","ContextService","RouteService","factory","ɵfac","providedIn","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","ctx_r0","userId","ɵɵproperty","form","valid","ɵɵpipeBind1","ɵɵlistener","ɵɵrestoreView","_r2","ɵɵnextContext","ɵɵresetView","updateContextShared","value","ɵɵelement","_r3","textArea_r4","ɵɵreference","copyTextToClipboard","url","ShareMapApiComponent","languageService","messageService","auth","shareMapService","formBuilder","map","idContextShared","constructor","ngOnInit","authenticate$","subscribe","decodeToken","user","id","toString","buildForm","createUrl","values","inputs","Object","assign","uri","getUrlWithApi","createContextShared","rep","success","undefined","title","err","error","translate","instant","showError","textArea","Clipboard","copy","uuid","group","ɵɵdirectiveInject","LanguageService","MessageService","AuthService","ShareMapService","UntypedFormBuilder","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","rf","ctx","ɵɵtemplate","ShareMapApiComponent_span_10_Template","ShareMapApiComponent_button_18_Template","ShareMapApiComponent_button_19_Template","ShareMapApiComponent_div_20_Template","FormsModule","ɵNgNoValidate","DefaultValueAccessor","NgControlStatus","NgControlStatusGroup","RequiredValidator","ReactiveFormsModule","FormGroupDirective","FormControlName","MatFormFieldModule","MatFormField","MatError","MatInputModule","MatInput","NgIf","MatButtonModule","MatButton","MatIconButton","MatTooltipModule","MatTooltip","MatIconModule","MatIcon","IgoLanguageModule","TranslatePipe","styles","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","ɵɵpipeBind1","ɵɵtemplate","ShareMapUrlComponent_div_14_h4_1_Template","ShareMapUrlComponent_div_14_li_4_Template","ShareMapUrlComponent_div_14_li_6_Template","ShareMapUrlComponent_div_14_li_8_Template","ShareMapUrlComponent_div_14_li_10_Template","ShareMapUrlComponent_div_14_li_12_Template","ShareMapUrlComponent_div_14_h4_14_Template","ShareMapUrlComponent_div_14_li_17_Template","ShareMapUrlComponent_div_14_li_19_Template","ShareMapUrlComponent_div_14_li_21_Template","ShareMapUrlComponent_div_14_li_23_Template","ɵɵproperty","ɵɵelement","ShareMapUrlComponent","messageService","shareMapService","cdRef","mapState$$","map","url","publicShareOption","layerlistControls","querystring","constructor","ngOnInit","resetUrl","combineLatest","viewController","state$","status$","subscribe","detectChanges","ngAfterViewInit","ngOnDestroy","unsubscribe","getUrlWithoutApi","copyTextToClipboard","textArea","Clipboard","copy","success","ɵɵdirectiveInject","MessageService","ShareMapService","ChangeDetectorRef","selectors","inputs","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","rf","ctx","ɵɵlistener","ɵɵrestoreView","_r1","textArea_r2","ɵɵreference","ɵɵresetView","ShareMapUrlComponent_div_14_Template","ShareMapUrlComponent_igo_custom_html_16_Template","MatFormFieldModule","MatFormField","MatInputModule","MatInput","MatButtonModule","MatButton","MatIconModule","MatIcon","NgIf","CustomHtmlComponent","IgoLanguageModule","TranslatePipe","styles","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ɵɵadvance","ɵɵproperty","ɵɵpipeBind1","ctx_r0","map","ShareMapComponent","config","hasApi","constructor","getConfig","ɵɵdirectiveInject","ConfigService","selectors","inputs","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","rf","ctx","ɵɵtemplate","ShareMapComponent_mat_tab_group_0_Template","ShareMapComponent_igo_share_map_url_1_Template","NgIf","MatTabsModule","MatTab","MatTabGroup","ShareMapApiComponent","ShareMapUrlComponent","IgoLanguageModule","TranslatePipe"],"x_google_ignoreList":[0,1]}