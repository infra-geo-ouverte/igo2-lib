import{e as Ze,f as Qe,g as Ye,h as Hl,i as Ul,j as Zl,k as Ql,l as tn,m as on,n as Yl,o as Jl,r as Kl}from"./chunk-XYGSGAO3.js";import{$ as il,$a as ai,A as je,Aa as ee,Ab as Al,B as Sr,Ba as oo,Bb as Fl,C as vr,Ca as io,Cb as Bl,Da as hl,Db as kl,Ea as ro,Eb as jl,F as Hs,Fa as yl,Fb as pi,G as zn,Ga as Ue,Gb as Hn,H as at,Ha as ii,Hb as Yr,I as _e,Ia as Pr,Ib as $l,J as Js,Ja as Sl,Jb as Vl,K as ft,Ka as Ae,Kb as Gl,L as Ei,La as bo,Lb as Ot,M as Ks,Ma as ri,Mb as Jr,N as Xs,Na as vl,Nb as Kr,O as el,Ob as zl,P as Yo,Pb as Xr,Q as Tt,Qb as Nl,R as Mr,Ra as wl,Rb as ql,S as Jo,Sa as no,T as Ir,Ta as Rr,Tb as en,U as Or,Ua as xl,Ub as Wl,V as Er,Va as ni,W as Lr,Wa as Tl,X as tl,Xa as It,Y as Ko,Ya as Dr,Z as Xo,Za as Br,_ as ol,_a as kr,ab as si,bb as li,ca as rl,cb as jr,d as Ne,da as nl,db as Ml,e as Gs,ea as Mt,eb as ao,f as zs,fb as $r,g as dr,gb as Il,h as Ns,hb as ci,i as qs,ia as ei,ja as Ar,k as Gn,ka as Ce,l as nt,lb as Vr,m as fr,ma as Z,mb as so,na as Fe,nb as Gr,o as Uo,oa as eo,ob as zr,p as gr,pa as to,pb as Nn,q as hr,qa as J,qb as Nr,r as Ws,ra as X,rb as qr,s as Kt,sa as ul,sb as Ol,t as ke,tb as qn,u as Se,ub as Wr,v as yr,va as dl,vb as El,w as ve,wa as fl,wb as Ll,x as Le,xa as Co,xb as Wn,ya as oi,yb as Hr,za as gl,zb as Ur}from"./chunk-4UN2RPJE.js";import{n as _o,o as Ho,p as he,s as Ie,t as Be}from"./chunk-LEXDMZQM.js";import{b as mi,c as z}from"./chunk-F2YX6ECX.js";import{A as br,C as wr,Ga as Pe,Ha as _l,Ia as Cl,Ja as bl,Qa as Zr,Ra as Pl,Sa as Qr,a as Wt,e as Ht,ea as Zs,f as Ut,fa as Qs,g as Zt,ha as Zo,i as Qt,j as jp,ja as de,ka as Ys,la as Qo,ma as al,n as Us,na as sl,oa as ll,pa as cl,q as _r,qa as Fr,ta as ti,u as $e,ua as pl,va as ml,x as Xt,y as Cr}from"./chunk-XOFOAZN4.js";import{$d as wt,$f as Rs,Ab as $,Ag as Vs,B as zi,C as $n,Cc as xs,Cg as xr,Db as M,Dc as ie,Dg as Tr,E as fs,Ea as Wi,Ef as Fs,Fb as C,Fg as Rl,G as Vn,Gc as Ts,Ge as qo,Gg as Dl,Ha as Nt,He as Te,Hg as te,I as gs,Ib as Cs,Ie as Me,Ig as oe,Je as rr,Jf as Yt,Kb as ko,Ke as nr,Kf as Jt,La as Ss,Lb as jo,M as dt,Mb as $o,Mc as bt,Nb as Ee,Nf as Ps,O as ze,Ob as x,Of as ur,Pb as ye,Qb as W,Ra as c,Rb as Vo,Sa as f,Tb as Hi,Td as Ji,Te as Ms,Ub as Ui,Vb as Zi,Ve as xt,Wb as Qi,Wd as Ki,Xb as T,Xe as ar,Ya as vs,Yb as ae,Ye as sr,Z as Bo,Zb as bs,Zd as qt,aa as vo,ac as g,ae as He,ba as Ni,bc as h,bf as Is,cc as Yi,cf as lr,dc as ge,df as Os,ea as K,eb as F,ee as Xi,eg as Ds,f as zt,fa as hs,fe as er,ff as cr,g as P,gf as Es,h as ds,hb as _s,hg as Bs,ib as l,ie as tr,ig as ne,ja as B,je as or,kg as ce,le as ir,lf as Ls,lg as me,m as G,mc as le,mf as pr,mg as re,n as q,na as w,nf as Wo,oa as ys,of as mr,pa as qi,q as So,re as Go,ub as m,v as ot,vb as u,vc as ws,vf as As,vg as ks,w as De,wa as L,wb as v,wc as Ct,wg as js,xa as A,xb as it,xc as Y,yb as rt,ye as zo,yg as $s,ze as No}from"./chunk-J6VW2V73.js";import{a as tt,b as Oi,d as us,g as kp,i as We}from"./chunk-P3CCBVUA.js";var $p=()=>["ConfigService","LanguageService"],Xl=(()=>{class o{layerService;catalogService;storageService;mapService;catalog;map=new J({controls:{attribution:{collapsed:!0}}});view={center:[-73,47.2],zoom:7};catalogStore=new $e([]);catalogItemStore=new $e([]);constructor(e,t,r,n){this.layerService=e,this.catalogService=t,this.storageService=r,this.mapService=n}ngOnInit(){let e=[{title:"OSM",sourceOptions:{type:"osm"},baseLayer:!0,visible:!0}];this.layerService.createLayers(e).subscribe(t=>this.map.layerController.add(...t)),this.loadCatalogs(),this.mapService.setMap(this.map),this.catalogStore.stateView.firstBy$(t=>t.state.selected===!0).subscribe(t=>{if(t&&t.entity){let r=t.entity;this.catalog=r}})}onCatalogSelectChange(e){this.loadCatalogItems(e.catalog)}loadCatalogs(){this.catalogService.loadCatalogs().subscribe(e=>{this.catalogStore.clear(),this.catalogStore.load(e.concat(this.storageService.get("addedCatalogs")||[]))})}loadCatalogItems(e){this.catalogService.loadCatalogItems(e).subscribe(t=>{this.catalogItemStore.clear(),this.catalogItemStore.load(t)})}static \u0275fac=function(t){return new(t||o)(f(Z),f(Ot),f(he),f(Mt))};static \u0275cmp=w({type:o,selectors:[["app-catalog"]],standalone:!0,features:[T],decls:9,vars:9,consts:[["title","Catalog","subtitle","Geo",3,"dependencies"],["codeFolder","geo/catalog"],[3,"map","view"],[1,"map-actions","--vertical","--bottom","--right"],["color","primary",3,"map"],["title","Catalog Library"],[3,"catalogSelectChange","store"],["title","Catalog Browser"],[3,"catalog","store","map"]],template:function(t,r){t&1&&(m(0,"app-doc-viewer",0)(1,"app-example-viewer",1)(2,"igo-map-browser",2)(3,"div",3),v(4,"igo-zoom-button",4),u()(),m(5,"igo-panel",5)(6,"igo-catalog-library",6),M("catalogSelectChange",function(a){return r.onCatalogSelectChange(a)}),u()(),m(7,"igo-panel",7),v(8,"igo-catalog-browser",8),u()()()),t&2&&(l("dependencies",ae(8,$p)),c(2),l("map",r.map)("view",r.view),c(2),l("map",r.map),c(2),l("store",r.catalogStore),c(2),l("catalog",r.catalog)("store",r.catalogItemStore)("map",r.map))},dependencies:[te,oe,X,ee,Pe,Kr,Jr],styles:[`igo-map-browser[_ngcontent-%COMP%]{width:100%;height:300px}
/*# sourceMappingURL=catalog.component-VVQFOBI5.css.map */`]})}return o})();var Vp=()=>["LanguageService"],ec=(()=>{class o{layerService;mapService;authService;map=new J({controls:{attribution:{collapsed:!0}}});view={center:[-73,47.2],zoom:9,geolocate:!1};stopsStore=new Ir([]);stopsFeatureStore=new Or([],{map:this.map});stepsFeatureStore=new Lr([],{map:this.map});routesFeatureStore=new Er([],{map:this.map});zoomOnActiveRoute$=new zt;authenticated$;constructor(e,t,r){this.layerService=e,this.mapService=t,this.authService=r,this.authenticated$=this.authService.authenticate$,this.mapService.setMap(this.map);let n=[{title:"Quebec Base Map",baseLayer:!0,visible:!0,sourceOptions:{type:"xyz",url:"/carto/tms/1.0.0/carte_gouv_qc_public@EPSG_3857/{z}/{x}/{-y}.png",crossOrigin:"anonymous"}}];this.layerService.createLayers(n).subscribe(a=>this.map.layerController.add(...a))}static \u0275fac=function(t){return new(t||o)(f(Z),f(Mt),f(Be))};static \u0275cmp=w({type:o,selectors:[["app-directions"]],standalone:!0,features:[Qi([Nl(ql()),en([Wr()])]),T],decls:15,vars:15,consts:[["title","Directions","subtitle","Geo",3,"dependencies"],["codeFolder","geo/directions"],["cols","2","rowHeight","600px","gutterSize","16px"],[3,"map","view"],[1,"map-actions","--vertical","--top","--right"],[1,"spinner-spacer"],["color","primary",1,"mat-elevation-z2",3,"showIfNoRotation","map"],[1,"map-actions","--vertical","--bottom","--right"],["color","primary",1,"mat-elevation-z2",3,"map"],["color","primary",3,"map"],[1,"flex","align-start","h-100","w-100","overflow-y-auto"],[1,"w-100",3,"stopsStore","stopsFeatureStore","stepsFeatureStore","routesFeatureStore","zoomOnActiveRoute$","authenticated$"]],template:function(t,r){t&1&&(m(0,"app-doc-viewer",0)(1,"app-example-viewer",1)(2,"mat-grid-list",2)(3,"mat-grid-tile")(4,"igo-map-browser",3)(5,"div",4),v(6,"div",5)(7,"igo-rotation-button",6),u(),m(8,"div",7),v(9,"igo-home-extent-button",8)(10,"igo-geolocate-button",8)(11,"igo-zoom-button",9),u()()(),m(12,"mat-grid-tile")(13,"div",10),v(14,"igo-directions",11),u()()()()()),t&2&&(l("dependencies",ae(14,Vp)),c(4),l("map",r.map)("view",r.view),c(3),l("showIfNoRotation",!0)("map",r.map),c(2),l("map",r.map),c(),l("map",r.map),c(),l("map",r.map),c(3),l("stopsStore",r.stopsStore)("stopsFeatureStore",r.stopsFeatureStore)("stepsFeatureStore",r.stepsFeatureStore)("routesFeatureStore",r.routesFeatureStore)("zoomOnActiveRoute$",r.zoomOnActiveRoute$)("authenticated$",r.authenticated$))},dependencies:[te,oe,Ye,Qe,Ze,oo,io,X,ro,ee,Pr]})}return o})();var Gp=()=>["LanguageService"],tc=(()=>{class o{layerService;mapService;map=new J({controls:{attribution:{collapsed:!0},scaleLine:!0}});view={center:[-73,47.2],zoom:6,projection:"EPSG:3857"};stores=[];constructor(e,t){this.layerService=e,this.mapService=t,this.mapService.setMap(this.map);let r=[{title:"OSM",sourceOptions:{type:"osm"},baseLayer:!0,visible:!0}];this.layerService.createLayers(r).subscribe(n=>this.map.layerController.add(...n))}static \u0275fac=function(t){return new(t||o)(f(Z),f(Mt))};static \u0275cmp=w({type:o,selectors:[["app-draw"]],standalone:!0,features:[T],decls:6,vars:7,consts:[["title","Draw","subtitle","Geo",3,"dependencies"],["codeFolder","geo/draw"],[3,"map","view"],[1,"map-actions","--vertical","--bottom","--right"],["color","primary",3,"map"],[3,"stores","map"]],template:function(t,r){t&1&&(m(0,"app-doc-viewer",0)(1,"app-example-viewer",1)(2,"igo-map-browser",2)(3,"div",3),v(4,"igo-zoom-button",4),u()(),v(5,"igo-draw",5),u()()),t&2&&(l("dependencies",ae(6,Gp)),c(2),l("map",r.map)("view",r.view),c(2),l("map",r.map),c(),l("stores",r.stores)("map",r.map))},dependencies:[X,ee,Dr,te,oe],styles:[`[_nghost-%COMP%]   igo-map-browser[_ngcontent-%COMP%]{width:100%;height:300px}
/*# sourceMappingURL=draw.component-7ZJMRPZC.css.map */`]})}return o})();var oc=(()=>{class o{dataSourceService;layerService;map=new J({controls:{attribution:{collapsed:!0}}});view={center:[-73,47.2],zoom:6};tableTemplate={selection:!0,selectMany:!0,sort:!0,columns:[{name:"properties.id",title:"ID"},{name:"properties.name",title:"Name"},{name:"properties.description",title:"Description"}]};store=new Tt([],{map:this.map});constructor(e,t){this.dataSourceService=e,this.layerService=t}ngOnInit(){let e=new Js({});this.store.addStrategy(e);let t=new Mr({map:this.map,motion:_e.Default});this.store.addStrategy(t),this.store.load([{meta:{id:1},type:"Feature",geometry:{type:"Point",coordinates:[-72,47.8]},projection:"EPSG:4326",properties:{id:1,name:"Name 1",description:"Description 1"}},{meta:{id:4},type:"Feature",geometry:{type:"Point",coordinates:[-71,46.8]},projection:"EPSG:4326",properties:{id:4,name:"Name 4",description:"Description 4"}},{meta:{id:5},type:"Feature",geometry:{type:"Point",coordinates:[-73,45.8]},projection:"EPSG:4326",properties:{id:5,name:"Name 5",description:"Description 5"}},{meta:{id:2},type:"Feature",geometry:{type:"LineString",coordinates:[[-72,47.8],[-73.5,47.4],[-72.4,48.6]]},projection:"EPSG:4326",properties:{id:2,name:"Name 2",description:"Description 2"}},{meta:{id:3},type:"Feature",geometry:{type:"Polygon",coordinates:[[[-71,46.8],[-73,47],[-71.2,46.6]]]},projection:"EPSG:4326",properties:{id:3,name:"Name 3",description:"Description 3"}}]),this.layerService.createAsyncLayer({title:"OSM",baseLayer:!0,visible:!0,sourceOptions:{type:"osm"}}).subscribe(r=>{this.map.layerController.add(r)}),this.layerService.createAsyncLayer({title:"Vector Layer",sourceOptions:{type:"vector"},animation:{duration:2e3},igoStyle:{mapboxStyle:{url:"assets/mapboxStyleExample-feature.json",source:"source_nameX"}}}).subscribe(r=>{this.map.layerController.add(r),this.store.bindLayer(r),e.activate(),t.activate()})}ngOnDestroy(){this.store.destroy()}static \u0275fac=function(t){return new(t||o)(f(Ce),f(Z))};static \u0275cmp=w({type:o,selectors:[["app-feature"]],standalone:!0,features:[T],decls:6,vars:5,consts:[["title","Feature","subtitle","Geo"],["codeFolder","geo/feature"],[3,"map","view"],[1,"map-actions","--vertical","--bottom","--right"],["color","primary",3,"map"],[3,"store","template"]],template:function(t,r){t&1&&(m(0,"app-doc-viewer",0)(1,"app-example-viewer",1)(2,"igo-map-browser",2)(3,"div",3),v(4,"igo-zoom-button",4),u()(),v(5,"igo-entity-table",5),u()()),t&2&&(c(2),l("map",r.map)("view",r.view),c(2),l("map",r.map),c(),l("store",r.store)("template",r.tableTemplate))},dependencies:[te,oe,X,ee,Qo],styles:[`igo-map-browser[_ngcontent-%COMP%]{width:100%;height:300px}igo-panel[_ngcontent-%COMP%]{width:100%;padding-top:10px}
/*# sourceMappingURL=feature.component-MCUUQXIH.css.map */`]})}return o})();function Np(o,i){if(o&1){let e=$();m(0,"igo-form",7),g(1,"async"),M("submitForm",function(r){L(e);let n=C();return A(n.onSubmit(r))}),v(2,"igo-form-group",8),m(3,"div",9)(4,"button",10),M("click",function(){L(e);let r=C();return A(r.fillForm())}),x(5," Fill Form "),u(),m(6,"button",10),M("click",function(){L(e);let r=C();return A(r.clearForm())}),x(7," Clear Form "),u(),m(8,"button",11),x(9," Submit "),u()()()}if(o&2){let e=i.ngIf,t=C();l("form",e)("formData",h(1,4,t.data$)),c(2),l("group",e.groups[0]),c(6),l("disabled",t.submitDisabled)}}var ic=(()=>{class o{formService;dataSourceService;layerService;map=new J({controls:{attribution:{collapsed:!0},scaleLine:!0}});view={center:[-73,47.2],zoom:15};form$=new P(void 0);data$=new P(void 0);submitDisabled=!0;valueChanges$$;constructor(e,t,r){this.formService=e,this.dataSourceService=t,this.layerService=r}ngOnInit(){this.dataSourceService.createAsyncDataSource({type:"osm"}).subscribe(n=>{this.map.layerController.add(this.layerService.createLayer({title:"OSM",source:n,baseLayer:!0,visible:!0}))});let t=[{name:"geometry",title:"Geometry",options:{validator:xt.required},type:"geometry",inputs:{map:this.map,geometryTypeField:!0,geometryType:"Polygon",drawGuideField:!0,drawGuide:50,drawGuidePlaceholder:"Draw Guide",drawStyle:new Le({stroke:new ve({color:[255,0,0,1],width:2}),fill:new Se({color:[255,0,0,.2]}),image:new ke({radius:8,stroke:new ve({color:[255,0,0,1]}),fill:new Se({color:[255,0,0,.2]})})})}},{name:"name",title:"Name",options:{validator:xt.required}}].map(n=>this.formService.field(n)),r=this.formService.form([],[this.formService.group({name:"info"},t)]);this.valueChanges$$=r.control.valueChanges.subscribe(()=>{this.submitDisabled=!r.control.valid}),this.form$.next(r)}ngOnDestroy(){this.valueChanges$$.unsubscribe()}fillForm(){this.data$.next({name:"Place",geometry:JSON.stringify({type:"Polygon",coordinates:[[[-106,42],[-107,31],[-81,32],[-82,42],[-106,42]]]})})}clearForm(){this.form$.value.control.reset()}onSubmit(e){alert(JSON.stringify(e))}static \u0275fac=function(t){return new(t||o)(f(ti),f(Ce),f(Z))};static \u0275cmp=w({type:o,selectors:[["app-geometry"]],standalone:!0,features:[T],decls:8,vars:6,consts:[["title","Geometry Form","subtitle","Geo"],["codeFolder","geo/geometry"],[1,"container"],[3,"map","view"],[1,"map-actions","--vertical","--bottom","--right"],["color","primary",3,"map"],[3,"form","formData","submitForm",4,"ngIf"],[3,"submitForm","form","formData"],[3,"group"],["formButtons","",1,"actions-container"],["mat-stroked-button","","type","button","color","primary",3,"click"],["mat-flat-button","","type","submit","color","primary",3,"disabled"]],template:function(t,r){t&1&&(m(0,"app-doc-viewer",0)(1,"app-example-viewer",1)(2,"div",2)(3,"igo-map-browser",3)(4,"div",4),v(5,"igo-zoom-button",5),u()(),F(6,Np,10,6,"igo-form",6),g(7,"async"),u()()()),t&2&&(c(3),l("map",r.map)("view",r.view),c(2),l("map",r.map),c(),l("ngIf",h(7,4,r.form$)))},dependencies:[te,oe,X,ee,Y,Fr,ml,He,qt,ie],styles:[`[_nghost-%COMP%]   pre[_ngcontent-%COMP%], [_nghost-%COMP%]   code[_ngcontent-%COMP%]{font-family:monospace,monospace}[_nghost-%COMP%]   pre[_ngcontent-%COMP%]{overflow:auto}[_nghost-%COMP%]   pre[_ngcontent-%COMP%] > code[_ngcontent-%COMP%]{display:block;padding:1rem;word-wrap:normal}[_nghost-%COMP%]   igo-map-browser[_ngcontent-%COMP%]{flex:1;height:500px}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]{display:flex;gap:16px}
/*# sourceMappingURL=geometry.component-TMHMW7RQ.css.map */`]})}return o})();var qp=()=>["LanguageService"],rc=(()=>{class o{dataSourceService;layerService;mediaService;pointerCoordDelay=0;pointerHoverFeatureDelay=0;map=new J({controls:{attribution:{collapsed:!0},scaleLine:!0}});view={center:[-73,47.2],zoom:8,projection:"EPSG:3857"};get media(){return this.mediaService.getMedia()}get isTouchScreen(){return this.mediaService.isTouchScreen()}constructor(e,t,r){this.dataSourceService=e,this.layerService=t,this.mediaService=r,this.layerService.createAsyncLayer({title:"Quebec Base Map",baseLayer:!0,visible:!0,sourceOptions:{type:"xyz",url:"https://geoegl.msp.gouv.qc.ca/carto/tms/1.0.0/carte_gouv_qc_public@EPSG_3857/{z}/{x}/{-y}.png"}}).subscribe(a=>this.map.layerController.add(a));let n={type:"wfs",url:"https://geoegl.msp.gouv.qc.ca/apis/wss/all.fcgi",params:{featureTypes:"MSP_CASERNE_PUBLIC",fieldNameGeometry:"geometry",maxFeatures:1e4,version:"2.0.0",outputFormat:void 0,outputFormatDownload:"shp"}};this.dataSourceService.createAsyncDataSource(n).subscribe(a=>{let s={title:"Casernes",visible:!0,source:a,igoStyle:{styleByAttribute:{attribute:"en_caserne",data:["true","false"],stroke:["red","blue"],fill:["#ffffff","#ffffff"],radius:[7,7],width:[2,2]},hoverStyle:{label:{attribute:"Caserne: ${no_caserne}\xA0\nMun: ${nom_ssi}",style:{textAlign:"left",textBaseline:"top",font:"12px Calibri,sans-serif",fill:{color:"#000"},backgroundFill:{color:"rgba(255, 255, 255, 0.5)"},backgroundStroke:{color:"rgba(200, 200, 200, 0.75)",width:2},stroke:{color:"#fff",width:3},overflow:!0,offsetX:20,offsetY:10,padding:[2.5,2.5,2.5,2.5]}},baseStyle:{circle:{stroke:{color:"orange",width:5},radius:15}}}}};this.map.layerController.add(this.layerService.createLayer(s))})}static \u0275fac=function(t){return new(t||o)(f(Ce),f(Z),f(de))};static \u0275cmp=w({type:o,selectors:[["app-hover"]],standalone:!0,features:[T],decls:10,vars:11,consts:[["title","Hover","subtitle","Geo",3,"dependencies"],["codeFolder","geo/hover"],["igoHoverFeature","",3,"map","view","igoHoverFeatureDelay","igoHoverFeatureEnabled"],[1,"map-actions","--vertical","--top","--right"],[1,"spinner-spacer"],["color","primary",1,"mat-elevation-z2",3,"showIfNoRotation","map"],[1,"map-actions","--vertical","--bottom","--right"],["color","primary",1,"mat-elevation-z2",3,"map"],["color","primary",3,"map"]],template:function(t,r){t&1&&(m(0,"app-doc-viewer",0)(1,"app-example-viewer",1)(2,"igo-map-browser",2)(3,"div",3),v(4,"div",4)(5,"igo-rotation-button",5),u(),m(6,"div",6),v(7,"igo-home-extent-button",7)(8,"igo-geolocate-button",7)(9,"igo-zoom-button",8),u()()()()),t&2&&(l("dependencies",ae(10,qp)),c(2),l("map",r.map)("view",r.view)("igoHoverFeatureDelay",r.pointerHoverFeatureDelay)("igoHoverFeatureEnabled",!0),c(3),l("showIfNoRotation",!0)("map",r.map),c(2),l("map",r.map),c(),l("map",r.map),c(),l("map",r.map))},dependencies:[te,oe,zl,oo,io,dl,X,ro,ee],styles:[`igo-map-browser[_ngcontent-%COMP%]{width:100%;height:500px}
/*# sourceMappingURL=hover.component-VMWQOVUT.css.map */`]})}return o})();var Wp=()=>["LanguageService"],nc=(()=>{class o{layerService;map=new J({controls:{attribution:{collapsed:!0}}});view={center:[-73,47.2],zoom:9};store=new Ur([]);constructor(e){this.layerService=e,this.layerService.createAsyncLayer({title:"OSM",baseLayer:!0,visible:!0,sourceOptions:{type:"osm"}}).subscribe(t=>this.map.layerController.add(t))}static \u0275fac=function(t){return new(t||o)(f(Z))};static \u0275cmp=w({type:o,selectors:[["app-import-export"]],standalone:!0,features:[T],decls:10,vars:7,consts:[["title","Import / Export","subtitle","Geo",3,"dependencies"],["codeFolder","geo/import-export"],["cols","2","rowHeight","500px","gutterSize","16px"],[3,"map","view"],[1,"map-actions","--vertical","--bottom","--right"],["color","primary",3,"map"],[1,"flex","align-start","h-100","w-100"],[1,"w-100",3,"store","map"]],template:function(t,r){t&1&&(m(0,"app-doc-viewer",0)(1,"app-example-viewer",1)(2,"mat-grid-list",2)(3,"mat-grid-tile")(4,"igo-map-browser",3)(5,"div",4),v(6,"igo-zoom-button",5),u()()(),m(7,"mat-grid-tile")(8,"div",6),v(9,"igo-import-export",7),u()()()()()),t&2&&(l("dependencies",ae(6,Wp)),c(4),l("map",r.map)("view",r.view),c(2),l("map",r.map),c(3),l("store",r.store)("map",r.map))},dependencies:[te,oe,Ye,Qe,Ze,X,ee,Vr]})}return o})();var Hp=()=>["LanguageService"];function Up(o,i){if(o&1&&v(0,"igo-metadata-button",10)(1,"igo-download-button",10)(2,"igo-ogc-filter-button",11)(3,"igo-time-filter-button",11)(4,"igo-track-feature-button",12),o&2){let e=i.layer;l("layer",e),c(),l("layer",e),c(),l("header",!0)("layer",e),c(),l("header",!0)("layer",e),c(),l("layer",e)("trackFeature",!0)}}var ac=(()=>{class o{layerService;map=new J({controls:{attribution:{collapsed:!0}}});view={center:[-73,47.2],maxLayerZoomExtent:[-11e6,45e5,-45e5,1e7],zoom:7};get layerViewerOptions(){return{legend:{showForVisibleLayers:!1},queryBadge:!0}}constructor(e){this.layerService=e;let t=[{title:"OSM",baseLayer:!0,visible:!0,sourceOptions:{type:"osm"}},{title:"WFS (Custom EPSG)",visible:!0,sourceOptions:{type:"wfs",url:"https://geoegl.msp.gouv.qc.ca/apis/wss/complet.fcgi",params:{featureTypes:"vg_observation_v_autre_wmst",fieldNameGeometry:"geometry",maxFeatures:1e4,version:"2.0.0",outputFormat:"geojson",srsName:"EPSG:32198",outputFormatDownload:"shp"},ogcFilters:{enabled:!0,editable:!1,filters:{operator:"PropertyIsEqualTo",propertyName:"code_municipalite",expression:"12072"}},formatOptions:{dataProjection:"EPSG:32198"}}},{title:"Parcs routiers",sourceOptions:{type:"wms",url:"https://ws.mapserver.transports.gouv.qc.ca/swtq",params:{LAYERS:"parc_routier",VERSION:"1.3.0"}}},{title:"R\xE9seau routier",visible:!1,sourceOptions:{type:"wms",url:"https://ws.mapserver.transports.gouv.qc.ca/swtq",params:{LAYERS:"bgr_v_sous_route_res_sup_act",VERSION:"1.3.0"}}},{title:"Lieux habit\xE9s",visible:!1,sourceOptions:{type:"wms",url:"https://ws.mapserver.transports.gouv.qc.ca/swtq",params:{LAYERS:"lieuhabite",VERSION:"1.3.0"}}},{title:"Direction du vent",visible:!1,legendOptions:{stylesAvailable:[{name:"WDIR6-LINEAR",title:"WDIR6-LINEAR"},{name:"WDIR6",title:"WDIR6"},{name:"WDIR3-LINEAR",title:"WDIR3-LINEAR"},{name:"WDIR3",title:"WDIR3"}]},sourceOptions:{type:"wms",url:"https://geo.weather.gc.ca/geomet?lang=fr",params:{LAYERS:"HRDPS.CONTINENTAL_WD",VERSION:"1.3.0"}}},{title:"District \xE9cologique",visible:!1,sourceOptions:{type:"wms",url:"https://geoegl.msp.gouv.qc.ca/apis/ws/mffpecofor.fcgi",params:{LAYERS:"sh_dis_eco",VERSION:"1.3.0"}}},{title:"Avertissements routiers",visible:!1,sourceOptions:{type:"wms",url:"https://ws.mapserver.transports.gouv.qc.ca/swtq",params:{LAYERS:"evenements",VERSION:"1.3.0"}}},{title:"Emb\xE2cles",sourceOptions:{type:"wms",url:"https://geoegl.msp.gouv.qc.ca/apis/wss/complet.fcgi",refreshIntervalSec:15,params:{LAYERS:"vg_observation_v_inondation_embacle_wmst",VERSION:"1.3.0"}},metadata:{url:"https://www.donneesquebec.ca/recherche/fr/dataset/historique-publique-d-embacles-repertories-au-msp",extern:!0}},{id:"mandatory_to_retrieve_layerData_in_IDB",title:"A\xE9roport pr\xE9load\xE9 et charg\xE9 dans l'Indexed-db",visible:!1,idbInfo:{storeToIdb:!0},sourceOptions:{preload:{bypassResolution:!0,bypassVisible:!0},type:"vector",url:"https://ws.mapserver.transports.gouv.qc.ca/swtq?service=wfs&version=2.0.0&request=getfeature&typename=aeroport&srsname=EPSG:4326&outputformat=geojson"}}];this.layerService.createLayers(t).subscribe(r=>this.map.layerController.add(...r))}static \u0275fac=function(t){return new(t||o)(f(Z))};static \u0275cmp=w({type:o,selectors:[["app-layer"]],standalone:!0,features:[T],decls:13,vars:7,consts:[["customBottomActions",""],["title","Layer","subtitle","Geo",3,"dependencies"],["codeFolder","geo/layer"],["cols","2","rowHeight","600px","gutterSize","16px"],[3,"map","view"],[1,"map-actions","--vertical","--bottom","--right"],["color","primary",3,"map"],[1,"flex","align-start","h-100","w-100"],["title","Layers",1,"w-100"],[3,"map","options"],[3,"layer"],[3,"header","layer"],[3,"layer","trackFeature"]],template:function(t,r){t&1&&(m(0,"app-doc-viewer",1)(1,"app-example-viewer",2)(2,"mat-grid-list",3)(3,"mat-grid-tile")(4,"igo-map-browser",4)(5,"div",5),v(6,"igo-zoom-button",6),u()()(),m(7,"mat-grid-tile")(8,"div",7)(9,"igo-panel",8)(10,"igo-layer-viewer",9),F(11,Up,5,8,"ng-template",null,0,ge),u()()()()()()()),t&2&&(l("dependencies",ae(6,Hp)),c(4),l("map",r.map)("view",r.view),c(2),l("map",r.map),c(4),l("map",r.map)("options",r.layerViewerOptions))},dependencies:[te,oe,Ye,Qe,Ze,X,ee,eo,Pe,to,so,vl,ao,no]})}return o})();var Zp=()=>["LanguageService"],sc=(()=>{class o{dataSourceService;layerService;map=new J({controls:{attribution:{collapsed:!0}}});view={center:[-73,47.2],zoom:7};constructor(e,t){this.dataSourceService=e,this.layerService=t,this.dataSourceService.createAsyncDataSource({type:"osm"}).subscribe(n=>{this.map.layerController.add(this.layerService.createLayer({title:"OSM",visible:!0,baseLayer:!0,source:n}))}),this.layerService.createAsyncLayer({title:"Legend with display: false",legendOptions:{display:!1},sourceOptions:{type:"wms",url:"https://geoegl.msp.gouv.qc.ca/apis/ws/mffpecofor.fcgi",params:{LAYERS:"sh_dis_eco",VERSION:"1.3.0"}}}).subscribe(n=>this.map.layerController.add(n)),this.layerService.createAsyncLayer({title:"Legend with html param",legendOptions:{html:'<h2 style="background-color: blue;">HTML legend</h2>'},sourceOptions:{type:"wms",url:"https://geoegl.msp.gouv.qc.ca/apis/ws/mffpecofor.fcgi",params:{LAYERS:"sh_sreg_eco",VERSION:"1.3.0"}}}).subscribe(n=>this.map.layerController.add(n)),this.layerService.createAsyncLayer({title:"Legend with url param",legendOptions:{url:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBxASEhUQEBISFRUVFRAQFRUQFRUVFRAPFRUWFhUVFRUYHSggGBolGxUVITEiJSkrLi4uFx8zODMsNygtLisBCgoKDg0OGhAQGy0dHyUtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSstLS0tLS0tLS0tKy0tLS0tLS0tLf/AABEIAKgBLAMBIgACEQEDEQH/xAAbAAABBQEBAAAAAAAAAAAAAAACAQMEBQYAB//EADwQAAIBAwEGAwYFAgUEAwAAAAECAAMEESEFEjFBUWETInEGFDKBkaFCscHR8FJyFSNTYoIzQ5LxFqLh/8QAGQEAAwEBAQAAAAAAAAAAAAAAAAECAwQF/8QAJREBAQACAgEFAAEFAAAAAAAAAAECERIhAwQTMUFRYRQiI3Gh/9oADAMBAAIRAxEAPwB0QhAEMTFQhCEEQhACEIQRFEYEIQgiEIAU6IIsAWLEnQAp0KmBqSdFBY+g5D1OBGD4nxYBHQafQzLPzTDLVbYeHLObh2LARwwyD+4PQiFNJZZuMrLLqlnRJ0ZFiTp0A6KEOM4OITuF8q4L8ydVp9sc2+0atrlw/hVGLBw2MnO66gsMdBpjHeYZeoxmXGOjH0+Vx5UsSLEm7ndEM6IYAhgmEYJgCGCYRgmIBMEwjAJgAmAYRgkwAGjTxxjGniBipGo5UjcAthCEAGEIwMQhAEIGAHFEERcxgYiiBmEDADzFgAxcwA50HMXMANh5H/tA+rrJhXy8JDXJDAcSpx6jB/SE18u6uuhGnqeU4vPP8m7+PR9N34tT9V20FZD4ifMcmHSSra5V1DKdD9Qeh7yLd1d4HAOJm7W9q27NlWKE55cOozzleLLTPz4b7bPM7MrbXbC1AFRQGb4d84OemP17Rk7YYsUREJUn8XxhfjI7gzp5xyXGrjMj3l5uYVfjYeX/AGrzb15D5mRau0N0Bt3e3uAVhoO56ympms1Z6lTtgaaDHAdgBiZZ+Tc1G3i8fe60FsN0AZ1iLUzXpDTRifqpHGVh2ioGMP8AIQtm3G9WUdmbX+04nNw3Y7+Wsb/peRJ0Qz0HkOMQzokQcTBM4xCYBxgGKTBJgCEwTFJgEwBCYBMUmCTABaMvHGMacxGZeNw3jUCWwMIGNAwgYwdBhAxoGEDAHAYQMbBigwBzMIGNAwgYA4DFzGwYWYwPMXMbzCBgD1PjxxylRUuEpv4J0PDXPx9BLNDrI17bMtd2PmVgrNngHwNdZzeeTqur02dm4RquAWK4A111yOxme2tXZicaAcuZGf3/ADl7UrFtRwA68x69jM/eVGffZcBkyxA0bdAGZHjna/Jl0pKdJmuFUN8A3ufyA+UGz3jVABIOWBOez5z05fWSrxs0qV2g1DbrY/pJAx35H6yMoxWDjhq2Ou8Dp/5GdDmBYsy7yF87rnGpx/NZfWd4yrg65JGeJHM6SjpjcthUK+apUI7glifyMnUKhV9zPH4vpjT7yMpteF0tL6qwAK6j0zr6x72YY1HLlQNwNnHMnQfrIyVAujHThx0lt7MhQKqjj5W/46iRjO42zyvG6XGYhMSJmdLjdmITOJgkwBSYJMQmITAOJgkziYJMA4mATOJgEwDiYBM4mATAOYxpzCJjTGIG3MbzFcwMwCzBhAxpQekPdPSPVLcOAwgYzgxd6GjPAwsxkNFDQB7MUNGhnpDCGPVLcOAxQY3unpFzA9nQYoMaBhAxBO2bS3qijvk+g1kXbFVqlY0qWAB56jHn0EnbPfw1ZzngeExu3L2qRu0iVNVtWGclQPyyZz+T+7LTfx9Y7XdfaNvRQh2ydFAXBJY6AADhrjjMlW2jRSqCyVFLb2vlO8uobKjQj9oT2lMUmpHILbp8TGSHU6b2OIzIVwtVt1moFmUEK9IhlI7a9esMJB5Ll9L1dnqLUCk29TJJ05KSfuAT9BK/w/PpodBwGdOGny9NInsrfstSpQq+UMDuqdd0jj+hkg4Fbf5Zzj7Qm5bKq9yWHLq1QUEeqd1UffAxx5LpzPDSU9G/pl2dKTnd0YlgCfly4R72huHqV6dKjhgi4wdBvEfY6SOthUGfFZKYbG8KZLVHA5Y5SsZNdoz3vpate0agXdyuQG3X4gH85P8AZ2p4dfdfmCgP+08P0lNcW3jDK090IMIc6jHAd47sWuxanv8AEFR8wZOuul7beoMEiBmFVyTnrGjmdHbmKTBJiZnYgCExCYpWAYg4mAWiEwC0AItAJiFoBaAKTAJiFoJMA5jGnMJjG2gDTmDmKwMHBhomsFsI4trLJLaP07aepxjjtqmNn2jbWA6TRi1gNbCK4Y0TLJnvch0hrZdpc+COkcShJ4YnyyVVOzjwtO0tVoiOCkJWoXalNnANl2l74U4UIaxPtRe59oq2faXvgTnTAJ0+gkZSKm2M9pK2F8NSQeOnT9pQJbFqbVq9ZRpujGm4O2ect/amoynLZ3dfh00PUzMW9AK2uMH4S3mHbAPOeLbvderJrUO+IHXcRqjqOBekx9QGUg4+RjKW1VGyhK9cAjP/ABM0lihGFqPT64Ua/wD1kza9gXVGViMHOFpv59eBMmZ96O4xjaNBxVNTdw7ndXPEA8TIj3JBPE68wdZtKeyvGTB31ZSSrqGTB5EZOT85namyqu97rk+Lx8TAx4e98Weu7p1zNMcti46VtrSZnFRR5hkH04D6ayStlU1YAknJydSPU/WaB9jigoCbxYnLMys28Txzidsy2KKcsxzyKFQO2WzFzK4M8XXIR9/e0KsWA83TdXQQrOo6VlBXy7+8OfHiJZ7QsS2rboA1UhRnI4a6SHswO9dd4g6jkVOnYiPG7icpp6LTtwVB7RDajpBt78DRvvH/AH1ZvPPYxvilR/dlne7iSPGUwHdYf1U/C9j+TDWwgGzzHGrATkuR1mmPqML8xN8GU+Ki1LDtGv8ADzLujWUyQKAM6Zhhe3PblOmaNlBNjNT7oOkZqW4j9vEuVZr3CC1oJoDbxipZw4Q+VULUBGzb9polsIZsBF7cHJmPdD0ie5zTe4RPcu0qeKJudaJbacaMaW9ne9TH3m3tnRTMUWxMKjWllQIMfvUe3FctnFNsZdLTE40BF7lPhFL7tE92ls9CR3oGL3aOEREoR8W8NaZEdEPdo4REa2kPaFLdQky33pA2yM0mHaTl5bqqmE2yF8ErJgg4xxI4ntnjMc9N0yppgINTUYjyjkWc8PQYlvR2luVGSrndUgZ6k8FH3k7aNrTqqoqaLxWmuSSepxr+vpPPn8uxmLFwrb9Niyg6u5O4D0A+Jzrw9Jq7C/p1BuFjjucHeHHOD3GnLnrpMnteg4ICEBVyCyjSmnMKvXlnnnAwDqxb3wUhcYxhDg5wF1K/fB6lm7StS9lu/bf+5Mo8gU548vrxMpG2NW8fxd8cMbpXQjP1kKx2zcAZVsjjg8DrJr+0tXnTXPDOsXU+D+Vi1uxH+YFUDnnOR+kp9pbVpou4nDUZ46+n8/SQ7zaNWpjeY45gcBKa+vV1GBk/U6/nz/8AcJjunbqHql+w1NUlTwHEHtrofQiFb3qrh38nJQOHqU5fKV1FN3LvjH9J4N0P84QqVJqzg/g7jgOhmmmdu2pvr1t1cZ1Gc/hP04SGu2WQ7rR2nWVk3AVwowN7OCZn9s13yKemBqMYixm+itaVdtA8DJ9ttANznm4uWXnLSy2lgZzDLx/gmbZ3lbTIMrqN6d7GZWU9rqeJkb3vLgrFMP1VybaxdidJorJmHGUGwwzAEiX7XAAwY/H5ssPhOfjmS0R1Mbq0hK1nIGQY5bXe8NTOvH1Eyc98OkoUYnu8RLgR9amZtM2dxAtvOahJIEBjK5xPFEqUwJBeprJt3UAEzdzdeY6zPLzaOePbcps9e0L/AA4dJW09o1BxWSKe1+oM5OUdXE89liAodYX+KrOF6hj5wcTyXhHGODaYkZipgG3Uw5jinC/U84a3APOVhsl6wDa9GMXKjiuBVWGMGUPgVOTSXRFQcY5kNLTwRIm0LfyH0MEXbDiI1dbSBUiPotMNtawR8OOKZO7nAL/zny5a6jF3l/cU3L587ZHDRKY00HLJ4dh3mr2lvhjVpkFMtvr1A79ZE8ajcDBAD8xzHQZ+k5rdNpNswdsOiDxBlm1HLGuhx24/MSDUuVxvU9NBkdcgZ/naX+1dj7zDGCNEHYAfw/OUd7sKoDoDz4fQSsbiLMg0L9eRZTofLwJ5nEsVvSQMEHn007zPvs6qOXI4wOcdt7e4A3TqOGvDMu4xPKrK8r1GGE0zrK0lE1Ygtr9ZEqUq+8QoYZ5dPST9mbHz56p0HIx6khbtqRs62asByAz5Tkj+cZZ3VZKaGjTxvt9usgXF+f8Ap0RjGBnkO8C2UJlmbLccnv0zJ190966iws3VFwQGxqe31lZcMu8TjGekds7nVmYZz5cc4l5bEciM8MjEufKag3FvkZWQDvLLClX3TumSXtlaVtOlNTZidJodhW53gWjFCgqydZVSGzIzvS8Me29s75KaY5yBd7Wzw+0qQ5PGMuxBnJa6pjFqu1anDlJFLaeBrKRq2kAVsysUZRa0/aDdfBOk0uydso/AzynajkHIh7P2g9MhgSJ1Y7nbmuq9sN0McZWXe1FHEiZq22m1ZNG+kS22O1U5ZjD3h7azvdrKRoZlbi5JYnM1dD2YTmWPzjh2BRGm4PpJ7vdPUnw0NGgx+IYhtbCW7UpFqWy88iGhtULa68ZKS1XtHfcFJyHM6tZNyePUG3NZ9DGXsao+FozVsq/4XEVLW6/1F+kWv4Dmo3A6GMV2uRwUH5yZv3K8d0wm2qy/HSPy1ho0K2vao+ND8pY09rrzBHqIFLbFBtOB7x2rbpUGVIilB9b6mw4iQ7w02U4xwMYr7PbGglXWsXXJ1Eq5CRQ1qLGk3hnO4xGP9szW6lQgklH+IngSM66GW3+IFC6qMgtu4P4uWgme2xc+bygZGpI7Hh9dJGrs9xOb3mm3HfGOXEAc+8JNsgndIKnkCMcOEpBt5kwTjQa4568B9oR21Tc+dRoQo7aZOvpF7d+4rnPqr1LpSQB3PXGRgfpGGZs4ABGn01IP86SppIh1QkajTPLOknWTMjEE59f6c4+uknjpUy2kJqx0Hy5aZlZtO6GoB04a8AeklOzZYKJQ3jK2jNjtLwxRlkb97J8qDA4EnnOe4Pwrr8v3nF6IGCfl1hU95x/lKFX+o8Zqz2KgAmrnXiB0mh9/NWhlk0XTMzFeg40G8x68pK2O1Viafhs2RoADmFn2UokUE4IkqpSKiC9AqcEFSDqDxEnOuV1itVIrLepvHEuLeljUyBQoYOZNNWZZ1rhE4NOqtI9N51SpMuDbloDVI2z44Rlt5jhQT/aM/lJFLZF2w0oVPmMfnNJGWWSDdJvSFd6LiXjez17/AKLfMr+8hXexrofFRf5YP5TWVjew+z+0igmq2f7UAYXHGU+xvZhviqndHTnLC62Va6qr+YDkRmZZZY29LmOWu24ttpBlGCIFVWJ4mZT2c2dVQ5Z/T0mqLGLnvo+Om4DwWAPKMLCDTfbLTmtUPLEaOzRyJj2/6wg8Ogrq+yHPwuZCqbGuR8NQ/OX+8YYc9fyhqBl22Rd/6sae0vV/Eh9QZqKtZxwUn+3EHxcjJRvprFYcrJVEqf8AdoBu6a/Yxmnof8moyH+ipn9ZsPBzqAV9RKu+2dVbiiOv0Mjirki2ntCVIS4XHLe5H5y2uHpumQRqJm721qoMeE7pzUgkj+085SJfvRPlLGm3JshkPTBi3Z8nqX4RtpWtKmlR6jYPiNu4x5RMlV2Z4qnwgxUebI54zgA8M/vNPV2OtxVFWuc0qYyFzoWJzrJVrWp1AapA8FDu00XgzD8Rx3hy0VxYil7NVCm8FJAIAAGdSAePPlIdXZaqPMCOJJweWh/Oenrf1ar+HTUIAN9ieRI8oA689eEZuEWoDSuAjZ47vlA7b2fN8oTy/o4fjzZaCqcjTHCPVr8annqPUHj+8l7Z2HUouSgLodQVGcfIcJR1mA0PPryM11Kjek6zqkNkNnXnKe8phqrdznEstnWdWq2KSlsfTHrNLsj2URH8W4IJ4hAeJ7mFymI1az+yNg75B0A5F8y7q0UoEK64HBWOCra6AGLta7u97IUIg0AQ4wO3IwrfaAqLuVNQ2hBBAJ7f0kdpF3e1TU6NeDSqkKh3W6/hbtkcD2jaq1u281XXBwFVgQegbGD9Yxf7JqU8VKJ38fhPxYGvz/PSS6hS5okjRlBOD8SkcQecc/4VDWvKdUZyS3VskyOwPIymt3K1N09cazTWNMtooLHoNZVx0UyRKNJzyku12RVqHyAn0ms2T7Lu2GqkAdBrNTQtqNEYAGn84CRdLlrIbO9i3YDxHx2XUy+tfY61p6shc/7tf/yWr7RxooP/AIn8sSK+0UY+YVVPZTg/XSLo7s74NOmMU6aL6LGffQ3lzg+kYN1RByXYf8WB9eOPtHqN5bVPxjPDJGDJCsudpVkbcYadeokG6vqg83FTx04TV07ZOJdHXln9JL8OnjAVT2wBCSj4YY12chcZzoMSds72NtUqeNVyznXU6D5cJqVorn/poMcMYMSuBzXP7R446K3Y1taOBhRpwkKvbrn4BCNUE+Rs9uYjqk8xH0O04Oen3hmQaVxHQ8pKauOs7HeRd4wlJ6wCSSP/AFBL9MxsRcmAPo/Uzt8dzGgIYWMONbtAas3yhPpIdZzHsaSTV7/eMXNJXGHVWHRgD+cbWqOAEcCdY52FTfbCouhRVZAcE+G3T1z9pSXexqlNadOnh0Vt473kxrkZHMCbMiRquDpJuMPahegtOmFGMsxZyPxdsyjvL2lTfKrvMRrnXHp0mpvLEOMA4lDtL2WqMd5GGnUcfpMbhdtJlNKOl7TVN4gBR2lXdWdC8rA1PIx0O7oGMXbOzqlFt90I5EjUGVlglZ6quadUIuSCqnX7TTDH7ic7GztLBLVXRMKgAJJ1Zmmd2rdMy75JGuF5GOUPfXfd3SygkgucEjlkTrzYl61QOyAqOQPOTwvLsTKadTu2NMipwA4HnGNneEy7yjUHjnOnTEtP/itzVQhmCZ+ZxFs/YitSXcVxgnU45RzHorlNoV9cimA3MlcfvHqQtCQ7O9NyDnChlIP9XD85p7T2ctwAKi75HNjmHfez1vU0A3ca+XT6yuPSeW2HX2cUtvU7iiykg+clGHyOn3m02PbW9BQDUTqSGBLH5cpW3fskRqnm7DQ/aV52Qy6MHHqTC205I2F17UUlG7SBbvwEz9z7Q12/Hx5KMYjVts4D8DH6mFb7IqbxCocciREfR+32rWHmZyf1k239oXPHQyPU2DXOuAOgzGDs9wQCsCae020rDDYj1SiG1plfRgCJkLi2qLjcU9TLjZVZ9CYocy0sjQdf+zSz/tHGLb+Lzor8s/vJi3MJLnJ0jvRy7O0Cw/CAPU/vHDUx3iUzn4sQXccBHpBqqik7w0PUfr1jxRzqpGO/WNEQPFxwMVitomHzHkqHrEnQkI5TrmOi4nTpRDW5jouDOnRmIV2jq3ESdFQJ68YJJnToASkLqZFr7S1wonTobBErMRrG3M6dEAKxkynV0nTowi3Qpt8QBi0FpcAonToEbr2VPO9gQhTUjAnTpROWniGyTp0ZK+uwBgb/AEE6dIqofpEwy4X4hn1nToqccbxQMhRH7a7zyAnToYlXVq0ZVA3ETp0mnB1LVcaxilQXOAIk6HxSSjSAEra+8moiTppZuJnRy3vAeJklWXOQZ06R8KO+IesBlnTo7Q//2Q=="},sourceOptions:{type:"wms",url:"https://geoegl.msp.gouv.qc.ca/apis/ws/mffpecofor.fcgi",params:{LAYERS:"sh_reg_eco",VERSION:"1.3.0"}}}).subscribe(n=>this.map.layerController.add(n)),this.layerService.createAsyncLayer({title:"Commissions scolaires anglophones",sourceOptions:{type:"wms",url:"https://geoegl.msp.gouv.qc.ca/apis/wss/all.fcgi",params:{LAYERS:"WMS_MEQ_CS_ANGLO",VERSION:"1.3.0"}}}).subscribe(n=>this.map.layerController.add(n)),this.layerService.createAsyncLayer({title:"R\xE9seau routier",sourceOptions:{type:"wms",url:"https://ws.mapserver.transports.gouv.qc.ca/swtq",params:{LAYERS:"bgr_v_sous_route_res_sup_act",VERSION:"1.3.0"}}}).subscribe(n=>this.map.layerController.add(n)),this.layerService.createAsyncLayer({title:"Lieux habit\xE9s",sourceOptions:{type:"wms",url:"https://ws.mapserver.transports.gouv.qc.ca/swtq",params:{LAYERS:"lieuhabite",VERSION:"1.3.0"}}}).subscribe(n=>this.map.layerController.add(n)),this.layerService.createAsyncLayer({title:"Avertissements routiers",sourceOptions:{type:"wms",url:"https://ws.mapserver.transports.gouv.qc.ca/swtq",params:{LAYERS:"evenements",VERSION:"1.3.0"}}}).subscribe(n=>this.map.layerController.add(n));let r={type:"wms",url:"https://geoegl.msp.gouv.qc.ca/apis/wss/complet.fcgi",refreshIntervalSec:15,params:{LAYERS:"vg_observation_v_inondation_embacle_wmst",VERSION:"1.3.0"}};this.dataSourceService.createAsyncDataSource(r).subscribe(n=>{let a={title:"Emb\xE2cles",source:n,metadata:{url:"https://www.donneesquebec.ca/recherche/fr/dataset/historique-publique-d-embacles-repertories-au-msp",extern:!0}};this.map.layerController.add(this.layerService.createLayer(a))})}static \u0275fac=function(t){return new(t||o)(f(Ce),f(Z))};static \u0275cmp=w({type:o,selectors:[["app-legend"]],standalone:!0,features:[T],decls:7,vars:10,consts:[["title","Simple Map with a legend list","subtitle","Geo",3,"dependencies"],["codeFolder","geo/legend"],[3,"map","view"],[1,"map-actions","--vertical","--bottom","--right"],["color","primary",3,"map"],["title","Legends"],[3,"layers","excludeBaseLayers","allowShowAllLegends","updateLegendOnResolutionChange","showAllLegendsValue"]],template:function(t,r){t&1&&(m(0,"app-doc-viewer",0)(1,"app-example-viewer",1)(2,"igo-map-browser",2)(3,"div",3),v(4,"igo-zoom-button",4),u()(),m(5,"igo-panel",5),v(6,"igo-layer-legend-list",6),u()()()),t&2&&(l("dependencies",ae(9,Zp)),c(2),l("map",r.map)("view",r.view),c(2),l("map",r.map),c(2),l("layers",r.map.layerController.all)("excludeBaseLayers",!0)("allowShowAllLegends",!0)("updateLegendOnResolutionChange",!1)("showAllLegendsValue",!1))},dependencies:[te,oe,X,ee,Pe,ei],styles:[`igo-map-browser[_ngcontent-%COMP%]{width:100%;height:300px}igo-panel[_ngcontent-%COMP%]{width:100%;padding-top:10px}
/*# sourceMappingURL=legend.component-5IDCZVEP.css.map */`]})}return o})();var Qp=()=>["LanguageService"],lc=(()=>{class o{dataSourceService;layerService;map=new J({controls:{attribution:{collapsed:!0},scaleLine:!0}});view={center:[-73,47.2],zoom:6,projection:"EPSG:3857"};store=new Tt([],{map:this.map});constructor(e,t){this.dataSourceService=e,this.layerService=t,this.dataSourceService.createAsyncDataSource({type:"osm"}).subscribe(r=>{this.map.layerController.add(this.layerService.createLayer({title:"OSM",source:r,baseLayer:!0,visible:!0}))})}static \u0275fac=function(t){return new(t||o)(f(Ce),f(Z))};static \u0275cmp=w({type:o,selectors:[["app-measure"]],standalone:!0,features:[T],decls:6,vars:7,consts:[["title","Measure","subtitle","Geo",3,"dependencies"],["codeFolder","geo/measure"],[3,"map","view"],[1,"map-actions","--vertical","--bottom","--right"],["color","primary",3,"map"],[3,"store","map"]],template:function(t,r){t&1&&(m(0,"app-doc-viewer",0)(1,"app-example-viewer",1)(2,"igo-map-browser",2)(3,"div",3),v(4,"igo-zoom-button",4),u()(),v(5,"igo-measurer",5),u()()),t&2&&(l("dependencies",ae(6,Qp)),c(2),l("map",r.map)("view",r.view),c(2),l("map",r.map),c(),l("store",r.store)("map",r.map))},dependencies:[te,oe,X,ee,Br],styles:[`igo-map-browser[_ngcontent-%COMP%]{width:100%;height:300px}igo-measurer[_ngcontent-%COMP%]     mat-divider{position:inherit!important;left:inherit!important;width:160px!important}
/*# sourceMappingURL=measure.component-QP437CIX.css.map */`]})}return o})();var Yp=()=>["LanguageService"],cc=(()=>{class o{dataSourceService;layerService;map=new J({controls:{attribution:{collapsed:!0}}});view={center:[-73,47.2],zoom:7};constructor(e,t){this.dataSourceService=e,this.layerService=t,this.dataSourceService.createAsyncDataSource({type:"osm"}).subscribe(b=>{this.map.layerController.add(this.layerService.createLayer({title:"OSM",source:b,baseLayer:!0,visible:!0}))});let r={type:"wfs",url:"https://geoegl.msp.gouv.qc.ca/apis/wss/complet.fcgi",params:{featureTypes:"vg_observation_v_autre_wmst",fieldNameGeometry:"geometry",maxFeatures:1e4,version:"2.0.0",outputFormat:void 0,outputFormatDownload:"SHP"},sourceFields:[{name:"code_municipalite",alias:"# de la municipalit\xE9e"},{name:"date_observation",excludeFromOgcFilters:!0},{name:"urgence",values:["imm\xE9diate","inconnue"]}],ogcFilters:{enabled:!0,editable:!0,allowedOperatorsType:je.All,filters:{logical:"Or",filters:[{operator:"PropertyIsEqualTo",propertyName:"code_municipalite",expression:"10043"},{operator:"Intersects",geometryName:"the_geom",wkt_geometry:`MULTIPOLYGON(((
              -8379441.158019895 5844447.897707146,
              -8379441.158019895 5936172.331649357,
              -8134842.66750733 5936172.331649357,
              -8134842.66750733 5844447.897707146,
              -8379441.158019895 5844447.897707146
            ), (
              -8015003 5942074,
              -8015003 5780349,
              -7792364 5780349,
              -7792364 5942074,
              -8015003 5942074
            )))`}]}}};this.dataSourceService.createAsyncDataSource(r).subscribe(b=>{this.map.layerController.add(this.layerService.createLayer({title:"Emb\xE2cles (PropertyIsEqualTo OR Intersects polygon)",source:b,style:new Le({image:new ke({radius:5,fill:new Se({color:"white"}),stroke:new ve({color:"orange",width:1})})})}))});let n={type:"wfs",url:"https://geoegl.msp.gouv.qc.ca/apis/wss/complet.fcgi",params:{featureTypes:"vg_observation_v_autre_wmst",fieldNameGeometry:"geometry",maxFeatures:1e4,version:"2.0.0",outputFormat:void 0,outputFormatDownload:"SHP"},ogcFilters:{enabled:!0,editable:!0,allowedOperatorsType:je.All,filters:{operator:"During",propertyName:"date_observation",begin:"2016-01-21T00:00:00-05:00",end:"2016-01-26T00:00:00-05:00"}},minDate:"2016-01-01T00:00:00-05:00",maxDate:"2016-02-10T00:00:00-05:00",stepDate:"P2D"};this.dataSourceService.createAsyncDataSource(n).subscribe(b=>{this.map.layerController.add(this.layerService.createLayer({title:"Emb\xE2cles (During, Step: P2D)",id:"1",source:b,style:new Le({image:new ke({radius:5,fill:new Se({color:"white"}),stroke:new ve({color:"red",width:1})})})}))});let a={type:"wfs",url:"https://geoegl.msp.gouv.qc.ca/apis/wss/complet.fcgi",params:{featureTypes:"vg_observation_v_autre_wmst",fieldNameGeometry:"geometry",maxFeatures:1e4,version:"2.0.0",outputFormat:void 0,outputFormatDownload:"SHP"},sourceFields:[{name:"date_observation",alias:"Date de l'observation",allowedOperatorsType:je.Time}],ogcFilters:{enabled:!0,editable:!0,allowedOperatorsType:je.All,filters:{operator:"During",propertyName:"date_observation",begin:"2016-01-01T04:00:00-05:00",end:"2016-01-12T16:00:00-05:00"}},minDate:"2016-01-01T00:00:00-05:00",maxDate:"2016-02-14T20:00:00-05:00",stepDate:"PT4H"};this.dataSourceService.createAsyncDataSource(a).subscribe(b=>{this.map.layerController.add(this.layerService.createLayer({title:"Emb\xE2cles (During, Step: PT4H)",id:"2",source:b,style:new Le({image:new ke({radius:5,fill:new Se({color:"white"}),stroke:new ve({color:"blue",width:1})})})}))});let s={type:"wfs",url:"https://geoegl.msp.gouv.qc.ca/apis/wss/complet.fcgi",params:{featureTypes:"vg_observation_v_autre_wmst",fieldNameGeometry:"geometry",maxFeatures:1e4,version:"2.0.0",outputFormat:void 0,outputFormatDownload:"SHP"},sourceFields:[{name:"date_observation",alias:"Date de l'observation",allowedOperatorsType:je.Time}],ogcFilters:{enabled:!0,editable:!0,allowedOperatorsType:je.All,filters:{operator:"During",propertyName:"date_observation",begin:"2016-01-01T00:00:00-05:00",end:"2016-03-31T00:00:00-05:00",displayFormat:"MMMM"}},minDate:"2016-01-01T00:00:00-05:00",maxDate:"2018-12-31T00:00:00-05:00",stepDate:"P1M"};this.dataSourceService.createAsyncDataSource(s).subscribe(b=>{this.map.layerController.add(this.layerService.createLayer({title:"Emb\xE2cles (During, Step: P1M)",id:"3",source:b,style:new Le({image:new ke({radius:5,fill:new Se({color:"white"}),stroke:new ve({color:"yellow",width:1})})})}))});let p={type:"wfs",url:"https://geoegl.msp.gouv.qc.ca/apis/wss/complet.fcgi",params:{featureTypes:"vg_observation_v_autre_wmst",fieldNameGeometry:"geometry",maxFeatures:1e4,version:"2.0.0",outputFormat:void 0,outputFormatDownload:"SHP"},sourceFields:[{name:"date_observation",alias:"Date de l'observation",allowedOperatorsType:je.Time}],ogcFilters:{enabled:!0,editable:!0,allowedOperatorsType:je.All,filters:{operator:"During",propertyName:"date_observation",begin:"2014-01-01T00:00:00-05:00",end:"2019-12-31T00:00:00-05:00",displayFormat:"YYYY"}},minDate:"2014-01-01T00:00:00-05:00",maxDate:"2019-12-31T00:00:00-05:00",stepDate:"P1Y"};this.dataSourceService.createAsyncDataSource(p).subscribe(b=>{this.map.layerController.add(this.layerService.createLayer({title:"Emb\xE2cles (During, Step: P1Y)",id:"4",source:b,style:new Le({image:new ke({radius:5,fill:new Se({color:"white"}),stroke:new ve({color:"green",width:1})})})}))});let d={type:"wfs",url:"https://geoegl.msp.gouv.qc.ca/apis/wss/complet.fcgi",params:{featureTypes:"vg_observation_v_autre_wmst",fieldNameGeometry:"geometry",maxFeatures:1e4,version:"2.0.0",outputFormat:void 0,outputFormatDownload:"SHP"},sourceFields:[{name:"date_observation",alias:"Date de l'observation",allowedOperatorsType:je.Time}],ogcFilters:{enabled:!0,editable:!0,allowedOperatorsType:je.All,filters:{operator:"During",propertyName:"date_observation",begin:"today - 2 days",end:"today"}},minDate:"2016-01-01T00:00:00-05:00",maxDate:"2025-12-31T00:00:00-05:00",stepDate:"P1D"};this.dataSourceService.createAsyncDataSource(d).subscribe(b=>{this.map.layerController.add(this.layerService.createLayer({title:"Emb\xE2cles (During, Interval from Now, Step: P1D)",id:"5",source:b,style:new Le({image:new ke({radius:5,fill:new Se({color:"white"}),stroke:new ve({color:"black",width:1})})})}))});let S={type:"wfs",url:"https://geoegl.msp.gouv.qc.ca/apis/wss/complet.fcgi",params:{featureTypes:"vg_observation_v_autre_wmst",fieldNameGeometry:"geometry",maxFeatures:1e4,version:"2.0.0",outputFormat:void 0,outputFormatDownload:"SHP"},sourceFields:[{name:"date_observation",alias:"Date de l'observation",allowedOperatorsType:je.Time}],ogcFilters:{enabled:!0,editable:!0,allowedOperatorsType:je.All,filters:{operator:"During",propertyName:"date_observation",begin:"2019-01-01 00:00:00",restrictToStep:!0}},minDate:"2016-01-01T00:00:00-05:00",maxDate:"2025-12-31T00:00:00-05:00",stepDate:"P1M"};this.dataSourceService.createAsyncDataSource(S).subscribe(b=>{this.map.layerController.add(this.layerService.createLayer({title:"Emb\xE2cles (During, RestrictToStep, Step: P1M)",id:"6",source:b,style:new Le({image:new ke({radius:5,fill:new Se({color:"black"}),stroke:new ve({color:"red",width:1})})})}))});let _={type:"wms",url:"https://geoegl.msp.gouv.qc.ca/apis/wss/complet.fcgi",optionsFromCapabilities:!1,params:{LAYERS:"vg_observation_v_autre_wmst",VERSION:"1.3.0"},sourceFields:[{name:"date_observation",alias:"Date de l'observation",allowedOperatorsType:je.Time}],ogcFilters:{enabled:!0,editable:!0,filters:{operator:"During",propertyName:"date_observation",begin:"2016-01-01 00:00:00",end:"2020-01-01 00:00:00"},allowedOperatorsType:je.Time}};this.dataSourceService.createAsyncDataSource(_).subscribe(b=>{this.map.layerController.add(this.layerService.createLayer({title:"Inondations (During)",source:b}))});let y={type:"wms",url:"https://ws.mapserver.transports.gouv.qc.ca/swtq",urlWfs:"https://ws.mapserver.transports.gouv.qc.ca/swtq",params:{LAYERS:"radars_photos",VERSION:"1.3.0"},ogcFilters:{enabled:!0,editable:!0,pushButtons:{selectorType:"pushButton",order:2,groups:[{title:"Nom du group1 - push",name:"1 - push",ids:["id1"]}],bundles:[{id:"id1",title:"R\xE9gions",logical:"Or",vertical:!0,selectors:[{title:"Montr\xE9al & Laval",enabled:!1,tooltip:"Here a tooltip explaining ...",filters:{logical:"Or",filters:[{operator:"PropertyIsEqualTo",propertyName:"region",expression:"Montr\xE9al"},{operator:"PropertyIsEqualTo",propertyName:"region",expression:"Laval"}]}},{title:"Outside Montr\xE9al & Laval",enabled:!1,tooltip:"Here a tooltip explaining ...",filters:{logical:"And",filters:[{operator:"PropertyIsNotEqualTo",propertyName:"region",expression:"Montr\xE9al"},{operator:"PropertyIsNotEqualTo",propertyName:"region",expression:"Laval"}]}}]}]},checkboxes:{selectorType:"checkbox",order:1,groups:[{title:"Nom du group1 - checkbox",name:"1 - checkbox",ids:["id1"]}],bundles:[{id:"id1",title:"Type de radar photo",logical:"Or",selectors:[{title:"Radar photo fixe",enabled:!0,tooltip:"Here a tooltip explaining ...",filters:{operator:"PropertyIsEqualTo",propertyName:"typeAppareil",expression:"Radar photo fixe"}},{title:"Radar photo mobile",enabled:!1,tooltip:"Here a tooltip explaining ...",filters:{operator:"PropertyIsEqualTo",propertyName:"typeAppareil",expression:"Radar photo mobile"}},{title:"Radar photo fixe + feu rouge",enabled:!1,color:"0,200,0",tooltip:"Here a tooltip explaining ...",filters:{operator:"PropertyIsEqualTo",propertyName:"typeAppareil",expression:"Radar photo fixe et surveillance au feu rouge"}},{title:"Radar feu rouge",enabled:!1,color:"255,0,0",tooltip:"Here a tooltip explaining ...",filters:{operator:"PropertyIsEqualTo",propertyName:"typeAppareil",expression:"Appareil de surveillance au feu rouge"}}]}]},allowedOperatorsType:je.Basic},paramsWFS:{featureTypes:"radars_photos",fieldNameGeometry:"geometry",maxFeatures:1e4,version:"1.1.0",outputFormat:"geojson",outputFormatDownload:"shp"}};this.dataSourceService.createAsyncDataSource(y).subscribe(b=>{this.map.layerController.add(this.layerService.createLayer({title:"Filterable WMS layers with predefined filters (push buttons)",source:b}))})}static \u0275fac=function(t){return new(t||o)(f(Ce),f(Z))};static \u0275cmp=w({type:o,selectors:[["app-ogc-filter"]],standalone:!0,features:[T],decls:11,vars:7,consts:[["title","Ogc filter","subtitle","Geo",3,"dependencies"],["codeFolder","geo/ogc-filter"],["cols","2","rowHeight","600px","gutterSize","16px"],[3,"map","view"],[1,"map-actions","--vertical","--bottom","--right"],["color","primary",3,"map"],[1,"flex","align-start","h-100","w-100","overflow-y-auto"],["title","Layers"],[3,"map","layers"]],template:function(t,r){t&1&&(m(0,"app-doc-viewer",0)(1,"app-example-viewer",1)(2,"mat-grid-list",2)(3,"mat-grid-tile")(4,"igo-map-browser",3)(5,"div",4),v(6,"igo-zoom-button",5),u()()(),m(7,"mat-grid-tile")(8,"div",6)(9,"igo-panel",7),v(10,"igo-ogc-filterable-list",8),u()()()()()()),t&2&&(l("dependencies",ae(6,Yp)),c(4),l("map",r.map)("view",r.view),c(2),l("map",r.map),c(4),l("map",r.map)("layers",r.map.layerController.all))},dependencies:[te,oe,Ye,Qe,Ze,X,ee,Pe,Rr]})}return o})();var pc=(()=>{class o{dataSourceService;layerService;map=new J({overlay:!0,controls:{attribution:{collapsed:!0}}});view={center:[-73,47.2],zoom:6};constructor(e,t){this.dataSourceService=e,this.layerService=t}ngOnInit(){this.dataSourceService.createAsyncDataSource({type:"osm"}).subscribe(e=>{this.map.layerController.add(this.layerService.createLayer({title:"OSM",source:e,baseLayer:!0,visible:!0}))})}ngAfterViewInit(){let e={type:at,projection:"EPSG:4326",meta:{id:1},properties:{},geometry:{type:"Point",coordinates:[-73,46.6]}},t={type:at,projection:"EPSG:4326",meta:{id:2},properties:{},geometry:{type:"LineString",coordinates:[[-72,47.8],[-73.5,47.4],[-72.4,48.6]]}},r={type:at,projection:"EPSG:4326",meta:{id:3},properties:{},geometry:{type:"Polygon",coordinates:[[[-71,46.8],[-73,47],[-71.2,46.6]]]}};this.map.overlay.setFeatures([e,t,r],_e.None)}static \u0275fac=function(t){return new(t||o)(f(Ce),f(Z))};static \u0275cmp=w({type:o,selectors:[["app-overlay"]],standalone:!0,features:[T],decls:5,vars:3,consts:[["title","Overlay","subtitle","Geo"],["codeFolder","geo/overlay"],[3,"map","view"],[1,"map-actions","--vertical","--bottom","--right"],["color","primary",3,"map"]],template:function(t,r){t&1&&(m(0,"app-doc-viewer",0)(1,"app-example-viewer",1)(2,"igo-map-browser",2)(3,"div",3),v(4,"igo-zoom-button",4),u()()()()),t&2&&(c(2),l("map",r.map)("view",r.view),c(2),l("map",r.map))},dependencies:[te,oe,X,ee],styles:[`igo-map-browser[_ngcontent-%COMP%]{width:100%;height:300px}
/*# sourceMappingURL=overlay.component-Z4DMIKHN.css.map */`]})}return o})();var Jp=()=>["LanguageService"],mc=(()=>{class o{layerService;map=new J({controls:{attribution:{collapsed:!1}}});view={center:[-73,47.2],zoom:9};constructor(e){this.layerService=e,this.layerService.createAsyncLayer({title:"Quebec Base Map",baseLayer:!0,visible:!0,sourceOptions:{type:"xyz",url:"https://geoegl.msp.gouv.qc.ca/carto/tms/1.0.0/carte_gouv_qc_public@EPSG_3857/{z}/{x}/{-y}.png",crossOrigin:"anonymous"}}).subscribe(t=>this.map.layerController.add(t)),this.layerService.createAsyncLayer({title:"Emb\xE2cles",sourceOptions:{type:"wms",url:"https://geoegl.msp.gouv.qc.ca/apis/wss/complet.fcgi",params:{LAYERS:"vg_observation_v_inondation_embacle_wmst",VERSION:"1.3.0"},crossOrigin:"anonymous"}}).subscribe(t=>this.map.layerController.add(t)),this.layerService.createAsyncLayer({title:"Radar m\xE9t\xE9o",sourceOptions:{type:"wms",url:"https://geo.meteo.gc.ca/geomet?lang=fr",params:{LAYERS:"RADAR_1KM_RRAI",VERSION:"1.3.0"},crossOrigin:"anonymous"}}).subscribe(t=>this.map.layerController.add(t)),this.layerService.createAsyncLayer({title:"A\xE9roports",sourceOptions:{type:"wms",url:"https://ws.mapserver.transports.gouv.qc.ca/swtq?",params:{layers:"aeroport",version:"1.3.0"},crossOrigin:"anonymous"}}).subscribe(t=>this.map.layerController.add(t))}static \u0275fac=function(t){return new(t||o)(f(Z))};static \u0275cmp=w({type:o,selectors:[["app-print"]],standalone:!0,features:[T],decls:14,vars:10,consts:[["title","Print","subtitle","Geo",3,"dependencies"],["codeFolder","geo/print"],["cols","2","rowHeight","800px","gutterSize","16px"],[3,"map","view"],[1,"map-actions","--vertical","--top","--right"],[1,"spinner-spacer"],["color","primary",1,"mat-elevation-z2",3,"showIfNoRotation","map"],[1,"map-actions","--vertical","--bottom","--right"],["color","primary",1,"mat-elevation-z2",3,"map"],["color","primary",3,"map"],[3,"map"]],template:function(t,r){t&1&&(m(0,"app-doc-viewer",0)(1,"app-example-viewer",1)(2,"mat-grid-list",2)(3,"mat-grid-tile")(4,"igo-map-browser",3)(5,"div",4),v(6,"div",5)(7,"igo-rotation-button",6),u(),m(8,"div",7),v(9,"igo-home-extent-button",8)(10,"igo-geolocate-button",8)(11,"igo-zoom-button",9),u()()(),m(12,"mat-grid-tile"),v(13,"igo-print",10),u()()()()),t&2&&(l("dependencies",ae(9,Jp)),c(4),l("map",r.map)("view",r.view),c(3),l("showIfNoRotation",!0)("map",r.map),c(2),l("map",r.map),c(),l("map",r.map),c(),l("map",r.map),c(2),l("map",r.map))},dependencies:[te,oe,Ye,Qe,Ze,oo,io,X,ro,ee,Xr],styles:[`[_nghost-%COMP%]   igo-print[_ngcontent-%COMP%]{overflow-y:auto;width:100%;height:100%}
/*# sourceMappingURL=print.component-TS3XZ3PH.css.map */`]})}return o})();var Xp=()=>[];function em(o,i){if(o&1&&(m(0,"div")(1,"h1"),x(2," Query Title : "),m(3,"span",8),x(4),u()(),v(5,"igo-feature-details",9),u()),o&2){let e=i.$implicit,t=C(2);c(4),ye(t.getTitle(e)),c(),l("feature",e)}}function tm(o,i){if(o&1&&(it(0),F(1,em,6,2,"div",7),rt()),o&2){let e=i.ngIf;c(),l("ngForOf",e)}}var uc=(()=>{class o{dataSourceService;layerService;features$=new P([]);map=new J({controls:{attribution:{collapsed:!0}}});view={center:[-73,47.2],zoom:6};constructor(e,t){this.dataSourceService=e,this.layerService=t,this.dataSourceService.createAsyncDataSource({type:"osm"}).subscribe(r=>{this.map.layerController.add(this.layerService.createLayer({title:"OSM",source:r,baseLayer:!0,visible:!0}))}),this.dataSourceService.createAsyncDataSource({type:"wms",url:"https://ws.mapserver.transports.gouv.qc.ca/swtq",queryable:!0,params:{layers:"bgr_v_sous_route_res_sup_act",version:"1.3.0"}}).subscribe(r=>{this.map.layerController.add(this.layerService.createLayer({title:"WMS",source:r}))}),this.dataSourceService.createAsyncDataSource({type:"wms",url:"https://ws.mapserver.transports.gouv.qc.ca/swtq",queryable:!0,queryFormat:Sr.HTMLGML2,queryHtmlTarget:vr.IFRAME,params:{layers:"aeroport",version:"1.3.0"}}).subscribe(r=>{this.map.layerController.add(this.layerService.createLayer({title:"WMS html with a pre call in GML",source:r}))}),this.layerService.createAsyncLayer({title:"WMS with different query url",sourceOptions:{type:"wms",url:"https://geoegl.msp.gouv.qc.ca/apis/wss/all.fcgi",queryable:!0,queryFormat:Sr.HTMLGML2,queryHtmlTarget:vr.IFRAME,queryUrls:[{url:"https://geoegl.msp.gouv.qc.ca/apis/wss/complet.fcgi?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&BBOX={bbox}&CRS=EPSG%3A3857&WIDTH=900&HEIGHT=632&LAYERS=SDA_REGION_S_20K&STYLES=&FORMAT=image%2Fpng&QUERY_LAYERS=SDA_REGION_S_20K&INFO_FORMAT=text%2Fhtml&I=467&J=493"}],queryLayerFeatures:!1,params:{layers:"SDA_MUNIC_S_20K",version:"1.3.0"}}}).subscribe(r=>this.map.layerController.add(r)),this.dataSourceService.createAsyncDataSource({type:"vector",queryable:!0,sourceFields:[{name:"name",alias:"Alias name"},{name:"description",alias:"Alias description"}]}).subscribe(r=>{this.map.layerController.add(this.layerService.createLayer({title:"Vector layer",source:r})),this.addFeatures(r)}),this.layerService.createAsyncLayer({title:"Vector tile with different query url",sourceOptions:{type:"mvt",url:"https://ahocevar.com/geoserver/gwc/service/tms/1.0.0/ne:ne_10m_admin_0_countries@EPSG:900913@pbf/{z}/{x}/{-y}.pbf",queryable:!0,queryFormat:Sr.HTMLGML2,queryHtmlTarget:vr.IFRAME,queryUrls:[{url:"https://geoegl.msp.gouv.qc.ca/apis/wss/complet.fcgi?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&BBOX={bbox}&CRS=EPSG%3A3857&WIDTH=900&HEIGHT=632&LAYERS=SDA_REGION_S_20K&STYLES=&FORMAT=image%2Fpng&QUERY_LAYERS=SDA_REGION_S_20K&INFO_FORMAT=text%2Fhtml&I=467&J=493"}],queryLayerFeatures:!1},mapboxStyle:{url:"assets/mapboxStyleExample-vectortile.json",source:"ahocevar"}}).subscribe(r=>this.map.layerController.add(r))}addFeatures(e){let t=new Uo({name:"feature1",geometry:new gr([Ne([-72,47.8],"EPSG:4326","EPSG:3857"),Ne([-73.5,47.4],"EPSG:4326","EPSG:3857"),Ne([-72.4,48.6],"EPSG:4326","EPSG:3857")])}),r=new Uo({name:"feature2",geometry:new hr(Ne([-73,46.6],"EPSG:4326","EPSG:3857"))}),n=new Uo({name:"feature3",geometry:new Ws([[Ne([-71,46.8],"EPSG:4326","EPSG:3857"),Ne([-73,47],"EPSG:4326","EPSG:3857"),Ne([-71.2,46.6],"EPSG:4326","EPSG:3857")]])});e.ol.addFeatures([t,r,n])}handleQueryResults(e){let t=e.features;t.length&&t[0]&&(this.features$.next(t),this.map.queryResultsOverlay.setFeatures(t,_e.None))}getTitle(e){return _r(e)}static \u0275fac=function(t){return new(t||o)(f(Ce),f(Z))};static \u0275cmp=w({type:o,selectors:[["app-query"]],standalone:!0,features:[T],decls:8,vars:9,consts:[["title","Query","subtitle","Geo",3,"dependencies"],["codeFolder","geo/query"],["igoQuery","",3,"query","map","view","queryFeatures"],[1,"map-actions","--vertical","--bottom","--right"],["color","primary",3,"map"],["title","Details"],[4,"ngIf"],[4,"ngFor","ngForOf"],[2,"background-color","#e0e0e0"],[3,"feature"]],template:function(t,r){t&1&&(m(0,"app-doc-viewer",0)(1,"app-example-viewer",1)(2,"igo-map-browser",2),M("query",function(a){return r.handleQueryResults(a)}),m(3,"div",3),v(4,"igo-zoom-button",4),u()(),m(5,"igo-panel",5),F(6,tm,2,1,"ng-container",6),g(7,"async"),u()()()),t&2&&(l("dependencies",ae(8,Xp)),c(2),l("map",r.map)("view",r.view)("queryFeatures",!0),c(2),l("map",r.map),c(2),l("ngIf",h(7,6,r.features$)))},dependencies:[te,oe,X,ee,zr,Gr,Pe,Y,Ct,It,ie],styles:[`igo-map-browser[_ngcontent-%COMP%]{width:100%;height:300px}igo-panel[_ngcontent-%COMP%]{width:100%;padding-top:10px}
/*# sourceMappingURL=query.component-QQITMBXM.css.map */`]})}return o})();var Zn=(()=>{class o{overlay;viewContainerRef;elementRef;overlayRef;sub;menuContext;menuPosition=new Wi;constructor(e,t,r){this.overlay=e,this.viewContainerRef=t,this.elementRef=r}onContextMenu(e){let t,r;if(e instanceof MouseEvent?(t=e.x,r=e.y):e instanceof TouchEvent&&(t=e.touches[0].pageX,r=e.touches[0].pageY),!t||!r)return;this.close(),e.preventDefault(),this.menuPosition.emit({x:t,y:r}),this.overlayRef=null;let n=this.overlay.position().flexibleConnectedTo({x:t,y:r}).withPositions([{originX:"end",originY:"bottom",overlayX:"start",overlayY:"top"}]);this.overlayRef=this.overlay.create({positionStrategy:n,scrollStrategy:this.overlay.scrollStrategies.close()}),this.overlayRef.attach(new As(this.menuContext,this.viewContainerRef,{$implicit:void 0})),this.sub=$n(document,"click").pipe(Vn(a=>{let s=a.target;return this.close(),!!this.overlayRef&&!this.overlayRef.overlayElement.contains(s)}),ze(1)).subscribe(()=>this.close()),this.sub=$n(document,"contextmenu").pipe(Vn(a=>{let s=a.target;if(s&&!this.elementRef.nativeElement.contains(s)&&!this.overlayRef.overlayElement.contains(s))return!0;a.preventDefault()}),ze(1)).subscribe(()=>this.close())}close(){this.overlayRef&&(this.overlayRef.dispose(),this.overlayRef=null),this.sub&&this.sub.unsubscribe()}static \u0275fac=function(t){return new(t||o)(f(Fs),f(vs),f(Nt))};static \u0275dir=qi({type:o,selectors:[["","igoContextMenu",""]],hostBindings:function(t,r){t&1&&M("longpress",function(a){return r.onContextMenu(a)})("contextmenu",function(a){return r.onContextMenu(a)})},inputs:{menuContext:[0,"igoContextMenu","menuContext"]},outputs:{menuPosition:"menuPosition"},standalone:!0})}return o})();var Qn=(()=>{class o{touchTimeout;touchDuration=400;onlyIOS=!0;longpress=new Wi;touchstart(e){if(e.touches.length>1){this.touchEnd();return}this.touchTimeout=setTimeout(()=>{this.onlyIOS?Ps.getOSName()==="iOS"&&this.longpress.emit(e):this.longpress.emit(e)},this.touchDuration)}touchend(){this.touchEnd()}touchEnd(){clearTimeout(this.touchTimeout)}static \u0275fac=function(t){return new(t||o)};static \u0275dir=qi({type:o,selectors:[["","igoLongPress",""]],hostBindings:function(t,r){t&1&&M("touchstart",function(a){return r.touchstart(a)})("touchmove",function(){return r.touchend()})("touchcancel",function(){return r.touchend()})("touchend",function(){return r.touchend()})},inputs:{touchDuration:"touchDuration",onlyIOS:"onlyIOS"},outputs:{longpress:"longpress"},standalone:!0})}return o})();var fc=["top","right","bottom","left"],dc=["start","end"],Jn=fc.reduce((o,i)=>o.concat(i,i+"-"+dc[0],i+"-"+dc[1]),[]);var im={left:"right",right:"left",bottom:"top",top:"bottom"},rm={start:"end",end:"start"};function nn(o,i){return typeof o=="function"?o(i):o}function Ai(o){return o.split("-")[0]}function lo(o){return o.split("-")[1]}function gc(o){return o==="x"?"y":"x"}function hc(o){return o==="y"?"height":"width"}var nm=new Set(["top","bottom"]);function Kn(o){return nm.has(Ai(o))?"y":"x"}function yc(o){return gc(Kn(o))}function Sc(o,i,e){e===void 0&&(e=!1);let t=lo(o),r=yc(o),n=hc(r),a=r==="x"?t===(e?"end":"start")?"right":"left":t==="start"?"bottom":"top";return i.reference[n]>i.floating[n]&&(a=Yn(a)),[a,Yn(a)]}function vc(o){return o.replace(/start|end/g,i=>rm[i])}function Yn(o){return o.replace(/left|right|bottom|top/g,i=>im[i])}function am(o){return tt({top:0,right:0,bottom:0,left:0},o)}function _c(o){return typeof o!="number"?am(o):{top:o,right:o,bottom:o,left:o}}function an(o){let{x:i,y:e,width:t,height:r}=o;return{width:t,height:r,top:e,left:i,right:i+t,bottom:e+r,x:i,y:e}}function Cc(o,i){return We(this,null,function*(){var e;i===void 0&&(i={});let{x:t,y:r,platform:n,rects:a,elements:s,strategy:p}=o,{boundary:d="clippingAncestors",rootBoundary:S="viewport",elementContext:_="floating",altBoundary:y=!1,padding:b=0}=nn(i,o),O=_c(b),V=s[y?_==="floating"?"reference":"floating":_],D=an(yield n.getClippingRect({element:(e=yield n.isElement==null?void 0:n.isElement(V))==null||e?V:V.contextElement||(yield n.getDocumentElement==null?void 0:n.getDocumentElement(s.floating)),boundary:d,rootBoundary:S,strategy:p})),U=_==="floating"?{x:t,y:r,width:a.floating.width,height:a.floating.height}:a.reference,H=yield n.getOffsetParent==null?void 0:n.getOffsetParent(s.floating),k=(yield n.isElement==null?void 0:n.isElement(H))?(yield n.getScale==null?void 0:n.getScale(H))||{x:1,y:1}:{x:1,y:1},E=an(n.convertOffsetParentRelativeRectToViewportRelativeRect?yield n.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:U,offsetParent:H,strategy:p}):U);return{top:(D.top-E.top+O.top)/k.y,bottom:(E.bottom-D.bottom+O.bottom)/k.y,left:(D.left-E.left+O.left)/k.x,right:(E.right-D.right+O.right)/k.x}})}function sm(o,i,e){return(o?[...e.filter(r=>lo(r)===o),...e.filter(r=>lo(r)!==o)]:e.filter(r=>Ai(r)===r)).filter(r=>o?lo(r)===o||(i?vc(r)!==r:!1):!0)}var bc=function(o){return o===void 0&&(o={}),{name:"autoPlacement",options:o,fn(e){return We(this,null,function*(){var t,r,n;let{rects:a,middlewareData:s,placement:p,platform:d,elements:S}=e,_t=nn(o,e),{crossAxis:_=!1,alignment:y,allowedPlacements:b=Jn,autoAlignment:O=!0}=_t,j=us(_t,["crossAxis","alignment","allowedPlacements","autoAlignment"]),V=y!==void 0||b===Jn?sm(y||null,O,b):b,D=yield Cc(e,j),U=((t=s.autoPlacement)==null?void 0:t.index)||0,H=V[U];if(H==null)return{};let k=Sc(H,a,yield d.isRTL==null?void 0:d.isRTL(S.floating));if(p!==H)return{reset:{placement:V[0]}};let E=[D[Ai(H)],D[k[0]],D[k[1]]],Q=[...((r=s.autoPlacement)==null?void 0:r.overflows)||[],{placement:H,overflows:E}],Oe=V[U+1];if(Oe)return{data:{index:U+1,overflows:Q},reset:{placement:Oe}};let Xe=Q.map(xe=>{let ut=lo(xe.placement);return[xe.placement,ut&&_?xe.overflows.slice(0,2).reduce((Re,Gt)=>Re+Gt,0):xe.overflows[0],xe.overflows]}).sort((xe,ut)=>xe[1]-ut[1]),et=((n=Xe.filter(xe=>xe[2].slice(0,lo(xe[0])?2:3).every(ut=>ut<=0))[0])==null?void 0:n[0])||Xe[0][0];return et!==p?{data:{index:U+1,overflows:Q},reset:{placement:et}}:{}})}}};var lm=new Set(["left","top"]);function cm(o,i){return We(this,null,function*(){let{placement:e,platform:t,elements:r}=o,n=yield t.isRTL==null?void 0:t.isRTL(r.floating),a=Ai(e),s=lo(e),p=Kn(e)==="y",d=lm.has(a)?-1:1,S=n&&p?-1:1,_=nn(i,o),{mainAxis:y,crossAxis:b,alignmentAxis:O}=typeof _=="number"?{mainAxis:_,crossAxis:0,alignmentAxis:null}:{mainAxis:_.mainAxis||0,crossAxis:_.crossAxis||0,alignmentAxis:_.alignmentAxis};return s&&typeof O=="number"&&(b=s==="end"?O*-1:O),p?{x:b*S,y:y*d}:{x:y*d,y:b*S}})}var wc=function(o){return o===void 0&&(o=0),{name:"offset",options:o,fn(e){return We(this,null,function*(){var t,r;let{x:n,y:a,placement:s,middlewareData:p}=e,d=yield cm(e,o);return s===((t=p.offset)==null?void 0:t.placement)&&(r=p.arrow)!=null&&r.alignmentOffset?{}:{x:n+d.x,y:a+d.y,data:Oi(tt({},d),{placement:s})}})}}};var xc=wc,Tc=bc;var pm=function(i){return mm(i)&&!um(i)};function mm(o){return!!o&&typeof o=="object"}function um(o){var i=Object.prototype.toString.call(o);return i==="[object RegExp]"||i==="[object Date]"||gm(o)}var dm=typeof Symbol=="function"&&Symbol.for,fm=dm?Symbol.for("react.element"):60103;function gm(o){return o.$$typeof===fm}function hm(o){return Array.isArray(o)?[]:{}}function Pi(o,i){return i.clone!==!1&&i.isMergeableObject(o)?Si(hm(o),o,i):o}function ym(o,i,e){return o.concat(i).map(function(t){return Pi(t,e)})}function Sm(o,i){if(!i.customMerge)return Si;var e=i.customMerge(o);return typeof e=="function"?e:Si}function vm(o){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(o).filter(function(i){return Object.propertyIsEnumerable.call(o,i)}):[]}function Mc(o){return Object.keys(o).concat(vm(o))}function Wc(o,i){try{return i in o}catch{return!1}}function _m(o,i){return Wc(o,i)&&!(Object.hasOwnProperty.call(o,i)&&Object.propertyIsEnumerable.call(o,i))}function Cm(o,i,e){var t={};return e.isMergeableObject(o)&&Mc(o).forEach(function(r){t[r]=Pi(o[r],e)}),Mc(i).forEach(function(r){_m(o,r)||(Wc(o,r)&&e.isMergeableObject(i[r])?t[r]=Sm(r,e)(o[r],i[r],e):t[r]=Pi(i[r],e))}),t}function Si(o,i,e){e=e||{},e.arrayMerge=e.arrayMerge||ym,e.isMergeableObject=e.isMergeableObject||pm,e.cloneUnlessOtherwiseSpecified=Pi;var t=Array.isArray(i),r=Array.isArray(o),n=t===r;return n?t?e.arrayMerge(o,i,e):Cm(o,i,e):Pi(i,e)}Si.all=function(i,e){if(!Array.isArray(i))throw new Error("first argument should be an array");return i.reduce(function(t,r){return Si(t,r,e)},{})};var bm=Si,fa=bm;function wm(o){return o instanceof Element}function ga(o){return o instanceof HTMLElement}function Oo(o){return typeof o=="function"}function Ri(o){return typeof o=="string"}function Ve(o){return o===void 0}var Di=class{on(i,e,t,r=!1){return Ve(this.bindings)&&(this.bindings={}),Ve(this.bindings[i])&&(this.bindings[i]=[]),this.bindings[i].push({handler:e,ctx:t,once:r}),this}once(i,e,t){return this.on(i,e,t,!0)}off(i,e){return Ve(this.bindings)||Ve(this.bindings[i])?this:(Ve(e)?delete this.bindings[i]:this.bindings[i].forEach((t,r)=>{t.handler===e&&this.bindings[i].splice(r,1)}),this)}trigger(i,...e){return!Ve(this.bindings)&&this.bindings[i]&&this.bindings[i].forEach((t,r)=>{let{ctx:n,handler:a,once:s}=t,p=n||this;a.apply(p,e),s&&this.bindings[i].splice(r,1)}),this}};function Hc(o){let i=Object.getOwnPropertyNames(o.constructor.prototype);for(let e=0;e<i.length;e++){let t=i[e],r=o[t];t!=="constructor"&&typeof r=="function"&&(o[t]=r.bind(o))}return o}function xm(o,i){return e=>{if(i.isOpen()){let t=i.el&&e.currentTarget===i.el;(!Ve(o)&&e.currentTarget.matches(o)||t)&&i.tour.next()}}}function Tm(o){let{event:i,selector:e}=o.options.advanceOn||{};if(i){let t=xm(e,o),r;try{r=document.querySelector(e)}catch{}if(!Ve(e)&&!r)return console.error(`No element was found for the selector supplied to advanceOn: ${e}`);r?(r.addEventListener(i,t),o.on("destroy",()=>r.removeEventListener(i,t))):(document.body.addEventListener(i,t,!0),o.on("destroy",()=>document.body.removeEventListener(i,t,!0)))}else return console.error("advanceOn was defined, but no event name was passed.")}function Uc(o){return!Ri(o)||o===""?"":o.charAt(o.length-1)!=="-"?`${o}-`:o}function Mm(o){let i=o.options.attachTo||{},e=Object.assign({},i);if(Oo(e.element)&&(e.element=e.element.call(o)),Ri(e.element)){try{e.element=document.querySelector(e.element)}catch{}e.element||console.error(`The element for this Shepherd step was not found ${i.element}`)}return e}function Zc(o){return o==null?!0:!o.element||!o.on}function ha(){let o=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,i=>{let e=(o+Math.random()*16)%16|0;return o=Math.floor(o/16),(i=="x"?e:e&3|8).toString(16)})}function Ge(){return Ge=Object.assign?Object.assign.bind():function(o){for(var i=1;i<arguments.length;i++){var e=arguments[i];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(o[t]=e[t])}return o},Ge.apply(this,arguments)}function Qc(o,i){if(o==null)return{};var e={},t=Object.keys(o),r,n;for(n=0;n<t.length;n++)r=t[n],!(i.indexOf(r)>=0)&&(e[r]=o[r]);return e}var vi=Math.min,To=Math.max,cn=Math.round,sn=Math.floor,po=o=>({x:o,y:o}),Im={left:"right",right:"left",bottom:"top",top:"bottom"},Om={start:"end",end:"start"};function ea(o,i,e){return To(o,vi(i,e))}function _i(o,i){return typeof o=="function"?o(i):o}function Eo(o){return o.split("-")[0]}function gn(o){return o.split("-")[1]}function ya(o){return o==="x"?"y":"x"}function Sa(o){return o==="y"?"height":"width"}function hn(o){return["top","bottom"].includes(Eo(o))?"y":"x"}function va(o){return ya(hn(o))}function Em(o,i,e){e===void 0&&(e=!1);let t=gn(o),r=va(o),n=Sa(r),a=r==="x"?t===(e?"end":"start")?"right":"left":t==="start"?"bottom":"top";return i.reference[n]>i.floating[n]&&(a=pn(a)),[a,pn(a)]}function Lm(o){let i=pn(o);return[ta(o),i,ta(i)]}function ta(o){return o.replace(/start|end/g,i=>Om[i])}function Am(o,i,e){let t=["left","right"],r=["right","left"],n=["top","bottom"],a=["bottom","top"];switch(o){case"top":case"bottom":return e?i?r:t:i?t:r;case"left":case"right":return i?n:a;default:return[]}}function Fm(o,i,e,t){let r=gn(o),n=Am(Eo(o),e==="start",t);return r&&(n=n.map(a=>a+"-"+r),i&&(n=n.concat(n.map(ta)))),n}function pn(o){return o.replace(/left|right|bottom|top/g,i=>Im[i])}function Pm(o){return Ge({top:0,right:0,bottom:0,left:0},o)}function Yc(o){return typeof o!="number"?Pm(o):{top:o,right:o,bottom:o,left:o}}function mn(o){return Ge({},o,{top:o.y,left:o.x,right:o.x+o.width,bottom:o.y+o.height})}var Rm=["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","flipAlignment"],Dm=["mainAxis","crossAxis","limiter"];function Ic(o,i,e){let{reference:t,floating:r}=o,n=hn(i),a=va(i),s=Sa(a),p=Eo(i),d=n==="y",S=t.x+t.width/2-r.width/2,_=t.y+t.height/2-r.height/2,y=t[s]/2-r[s]/2,b;switch(p){case"top":b={x:S,y:t.y-r.height};break;case"bottom":b={x:S,y:t.y+t.height};break;case"right":b={x:t.x+t.width,y:_};break;case"left":b={x:t.x-r.width,y:_};break;default:b={x:t.x,y:t.y}}switch(gn(i)){case"start":b[a]-=y*(e&&d?-1:1);break;case"end":b[a]+=y*(e&&d?-1:1);break}return b}var Bm=(o,i,e)=>We(void 0,null,function*(){let{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:a}=e,s=n.filter(Boolean),p=yield a.isRTL==null?void 0:a.isRTL(i),d=yield a.getElementRects({reference:o,floating:i,strategy:r}),{x:S,y:_}=Ic(d,t,p),y=t,b={},O=0;for(let j=0;j<s.length;j++){let{name:V,fn:D}=s[j],{x:U,y:H,data:k,reset:E}=yield D({x:S,y:_,initialPlacement:t,placement:y,strategy:r,middlewareData:b,rects:d,platform:a,elements:{reference:o,floating:i}});if(S=U??S,_=H??_,b=Ge({},b,{[V]:Ge({},b[V],k)}),E&&O<=50){O++,typeof E=="object"&&(E.placement&&(y=E.placement),E.rects&&(d=E.rects===!0?yield a.getElementRects({reference:o,floating:i,strategy:r}):E.rects),{x:S,y:_}=Ic(d,y,p)),j=-1;continue}}return{x:S,y:_,placement:y,strategy:r,middlewareData:b}});function Jc(o,i){return We(this,null,function*(){var e;i===void 0&&(i={});let{x:t,y:r,platform:n,rects:a,elements:s,strategy:p}=o,{boundary:d="clippingAncestors",rootBoundary:S="viewport",elementContext:_="floating",altBoundary:y=!1,padding:b=0}=_i(i,o),O=Yc(b),V=s[y?_==="floating"?"reference":"floating":_],D=mn(yield n.getClippingRect({element:(e=yield n.isElement==null?void 0:n.isElement(V))==null||e?V:V.contextElement||(yield n.getDocumentElement==null?void 0:n.getDocumentElement(s.floating)),boundary:d,rootBoundary:S,strategy:p})),U=_==="floating"?Ge({},a.floating,{x:t,y:r}):a.reference,H=yield n.getOffsetParent==null?void 0:n.getOffsetParent(s.floating),k=(yield n.isElement==null?void 0:n.isElement(H))?(yield n.getScale==null?void 0:n.getScale(H))||{x:1,y:1}:{x:1,y:1},E=mn(n.convertOffsetParentRelativeRectToViewportRelativeRect?yield n.convertOffsetParentRelativeRectToViewportRelativeRect({rect:U,offsetParent:H,strategy:p}):U);return{top:(D.top-E.top+O.top)/k.y,bottom:(E.bottom-D.bottom+O.bottom)/k.y,left:(D.left-E.left+O.left)/k.x,right:(E.right-D.right+O.right)/k.x}})}var km=o=>({name:"arrow",options:o,fn(e){return We(this,null,function*(){let{x:t,y:r,placement:n,rects:a,platform:s,elements:p}=e,{element:d,padding:S=0}=_i(o,e)||{};if(d==null)return{};let _=Yc(S),y={x:t,y:r},b=va(n),O=Sa(b),j=yield s.getDimensions(d),V=b==="y",D=V?"top":"left",U=V?"bottom":"right",H=V?"clientHeight":"clientWidth",k=a.reference[O]+a.reference[b]-y[b]-a.floating[O],E=y[b]-a.reference[b],Q=yield s.getOffsetParent==null?void 0:s.getOffsetParent(d),Oe=Q?Q[H]:0;(!Oe||!(yield s.isElement==null?void 0:s.isElement(Q)))&&(Oe=p.floating[H]||a.floating[O]);let Xe=k/2-E/2,vt=Oe/2-j[O]/2-1,et=vi(_[D],vt),_t=vi(_[U],vt),xe=et,ut=Oe-j[O]-_t,Re=Oe/2-j[O]/2+Xe,Gt=ea(xe,Re,ut),Ft=gn(n)!=null&&Re!=Gt&&a.reference[O]/2-(Re<xe?et:_t)-j[O]/2<0?Re<xe?xe-Re:ut-Re:0;return{[b]:y[b]-Ft,data:{[b]:Gt,centerOffset:Re-Gt+Ft}}})}}),jm=function(i){return i===void 0&&(i={}),{name:"flip",options:i,fn(t){return We(this,null,function*(){var r;let{placement:n,middlewareData:a,rects:s,initialPlacement:p,platform:d,elements:S}=t,_=_i(i,t),{mainAxis:y=!0,crossAxis:b=!0,fallbackPlacements:O,fallbackStrategy:j="bestFit",fallbackAxisSideDirection:V="none",flipAlignment:D=!0}=_,U=Qc(_,Rm),H=Eo(n),k=Eo(p)===p,E=yield d.isRTL==null?void 0:d.isRTL(S.floating),Q=O||(k||!D?[pn(p)]:Lm(p));!O&&V!=="none"&&Q.push(...Fm(p,D,V,E));let Oe=[p,...Q],Xe=yield Jc(t,U),vt=[],et=((r=a.flip)==null?void 0:r.overflows)||[];if(y&&vt.push(Xe[H]),b){let Re=Em(n,s,E);vt.push(Xe[Re[0]],Xe[Re[1]])}if(et=[...et,{placement:n,overflows:vt}],!vt.every(Re=>Re<=0)){var _t,xe;let Re=(((_t=a.flip)==null?void 0:_t.index)||0)+1,Gt=Oe[Re];if(Gt)return{data:{index:Re,overflows:et},reset:{placement:Gt}};let Ro=(xe=et.filter(Ft=>Ft.overflows[0]<=0).sort((Ft,Do)=>Ft.overflows[1]-Do.overflows[1])[0])==null?void 0:xe.placement;if(!Ro)switch(j){case"bestFit":{var ut;let Ft=(ut=et.map(Do=>[Do.placement,Do.overflows.filter(Ii=>Ii>0).reduce((Ii,Bp)=>Ii+Bp,0)]).sort((Do,Ii)=>Do[1]-Ii[1])[0])==null?void 0:ut[0];Ft&&(Ro=Ft);break}case"initialPlacement":Ro=p;break}if(n!==Ro)return{reset:{placement:Ro}}}return{}})}}},$m=function(i){return i===void 0&&(i={}),{name:"shift",options:i,fn(t){return We(this,null,function*(){let{x:r,y:n,placement:a}=t,s=_i(i,t),{mainAxis:p=!0,crossAxis:d=!1,limiter:S={fn:H=>{let{x:k,y:E}=H;return{x:k,y:E}}}}=s,_=Qc(s,Dm),y={x:r,y:n},b=yield Jc(t,_),O=hn(Eo(a)),j=ya(O),V=y[j],D=y[O];if(p){let H=j==="y"?"top":"left",k=j==="y"?"bottom":"right",E=V+b[H],Q=V-b[k];V=ea(E,V,Q)}if(d){let H=O==="y"?"top":"left",k=O==="y"?"bottom":"right",E=D+b[H],Q=D-b[k];D=ea(E,D,Q)}let U=S.fn(Ge({},t,{[j]:V,[O]:D}));return Ge({},U,{data:{x:U.x-r,y:U.y-n}})})}}},Vm=function(i){return i===void 0&&(i={}),{options:i,fn(e){let{x:t,y:r,placement:n,rects:a,middlewareData:s}=e,{offset:p=0,mainAxis:d=!0,crossAxis:S=!0}=_i(i,e),_={x:t,y:r},y=hn(n),b=ya(y),O=_[b],j=_[y],V=_i(p,e),D=typeof V=="number"?{mainAxis:V,crossAxis:0}:Ge({mainAxis:0,crossAxis:0},V);if(d){let k=b==="y"?"height":"width",E=a.reference[b]-a.floating[k]+D.mainAxis,Q=a.reference[b]+a.reference[k]-D.mainAxis;O<E?O=E:O>Q&&(O=Q)}if(S){var U,H;let k=b==="y"?"width":"height",E=["top","left"].includes(Eo(n)),Q=a.reference[y]-a.floating[k]+(E&&((U=s.offset)==null?void 0:U[y])||0)+(E?0:D.crossAxis),Oe=a.reference[y]+a.reference[k]+(E?0:((H=s.offset)==null?void 0:H[y])||0)-(E?D.crossAxis:0);j<Q?j=Q:j>Oe&&(j=Oe)}return{[b]:O,[y]:j}}}};function mo(o){return Kc(o)?(o.nodeName||"").toLowerCase():"#document"}function st(o){var i;return(o==null||(i=o.ownerDocument)==null?void 0:i.defaultView)||window}function Bt(o){var i;return(i=(Kc(o)?o.ownerDocument:o.document)||window.document)==null?void 0:i.documentElement}function Kc(o){return o instanceof Node||o instanceof st(o).Node}function Dt(o){return o instanceof Element||o instanceof st(o).Element}function Et(o){return o instanceof HTMLElement||o instanceof st(o).HTMLElement}function Oc(o){return typeof ShadowRoot>"u"?!1:o instanceof ShadowRoot||o instanceof st(o).ShadowRoot}function ji(o){let{overflow:i,overflowX:e,overflowY:t,display:r}=pt(o);return/auto|scroll|overlay|hidden|clip/.test(i+t+e)&&!["inline","contents"].includes(r)}function Gm(o){return["table","td","th"].includes(mo(o))}function _a(o){let i=Ca(),e=pt(o);return e.transform!=="none"||e.perspective!=="none"||(e.containerType?e.containerType!=="normal":!1)||!i&&(e.backdropFilter?e.backdropFilter!=="none":!1)||!i&&(e.filter?e.filter!=="none":!1)||["transform","perspective","filter"].some(t=>(e.willChange||"").includes(t))||["paint","layout","strict","content"].some(t=>(e.contain||"").includes(t))}function zm(o){let i=Ci(o);for(;Et(i)&&!yn(i);){if(_a(i))return i;i=Ci(i)}return null}function Ca(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function yn(o){return["html","body","#document"].includes(mo(o))}function pt(o){return st(o).getComputedStyle(o)}function Sn(o){return Dt(o)?{scrollLeft:o.scrollLeft,scrollTop:o.scrollTop}:{scrollLeft:o.pageXOffset,scrollTop:o.pageYOffset}}function Ci(o){if(mo(o)==="html")return o;let i=o.assignedSlot||o.parentNode||Oc(o)&&o.host||Bt(o);return Oc(i)?i.host:i}function Xc(o){let i=Ci(o);return yn(i)?o.ownerDocument?o.ownerDocument.body:o.body:Et(i)&&ji(i)?i:Xc(i)}function un(o,i){var e;i===void 0&&(i=[]);let t=Xc(o),r=t===((e=o.ownerDocument)==null?void 0:e.body),n=st(t);return r?i.concat(n,n.visualViewport||[],ji(t)?t:[]):i.concat(t,un(t))}function ep(o){let i=pt(o),e=parseFloat(i.width)||0,t=parseFloat(i.height)||0,r=Et(o),n=r?o.offsetWidth:e,a=r?o.offsetHeight:t,s=cn(e)!==n||cn(t)!==a;return s&&(e=n,t=a),{width:e,height:t,$:s}}function ba(o){return Dt(o)?o:o.contextElement}function hi(o){let i=ba(o);if(!Et(i))return po(1);let e=i.getBoundingClientRect(),{width:t,height:r,$:n}=ep(i),a=(n?cn(e.width):e.width)/t,s=(n?cn(e.height):e.height)/r;return(!a||!Number.isFinite(a))&&(a=1),(!s||!Number.isFinite(s))&&(s=1),{x:a,y:s}}var Nm=po(0);function tp(o){let i=st(o);return!Ca()||!i.visualViewport?Nm:{x:i.visualViewport.offsetLeft,y:i.visualViewport.offsetTop}}function qm(o,i,e){return i===void 0&&(i=!1),!e||i&&e!==st(o)?!1:i}function Lo(o,i,e,t){i===void 0&&(i=!1),e===void 0&&(e=!1);let r=o.getBoundingClientRect(),n=ba(o),a=po(1);i&&(t?Dt(t)&&(a=hi(t)):a=hi(o));let s=qm(n,e,t)?tp(n):po(0),p=(r.left+s.x)/a.x,d=(r.top+s.y)/a.y,S=r.width/a.x,_=r.height/a.y;if(n){let y=st(n),b=t&&Dt(t)?st(t):t,O=y.frameElement;for(;O&&t&&b!==y;){let j=hi(O),V=O.getBoundingClientRect(),D=pt(O),U=V.left+(O.clientLeft+parseFloat(D.paddingLeft))*j.x,H=V.top+(O.clientTop+parseFloat(D.paddingTop))*j.y;p*=j.x,d*=j.y,S*=j.x,_*=j.y,p+=U,d+=H,O=st(O).frameElement}}return mn({width:S,height:_,x:p,y:d})}function Wm(o){let{rect:i,offsetParent:e,strategy:t}=o,r=Et(e),n=Bt(e);if(e===n)return i;let a={scrollLeft:0,scrollTop:0},s=po(1),p=po(0);if((r||!r&&t!=="fixed")&&((mo(e)!=="body"||ji(n))&&(a=Sn(e)),Et(e))){let d=Lo(e);s=hi(e),p.x=d.x+e.clientLeft,p.y=d.y+e.clientTop}return{width:i.width*s.x,height:i.height*s.y,x:i.x*s.x-a.scrollLeft*s.x+p.x,y:i.y*s.y-a.scrollTop*s.y+p.y}}function Hm(o){return Array.from(o.getClientRects())}function op(o){return Lo(Bt(o)).left+Sn(o).scrollLeft}function Um(o){let i=Bt(o),e=Sn(o),t=o.ownerDocument.body,r=To(i.scrollWidth,i.clientWidth,t.scrollWidth,t.clientWidth),n=To(i.scrollHeight,i.clientHeight,t.scrollHeight,t.clientHeight),a=-e.scrollLeft+op(o),s=-e.scrollTop;return pt(t).direction==="rtl"&&(a+=To(i.clientWidth,t.clientWidth)-r),{width:r,height:n,x:a,y:s}}function Zm(o,i){let e=st(o),t=Bt(o),r=e.visualViewport,n=t.clientWidth,a=t.clientHeight,s=0,p=0;if(r){n=r.width,a=r.height;let d=Ca();(!d||d&&i==="fixed")&&(s=r.offsetLeft,p=r.offsetTop)}return{width:n,height:a,x:s,y:p}}function Qm(o,i){let e=Lo(o,!0,i==="fixed"),t=e.top+o.clientTop,r=e.left+o.clientLeft,n=Et(o)?hi(o):po(1),a=o.clientWidth*n.x,s=o.clientHeight*n.y,p=r*n.x,d=t*n.y;return{width:a,height:s,x:p,y:d}}function Ec(o,i,e){let t;if(i==="viewport")t=Zm(o,e);else if(i==="document")t=Um(Bt(o));else if(Dt(i))t=Qm(i,e);else{let r=tp(o);t=Ge({},i,{x:i.x-r.x,y:i.y-r.y})}return mn(t)}function ip(o,i){let e=Ci(o);return e===i||!Dt(e)||yn(e)?!1:pt(e).position==="fixed"||ip(e,i)}function Ym(o,i){let e=i.get(o);if(e)return e;let t=un(o).filter(s=>Dt(s)&&mo(s)!=="body"),r=null,n=pt(o).position==="fixed",a=n?Ci(o):o;for(;Dt(a)&&!yn(a);){let s=pt(a),p=_a(a);!p&&s.position==="fixed"&&(r=null),(n?!p&&!r:!p&&s.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||ji(a)&&!p&&ip(o,a))?t=t.filter(S=>S!==a):r=s,a=Ci(a)}return i.set(o,t),t}function Jm(o){let{element:i,boundary:e,rootBoundary:t,strategy:r}=o,a=[...e==="clippingAncestors"?Ym(i,this._c):[].concat(e),t],s=a[0],p=a.reduce((d,S)=>{let _=Ec(i,S,r);return d.top=To(_.top,d.top),d.right=vi(_.right,d.right),d.bottom=vi(_.bottom,d.bottom),d.left=To(_.left,d.left),d},Ec(i,s,r));return{width:p.right-p.left,height:p.bottom-p.top,x:p.left,y:p.top}}function Km(o){return ep(o)}function Xm(o,i,e){let t=Et(i),r=Bt(i),n=e==="fixed",a=Lo(o,!0,n,i),s={scrollLeft:0,scrollTop:0},p=po(0);if(t||!t&&!n)if((mo(i)!=="body"||ji(r))&&(s=Sn(i)),t){let d=Lo(i,!0,n,i);p.x=d.x+i.clientLeft,p.y=d.y+i.clientTop}else r&&(p.x=op(r));return{x:a.left+s.scrollLeft-p.x,y:a.top+s.scrollTop-p.y,width:a.width,height:a.height}}function Lc(o,i){return!Et(o)||pt(o).position==="fixed"?null:i?i(o):o.offsetParent}function rp(o,i){let e=st(o);if(!Et(o))return e;let t=Lc(o,i);for(;t&&Gm(t)&&pt(t).position==="static";)t=Lc(t,i);return t&&(mo(t)==="html"||mo(t)==="body"&&pt(t).position==="static"&&!_a(t))?e:t||zm(o)||e}var eu=function(i){return We(this,null,function*(){let{reference:e,floating:t,strategy:r}=i,n=this.getOffsetParent||rp,a=this.getDimensions;return{reference:Xm(e,yield n(t),r),floating:Ge({x:0,y:0},yield a(t))}})};function tu(o){return pt(o).direction==="rtl"}var ou={convertOffsetParentRelativeRectToViewportRelativeRect:Wm,getDocumentElement:Bt,getClippingRect:Jm,getOffsetParent:rp,getElementRects:eu,getClientRects:Hm,getDimensions:Km,getScale:hi,isElement:Dt,isRTL:tu};function iu(o,i){let e=null,t,r=Bt(o);function n(){clearTimeout(t),e&&e.disconnect(),e=null}function a(s,p){s===void 0&&(s=!1),p===void 0&&(p=1),n();let{left:d,top:S,width:_,height:y}=o.getBoundingClientRect();if(s||i(),!_||!y)return;let b=sn(S),O=sn(r.clientWidth-(d+_)),j=sn(r.clientHeight-(S+y)),V=sn(d),U={rootMargin:-b+"px "+-O+"px "+-j+"px "+-V+"px",threshold:To(0,vi(1,p))||1},H=!0;function k(E){let Q=E[0].intersectionRatio;if(Q!==p){if(!H)return a();Q?a(!1,Q):t=setTimeout(()=>{a(!1,1e-7)},100)}H=!1}try{e=new IntersectionObserver(k,Ge({},U,{root:r.ownerDocument}))}catch{e=new IntersectionObserver(k,U)}e.observe(o)}return a(!0),n}function ru(o,i,e,t){t===void 0&&(t={});let{ancestorScroll:r=!0,ancestorResize:n=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:p=!1}=t,d=ba(o),S=r||n?[...d?un(d):[],...un(i)]:[];S.forEach(D=>{r&&D.addEventListener("scroll",e,{passive:!0}),n&&D.addEventListener("resize",e)});let _=d&&s?iu(d,e):null,y=-1,b=null;a&&(b=new ResizeObserver(D=>{let[U]=D;U&&U.target===d&&b&&(b.unobserve(i),cancelAnimationFrame(y),y=requestAnimationFrame(()=>{b&&b.observe(i)})),e()}),d&&!p&&b.observe(d),b.observe(i));let O,j=p?Lo(o):null;p&&V();function V(){let D=Lo(o);j&&(D.x!==j.x||D.y!==j.y||D.width!==j.width||D.height!==j.height)&&e(),j=D,O=requestAnimationFrame(V)}return e(),()=>{S.forEach(D=>{r&&D.removeEventListener("scroll",e),n&&D.removeEventListener("resize",e)}),_&&_(),b&&b.disconnect(),b=null,p&&cancelAnimationFrame(O)}}var nu=(o,i,e)=>{let t=new Map,r=Ge({platform:ou},e),n=Ge({},r.platform,{_c:t});return Bm(o,i,Ge({},r,{platform:n}))};function au(o){o.cleanup&&o.cleanup();let i=o._getResolvedAttachToOptions(),e=i.element,t=uu(i,o),r=Zc(i);return r&&(e=document.body,o.shepherdElementComponent.getElement().classList.add("shepherd-centered")),o.cleanup=ru(e,o.el,()=>{if(!o.el){o.cleanup();return}cu(e,o,t,r)}),o.target=i.element,t}function su(o,i){return{floatingUIOptions:fa(o.floatingUIOptions||{},i.floatingUIOptions||{})}}function lu(o){o.cleanup&&o.cleanup(),o.cleanup=null}function cu(o,i,e,t){return nu(o,i.el,e).then(pu(i,t)).then(r=>new Promise(n=>{setTimeout(()=>n(r),300)})).then(r=>{r&&r.el&&r.el.focus({preventScroll:!0})})}function pu(o,i){return({x:e,y:t,placement:r,middlewareData:n})=>(o.el&&(i?Object.assign(o.el.style,{position:"fixed",left:"50%",top:"50%",transform:"translate(-50%, -50%)"}):Object.assign(o.el.style,{position:"absolute",left:`${e}px`,top:`${t}px`}),o.el.dataset.popperPlacement=r,mu(o.el,n)),o)}function mu(o,i){let e=o.querySelector(".shepherd-arrow");if(e&&i.arrow){let{x:t,y:r}=i.arrow;Object.assign(e.style,{left:t!=null?`${t}px`:"",top:r!=null?`${r}px`:""})}}function uu(o,i){let e={strategy:"absolute",middleware:[]},t=du(i);return Zc(o)||(e.middleware.push(jm(),$m({limiter:Vm(),crossAxis:!0})),t&&e.middleware.push(km({element:t})),e.placement=o.on),fa(i.options.floatingUIOptions||{},e)}function du(o){return o.options.arrow&&o.el?o.el.querySelector(".shepherd-arrow"):!1}function lt(){}function fu(o,i){for(let e in i)o[e]=i[e];return o}function np(o){return o()}function Ac(){return Object.create(null)}function $i(o){o.forEach(np)}function wa(o){return typeof o=="function"}function kt(o,i){return o!=o?i==i:o!==i||o&&typeof o=="object"||typeof o=="function"}function gu(o){return Object.keys(o).length===0}function bi(o,i){o.appendChild(i)}function ht(o,i,e){o.insertBefore(i,e||null)}function mt(o){o.parentNode&&o.parentNode.removeChild(o)}function hu(o,i){for(let e=0;e<o.length;e+=1)o[e]&&o[e].d(i)}function Lt(o){return document.createElement(o)}function Fc(o){return document.createElementNS("http://www.w3.org/2000/svg",o)}function ap(o){return document.createTextNode(o)}function dn(){return ap(" ")}function yu(){return ap("")}function vn(o,i,e,t){return o.addEventListener(i,e,t),()=>o.removeEventListener(i,e,t)}function fe(o,i,e){e==null?o.removeAttribute(i):o.getAttribute(i)!==e&&o.setAttribute(i,e)}var Su=["width","height"];function Pc(o,i){let e=Object.getOwnPropertyDescriptors(o.__proto__);for(let t in i)i[t]==null?o.removeAttribute(t):t==="style"?o.style.cssText=i[t]:t==="__value"?o.value=o[t]=i[t]:e[t]&&e[t].set&&Su.indexOf(t)===-1?o[t]=i[t]:fe(o,t,i[t])}function vu(o){return Array.from(o.childNodes)}function di(o,i,e){o.classList[e?"add":"remove"](i)}var Bi;function Fi(o){Bi=o}function sp(){if(!Bi)throw new Error("Function called outside component initialization");return Bi}function _u(o){sp().$$.on_mount.push(o)}function xa(o){sp().$$.after_update.push(o)}var gi=[],wi=[],yi=[],Rc=[],Cu=Promise.resolve(),oa=!1;function bu(){oa||(oa=!0,Cu.then(lp))}function ia(o){yi.push(o)}var Xn=new Set,fi=0;function lp(){if(fi!==0)return;let o=Bi;do{try{for(;fi<gi.length;){let i=gi[fi];fi++,Fi(i),wu(i.$$)}}catch(i){throw gi.length=0,fi=0,i}for(Fi(null),gi.length=0,fi=0;wi.length;)wi.pop()();for(let i=0;i<yi.length;i+=1){let e=yi[i];Xn.has(e)||(Xn.add(e),e())}yi.length=0}while(gi.length);for(;Rc.length;)Rc.pop()();oa=!1,Xn.clear(),Fi(o)}function wu(o){if(o.fragment!==null){o.update(),$i(o.before_update);let i=o.dirty;o.dirty=[-1],o.fragment&&o.fragment.p(o.ctx,i),o.after_update.forEach(ia)}}function xu(o){let i=[],e=[];yi.forEach(t=>o.indexOf(t)===-1?i.push(t):e.push(t)),e.forEach(t=>t()),yi=i}var ln=new Set,xo;function Mo(){xo={r:0,c:[],p:xo}}function Io(){xo.r||$i(xo.c),xo=xo.p}function se(o,i){o&&o.i&&(ln.delete(o),o.i(i))}function we(o,i,e,t){if(o&&o.o){if(ln.has(o))return;ln.add(o),xo.c.push(()=>{ln.delete(o),t&&(e&&o.d(1),t())}),o.o(i)}else t&&t()}function Tu(o,i){let e={},t={},r={$$scope:1},n=o.length;for(;n--;){let a=o[n],s=i[n];if(s){for(let p in a)p in s||(t[p]=1);for(let p in s)r[p]||(e[p]=s[p],r[p]=1);o[n]=s}else for(let p in a)r[p]=1}for(let a in t)a in e||(e[a]=void 0);return e}function Ao(o){o&&o.c()}function uo(o,i,e,t){let{fragment:r,after_update:n}=o.$$;r&&r.m(i,e),t||ia(()=>{let a=o.$$.on_mount.map(np).filter(wa);o.$$.on_destroy?o.$$.on_destroy.push(...a):$i(a),o.$$.on_mount=[]}),n.forEach(ia)}function fo(o,i){let e=o.$$;e.fragment!==null&&(xu(e.after_update),$i(e.on_destroy),e.fragment&&e.fragment.d(i),e.on_destroy=e.fragment=null,e.ctx=[])}function Mu(o,i){o.$$.dirty[0]===-1&&(gi.push(o),bu(),o.$$.dirty.fill(0)),o.$$.dirty[i/31|0]|=1<<i%31}function jt(o,i,e,t,r,n,a,s=[-1]){let p=Bi;Fi(o);let d=o.$$={fragment:null,ctx:[],props:n,update:lt,not_equal:r,bound:Ac(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(i.context||(p?p.$$.context:[])),callbacks:Ac(),dirty:s,skip_bound:!1,root:i.target||p.$$.root};a&&a(d.root);let S=!1;if(d.ctx=e?e(o,i.props||{},(_,y,...b)=>{let O=b.length?b[0]:y;return d.ctx&&r(d.ctx[_],d.ctx[_]=O)&&(!d.skip_bound&&d.bound[_]&&d.bound[_](O),S&&Mu(o,_)),y}):[],d.update(),S=!0,$i(d.before_update),d.fragment=t?t(d.ctx):!1,i.target){if(i.hydrate){let _=vu(i.target);d.fragment&&d.fragment.l(_),_.forEach(mt)}else d.fragment&&d.fragment.c();i.intro&&se(o.$$.fragment),uo(o,i.target,i.anchor,i.customElement),lp()}Fi(p)}var gt=class{$destroy(){fo(this,1),this.$destroy=lt}$on(i,e){if(!wa(e))return lt;let t=this.$$.callbacks[i]||(this.$$.callbacks[i]=[]);return t.push(e),()=>{let r=t.indexOf(e);r!==-1&&t.splice(r,1)}}$set(i){this.$$set&&!gu(i)&&(this.$$.skip_bound=!0,this.$$set(i),this.$$.skip_bound=!1)}};function Iu(o){let i,e,t,r,n;return{c(){i=Lt("button"),fe(i,"aria-label",e=o[3]?o[3]:null),fe(i,"class",t=`${o[1]||""} shepherd-button ${o[4]?"shepherd-button-secondary":""}`),i.disabled=o[2],fe(i,"tabindex","0")},m(a,s){ht(a,i,s),i.innerHTML=o[5],r||(n=vn(i,"click",function(){wa(o[0])&&o[0].apply(this,arguments)}),r=!0)},p(a,[s]){o=a,s&32&&(i.innerHTML=o[5]),s&8&&e!==(e=o[3]?o[3]:null)&&fe(i,"aria-label",e),s&18&&t!==(t=`${o[1]||""} shepherd-button ${o[4]?"shepherd-button-secondary":""}`)&&fe(i,"class",t),s&4&&(i.disabled=o[2])},i:lt,o:lt,d(a){a&&mt(i),r=!1,n()}}}function Ou(o,i,e){let{config:t,step:r}=i,n,a,s,p,d,S;function _(y){return Oo(y)?y=y.call(r):y}return o.$$set=y=>{"config"in y&&e(6,t=y.config),"step"in y&&e(7,r=y.step)},o.$$.update=()=>{o.$$.dirty&192&&(e(0,n=t.action?t.action.bind(r.tour):null),e(1,a=t.classes),e(2,s=t.disabled?_(t.disabled):!1),e(3,p=t.label?_(t.label):null),e(4,d=t.secondary),e(5,S=t.text?_(t.text):null))},[n,a,s,p,d,S,t,r]}var ra=class extends gt{constructor(i){super(),jt(this,i,Ou,Iu,kt,{config:6,step:7})}};function Dc(o,i,e){let t=o.slice();return t[2]=i[e],t}function Bc(o){let i,e,t=o[1],r=[];for(let a=0;a<t.length;a+=1)r[a]=kc(Dc(o,t,a));let n=a=>we(r[a],1,1,()=>{r[a]=null});return{c(){for(let a=0;a<r.length;a+=1)r[a].c();i=yu()},m(a,s){for(let p=0;p<r.length;p+=1)r[p]&&r[p].m(a,s);ht(a,i,s),e=!0},p(a,s){if(s&3){t=a[1];let p;for(p=0;p<t.length;p+=1){let d=Dc(a,t,p);r[p]?(r[p].p(d,s),se(r[p],1)):(r[p]=kc(d),r[p].c(),se(r[p],1),r[p].m(i.parentNode,i))}for(Mo(),p=t.length;p<r.length;p+=1)n(p);Io()}},i(a){if(!e){for(let s=0;s<t.length;s+=1)se(r[s]);e=!0}},o(a){r=r.filter(Boolean);for(let s=0;s<r.length;s+=1)we(r[s]);e=!1},d(a){hu(r,a),a&&mt(i)}}}function kc(o){let i,e;return i=new ra({props:{config:o[2],step:o[0]}}),{c(){Ao(i.$$.fragment)},m(t,r){uo(i,t,r),e=!0},p(t,r){let n={};r&2&&(n.config=t[2]),r&1&&(n.step=t[0]),i.$set(n)},i(t){e||(se(i.$$.fragment,t),e=!0)},o(t){we(i.$$.fragment,t),e=!1},d(t){fo(i,t)}}}function Eu(o){let i,e,t=o[1]&&Bc(o);return{c(){i=Lt("footer"),t&&t.c(),fe(i,"class","shepherd-footer")},m(r,n){ht(r,i,n),t&&t.m(i,null),e=!0},p(r,[n]){r[1]?t?(t.p(r,n),n&2&&se(t,1)):(t=Bc(r),t.c(),se(t,1),t.m(i,null)):t&&(Mo(),we(t,1,1,()=>{t=null}),Io())},i(r){e||(se(t),e=!0)},o(r){we(t),e=!1},d(r){r&&mt(i),t&&t.d()}}}function Lu(o,i,e){let t,{step:r}=i;return o.$$set=n=>{"step"in n&&e(0,r=n.step)},o.$$.update=()=>{o.$$.dirty&1&&e(1,t=r.options.buttons)},[r,t]}var na=class extends gt{constructor(i){super(),jt(this,i,Lu,Eu,kt,{step:0})}};function Au(o){let i,e,t,r,n;return{c(){i=Lt("button"),e=Lt("span"),e.textContent="\xD7",fe(e,"aria-hidden","true"),fe(i,"aria-label",t=o[0].label?o[0].label:"Close Tour"),fe(i,"class","shepherd-cancel-icon"),fe(i,"type","button")},m(a,s){ht(a,i,s),bi(i,e),r||(n=vn(i,"click",o[1]),r=!0)},p(a,[s]){s&1&&t!==(t=a[0].label?a[0].label:"Close Tour")&&fe(i,"aria-label",t)},i:lt,o:lt,d(a){a&&mt(i),r=!1,n()}}}function Fu(o,i,e){let{cancelIcon:t,step:r}=i,n=a=>{a.preventDefault(),r.cancel()};return o.$$set=a=>{"cancelIcon"in a&&e(0,t=a.cancelIcon),"step"in a&&e(2,r=a.step)},[t,n,r]}var aa=class extends gt{constructor(i){super(),jt(this,i,Fu,Au,kt,{cancelIcon:0,step:2})}};function Pu(o){let i;return{c(){i=Lt("h3"),fe(i,"id",o[1]),fe(i,"class","shepherd-title")},m(e,t){ht(e,i,t),o[3](i)},p(e,[t]){t&2&&fe(i,"id",e[1])},i:lt,o:lt,d(e){e&&mt(i),o[3](null)}}}function Ru(o,i,e){let{labelId:t,element:r,title:n}=i;xa(()=>{Oo(n)&&e(2,n=n()),e(0,r.innerHTML=n,r)});function a(s){wi[s?"unshift":"push"](()=>{r=s,e(0,r)})}return o.$$set=s=>{"labelId"in s&&e(1,t=s.labelId),"element"in s&&e(0,r=s.element),"title"in s&&e(2,n=s.title)},[r,t,n,a]}var sa=class extends gt{constructor(i){super(),jt(this,i,Ru,Pu,kt,{labelId:1,element:0,title:2})}};function jc(o){let i,e;return i=new sa({props:{labelId:o[0],title:o[2]}}),{c(){Ao(i.$$.fragment)},m(t,r){uo(i,t,r),e=!0},p(t,r){let n={};r&1&&(n.labelId=t[0]),r&4&&(n.title=t[2]),i.$set(n)},i(t){e||(se(i.$$.fragment,t),e=!0)},o(t){we(i.$$.fragment,t),e=!1},d(t){fo(i,t)}}}function $c(o){let i,e;return i=new aa({props:{cancelIcon:o[3],step:o[1]}}),{c(){Ao(i.$$.fragment)},m(t,r){uo(i,t,r),e=!0},p(t,r){let n={};r&8&&(n.cancelIcon=t[3]),r&2&&(n.step=t[1]),i.$set(n)},i(t){e||(se(i.$$.fragment,t),e=!0)},o(t){we(i.$$.fragment,t),e=!1},d(t){fo(i,t)}}}function Du(o){let i,e,t,r=o[2]&&jc(o),n=o[3]&&o[3].enabled&&$c(o);return{c(){i=Lt("header"),r&&r.c(),e=dn(),n&&n.c(),fe(i,"class","shepherd-header")},m(a,s){ht(a,i,s),r&&r.m(i,null),bi(i,e),n&&n.m(i,null),t=!0},p(a,[s]){a[2]?r?(r.p(a,s),s&4&&se(r,1)):(r=jc(a),r.c(),se(r,1),r.m(i,e)):r&&(Mo(),we(r,1,1,()=>{r=null}),Io()),a[3]&&a[3].enabled?n?(n.p(a,s),s&8&&se(n,1)):(n=$c(a),n.c(),se(n,1),n.m(i,null)):n&&(Mo(),we(n,1,1,()=>{n=null}),Io())},i(a){t||(se(r),se(n),t=!0)},o(a){we(r),we(n),t=!1},d(a){a&&mt(i),r&&r.d(),n&&n.d()}}}function Bu(o,i,e){let{labelId:t,step:r}=i,n,a;return o.$$set=s=>{"labelId"in s&&e(0,t=s.labelId),"step"in s&&e(1,r=s.step)},o.$$.update=()=>{o.$$.dirty&2&&(e(2,n=r.options.title),e(3,a=r.options.cancelIcon))},[t,r,n,a]}var la=class extends gt{constructor(i){super(),jt(this,i,Bu,Du,kt,{labelId:0,step:1})}};function ku(o){let i;return{c(){i=Lt("div"),fe(i,"class","shepherd-text"),fe(i,"id",o[1])},m(e,t){ht(e,i,t),o[3](i)},p(e,[t]){t&2&&fe(i,"id",e[1])},i:lt,o:lt,d(e){e&&mt(i),o[3](null)}}}function ju(o,i,e){let{descriptionId:t,element:r,step:n}=i;xa(()=>{let{text:s}=n.options;Oo(s)&&(s=s.call(n)),ga(s)?r.appendChild(s):e(0,r.innerHTML=s,r)});function a(s){wi[s?"unshift":"push"](()=>{r=s,e(0,r)})}return o.$$set=s=>{"descriptionId"in s&&e(1,t=s.descriptionId),"element"in s&&e(0,r=s.element),"step"in s&&e(2,n=s.step)},[r,t,n,a]}var ca=class extends gt{constructor(i){super(),jt(this,i,ju,ku,kt,{descriptionId:1,element:0,step:2})}};function Vc(o){let i,e;return i=new la({props:{labelId:o[1],step:o[2]}}),{c(){Ao(i.$$.fragment)},m(t,r){uo(i,t,r),e=!0},p(t,r){let n={};r&2&&(n.labelId=t[1]),r&4&&(n.step=t[2]),i.$set(n)},i(t){e||(se(i.$$.fragment,t),e=!0)},o(t){we(i.$$.fragment,t),e=!1},d(t){fo(i,t)}}}function Gc(o){let i,e;return i=new ca({props:{descriptionId:o[0],step:o[2]}}),{c(){Ao(i.$$.fragment)},m(t,r){uo(i,t,r),e=!0},p(t,r){let n={};r&1&&(n.descriptionId=t[0]),r&4&&(n.step=t[2]),i.$set(n)},i(t){e||(se(i.$$.fragment,t),e=!0)},o(t){we(i.$$.fragment,t),e=!1},d(t){fo(i,t)}}}function zc(o){let i,e;return i=new na({props:{step:o[2]}}),{c(){Ao(i.$$.fragment)},m(t,r){uo(i,t,r),e=!0},p(t,r){let n={};r&4&&(n.step=t[2]),i.$set(n)},i(t){e||(se(i.$$.fragment,t),e=!0)},o(t){we(i.$$.fragment,t),e=!1},d(t){fo(i,t)}}}function $u(o){let i,e=!Ve(o[2].options.title)||o[2].options.cancelIcon&&o[2].options.cancelIcon.enabled,t,r=!Ve(o[2].options.text),n,a=Array.isArray(o[2].options.buttons)&&o[2].options.buttons.length,s,p=e&&Vc(o),d=r&&Gc(o),S=a&&zc(o);return{c(){i=Lt("div"),p&&p.c(),t=dn(),d&&d.c(),n=dn(),S&&S.c(),fe(i,"class","shepherd-content")},m(_,y){ht(_,i,y),p&&p.m(i,null),bi(i,t),d&&d.m(i,null),bi(i,n),S&&S.m(i,null),s=!0},p(_,[y]){y&4&&(e=!Ve(_[2].options.title)||_[2].options.cancelIcon&&_[2].options.cancelIcon.enabled),e?p?(p.p(_,y),y&4&&se(p,1)):(p=Vc(_),p.c(),se(p,1),p.m(i,t)):p&&(Mo(),we(p,1,1,()=>{p=null}),Io()),y&4&&(r=!Ve(_[2].options.text)),r?d?(d.p(_,y),y&4&&se(d,1)):(d=Gc(_),d.c(),se(d,1),d.m(i,n)):d&&(Mo(),we(d,1,1,()=>{d=null}),Io()),y&4&&(a=Array.isArray(_[2].options.buttons)&&_[2].options.buttons.length),a?S?(S.p(_,y),y&4&&se(S,1)):(S=zc(_),S.c(),se(S,1),S.m(i,null)):S&&(Mo(),we(S,1,1,()=>{S=null}),Io())},i(_){s||(se(p),se(d),se(S),s=!0)},o(_){we(p),we(d),we(S),s=!1},d(_){_&&mt(i),p&&p.d(),d&&d.d(),S&&S.d()}}}function Vu(o,i,e){let{descriptionId:t,labelId:r,step:n}=i;return o.$$set=a=>{"descriptionId"in a&&e(0,t=a.descriptionId),"labelId"in a&&e(1,r=a.labelId),"step"in a&&e(2,n=a.step)},[t,r,n]}var pa=class extends gt{constructor(i){super(),jt(this,i,Vu,$u,kt,{descriptionId:0,labelId:1,step:2})}};function Nc(o){let i;return{c(){i=Lt("div"),fe(i,"class","shepherd-arrow"),fe(i,"data-popper-arrow","")},m(e,t){ht(e,i,t)},d(e){e&&mt(i)}}}function Gu(o){let i,e,t,r,n,a,s,p,d=o[4].options.arrow&&o[4].options.attachTo&&o[4].options.attachTo.element&&o[4].options.attachTo.on&&Nc();t=new pa({props:{descriptionId:o[2],labelId:o[3],step:o[4]}});let S=[{"aria-describedby":r=Ve(o[4].options.text)?null:o[2]},{"aria-labelledby":n=o[4].options.title?o[3]:null},o[1],{role:"dialog"},{tabindex:"0"}],_={};for(let y=0;y<S.length;y+=1)_=fu(_,S[y]);return{c(){i=Lt("div"),d&&d.c(),e=dn(),Ao(t.$$.fragment),Pc(i,_),di(i,"shepherd-has-cancel-icon",o[5]),di(i,"shepherd-has-title",o[6]),di(i,"shepherd-element",!0)},m(y,b){ht(y,i,b),d&&d.m(i,null),bi(i,e),uo(t,i,null),o[13](i),a=!0,s||(p=vn(i,"keydown",o[7]),s=!0)},p(y,[b]){y[4].options.arrow&&y[4].options.attachTo&&y[4].options.attachTo.element&&y[4].options.attachTo.on?d||(d=Nc(),d.c(),d.m(i,e)):d&&(d.d(1),d=null);let O={};b&4&&(O.descriptionId=y[2]),b&8&&(O.labelId=y[3]),b&16&&(O.step=y[4]),t.$set(O),Pc(i,_=Tu(S,[(!a||b&20&&r!==(r=Ve(y[4].options.text)?null:y[2]))&&{"aria-describedby":r},(!a||b&24&&n!==(n=y[4].options.title?y[3]:null))&&{"aria-labelledby":n},b&2&&y[1],{role:"dialog"},{tabindex:"0"}])),di(i,"shepherd-has-cancel-icon",y[5]),di(i,"shepherd-has-title",y[6]),di(i,"shepherd-element",!0)},i(y){a||(se(t.$$.fragment,y),a=!0)},o(y){we(t.$$.fragment,y),a=!1},d(y){y&&mt(i),d&&d.d(),fo(t),o[13](null),s=!1,p()}}}var zu=9,Nu=27,qu=37,Wu=39;function qc(o){return o.split(" ").filter(i=>!!i.length)}function Hu(o,i,e){let{classPrefix:t,element:r,descriptionId:n,firstFocusableElement:a,focusableElements:s,labelId:p,lastFocusableElement:d,step:S,dataStepId:_}=i,y,b,O,j=()=>r;_u(()=>{e(1,_={[`data-${t}shepherd-step-id`]:S.id}),e(9,s=r.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]')),e(8,a=s[0]),e(10,d=s[s.length-1])}),xa(()=>{O!==S.options.classes&&V()});function V(){D(O),O=S.options.classes,U(O)}function D(E){if(Ri(E)){let Q=qc(E);Q.length&&r.classList.remove(...Q)}}function U(E){if(Ri(E)){let Q=qc(E);Q.length&&r.classList.add(...Q)}}let H=E=>{let{tour:Q}=S;switch(E.keyCode){case zu:if(s.length===0){E.preventDefault();break}E.shiftKey?(document.activeElement===a||document.activeElement.classList.contains("shepherd-element"))&&(E.preventDefault(),d.focus()):document.activeElement===d&&(E.preventDefault(),a.focus());break;case Nu:Q.options.exitOnEsc&&(E.stopPropagation(),S.cancel());break;case qu:Q.options.keyboardNavigation&&(E.stopPropagation(),Q.back());break;case Wu:Q.options.keyboardNavigation&&(E.stopPropagation(),Q.next());break}};function k(E){wi[E?"unshift":"push"](()=>{r=E,e(0,r)})}return o.$$set=E=>{"classPrefix"in E&&e(11,t=E.classPrefix),"element"in E&&e(0,r=E.element),"descriptionId"in E&&e(2,n=E.descriptionId),"firstFocusableElement"in E&&e(8,a=E.firstFocusableElement),"focusableElements"in E&&e(9,s=E.focusableElements),"labelId"in E&&e(3,p=E.labelId),"lastFocusableElement"in E&&e(10,d=E.lastFocusableElement),"step"in E&&e(4,S=E.step),"dataStepId"in E&&e(1,_=E.dataStepId)},o.$$.update=()=>{o.$$.dirty&16&&(e(5,y=S.options&&S.options.cancelIcon&&S.options.cancelIcon.enabled),e(6,b=S.options&&S.options.title))},[r,_,n,p,S,y,b,H,a,s,d,t,j,k]}var ma=class extends gt{constructor(i){super(),jt(this,i,Hu,Gu,kt,{classPrefix:11,element:0,descriptionId:2,firstFocusableElement:8,focusableElements:9,labelId:3,lastFocusableElement:10,step:4,dataStepId:1,getElement:12})}get getElement(){return this.$$.ctx[12]}},ki=class extends Di{constructor(i,e={}){return super(i,e),this.tour=i,this.classPrefix=this.tour.options?Uc(this.tour.options.classPrefix):"",this.styles=i.styles,this._resolvedAttachTo=null,Hc(this),this._setOptions(e),this}cancel(){this.tour.cancel(),this.trigger("cancel")}complete(){this.tour.complete(),this.trigger("complete")}destroy(){lu(this),ga(this.el)&&(this.el.remove(),this.el=null),this._updateStepTargetOnHide(),this.trigger("destroy")}getTour(){return this.tour}hide(){this.tour.modal.hide(),this.trigger("before-hide"),this.el&&(this.el.hidden=!0),this._updateStepTargetOnHide(),this.trigger("hide")}_resolveAttachToOptions(){return this._resolvedAttachTo=Mm(this),this._resolvedAttachTo}_getResolvedAttachToOptions(){return this._resolvedAttachTo===null?this._resolveAttachToOptions():this._resolvedAttachTo}isOpen(){return!!(this.el&&!this.el.hidden)}show(){return Oo(this.options.beforeShowPromise)?Promise.resolve(this.options.beforeShowPromise()).then(()=>this._show()):Promise.resolve(this._show())}updateStepOptions(i){Object.assign(this.options,i),this.shepherdElementComponent&&this.shepherdElementComponent.$set({step:this})}getElement(){return this.el}getTarget(){return this.target}_createTooltipContent(){let i=`${this.id}-description`,e=`${this.id}-label`;return this.shepherdElementComponent=new ma({target:this.tour.options.stepsContainer||document.body,props:{classPrefix:this.classPrefix,descriptionId:i,labelId:e,step:this,styles:this.styles}}),this.shepherdElementComponent.getElement()}_scrollTo(i){let{element:e}=this._getResolvedAttachToOptions();Oo(this.options.scrollToHandler)?this.options.scrollToHandler(e):wm(e)&&typeof e.scrollIntoView=="function"&&e.scrollIntoView(i)}_getClassOptions(i){let e=this.tour&&this.tour.options&&this.tour.options.defaultStepOptions,t=i.classes?i.classes:"",r=e&&e.classes?e.classes:"",n=[...t.split(" "),...r.split(" ")],a=new Set(n);return Array.from(a).join(" ").trim()}_setOptions(i={}){let e=this.tour&&this.tour.options&&this.tour.options.defaultStepOptions;e=fa({},e||{}),this.options=Object.assign({arrow:!0},e,i,su(e,i));let{when:t}=this.options;this.options.classes=this._getClassOptions(i),this.destroy(),this.id=this.options.id||`step-${ha()}`,t&&Object.keys(t).forEach(r=>{this.on(r,t[r],this)})}_setupElements(){Ve(this.el)||this.destroy(),this.el=this._createTooltipContent(),this.options.advanceOn&&Tm(this),au(this)}_show(){this.trigger("before-show"),this._resolveAttachToOptions(),this._setupElements(),this.tour.modal||this.tour._setupModal(),this.tour.modal.setupForStep(this),this._styleTargetElementForStep(this),this.el.hidden=!1,this.options.scrollTo&&setTimeout(()=>{this._scrollTo(this.options.scrollTo)}),this.el.hidden=!1;let i=this.shepherdElementComponent.getElement(),e=this.target||document.body;e.classList.add(`${this.classPrefix}shepherd-enabled`),e.classList.add(`${this.classPrefix}shepherd-target`),i.classList.add("shepherd-enabled"),this.trigger("show")}_styleTargetElementForStep(i){let e=i.target;e&&(i.options.highlightClass&&e.classList.add(i.options.highlightClass),e.classList.remove("shepherd-target-click-disabled"),i.options.canClickTarget===!1&&e.classList.add("shepherd-target-click-disabled"))}_updateStepTargetOnHide(){let i=this.target||document.body;this.options.highlightClass&&i.classList.remove(this.options.highlightClass),i.classList.remove("shepherd-target-click-disabled",`${this.classPrefix}shepherd-enabled`,`${this.classPrefix}shepherd-target`)}};function Uu(o){if(o){let{steps:i}=o;i.forEach(e=>{e.options&&e.options.canClickTarget===!1&&e.options.attachTo&&e.target instanceof HTMLElement&&e.target.classList.remove("shepherd-target-click-disabled")})}}function Zu({width:o,height:i,x:e=0,y:t=0,r=0}){let{innerWidth:n,innerHeight:a}=window,{topLeft:s=0,topRight:p=0,bottomRight:d=0,bottomLeft:S=0}=typeof r=="number"?{topLeft:r,topRight:r,bottomRight:r,bottomLeft:r}:r;return`M${n},${a}H0V0H${n}V${a}ZM${e+s},${t}a${s},${s},0,0,0-${s},${s}V${i+t-S}a${S},${S},0,0,0,${S},${S}H${o+e-d}a${d},${d},0,0,0,${d}-${d}V${t+p}a${p},${p},0,0,0-${p}-${p}Z`}function Qu(o){let i,e,t,r,n;return{c(){i=Fc("svg"),e=Fc("path"),fe(e,"d",o[2]),fe(i,"class",t=`${o[1]?"shepherd-modal-is-visible":""} shepherd-modal-overlay-container`)},m(a,s){ht(a,i,s),bi(i,e),o[11](i),r||(n=vn(i,"touchmove",o[3]),r=!0)},p(a,[s]){s&4&&fe(e,"d",a[2]),s&2&&t!==(t=`${a[1]?"shepherd-modal-is-visible":""} shepherd-modal-overlay-container`)&&fe(i,"class",t)},i:lt,o:lt,d(a){a&&mt(i),o[11](null),r=!1,n()}}}function cp(o){if(!o)return null;let e=o instanceof HTMLElement&&window.getComputedStyle(o).overflowY;return e!=="hidden"&&e!=="visible"&&o.scrollHeight>=o.clientHeight?o:cp(o.parentElement)}function Yu(o,i){let e=o.getBoundingClientRect(),t=e.y||e.top,r=e.bottom||t+e.height;if(i){let a=i.getBoundingClientRect(),s=a.y||a.top,p=a.bottom||s+a.height;t=Math.max(t,s),r=Math.min(r,p)}let n=Math.max(r-t,0);return{y:t,height:n}}function Ju(o,i,e){let{element:t,openingProperties:r}=i;ha();let n=!1,a,s;d();let p=()=>t;function d(){e(4,r={width:0,height:0,x:0,y:0,r:0})}function S(){e(1,n=!1),D()}function _(k=0,E=0,Q,Oe){if(Oe){let{y:Xe,height:vt}=Yu(Oe,Q),{x:et,width:_t,left:xe}=Oe.getBoundingClientRect();e(4,r={width:_t+k*2,height:vt+k*2,x:(et||xe)-k,y:Xe-k,r:E})}else d()}function y(k){D(),k.tour.options.useModalOverlay?(U(k),b()):S()}function b(){e(1,n=!0)}let O=k=>{k.preventDefault()},j=k=>{k.stopPropagation()};function V(){window.addEventListener("touchmove",O,{passive:!1})}function D(){a&&(cancelAnimationFrame(a),a=void 0),window.removeEventListener("touchmove",O,{passive:!1})}function U(k){let{modalOverlayOpeningPadding:E,modalOverlayOpeningRadius:Q}=k.options,Oe=cp(k.target),Xe=()=>{a=void 0,_(E,Q,Oe,k.target),a=requestAnimationFrame(Xe)};Xe(),V()}function H(k){wi[k?"unshift":"push"](()=>{t=k,e(0,t)})}return o.$$set=k=>{"element"in k&&e(0,t=k.element),"openingProperties"in k&&e(4,r=k.openingProperties)},o.$$.update=()=>{o.$$.dirty&16&&e(2,s=Zu(r))},[t,n,s,j,r,p,d,S,_,y,b,H]}var ua=class extends gt{constructor(i){super(),jt(this,i,Ju,Qu,kt,{element:0,openingProperties:4,getElement:5,closeModalOpening:6,hide:7,positionModal:8,setupForStep:9,show:10})}get getElement(){return this.$$.ctx[5]}get closeModalOpening(){return this.$$.ctx[6]}get hide(){return this.$$.ctx[7]}get positionModal(){return this.$$.ctx[8]}get setupForStep(){return this.$$.ctx[9]}get show(){return this.$$.ctx[10]}},co=new Di,da=class extends Di{constructor(i={}){super(i),Hc(this);let e={exitOnEsc:!0,keyboardNavigation:!0};return this.options=Object.assign({},e,i),this.classPrefix=Uc(this.options.classPrefix),this.steps=[],this.addSteps(this.options.steps),["active","cancel","complete","inactive","show","start"].map(r=>{(n=>{this.on(n,a=>{a=a||{},a.tour=this,co.trigger(n,a)})})(r)}),this._setTourID(),this}addStep(i,e){let t=i;return t instanceof ki?t.tour=this:t=new ki(this,t),Ve(e)?this.steps.push(t):this.steps.splice(e,0,t),t}addSteps(i){return Array.isArray(i)&&i.forEach(e=>{this.addStep(e)}),this}back(){let i=this.steps.indexOf(this.currentStep);this.show(i-1,!1)}cancel(){return We(this,null,function*(){if(this.options.confirmCancel){let i=typeof this.options.confirmCancel=="function",e=this.options.confirmCancelMessage||"Are you sure you want to stop the tour?";(i?yield this.options.confirmCancel():window.confirm(e))&&this._done("cancel")}else this._done("cancel")})}complete(){this._done("complete")}getById(i){return this.steps.find(e=>e.id===i)}getCurrentStep(){return this.currentStep}hide(){let i=this.getCurrentStep();if(i)return i.hide()}isActive(){return co.activeTour===this}next(){let i=this.steps.indexOf(this.currentStep);i===this.steps.length-1?this.complete():this.show(i+1,!0)}removeStep(i){let e=this.getCurrentStep();this.steps.some((t,r)=>{if(t.id===i)return t.isOpen()&&t.hide(),t.destroy(),this.steps.splice(r,1),!0}),e&&e.id===i&&(this.currentStep=void 0,this.steps.length?this.show(0):this.cancel())}show(i=0,e=!0){let t=Ri(i)?this.getById(i):this.steps[i];t&&(this._updateStateBeforeShow(),Oo(t.options.showOn)&&!t.options.showOn()?this._skipStep(t,e):(this.trigger("show",{step:t,previous:this.currentStep}),this.currentStep=t,t.show()))}start(){this.trigger("start"),this.focusedElBeforeOpen=document.activeElement,this.currentStep=null,this._setupModal(),this._setupActiveTour(),this.next()}_done(i){let e=this.steps.indexOf(this.currentStep);if(Array.isArray(this.steps)&&this.steps.forEach(t=>t.destroy()),Uu(this),this.trigger(i,{index:e}),co.activeTour=null,this.trigger("inactive",{tour:this}),this.modal&&this.modal.hide(),(i==="cancel"||i==="complete")&&this.modal){let t=document.querySelector(".shepherd-modal-overlay-container");t&&t.remove()}ga(this.focusedElBeforeOpen)&&this.focusedElBeforeOpen.focus()}_setupActiveTour(){this.trigger("active",{tour:this}),co.activeTour=this}_setupModal(){this.modal=new ua({target:this.options.modalContainer||document.body,props:{classPrefix:this.classPrefix,styles:this.styles}})}_skipStep(i,e){let t=this.steps.indexOf(i);if(t===this.steps.length-1)this.complete();else{let r=e?t+1:t-1;this.show(r,e)}}_updateStateBeforeShow(){this.currentStep&&this.currentStep.hide(),this.isActive()||this._setupActiveTour()}_setTourID(){let i=this.options.tourName||"tour";this.id=`${i}--${ha()}`}},Ku=typeof window>"u",fn=class{constructor(){}};Ku?Object.assign(co,{Tour:fn,Step:fn}):Object.assign(co,{Tour:da,Step:ki});function Xu(o){return o.offsetWidth===0&&o.offsetHeight===0}function ed(o){let{classes:i,disabled:e,label:t,secondary:r,type:n,text:a}=o,s=["back","cancel","next"];if(!n)return o;if(s.indexOf(n)===-1)throw new Error("'type' property must be one of 'back', 'cancel', or 'next'");return{action:this[n].bind(this),classes:i,disabled:e,label:t,secondary:r,text:a}}var pp=(()=>{class o{constructor(){this.confirmCancel=!1,this.confirmCancelMessage=null,this.defaultStepOptions={},this.errorTitle=null,this.isActive=!1,this.keyboardNavigation=!0,this.messageForUser=null,this.modal=!1,this.requiredElements=[],this.tourName=void 0,this.tourObject=null,this.exitOnEsc=!0}back(){this.tourObject.back()}cancel(){this.tourObject.cancel()}complete(){this.tourObject.complete()}hide(){this.tourObject.hide()}next(){this.tourObject.next()}show(e){this.tourObject.show(e)}start(){this.isActive=!0,this.tourObject.start()}onTourFinish(e){this.isActive=!1}addSteps(e){this._initialize();let t=this.tourObject;if(!(!e||!Array.isArray(e)||e.length===0)){if(!this.requiredElementsPresent()){t.addStep({buttons:[{text:"Exit",action:t.cancel}],id:"error",title:this.errorTitle,text:[this.messageForUser]});return}e.forEach(r=>{r.buttons&&(r.buttons=r.buttons.map(ed.bind(this),this)),t.addStep(r)})}}requiredElementsPresent(){let e=!0;return this.requiredElements.forEach(t=>{let r=document.querySelector(t.selector);e&&(!r||Xu(r))&&(e=!1,this.errorTitle=t.title,this.messageForUser=t.message)}),e}_initialize(){let e=new co.Tour({confirmCancel:this.confirmCancel,confirmCancelMessage:this.confirmCancelMessage,defaultStepOptions:this.defaultStepOptions,keyboardNavigation:this.keyboardNavigation,tourName:this.tourName,useModalOverlay:this.modal,exitOnEsc:this.exitOnEsc});e.on("complete",this.onTourFinish.bind(this,"complete")),e.on("cancel",this.onTourFinish.bind(this,"cancel")),this.tourObject=e}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275prov=K({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var _n=(()=>{class o{http;configService;jsonURL;allToursOptions;constructor(e,t){this.http=e,this.configService=t,this.jsonURL=this.getPathToConfigFile()}loadConfigTour(){this.getJSON().subscribe(e=>{this.allToursOptions=e},()=>{throw new Error("Problem with Interactive tour configuration file: interactiveTour.json not find. Check if the file and is path is set correctly.")})}getPathToConfigFile(){return this.configService.getConfig("interactiveTour.pathToConfigFile")||"./config/interactiveTour.json"}getJSON(){return this.http.get(this.jsonURL).pipe(gs(e=>{throw e.error.caught=!0,e}))}getTourOptionData(e){if(this.allToursOptions===void 0)return;let t=e;return t=t.replace(/\s/g,""),this.allToursOptions[t]}static \u0275fac=function(t){return new(t||o)(B(bt),B(ne))};static \u0275prov=K({token:o,factory:o.\u0275fac})}return o})();var Cn=(()=>{class o{configService;mediaService;languageService;interactiveTourLoader;shepherdService;previousStep;nextIndex=1;constructor(e,t,r,n,a){this.configService=e,this.mediaService=t,this.languageService=r,this.interactiveTourLoader=n,this.shepherdService=a,this.isAppHaveTour()&&this.interactiveTourLoader.loadConfigTour()}isAppHaveTour(){let e=this.configService.getConfig("interactiveTour.activateInteractiveTour");return e===void 0?!0:e}isToolHaveTourConfig(e){return this.interactiveTourLoader.getTourOptionData(e)!==void 0}disabledTourButton(e){let t=this.interactiveTourLoader.getTourOptionData(e);if(t?.conditions){for(let r of t.conditions)if(document.querySelector(r)===null)return!0}return!1}isMobile(){return this.mediaService.isMobile()}isTourDisplayInMobile(){let e=this.configService.getConfig("interactiveTour.tourInMobile");return e===void 0?!0:e}getButtons(e){return e==="noBackButton"?[{classes:"shepherd-button-primary",text:this.languageService.translate.instant("igo.common.interactiveTour.nextButton"),type:"next"}]:e==="first"?[{classes:"shepherd-button-secondary",text:this.languageService.translate.instant("igo.common.interactiveTour.exitButton"),type:"cancel"},{classes:"shepherd-button-primary",text:this.languageService.translate.instant("igo.common.interactiveTour.nextButton"),type:"next"}]:e==="last"?[{classes:"shepherd-button-secondary",text:this.languageService.translate.instant("igo.common.interactiveTour.backButton"),type:"back"},{classes:"shepherd-button-primary",text:this.languageService.translate.instant("igo.common.interactiveTour.exitButton"),type:"cancel"}]:[{classes:"shepherd-button-secondary",text:this.languageService.translate.instant("igo.common.interactiveTour.backButton"),type:"back"},{classes:"shepherd-button-primary",text:this.languageService.translate.instant("igo.common.interactiveTour.nextButton"),type:"next"}]}getAction(e){return{click:"click"}[e.toLowerCase()]}addProgress(){let e=this,t=0,r=21,n=setInterval(()=>{if(e.getCurrentStep())if(e.getCurrentStep().options.attachTo.element&&!document.querySelector(e.getCurrentStep().options.attachTo.element)){e.cancel(),clearInterval(n);return}else{let a=e.getCurrentStep().getElement();a&&a.querySelectorAll(".shepherd-content, .shepherd-text").forEach(d=>{d.classList.add("mat-typography")});let s=a?a.querySelector(".shepherd-header"):void 0;if(t++,(s||t>r)&&clearInterval(n),s){let p=e.steps,d=document.createElement("span");d.className="shepherd-progress",d.innerText=`${p.indexOf(e.getCurrentStep())+1}/${p.length}`,s.insertBefore(d,a.querySelector(".shepherd-cancel-icon"))}}},100)}checkNext(e,t,r){if(t.getCurrentStep()){if(t.getCurrentStep().options.attachTo.element&&document.querySelector(t.getCurrentStep().options.attachTo.element)){t.complete();return}if(e.index===t.steps.length-1){t.complete();return}t.steps.splice(e.index,1);let n=t.steps[e.index];n.options.attachTo.element&&!document.querySelector(n.options.attachTo.element)?r.checkNext(e,t,r):(t._setupModal(),t.show(n.id))}}executeAction(e,t){if(!t||t.condition&&(t.condition.charAt(0)==="!"&&document.querySelector(t.condition.slice(1))||t.condition.charAt(0)!=="!"&&!document.querySelector(t.condition)))return;let r=document.querySelector(t.element||e.element),n=this.getAction(t.action);r&&n&&r[n]()}executeActionPromise(e,t){return new Promise(r=>{if(this.executeAction(e,t),!t||!t.waitFor){r();return}let n=0,a=t.maxWait?t.maxWait/100:20,s=setInterval(()=>{n++,(n>a||document.querySelector(t.waitFor))&&(clearInterval(s),r())},100)})}getShepherdSteps(e){let t=[],r=0;for(let n of e.steps){let a=n.position??e.position;t.push({attachTo:{element:n.element,on:a},floatingUIOptions:{middleware:[a==="auto"&&Tc(),xc({mainAxis:15})].filter(Boolean)},beforeShowPromise:()=>Promise.all([this.executeActionPromise(this.previousStep,this.previousStep?this.previousStep.beforeChange:void 0),this.executeActionPromise(n,n.beforeShow)]),buttons:this.getButtons(r===0?"first":r+1===e.steps.length?"last":e.steps[r].noBackButton?"noBackButton":void 0),classes:n.class,highlightClass:n.highlightClass,scrollTo:n.scrollToElement||e.scrollToElement||!0,canClickTarget:n.disableInteraction?!n.disableInteraction:void 0,title:this.languageService.translate.instant(n.title||e.title),text:[this.languageService.translate.instant(n.text)],when:{show:()=>{this.executeAction(n,n.onShow)},hide:()=>{this.previousStep=n,this.executeAction(n,n.onHide)}}}),r++}return t}startTour(e){let t=this.interactiveTourLoader.getTourOptionData(e);this.shepherdService.defaultStepOptions={classes:t.class,highlightClass:t.highlightClass,canClickTarget:t.disableInteraction?!t.disableInteraction:!0,cancelIcon:{enabled:!0}};let r=this.getShepherdSteps(t);this.shepherdService.modal=!0,this.shepherdService.confirmCancel=!1,this.shepherdService.addSteps(r),this.shepherdService.tourObject.on("show",this.addProgress),this.shepherdService.tourObject.on("cancel",n=>{this.checkNext(n,this.shepherdService.tourObject,this)}),this.shepherdService.start()}static \u0275fac=function(t){return new(t||o)(B(ne),B(de),B(re),B(_n),B(pp))};static \u0275prov=K({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();function rd(o,i){if(o&1){let e=$();m(0,"button",3),g(1,"translate"),g(2,"translate"),M("click",function(){L(e);let r=C(2);return A(r.startInteractiveTour())}),v(3,"igo-icon",4),u()}if(o&2){let e=C(2);l("ngClass",e.getClass())("matTooltip",e.disabledTourButton?h(1,4,"igo.common.interactiveTour.disaledTooltipTourToolButton"):h(2,6,"igo.common.interactiveTour.tooltipTourToolButton"))("disabled",e.disabledTourButton),c(3),l("icon",e.presentationIcon)}}function nd(o,i){if(o&1){let e=$();m(0,"button",5),M("click",function(){L(e);let r=C(2);return A(r.startInteractiveTour())}),x(1),g(2,"translate"),g(3,"async"),g(4,"translate"),v(5,"mat-icon",6),g(6,"translate"),g(7,"translate"),u()}if(o&2){let e=C(2);l("ngClass",e.getClass())("disabled",e.disabledTourButton),c(),Vo(" ",h(2,6,"igo.common.interactiveTour.buttonTitle")," ",h(4,10,h(3,8,e.discoverTitleInLocale$))," "),c(4),l("svgIcon",e.presentationIcon.name)("matTooltip",e.disabledTourButton?h(6,12,"igo.common.interactiveTour.disaledTooltipTourToolButton"):h(7,14,"igo.common.interactiveTour.tooltipTourToolButton"))}}function ad(o,i){if(o&1&&(it(0),F(1,rd,4,8,"button",2)(2,nd,8,16,"ng-template",null,0,ge),rt()),o&2){let e=Ee(3),t=C();c(),l("ngIf",t.styleButton==="icon")("ngIfElse",e)}}var bn=(()=>{class o{interactiveTourService;toolService;iconService;presentationIcon=js;tourToStart="";styleButton;discoverTitleInLocale$=So("IGO");getClass(){return{"tour-button-tool-icon":this.styleButton==="icon","tour-button-tool":this.styleButton==="raised"}}get toolbox(){return this.toolService.toolbox}getTourToStart(){return this.tourToStart?this.tourToStart:this.activeToolName}get activeToolName(){if(this.toolbox)return this.isActiveTool?this.toolbox.activeTool$.getValue().name:"global"}get isActiveTool(){if(this.toolbox)return this.toolbox.activeTool$.getValue()!==void 0}get isToolHaveTour(){return this.activeToolName==="about"&&!this.tourToStart?!1:this.interactiveTourService.isToolHaveTourConfig(this.getTourToStart())}get showTourButton(){if(this.isToolHaveTour===!1)return!1;let e;return!(this.interactiveTourService.isMobile()&&(e=this.isTourDisplayInMobile,e===!1))}get isTourDisplayInMobile(){return this.interactiveTourService.isTourDisplayInMobile()}get disabledTourButton(){return this.interactiveTourService.disabledTourButton(this.activeToolName)}constructor(e,t,r){this.interactiveTourService=e,this.toolService=t,this.iconService=r,this.iconService.registerSvg(this.presentationIcon)}startInteractiveTour(){let e=this.getTourToStart();if(e)this.interactiveTourService.startTour(e);else return}static \u0275fac=function(t){return new(t||o)(f(Cn),f(mi),f($s))};static \u0275cmp=w({type:o,selectors:[["igo-interactive-tour"]],inputs:{tourToStart:"tourToStart",styleButton:"styleButton",discoverTitleInLocale$:"discoverTitleInLocale$"},standalone:!0,features:[T],decls:1,vars:1,consts:[["raisedButton",""],[4,"ngIf"],["color","primary","mat-icon-button","","tooltip-position","below","matTooltipShowDelay","500",3,"ngClass","matTooltip","disabled","click",4,"ngIf","ngIfElse"],["color","primary","mat-icon-button","","tooltip-position","below","matTooltipShowDelay","500",3,"click","ngClass","matTooltip","disabled"],["iconPositionEnd","",3,"icon"],["color","primary","mat-raised-button","","tooltip-position","below","matTooltipShowDelay","500",3,"click","ngClass","disabled"],["iconPositionEnd","",3,"svgIcon","matTooltip"]],template:function(t,r){t&1&&F(0,ad,4,2,"ng-container",1),t&2&&l("ngIf",r.showTourButton)},dependencies:[Y,He,qt,wt,ws,Jt,Yt,Me,Te,ie,me,ce,Vs],styles:[`igo-interactive-tour>button.mat-mdc-raised-button.tour-button-tool-icon{box-shadow:none}.shepherd-has-title .shepherd-content .shepherd-header{padding:.5em .75em}.shepherd-title{margin:0!important;font-weight:revert!important}.shepherd-progress{margin-right:15px;color:#737373}.shepherd-text{font-size:14px!important}.shepherd-element{border:1px solid;border-color:#474747;box-shadow:4px 5px #65656599}
/*# sourceMappingURL=interactive-tour.component-NVSRFHAV.css.map */
`],encapsulation:2})}return o})();var iS=(()=>{class o{static \u0275fac=function(t){return new(t||o)};static \u0275mod=ys({type:o});static \u0275inj=hs({providers:[Cn,_n],imports:[bn]})}return o})();var sd=o=>({version:o});function ld(o,i){if(o&1){let e=$();m(0,"button",7),g(1,"translate"),M("click",function(){L(e);let r=C();return A(r.openGuide())}),m(2,"span"),x(3),g(4,"translate"),u(),m(5,"mat-icon"),x(6,"description"),u()()}if(o&2){let e=C();l("disabled",e.loading)("matTooltip",h(1,3,"igo.integration.aboutTool.trainingGuideTooltip")),c(3),ye(h(4,5,"igo.integration.aboutTool.trainingGuide"))}}function cd(o,i){if(o&1&&(m(0,"button",8),g(1,"translate"),m(2,"span"),x(3),g(4,"translate"),u(),m(5,"mat-icon"),x(6,"description"),u()()),o&2){let e=C(),t=Ee(5);l("disabled",e.loading)("matTooltip",h(1,4,"igo.integration.aboutTool.trainingGuideTooltip"))("matMenuTriggerFor",t),c(3),ye(h(4,6,"igo.integration.aboutTool.trainingGuide"))}}function pd(o,i){if(o&1){let e=$();m(0,"button",9),M("click",function(){let r=L(e).$implicit,n=C();return A(n.openGuide(r))}),x(1),u()}if(o&2){let e=i.$implicit,t=C();c(),W(" ",t.formatFileName(e)," ")}}function md(o,i){if(o&1&&(v(0,"igo-custom-html",6),g(1,"translate")),o&2){let e=C();l("html",h(1,1,e.headerHtml))}}var Ma=class Ia{configService;auth;http;cdRef;languageService;configOptions;get headerHtml(){return this._headerHtml}set headerHtml(i){this._headerHtml=Array.isArray(i)?i.join(`
`):i}get html(){return this._html}set html(i){this._html=Array.isArray(i)?i.join(`
`):i}_discoverTitleInLocale="IGO";discoverTitleInLocale$=So(this._discoverTitleInLocale);get discoverTitleInLocale(){return this._discoverTitleInLocale}set discoverTitleInLocale(i){this._discoverTitleInLocale=i,this.discoverTitleInLocale$=So(i)}trainingGuideURLs;effectiveVersion;_html="igo.integration.aboutTool.html";_headerHtml;baseUrlProfil;baseUrlGuide;loading=!1;constructor(i,e,t,r,n){this.configService=i,this.auth=e,this.http=t,this.cdRef=r,this.languageService=n,this.headerHtml=this.languageService.translate.instant("igo.integration.aboutTool.headerHtml"),this.configOptions=this.configService.getConfigs();let a=this.configOptions.version;this.effectiveVersion=a?.app||a?.lib||Bs.lib,this.baseUrlProfil=this.configOptions.storage?.url,this.baseUrlGuide=this.configOptions.depot?.url+this.configOptions.depot?.guideUrl}ngOnInit(){this.auth.authenticated&&this.configOptions.context?.url?this.http.get(this.baseUrlProfil).subscribe(i=>{let e=i;this.trainingGuideURLs=e.guides,this.cdRef.detectChanges()}):this.auth.authenticated&&!this.configOptions.context?.url&&this.configOptions.depot?.trainingGuides&&(this.trainingGuideURLs=this.configOptions.depot?.trainingGuides)}openGuide(i){this.loading=!0;let e=i?this.baseUrlGuide+i+"?":this.baseUrlGuide+this.trainingGuideURLs[0]+"?";this.http.get(e,{responseType:"blob"}).subscribe(()=>{this.loading=!1,window.open(e,"_blank"),this.cdRef.detectChanges()})}formatFileName(i){i=i.split("_").join(" ");let e=i.indexOf(".");return i=i.slice(0,e),i}static \u0275fac=function(e){return new(e||Ia)(f(ne),f(Be),f(bt),f(le),f(re))};static \u0275cmp=w({type:Ia,selectors:[["igo-about-tool"]],inputs:{headerHtml:"headerHtml",html:"html",discoverTitleInLocale:"discoverTitleInLocale",trainingGuideURLs:"trainingGuideURLs"},standalone:!0,features:[T],decls:10,vars:11,consts:[["menu","matMenu"],["mat-raised-button","","tourToStart","global","menuIsOpen","true","styleButton","raised",3,"discoverTitleInLocale$"],["class","training-guide-button","mat-raised-button","","tooltip-position","below","matTooltipShowDelay","500",3,"disabled","matTooltip","click",4,"ngIf"],["class","training-guide-button","mat-raised-button","","tooltip-position","below","matTooltipShowDelay","500",3,"disabled","matTooltip","matMenuTriggerFor",4,"ngIf"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["class","mat-typography",3,"html",4,"ngIf"],[1,"mat-typography",3,"html"],["mat-raised-button","","tooltip-position","below","matTooltipShowDelay","500",1,"training-guide-button",3,"click","disabled","matTooltip"],["mat-raised-button","","tooltip-position","below","matTooltipShowDelay","500",1,"training-guide-button",3,"disabled","matTooltip","matMenuTriggerFor"],["mat-menu-item","",3,"click"]],template:function(e,t){e&1&&(v(0,"p")(1,"igo-interactive-tour",1),F(2,ld,7,7,"button",2)(3,cd,7,8,"button",3),m(4,"mat-menu",null,0),F(6,pd,2,1,"button",4),u(),F(7,md,2,3,"igo-custom-html",5),v(8,"igo-custom-html",6),g(9,"translate")),e&2&&(c(),l("discoverTitleInLocale$",t.discoverTitleInLocale$),c(),l("ngIf",t.auth.authenticated&&t.trainingGuideURLs&&t.trainingGuideURLs.length===1),c(),l("ngIf",t.auth.authenticated&&t.trainingGuideURLs&&t.trainingGuideURLs.length>1),c(3),l("ngForOf",t.trainingGuideURLs),c(),l("ngIf",t.headerHtml!==""),c(),l("html",Yi(9,6,t.html,bs(9,sd,t.effectiveVersion))))},dependencies:[bn,Y,He,qt,Jt,Yt,Me,Te,cl,sl,al,ll,Ct,Qs,me,ce],styles:[`igo-interactive-tour[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:20px}.training-guide-button[_ngcontent-%COMP%]{margin-left:5px;background-color:#1976d2;color:#fff;padding:0 12px}
/*# sourceMappingURL=about-tool.component-MWGVBRNF.css.map */`]})};Ma=G([z({name:"about",title:"igo.integration.tools.about",icon:"help"}),q("design:paramtypes",[ne,Be,bt,le,re])],Ma);var I=(()=>{class o{mapService;projectionService;storageService;configService;get showAllLegendsValue(){return this._legendToolShowAll}set showAllLegendsValue(e){this._legendToolShowAll=e}_legendToolShowAll;get map(){return this._map}_map;constructor(e,t,r,n){this.mapService=e,this.projectionService=t,this.storageService=r,this.configService=n,this._map=new J({controls:{scaleLine:!0,attribution:{collapsed:!0}}},this.storageService,this.configService),this.mapService.setMap(this.map)}static \u0275fac=function(t){return new(t||o)(B(Mt),B(fl),B(he),B(ne))};static \u0275prov=K({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var go=(()=>{class o{get catalogStore(){return this._catalogStore}_catalogStore;catalogItemsStores=new Map;constructor(e){this._catalogStore=new $e([]),e.authenticate$.subscribe(()=>{this.clearCatalogItemsStores()})}getCatalogItemsStore(e){return this.catalogItemsStores.get(e.id)}setCatalogItemsStore(e,t){this.catalogItemsStores.set(e.id,t)}clearCatalogItemsStores(){this.catalogItemsStores.clear()}static \u0275fac=function(t){return new(t||o)(B(Be))};static \u0275prov=K({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();function ud(o,i){if(o&1&&v(0,"igo-catalog-browser",1),o&2){let e=i.ngIf,t=C();l("catalog",t.catalog)("store",e)("map",t.map)("toggleCollapsedGroup",t.toggleCollapsedGroup)}}var Oa=class Ea{catalogService;catalogState;mapState;authService;catalog;store$=new P(void 0);catalog$$;toggleCollapsedGroup=!0;get map(){return this.mapState.map}constructor(i,e,t,r){this.catalogService=i,this.catalogState=e,this.mapState=t,this.authService=r}ngOnInit(){let e=this.catalogState.catalogStore.stateView.firstBy$(r=>r.state.selected===!0),t=this.authService.authenticate$;this.catalog$$=De([e,t]).subscribe(([r])=>{if(r===void 0)return;let n=r.entity;this.catalog=n,this.loadCatalogItems(this.catalog)})}ngOnDestroy(){this.catalog$$.unsubscribe()}loadCatalogItems(i){let e=this.catalogState.getCatalogItemsStore(i);if(e!==void 0){this.store$.next(e);return}e=new $e([]),this.catalogState.setCatalogItemsStore(i,e),this.catalogService.loadCatalogItems(i).pipe(ze(1)).subscribe(t=>{e.load(t),this.store$.next(e)})}static \u0275fac=function(e){return new(e||Ea)(f(Ot),f(go),f(I),f(Be))};static \u0275cmp=w({type:Ea,selectors:[["igo-catalog-browser-tool"]],inputs:{toggleCollapsedGroup:"toggleCollapsedGroup"},standalone:!0,features:[T],decls:2,vars:3,consts:[[3,"catalog","store","map","toggleCollapsedGroup",4,"ngIf"],[3,"catalog","store","map","toggleCollapsedGroup"]],template:function(e,t){e&1&&(F(0,ud,1,4,"igo-catalog-browser",0),g(1,"async")),e&2&&l("ngIf",h(1,1,t.store$))},dependencies:[Y,Jr,ie],encapsulation:2,changeDetection:0})};Oa=G([z({name:"catalogBrowser",title:"igo.integration.tools.catalog",parent:"catalog"}),q("design:paramtypes",[Ot,go,I,Be])],Oa);var Vi=function(o){return o.layer="layer",o.context="context",o}(Vi||{}),Je=function(o){return o.import="import",o.export="export",o}(Je||{}),be=(()=>{class o{importExportType$=new P(Vi.layer);selectedMode$=new P(Je.import);exportOptions$=new P(void 0);setImportExportType(e){this.importExportType$.next(e)}setMode(e){this.selectedMode$.next(e)}setsExportOptions(e){this.exportOptions$.next(e)}static \u0275fac=function(t){return new(t||o)};static \u0275prov=K({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var N=(()=>{class o{toolService;importExportState;get toolbox(){return this.toolService.toolbox}openSidenav$=new P(void 0);constructor(e,t){this.toolService=e,this.importExportState=t}toolToActivateFromOptions(e){if(e){if(e.tool==="importExport"){let t=this.importExportState.exportOptions$.value;t?(t.layers=e.options.layers,t.featureInMapExtent=e.options.featureInMapExtent):t={layers:e.options.layers,featureInMapExtent:e.options.featureInMapExtent},this.importExportState.setsExportOptions(t),this.importExportState.setMode(Je.export)}this.toolbox.getTool(e.tool)&&(this.toolbox.activateTool(e.tool),this.openSidenav$.next(!0))}}static \u0275fac=function(t){return new(t||o)(B(mi),B(be))};static \u0275prov=K({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var La=class Aa{catalogService;catalogState;toolState;storageService;get store(){return this.catalogState.catalogStore}addCatalogAllowed=!1;predefinedCatalogs=[];set selectedCatalogId(i){this.storageService.set("selectedCatalogId",i,_o.SESSION)}get currentTool(){return this.toolState.toolbox.getCurrentPreviousToolName()[1]}get lastTool(){return this.toolState.toolbox.getCurrentPreviousToolName()[0]}constructor(i,e,t,r){this.catalogService=i,this.catalogState=e,this.toolState=t,this.storageService=r}ngOnInit(){this.lastTool==="catalogBrowser"&&this.currentTool==="catalog"&&(this.selectedCatalogId=null),this.store.count===0&&this.loadCatalogs()}onCatalogSelectChange(i){i.selected!==!1&&this.toolState.toolbox.activateTool("catalogBrowser")}loadCatalogs(){this.catalogService.loadCatalogs().pipe(ze(1)).subscribe(i=>{this.store.clear(),this.store.load(i.concat(this.storageService.get("addedCatalogs")||[]))})}static \u0275fac=function(e){return new(e||Aa)(f(Ot),f(go),f(N),f(he))};static \u0275cmp=w({type:Aa,selectors:[["igo-catalog-library-tool"]],inputs:{addCatalogAllowed:"addCatalogAllowed",predefinedCatalogs:"predefinedCatalogs"},standalone:!0,features:[T],decls:1,vars:3,consts:[[3,"catalogSelectChange","predefinedCatalogs","addCatalogAllowed","store"]],template:function(e,t){e&1&&(m(0,"igo-catalog-library",0),M("catalogSelectChange",function(n){return t.onCatalogSelectChange(n)}),u()),e&2&&l("predefinedCatalogs",t.predefinedCatalogs)("addCatalogAllowed",t.addCatalogAllowed)("store",t.store)},dependencies:[Kr],encapsulation:2,changeDetection:0})};La=G([z({name:"catalog",title:"igo.integration.tools.catalog",icon:"library_add"}),q("design:paramtypes",[Ot,go,N,he])],La);var Fa=class Pa{toolState;constructor(i){this.toolState=i}submitSuccessed(){this.toolState.toolbox.activatePreviousTool()}static \u0275fac=function(e){return new(e||Pa)(f(N))};static \u0275cmp=w({type:Pa,selectors:[["igo-context-editor-tool"]],standalone:!0,features:[T],decls:1,vars:0,consts:[["igoContextEditBinding","",3,"submitSuccessed"]],template:function(e,t){e&1&&(m(0,"igo-context-edit",0),M("submitSuccessed",function(){return t.submitSuccessed()}),u())},dependencies:[Zl,Ql],encapsulation:2})};Fa=G([z({name:"contextEditor",title:"igo.integration.tools.contexts",icon:"star",parent:"contextManager"}),q("design:paramtypes",[N])],Fa);var Ra=class Da{toolState;mapState;toolToOpenOnContextChange="mapTools";get map(){return this.mapState.map}constructor(i,e){this.toolState=i,this.mapState=e}editContext(){this.toolState.toolbox.activateTool("contextEditor")}managePermissions(){this.toolState.toolbox.activateTool("contextPermissionManager")}static \u0275fac=function(e){return new(e||Da)(f(N),f(I))};static \u0275cmp=w({type:Da,selectors:[["igo-context-manager-tool"]],inputs:{toolToOpenOnContextChange:"toolToOpenOnContextChange"},standalone:!0,features:[T],decls:1,vars:1,consts:[["igoContextListBinding","",3,"edit","managePermissions","map"]],template:function(e,t){e&1&&(m(0,"igo-context-list",0),M("edit",function(){return t.editContext()})("managePermissions",function(){return t.managePermissions()}),u()),e&2&&l("map",t.map)},dependencies:[tn,on],encapsulation:2})};Ra=G([z({name:"contextManager",title:"igo.integration.tools.contexts",icon:"star"}),q("design:paramtypes",[N,I])],Ra);var Ba=class ka{static \u0275fac=function(e){return new(e||ka)};static \u0275cmp=w({type:ka,selectors:[["igo-context-permission-manager-tool"]],standalone:!0,features:[T],decls:1,vars:0,consts:[["igoContextPermissionsBinding",""]],template:function(e,t){e&1&&v(0,"igo-context-permissions",0)},dependencies:[Yl,Jl],encapsulation:2})};Ba=G([z({name:"contextPermissionManager",title:"igo.integration.tools.contexts",icon:"star",parent:"contextManager"})],Ba);var ho=(()=>{class o{keyword$=new P("");sortAlpha$=new P(void 0);onlyVisible$=new P(void 0);selectedTab$=new P(void 0);setKeyword(e){this.keyword$.next(e)}setSortAlpha(e){this.sortAlpha$.next(e)}setOnlyVisible(e){this.onlyVisible$.next(e)}setSelectedTab(e){this.selectedTab$.next(e)}getLayerListControls(){return{keyword:this.keyword$.value,onlyVisible:this.onlyVisible$.value,sortAlpha:this.sortAlpha$.value}}static \u0275fac=function(t){return new(t||o)};static \u0275prov=K({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var ja=class $a{mapState;layerListToolState;get map(){return this.mapState.map}get layerListControls(){return this.layerListToolState.getLayerListControls()}constructor(i,e){this.mapState=i,this.layerListToolState=e}static \u0275fac=function(e){return new(e||$a)(f(I),f(ho))};static \u0275cmp=w({type:$a,selectors:[["igo-context-share-tool"]],standalone:!0,features:[T],decls:1,vars:1,consts:[[3,"map"]],template:function(e,t){e&1&&v(0,"igo-share-map",0),e&2&&l("map",t.map)},dependencies:[Kl],encapsulation:2})};ja=G([z({name:"shareMap",title:"igo.integration.tools.shareMap",icon:"share"}),q("design:paramtypes",[I,ho])],ja);var $t=(()=>{class o{contextService;toolService;toolState;languageService;context$=new P(void 0);constructor(e,t,r,n){this.contextService=e,this.toolService=t,this.toolState=r,this.languageService=n,this.contextService.context$.subscribe(a=>{this.onContextChange(a)}),this.contextService.toolsChanged$.subscribe(a=>{this.updateTools(a)})}setContext(e){this.updateTools(e),this.context$.next(e)}updateTools(e){let t=this.toolState.toolbox,r=[];(e.tools||[]).forEach(a=>{let s=this.toolService.getTool(a.name);if(s===void 0)return;let p=Object.assign({},s.options||{},a.options||{}),d=Object.assign({},s,a,{options:p});r.push(d)}),r.forEach(a=>{if(a.parent){let s=r.findIndex(p=>p.name===a.parent);s!==-1&&(r[s].children=[],r[s].children.push(a.name))}}),t.setTools(r),t.setToolbar(e.toolbar||[]),this.contextService.setTools([].concat(r)),this.contextService.setToolbar(e.toolbar||[])}onContextChange(e){e!==void 0&&this.setContext(e)}static \u0275fac=function(t){return new(t||o)(B(Hl),B(mi),B(N),B(re))};static \u0275prov=K({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var yo=(()=>{class o{mapState;zoomToActiveRoute$=new zt;stopsStore=new Ir([]);stopsFeatureStore;routesFeatureStore;stepFeatureStore;debounceTime=200;constructor(e){this.mapState=e,this.stopsFeatureStore=new Or([],{map:this.mapState.map}),this.routesFeatureStore=new Er([],{map:this.mapState.map}),this.stepFeatureStore=new Lr([],{map:this.mapState.map}),this.mapState.map.layerController.all$.subscribe(()=>{this.mapState.map.layerController.getById("igo-direction-stops-layer")||(this.stopsStore.deleteMany(this.stopsStore.all()),this.stopsFeatureStore.deleteMany(this.stopsFeatureStore.all())),this.mapState.map.layerController.getById("igo-direction-route-layer")||this.routesFeatureStore.deleteMany(this.routesFeatureStore.all())})}static \u0275fac=function(t){return new(t||o)(B(I))};static \u0275prov=K({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var Ga=class za{directionState;mapState;languageService;messageService;storageService;contextState;authService;currentContextUri;get stopsStore(){return this.directionState.stopsStore}get debounceTime(){return this.directionState.debounceTime}get stopsFeatureStore(){return this.directionState.stopsFeatureStore}get routesFeatureStore(){return this.directionState.routesFeatureStore}get stepFeatureStore(){return this.directionState.stepFeatureStore}get zoomOnActiveRoute$(){return this.directionState.zoomToActiveRoute$}get authenticated$(){return this.authService.authenticate$}get map(){return this.mapState.map}constructor(i,e,t,r,n,a,s){this.directionState=i,this.mapState=e,this.languageService=t,this.messageService=r,this.storageService=n,this.contextState=a,this.authService=s}ngOnInit(){this.storageService.get("direction.warning.shown")||(this.messageService.info("igo.integration.directions.warning.message","igo.integration.directions.warning.title",{timeOut:2e4}),this.storageService.set("direction.warning.shown",!0,_o.SESSION)),this.contextState.context$.subscribe(e=>{this.authService.authenticated||(this.currentContextUri=e.uri)})}static \u0275fac=function(e){return new(e||za)(f(yo),f(I),f(re),f(Ie),f(he),f($t),f(Be))};static \u0275cmp=w({type:za,selectors:[["igo-directions-tool"]],standalone:!0,features:[T],decls:1,vars:8,consts:[[3,"contextUri","debounce","stopsStore","stopsFeatureStore","stepsFeatureStore","routesFeatureStore","zoomOnActiveRoute$","authenticated$"]],template:function(e,t){e&1&&v(0,"igo-directions",0),e&2&&l("contextUri",t.currentContextUri)("debounce",t.debounceTime)("stopsStore",t.stopsStore)("stopsFeatureStore",t.stopsFeatureStore)("stepsFeatureStore",t.stepFeatureStore)("routesFeatureStore",t.routesFeatureStore)("zoomOnActiveRoute$",t.zoomOnActiveRoute$)("authenticated$",t.authenticated$)},dependencies:[Sl,Pr],encapsulation:2})};Ga=G([z({name:"directions",title:"igo.integration.tools.directions",icon:"directions"}),q("design:paramtypes",[yo,I,re,Ie,he,$t,Be])],Ga);var wn=(()=>{class o{mapState;stores=[];layersID=[];drawControls=[];activeDrawingLayer;constructor(e){this.mapState=e,this.mapState.map.layerController.all$.subscribe(()=>{this.layersID.forEach(t=>{if(!this.mapState.map.layerController.getById(t)){let r=this.stores.find(a=>a.layer.id===t);r.deleteMany(r.all()),this.stores.splice(this.stores.indexOf(r,0),1),this.layersID.splice(this.layersID.indexOf(t,0),1);let n=this.drawControls.findIndex(a=>a[0]===t);this.drawControls.splice(n,1)}})});for(let t of this.stores)t=new Tt([],{map:this.mapState.map})}static \u0275fac=function(t){return new(t||o)(B(I))};static \u0275prov=K({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var Na=class qa{drawState;mapState;get stores(){return this.drawState.stores}get map(){return this.mapState.map}get layersID(){return this.drawState.layersID}get drawControls(){return this.drawState.drawControls}set drawControls(i){this.drawState.drawControls=i}get activeDrawingLayer(){return this.drawState.activeDrawingLayer}set activeDrawingLayer(i){this.drawState.activeDrawingLayer=i}addLayersID(i){this.layersID.push(i)}addDrawControls(i){this.drawControls=i}constructor(i,e){this.drawState=i,this.mapState=e}static \u0275fac=function(e){return new(e||qa)(f(wn),f(I))};static \u0275cmp=w({type:qa,selectors:[["igo-drawing-tool"]],standalone:!0,features:[T],decls:1,vars:4,consts:[[3,"layersIDEvent","drawControlsEvent","activeLayerChange","stores","map","activeDrawingLayer","drawControls"]],template:function(e,t){e&1&&(m(0,"igo-draw",0),M("layersIDEvent",function(n){return t.addLayersID(n)})("drawControlsEvent",function(n){return t.addDrawControls(n)})("activeLayerChange",function(n){return t.activeDrawingLayer=n}),u()),e&2&&l("stores",t.stores)("map",t.map)("activeDrawingLayer",t.activeDrawingLayer)("drawControls",t.drawControls)},dependencies:[Dr],encapsulation:2,changeDetection:0})};Na=G([z({name:"draw",title:"igo.integration.tools.draw",icon:"stylus_note"}),q("design:paramtypes",[wn,I])],Na);function hp(o="300ms",i="ease-in-out"){return Xi("toolSlideInOut",[or("enter",tr({transform:"translateX(100%)"})),ir("void => enter",er(o+" "+i))])}var xn=class Wa{mapState;get map(){return this.mapState.map}get layer(){for(let i of this.map.layerController.all)if(nt(i)&&this.map.layerController.isSelected(i))return i}animate="enter";constructor(i){this.mapState=i}static \u0275fac=function(e){return new(e||Wa)(f(I))};static \u0275cmp=w({type:Wa,selectors:[["igo-active-ogc-filter-tool"]],standalone:!0,features:[T],decls:1,vars:4,consts:[[3,"map","layer","header"]],template:function(e,t){e&1&&v(0,"igo-ogc-filterable-item",0),e&2&&l("map",t.map)("layer",t.layer)("header",!1)("@toolSlideInOut",t.animate)},dependencies:[wl],encapsulation:2,data:{animation:[hp()]}})};xn=G([z({name:"activeOgcFilter",title:"igo.integration.tools.ogcFilter",icon:"filter",parent:"mapTools"}),q("design:paramtypes",[I])],xn);function yp(o="300ms",i="ease-in-out"){return Xi("toolSlideInOut",[or("enter",tr({transform:"translateX(100%)"})),ir("void => enter",er(o+" "+i))])}var Tn=class Ha{mapState;get map(){return this.mapState.map}get layer(){for(let i of this.map.layerController.all)if(nt(i)&&this.map.layerController.isSelected(i))return i}animate="enter";constructor(i){this.mapState=i}static \u0275fac=function(e){return new(e||Ha)(f(I))};static \u0275cmp=w({type:Ha,selectors:[["igo-active-time-filter-tool"]],standalone:!0,features:[T],decls:1,vars:3,consts:[[3,"layer","header"]],template:function(e,t){e&1&&v(0,"igo-time-filter-item",0),e&2&&l("layer",t.layer)("header",!1)("@toolSlideInOut",t.animate)},dependencies:[Ml],encapsulation:2,data:{animation:[yp()]}})};Tn=G([z({name:"activeTimeFilter",title:"igo.integration.tools.timeFilter",icon:"history",parent:"mapTools"}),q("design:paramtypes",[I])],Tn);var Mn=class Ua{static \u0275fac=function(e){return new(e||Ua)};static \u0275cmp=w({type:Ua,selectors:[["igo-ogc-filter-tool"]],standalone:!0,features:[T],decls:1,vars:0,consts:[["igoOgcFilterableListBinding",""]],template:function(e,t){e&1&&v(0,"igo-ogc-filterable-list",0)},dependencies:[Rr,xl],encapsulation:2})};Mn=G([z({name:"ogcFilter",title:"igo.integration.tools.ogcFilter",icon:"filter"})],Mn);var Ti=(()=>{class o{igoStorageService;get storageService(){return this.igoStorageService}constructor(e){this.igoStorageService=e}static \u0275fac=function(t){return new(t||o)(B(he))};static \u0275prov=K({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var Sp=kp(jp());function Fo(o,i){o.entityStore.getStrategyOfType(Mr).setMotion(i.get("zoomAuto")?_e.Default:_e.None)}function Mi(o,i,e,t,r,n,a,s,p,d){let S=[{id:"zoomAuto",checkbox:!0,title:"igo.integration.workspace.zoomAuto.title",tooltip:"igo.integration.workspace.zoomAuto.tooltip",checkCondition:r,handler:()=>{Fo(o,a),a.set("zoomAuto",!a.get("zoomAuto"))}},{id:"filterInMapExtent",checkbox:!0,title:"igo.integration.workspace.inMapExtent.title",tooltip:kl(o),checkCondition:i,handler:()=>i.next(!i.value)},{id:"selectedOnly",checkbox:!0,title:"igo.integration.workspace.selected.title",tooltip:"igo.integration.workspace.selected.tooltip",checkCondition:e,handler:()=>e.next(!e.value)},{id:"clearselection",icon:"deselect",title:"igo.integration.workspace.clearSelection.title",tooltip:"igo.integration.workspace.clearSelection.tooltip",handler:y=>{y.entityStore.state.updateMany(y.entityStore.view.all(),{selected:!1})},args:[o],availability:y=>jl(y)},{id:"featureDownload",icon:"file_save",title:"igo.integration.workspace.download.title",tooltip:"igo.integration.workspace.download.tooltip",handler:y=>{let b=y.entityStore.getStrategyOfType(Xt),j=y.entityStore.getStrategyOfType(Cr).active?[y.layer.id]:[];d.toolToActivateFromOptions({tool:"importExport",options:{layers:[y.layer.id],featureInMapExtent:b.active,layersWithSelection:j}})},args:[o]},{id:"ogcFilter",icon:"filter_alt",title:"igo.integration.workspace.ogcFilter.title",tooltip:"igo.integration.workspace.ogcFilter.tooltip",handler:(y,b)=>{b.activateWidget(y,{map:b.map,layer:b.layer})},args:[t,o]},{id:"maximize",title:s.translate.instant("igo.integration.workspace.maximize"),tooltip:s.translate.instant("igo.integration.workspace.maximizeTooltip"),icon:"resize",display:()=>n.pipe(ot(y=>!y&&!p.isMobile())),handler:()=>{p.isMobile()||n.next(!0)}},{id:"standardExtent",title:s.translate.instant("igo.integration.workspace.standardExtent"),tooltip:s.translate.instant("igo.integration.workspace.standardExtentTooltip"),icon:"resize",display:()=>n.pipe(ot(y=>y&&!p.isMobile())),handler:()=>{n.next(!1)}},{id:"print",icon:"print",title:"igo.integration.workspace.print.title",tooltip:"igo.integration.workspace.print.tooltip",handler:y=>{let b=`${y.layer.title} (${fd(new Date,"YYYY-MM-DD-HH_mm")})`,O=new Ns({orientation:"landscape"}),j="{total_pages_count_string}";O.text(b,14,20),qs(O,{startY:25,tableWidth:"wrap",html:"#currentWorkspaceTable",horizontalPageBreak:!0,styles:{cellPadding:.5,minCellWidth:20,fontSize:6},didDrawPage:V=>{let D="Page "+O.getNumberOfPages();typeof O.putTotalPages=="function"&&(D=D+" / "+j),O.setFontSize(6);let U=O.internal.pageSize,H=U.height?U.height:U.getHeight();O.text(D,V.settings.margin.left,H-10)}}),typeof O.putTotalPages=="function"&&O.putTotalPages(j),O.save(`${b}.pdf`)},args:[o]}],_=o.layer.dataSource.options.ogcFilters?.enabled?S:S.filter(y=>y.id!=="ogcFilter");return _=o.layer.options.workspace.printable!==!1?S:S.filter(y=>y.id!=="print"),_}function fd(o,i){return(0,Sp.default)(o).format(i)}var vp=(()=>{class o{ogcFilterWidget;storageState;languageService;mediaService;toolState;maximize$;zoomAuto$=new P(!1);storageChange$$;get storageService(){return this.storageState.storageService}get zoomAuto(){return this.storageService.get("zoomAuto")}constructor(e,t,r,n,a){this.ogcFilterWidget=e,this.storageState=t,this.languageService=r,this.mediaService=n,this.toolState=a,this.maximize$=new P(this.storageService.get("workspaceMaximize"))}ngOnDestroy(){this.storageChange$$&&this.storageChange$$.unsubscribe()}loadActions(e,t,r){let n=this.buildActions(e,t,r);e.actionStore.load(n)}buildActions(e,t,r){return this.zoomAuto$.next(this.zoomAuto),this.storageChange$$=this.storageService.storageChange$.pipe(Bo(n=>n?.key!=="zoomAuto"||n?.event===Ho.CLEARED)).subscribe(()=>{this.zoomAuto$.next(this.zoomAuto),Fo(e,this.storageService)}),Mi(e,t,r,this.ogcFilterWidget,this.zoomAuto$,this.maximize$,this.storageService,this.languageService,this.mediaService,this.toolState)}static \u0275fac=function(t){return new(t||o)(B(Hr,8),B(Ti),B(re),B(de),B(N))};static \u0275prov=K({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var _p=(()=>{class o{storageState;languageService;toolState;mediaService;maximize$;zoomAuto$=new P(!1);storageChange$$;get storageService(){return this.storageState.storageService}get zoomAuto(){return this.storageService.get("zoomAuto")}constructor(e,t,r,n){this.storageState=e,this.languageService=t,this.toolState=r,this.mediaService=n,this.maximize$=new P(this.storageService.get("workspaceMaximize"))}ngOnDestroy(){this.storageChange$$&&this.storageChange$$.unsubscribe()}loadActions(e,t,r){let n=this.buildActions(e,t,r);e.actionStore.load(n)}buildActions(e,t,r){return this.zoomAuto$.next(this.zoomAuto),this.storageChange$$=this.storageService.storageChange$.pipe(Bo(n=>n?.key!=="zoomAuto"||n?.event===Ho.CLEARED)).subscribe(()=>{this.zoomAuto$.next(this.zoomAuto),Fo(e,this.storageService)}),Mi(e,t,r,void 0,this.zoomAuto$,this.maximize$,this.storageService,this.languageService,this.mediaService,this.toolState)}static \u0275fac=function(t){return new(t||o)(B(Ti),B(re),B(N),B(de))};static \u0275prov=K({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var Cp=(()=>{class o{ogcFilterWidget;storageState;languageService;mediaService;toolState;maximize$;selectOnlyCheckCondition$=new P(!1);zoomAuto$=new P(!1);storageChange$$;get storageService(){return this.storageState.storageService}get zoomAuto(){return this.storageService.get("zoomAuto")}constructor(e,t,r,n,a){this.ogcFilterWidget=e,this.storageState=t,this.languageService=r,this.mediaService=n,this.toolState=a,this.maximize$=new P(this.storageService.get("workspaceMaximize"))}ngOnDestroy(){this.storageChange$$&&this.storageChange$$.unsubscribe()}loadActions(e,t,r){let n=this.buildActions(e,t,r);e.actionStore.load(n)}buildActions(e,t,r){return this.zoomAuto$.next(this.zoomAuto),this.storageChange$$=this.storageService.storageChange$.pipe(Bo(n=>n?.key!=="zoomAuto"||n?.event===Ho.CLEARED)).subscribe(()=>{this.zoomAuto$.next(this.zoomAuto),Fo(e,this.storageService)}),Mi(e,t,r,this.ogcFilterWidget,this.zoomAuto$,this.maximize$,this.storageService,this.languageService,this.mediaService,this.toolState)}static \u0275fac=function(t){return new(t||o)(B(Hr,8),B(Ti),B(re),B(de),B(N))};static \u0275prov=K({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var Ke=(()=>{class o{featureActionsService;wfsActionsService;editionActionsService;storageService;workspacePanelExpanded=!1;workspaceEnabled$=new P(!1);rowsInMapExtentCheckCondition$=new P(!0);selectOnlyCheckCondition$=new P(!1);workspaceMaximize$;actionMaximize$$=[];rowsInMapExtentCheckCondition$$;selectOnlyCheckCondition$$;activeWorkspace$$;activeWorkspaceWidget$$;activeWorkspaceWidget$=new P(void 0);workspace$=new P(void 0);get store(){return this._store}_store;get workspaceSelection(){return this.workspace$.value?this.workspace$.value?.entityStore.stateView.manyBy(e=>e.state.selected===!0):[]}get workspaceSelection$(){return this.workspace$.value?this.workspace$.value?.entityStore?.stateView.manyBy$(e=>e.state.selected===!0):So([])}constructor(e,t,r,n){this.featureActionsService=e,this.wfsActionsService=t,this.editionActionsService=r,this.storageService=n,this.workspaceMaximize$=new P(this.storageService.get("workspaceMaximize")),this.initWorkspaces()}initWorkspaces(){this._store=new Ur([]),this._store.stateView.firstBy$(e=>e.state.active===!0).subscribe(e=>{let t=e?e.entity:void 0;this.workspace$.next(t)}),this._store.stateView.all$().subscribe(e=>{e.map(t=>{t.entity.actionStore.empty&&(t.entity instanceof $l?this.wfsActionsService.loadActions(t.entity,this.rowsInMapExtentCheckCondition$,this.selectOnlyCheckCondition$):t.entity instanceof Yr?this.featureActionsService.loadActions(t.entity,this.rowsInMapExtentCheckCondition$,this.selectOnlyCheckCondition$):t.entity instanceof Bl&&this.editionActionsService.loadActions(t.entity,this.rowsInMapExtentCheckCondition$,this.selectOnlyCheckCondition$))})}),this.actionMaximize$$.push(this.featureActionsService.maximize$.subscribe(e=>{this.setWorkspaceIsMaximized(e)})),this.actionMaximize$$.push(this.wfsActionsService.maximize$.subscribe(e=>{this.setWorkspaceIsMaximized(e)})),this.actionMaximize$$.push(this.editionActionsService.maximize$.subscribe(e=>{this.setWorkspaceIsMaximized(e)})),this.activeWorkspace$$=this.workspace$.subscribe(e=>{this.activeWorkspaceWidget$$!==void 0&&(this.activeWorkspaceWidget$$.unsubscribe(),this.activeWorkspaceWidget$$=void 0),e!==void 0&&(this.activeWorkspaceWidget$$=e.widget$.subscribe(t=>this.activeWorkspaceWidget$.next(t)))}),this.rowsInMapExtentCheckCondition$$=this.rowsInMapExtentCheckCondition$.subscribe(e=>{this._store.stateView.all().map(t=>{if(!t.entity.actionStore.empty){let r=t.entity.entityStore.getStrategyOfType(Xt);r&&(e?r.activate():r.deactivate())}})}),this.selectOnlyCheckCondition$$=this.selectOnlyCheckCondition$.subscribe(e=>{this._store.stateView.all().map(t=>{if(!t.entity.actionStore.empty){let r=t.entity.entityStore.getStrategyOfType(Cr);r&&(e?r.activate():r.deactivate())}})})}setWorkspaceIsMaximized(e){this.storageService.set("workspaceMaximize",e),this.workspaceMaximize$.next(e)}setActiveWorkspaceById(e){let t=this.store.all().find(r=>r.id===e);t&&this.store.activateWorkspace(t)}setActiveWorkspaceByTitle(e){let t=this.store.all().find(r=>r.title===e);t&&this.store.activateWorkspace(t)}ngOnDestroy(){this.teardownWorkspaces(),this.actionMaximize$$.map(e=>e.unsubscribe()),this.rowsInMapExtentCheckCondition$$&&this.selectOnlyCheckCondition$$.unsubscribe(),this.selectOnlyCheckCondition$$&&this.selectOnlyCheckCondition$$.unsubscribe()}teardownWorkspaces(){this.store.clear(),this.activeWorkspaceWidget$$!==void 0&&this.activeWorkspaceWidget$$.unsubscribe(),this.activeWorkspace$$!==void 0&&this.activeWorkspace$$.unsubscribe()}static \u0275fac=function(t){return new(t||o)(B(_p),B(Cp),B(vp),B(he))};static \u0275prov=K({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();function Sd(o,i){if(o&1&&(it(0),v(1,"igo-feature-details",3),rt()),o&2){let e=i.ngIf;c(),l("feature",e)}}var On=class Qa{matIconRegistry;spatialFilterService;layerService;mapState;messageService;languageService;importExportState;toolState;workspaceState;cdRef;get map(){return this.mapState.map}type;itemType=bo.Address;freehandDrawIsActive;layers=[];activeLayers=[];queryType;thematics;zone;zoneWithBuffer;buffer=0;iterator=1;selectedFeature$=new P(void 0);format=new Kt;store=new $e([]);spatialListStore=new $e([]);loading=!1;thematicLength=0;measureUnit=ni.Meters;unsubscribe$=new zt;defaultStyle;constructor(i,e,t,r,n,a,s,p,d,S){this.matIconRegistry=i,this.spatialFilterService=e,this.layerService=t,this.mapState=r,this.messageService=n,this.languageService=a,this.importExportState=s,this.toolState=p,this.workspaceState=d,this.cdRef=S}ngOnInit(){for(let i of this.map.layerController.all)i.title&&i.title.includes(this.languageService.translate.instant("igo.geo.spatialFilter.spatialFilter"))&&this.layers.push(i)}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}getOutputType(i){this.type=i,this.queryType=void 0}getOutputQueryType(i){this.queryType=i,this.queryType&&this.loadFilterList()}activateExportTool(){let i=[],e=new RegExp("^Zone \\d+");for(let t of this.layers)t.title.match(e)||i.push(t.id);this.importExportState.setMode(Je.export),this.importExportState.setsExportOptions({layers:i}),this.toolState.toolbox.activateTool("importExport")}activateWorkspace(i){let e;this.workspaceState.store.entities$.pipe(vo(this.unsubscribe$)).subscribe(()=>{if(!i&&this.activeLayers.length&&this.workspaceState.store.all().length>1){if(this.itemType===bo.Thematics&&this.thematics){for(let t of this.thematics)if(!t.zeroResults){e=this.activeLayers.find(r=>r.title.includes(t.name+" "+this.iterator.toString()));break}}else{let t="Adresses "+this.iterator.toString();this.activeLayers.forEach(r=>{r.title.includes(t)&&(e=r)})}e&&(this.workspaceState.workspacePanelExpanded=!0,this.workspaceState.setActiveWorkspaceById(e.id))}else i&&this.activeLayers.length&&this.workspaceState.store.all().length>1&&(this.selectWorkspaceEntity(i),this.map.ol.on("moveend",()=>{this.selectWorkspaceEntity(i)}))})}selectWorkspaceEntity(i){this.workspaceState.store.all().forEach(e=>{e.entityStore.state.updateAll({selected:!1}),e.title.includes(i.added[0].meta.title)&&(this.workspaceState.setActiveWorkspaceById(e.id),e.entityStore.state.updateMany(i.added,{selected:!0}))})}loadFilterList(){this.spatialFilterService.loadFilterList(this.queryType).pipe(vo(this.unsubscribe$)).subscribe(i=>{i.sort((e,t)=>e.properties.nom<t.properties.nom?-1:e.properties.nom>t.properties.nom?1:0),this.spatialListStore.clear(),this.spatialListStore.load(i)})}getOutputToggleSearch(){this.loadThematics()}getOutputClearSearch(){this.zone=void 0,this.queryType=void 0}clearMap(){this.map.layerController.remove(...this.layers),this.layers=[],this.activeLayers=[],this.thematicLength=0,this.iterator=1,this.type===Ae.Predefined&&(this.zone=void 0,this.queryType=void 0)}loadThematics(){this.loading=!0;let i=!0,e;(this.buffer===0||this.type===Ae.Point)&&this.tryAddFeaturesToMap([this.zone]),this.itemType!==bo.Thematics?e=[{name:""}]:e=this.thematics,this.measureUnit===ni.Kilometers&&this.type!==Ae.Point&&(this.buffer=this.buffer*1e3),this.type===Ae.Polygon&&(this.buffer=0);let t=[];e.forEach(r=>{t.push(this.spatialFilterService.loadFilterItem(this.zone,this.itemType,this.queryType,r,this.buffer).pipe(Ni(n=>{this.store.insertMany(n);let a=[],s=[],p,d;n.forEach(S=>{S.geometry.type==="Point"?(S.properties.longitude=S.geometry.coordinates[0],S.properties.latitude=S.geometry.coordinates[1],a.push(S),p=S.meta.id):(s.push(S),d=S.meta.id)}),this.tryAddPointToMap(a,p),this.tryAddLayerToMap(s,d),n.length?(i=!1,this.thematicLength+=1,r.zeroResults=!1,this.cdRef.detectChanges()):r.zeroResults=!0,n.length>=1e4&&this.messageService.alert("igo.geo.spatialFilter.maxSizeAlert","igo.geo.spatialFilter.warning",{timeOut:1e4})})))}),zi(t).pipe(vo(this.unsubscribe$)).subscribe(()=>{this.loading=!1,i&&this.messageService.alert("igo.geo.spatialFilter.zeroResults","igo.geo.spatialFilter.warning",{timeOut:1e4})})}onZoneChange(i,e){this.zone=i,i&&(this.tryAddFeaturesToMap([i],e),this.zoomToFeatureExtent(i))}tryAddFeaturesToMap(i,e){let t=1;for(let r of i){if(this.type===Ae.Predefined)for(let a of this.layers){if(nt(a)&&a.options._internal&&a.options._internal.code===r.properties.code&&!e){if(!a.title?.startsWith("Zone")){let s=this.layers.indexOf(a);this.layers.splice(s,1)}return}if(a.title?.startsWith("Zone")){this.activeLayers=[];let s=this.layers.indexOf(a);this.layers.splice(s,1),this.map.layerController.remove(a)}}else{if(e){for(let a of this.activeLayers)if(this.activeLayers.length===1&&a.title?.startsWith("Zone")){let s=this.layers.indexOf(a);this.layers.splice(s,1),this.map.layerController.remove(a)}}this.activeLayers=[]}for(let a of this.layers)a.title?.startsWith("Zone")&&t++;this.defaultStyle=(a,s)=>{let p=i[0].coordinates;return new Le({image:new ke({radius:p?this.buffer/Math.cos(Math.PI/180*p[1])/s:void 0,fill:new Se({color:"rgba(200, 200, 20, 0.2)"}),stroke:new ve({width:1,color:"orange"})}),stroke:new ve({width:1,color:"orange"}),fill:new Se({color:"rgba(200, 200, 20, 0.2)"})})};let n={isIgoInternalLayer:!0,title:"Zone "+t+" - "+this.languageService.translate.instant("igo.geo.spatialFilter.spatialFilter"),workspace:{enabled:!0},_internal:{code:this.type===Ae.Predefined?r.properties.code:void 0},sourceOptions:{type:"vector",queryable:!0},visible:!0};this.layerService.createAsyncLayer(n).pipe(ze(1)).subscribe(a=>{let s=i.map(d=>ft(d,this.map.projection));if(this.type!==Ae.Predefined){let d=this.type===Ae.Point?"Cercle":"Polygone";s[0].set("nom","Zone",!0),s[0].set("type",d,!0)}a.dataSource.ol.addFeatures(s),a.ol.setStyle(this.defaultStyle),this.map.layerController.add(a),this.layers.push(a),this.activeLayers.push(a),this.cdRef.detectChanges()})}}tryAddPointToMap(i,e){let t=1;if(i.length){if(this.map===void 0)return;for(let s of this.layers)s.title?.startsWith(i[0].meta.title)&&t++;let r=i[0].meta.icon,n;r?n=this.createSvgIcon(r)||Jo():n=Jo();let a={isIgoInternalLayer:!0,title:i[0].meta.title+" "+t+" - "+this.languageService.translate.instant("igo.geo.spatialFilter.spatialFilter"),visible:!0,style:n,sourceOptions:{type:"cluster",id:e,queryable:!0,distance:120,meta:{title:"Cluster"}}};this.layerService.createAsyncLayer(a).pipe(ze(1)).subscribe(s=>{let p=i.map(_=>ft(_,this.map.projection));s.dataSource.ol.getSource().addFeatures(p);let S=this.layers.find(_=>_.id===s.id);S&&(this.map.layerController.remove(S),t=t-1,s.title=i[0].meta.title+" "+t+" - "+this.languageService.translate.instant("igo.geo.spatialFilter.spatialFilter"),s.options.title=s.title),this.iterator=t,this.map.layerController.add(s),this.layers.push(s),this.pushLayer(s),this.cdRef.detectChanges()})}}createSvgIcon(i){let e;return this.matIconRegistry.getNamedSvgIcon(i).subscribe(t=>{let r=new XMLSerializer;t.setAttribute("width","30"),t.setAttribute("height","30"),t.setAttribute("fill","rgba(0, 128, 255)"),t.setAttribute("stroke","white");let n=r.serializeToString(t);e=new Le({image:new yr({src:"data:image/svg+xml;utf8,"+n})})}),e}tryAddLayerToMap(i,e){let t=1;if(i.length){if(this.map===void 0)return;for(let n of this.layers)n.title?.startsWith(i[0].meta.title)&&t++;let r={isIgoInternalLayer:!0,title:i[0].meta.title+" "+t+" - "+this.languageService.translate.instant("igo.geo.spatialFilter.spatialFilter"),sourceOptions:{type:"vector",id:e,queryable:!0},visible:!0};this.layerService.createAsyncLayer(r).pipe(ze(1)).subscribe(n=>{let a=i.map(d=>ft(d,this.map.projection));n.dataSource.ol.addFeatures(a);let p=this.layers.find(d=>d.id===n.id);p&&(this.map.layerController.remove(p),t=t-1,n.title=i[0].meta.title+" "+t+" - "+this.languageService.translate.instant("igo.geo.spatialFilter.spatialFilter"),n.options.title=n.title),this.map.layerController.add(n),this.layers.push(n),this.pushLayer(n),this.cdRef.detectChanges()})}}zoomToFeatureExtent(i){if(i){let e=this.format.readFeature(i,{dataProjection:i.projection,featureProjection:this.map.projection});Yo(this.map.viewController,[e],_e.Zoom)}}pushLayer(i){for(let e of this.activeLayers)if(e.id===i.id)return;this.activeLayers.push(i)}static \u0275fac=function(e){return new(e||Qa)(f(qo),f(ri),f(Z),f(I),f(Ie),f(re),f(be),f(N),f(Ke),f(le))};static \u0275cmp=w({type:Qa,selectors:[["igo-spatial-filter-tool"]],inputs:{type:"type",itemType:"itemType",freehandDrawIsActive:"freehandDrawIsActive"},standalone:!0,features:[T],decls:4,vars:16,consts:[[3,"eventType","eventQueryType","zoneChange","zoneWithBufferChange","bufferChange","measureUnitChange","store","selectedQueryType","zone","layers"],[3,"radiusEvent","bufferEvent","measureUnitChange","freehandControl","drawZoneEvent","zoneWithBufferChange","itemTypeChange","thematicChange","toggleSearch","clearButtonEvent","clearSearchEvent","export","openWorkspace","entityChange","type","queryType","map","zone","loading","store","layers","allLayers","thematicLength"],[4,"ngIf"],[3,"feature"]],template:function(e,t){e&1&&(m(0,"igo-spatial-filter-type",0),M("eventType",function(n){return t.getOutputType(n)})("eventQueryType",function(n){return t.getOutputQueryType(n)})("zoneChange",function(n){return t.onZoneChange(n)})("zoneWithBufferChange",function(n){return t.onZoneChange(n,!0)})("bufferChange",function(n){return t.buffer=n})("measureUnitChange",function(n){return t.measureUnit=n}),u(),m(1,"igo-spatial-filter-item",1),M("radiusEvent",function(n){return t.buffer=n})("bufferEvent",function(n){return t.buffer=n})("measureUnitChange",function(n){return t.measureUnit=n})("freehandControl",function(n){return t.freehandDrawIsActive=n})("drawZoneEvent",function(n){return t.zone=n})("zoneWithBufferChange",function(n){return t.onZoneChange(n,!0)})("itemTypeChange",function(n){return t.itemType=n})("thematicChange",function(n){return t.thematics=n})("toggleSearch",function(){return t.getOutputToggleSearch()})("clearButtonEvent",function(){return t.clearMap()})("clearSearchEvent",function(){return t.getOutputClearSearch()})("export",function(){return t.activateExportTool()})("openWorkspace",function(){return t.activateWorkspace()})("entityChange",function(n){return t.activateWorkspace(n)}),u(),F(2,Sd,2,1,"ng-container",2),g(3,"async")),e&2&&(l("store",t.spatialListStore)("selectedQueryType",t.queryType)("zone",t.zone)("layers",t.activeLayers),c(),l("type",t.type)("queryType",t.queryType)("map",t.map)("zone",t.zone)("loading",t.loading)("store",t.store)("layers",t.activeLayers)("allLayers",t.layers)("thematicLength",t.thematicLength),c(),l("ngIf",h(3,14,t.selectedFeature$)))},dependencies:[jr,kr,It,Y,ie],styles:[`[_nghost-%COMP%]   igo-spatial-filter-item[_ngcontent-%COMP%]{display:block;padding:0 12px}[_nghost-%COMP%]     .mat-mdc-tab-body-wrapper{margin-top:12px;padding:0 12px}
/*# sourceMappingURL=spatial-filter-tool.component-KFZJUEK2.css.map */`],changeDetection:0})};On=G([z({name:"spatialFilter",title:"igo.integration.tools.spatialFilter",icon:ks}),q("design:paramtypes",[qo,ri,Z,I,Ie,re,be,N,Ke,le])],On);var En=class Ya{static \u0275fac=function(e){return new(e||Ya)};static \u0275cmp=w({type:Ya,selectors:[["igo-time-filter-tool"]],standalone:!0,features:[T],decls:1,vars:0,consts:[["igoTimeFilterListBinding",""]],template:function(e,t){e&1&&v(0,"igo-time-filter-list",0)},dependencies:[$r,Il],encapsulation:2})};En=G([z({name:"timeFilter",title:"igo.integration.tools.timeFilter",icon:"history"})],En);function vd(o,i){if(o&1&&v(0,"igo-form-field",8),o&2){let e=i.$implicit;l("field",e)}}function _d(o,i){if(o&1&&(m(0,"div",6),F(1,vd,1,1,"igo-form-field",7),u()),o&2){let e=C().ngIf;c(),l("ngForOf",e.fields)}}function Cd(o,i){if(o&1){let e=$();m(0,"igo-form",1),g(1,"async"),M("submitForm",function(r){L(e);let n=C();return A(n.onSubmit(r))}),F(2,_d,2,1,"div",2),m(3,"div",3)(4,"button",4),M("click",function(){L(e);let r=C();return A(r.clearForm())}),x(5),g(6,"translate"),u(),m(7,"button",5),x(8),g(9,"translate"),u()()()}if(o&2){let e=i.ngIf,t=C();l("form",e)("formData",h(1,6,t.data$)),c(2),l("ngIf",e.fields.length),c(3),W(" ",h(6,8,"igo.integration.dataIssueReporterTool.reset.button")," "),c(2),l("disabled",t.submitDisabled),c(),W(" ",h(9,10,"igo.integration.dataIssueReporterTool.submit.button")," ")}}var bp=class Ja{mapState;formService;languageService;messageService;httpClient;url;get map(){return this.mapState.map}form$=new P(void 0);data$=new P(void 0);submitDisabled=!0;valueChanges$$;constructor(i,e,t,r,n){this.mapState=i,this.formService=e,this.languageService=t,this.messageService=r,this.httpClient=n}ngOnInit(){De([this.languageService.language$,this.map.layerController.all$]).subscribe(([i,e])=>{let t=e.filter(s=>fr(s)||s.showInLayerList).map(s=>({value:`${s.title}-${s.id}`,title:s.title})),n=[{name:"geometry",title:this.languageService.translate.instant("igo.integration.dataIssueReporterTool.geometry"),type:"geometry",inputs:{map:this.map,geometryTypeField:!0,geometryType:"Polygon",drawGuideField:!1,drawGuide:0,drawGuidePlaceholder:this.languageService.translate.instant("igo.integration.dataIssueReporterTool.drawGuidePlaceholder"),drawStyle:new Le({stroke:new ve({color:[255,0,0,1],width:2}),fill:new Se({color:[255,0,0,.2]}),image:new ke({radius:8,stroke:new ve({color:[255,0,0,1]}),fill:new Se({color:[255,0,0,.2]})})}),overlayStyle:new Le({stroke:new ve({color:[0,255,0,1],width:2}),fill:new Se({color:[0,255,0,.2]}),image:new ke({radius:8,stroke:new ve({color:[0,255,0,1]}),fill:new Se({color:[0,255,0,.2]})})})}},{name:"layer",title:this.languageService.translate.instant("igo.integration.dataIssueReporterTool.layer"),type:"select",options:{cols:2},inputs:{choices:t}},{name:"desc",title:this.languageService.translate.instant("igo.integration.dataIssueReporterTool.description"),type:"textarea",options:{validator:xt.required}},{name:"email",title:this.languageService.translate.instant("igo.integration.dataIssueReporterTool.email"),options:{validator:xt.email}}].map(s=>this.formService.field(s)),a=this.formService.form(n,[]);this.valueChanges$$=a.control.valueChanges.subscribe(()=>{this.submitDisabled=!a.control.valid}),this.form$.next(a)})}ngOnDestroy(){this.valueChanges$$.unsubscribe()}clearForm(){this.form$.value.control.reset()}onSubmit(i){let e="igo.integration.dataIssueReporterTool.submit.title";this.url?(this.httpClient.post(this.url,i).subscribe(()=>{this.messageService.success("igo.integration.dataIssueReporterTool.submit.message",e)}),this.clearForm()):(this.messageService.alert("igo.integration.dataIssueReporterTool.submit.setupMessage",e),alert(JSON.stringify(i)))}static \u0275fac=function(e){return new(e||Ja)(f(I),f(ti),f(re),f(Ie),f(bt))};static \u0275cmp=w({type:Ja,selectors:[["igo-issue-reporter-tool"]],inputs:{url:"url"},decls:2,vars:3,consts:[[3,"form","formData","submitForm",4,"ngIf"],[3,"submitForm","form","formData"],["class","form-container",4,"ngIf"],["formButtons","",1,"actions-container"],["mat-stroked-button","","type","button","color","primary",3,"click"],["mat-flat-button","","type","submit","color","primary",3,"disabled"],[1,"form-container"],[3,"field",4,"ngFor","ngForOf"],[3,"field"]],template:function(e,t){e&1&&(F(0,Cd,10,12,"igo-form",0),g(1,"async")),e&2&&l("ngIf",h(1,1,t.form$))},dependencies:[Ct,Y,qt,pl,Fr,ie,ce],styles:[`[_nghost-%COMP%]   .actions-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:last-child){margin-right:8px}[_nghost-%COMP%]   .form-container[_ngcontent-%COMP%]{width:100%;padding:10px}[_nghost-%COMP%]   .form-container[_ngcontent-%COMP%]   igo-form-field[_ngcontent-%COMP%]{display:block;height:auto}
/*# sourceMappingURL=data-issue-reporter-tool.component-GL6UDK4N.css.map */`]})};bp=G([z({name:"dataIssueReporter",title:"igo.integration.tools.dataIssueReporter",icon:"feedback"}),q("design:paramtypes",[I,ti,re,Ie,bt])],bp);function bd(o,i){if(o&1){let e=$();m(0,"mat-tab-group")(1,"mat-tab",3),g(2,"translate"),m(3,"igo-import-export",4),g(4,"async"),g(5,"async"),M("selectMode",function(r){L(e);let n=C();return A(n.modeChanged(r))})("exportOptionsChange",function(r){L(e);let n=C();return A(n.exportOptionsChange(r))}),u()(),m(6,"mat-tab",3),g(7,"translate"),v(8,"igo-context-import-export",5),u()()}if(o&2){let e=C();c(),l("label",h(2,10,"igo.integration.importExportTool.importExportData")),c(2),l("contextUri",h(4,12,e.contextState.context$).uri)("map",e.map)("selectFirstProj",e.selectFirstProj)("projectionsLimitations",e.projectionsLimitations)("store",e.workspaceStore)("selectedMode",h(5,14,e.importExportState.selectedMode$))("exportOptions$",e.importExportState.exportOptions$),c(3),l("label",h(7,16,"igo.integration.importExportTool.importExportContext")),c(2),l("map",e.map)}}function wd(o,i){if(o&1){let e=$();m(0,"igo-import-export",6),g(1,"async"),g(2,"async"),M("selectMode",function(r){L(e);let n=C();return A(n.modeChanged(r))})("exportOptionsChange",function(r){L(e);let n=C();return A(n.exportOptionsChange(r))}),u()}if(o&2){let e=C();l("contextUri",h(1,5,e.contextState.context$).uri)("map",e.map)("store",e.workspaceStore)("selectedMode",h(2,7,e.importExportState.selectedMode$))("exportOptions$",e.importExportState.exportOptions$)}}function xd(o,i){if(o&1&&v(0,"igo-context-import-export",5),o&2){let e=C();l("map",e.map)}}var Ka=class Xa{mapState;importExportState;workspaceState;contextState;projectionsLimitations;selectFirstProj=!1;get map(){return this.mapState.map}get workspaceStore(){return this.workspaceState.store}importExportType=Vi.layer;importExportShowBothType=!0;constructor(i,e,t,r){this.mapState=i,this.importExportState=e,this.workspaceState=t,this.contextState=r}ngOnInit(){this.selectType(),this.selectMode()}selectType(){this.importExportType&&this.importExportState.importExportType$.next(this.importExportType);let i=this.importExportState.importExportType$.value;i!==void 0?this.importExportState.setImportExportType(i):this.importExportState.setImportExportType(Vi.layer)}selectMode(){let i=this.importExportState.selectedMode$.value;i!==void 0?this.importExportState.setMode(i):this.importExportState.setMode(Je.import)}modeChanged(i){this.importExportState.setMode(i)}exportOptionsChange(i){this.importExportState.setsExportOptions(i)}importExportTypeChange(i){this.importExportType=i.value}static \u0275fac=function(e){return new(e||Xa)(f(I),f(be),f(Ke),f($t))};static \u0275cmp=w({type:Xa,selectors:[["igo-import-export-tool"]],inputs:{projectionsLimitations:"projectionsLimitations",selectFirstProj:"selectFirstProj",importExportType:"importExportType",importExportShowBothType:"importExportShowBothType"},standalone:!0,features:[T],decls:3,vars:3,consts:[[4,"ngIf"],[3,"contextUri","map","store","selectedMode","exportOptions$","selectMode","exportOptionsChange",4,"ngIf"],[3,"map",4,"ngIf"],[3,"label"],[3,"selectMode","exportOptionsChange","contextUri","map","selectFirstProj","projectionsLimitations","store","selectedMode","exportOptions$"],[3,"map"],[3,"selectMode","exportOptionsChange","contextUri","map","store","selectedMode","exportOptions$"]],template:function(e,t){e&1&&F(0,bd,9,18,"mat-tab-group",0)(1,wd,3,9,"igo-import-export",1)(2,xd,1,1,"igo-context-import-export",2),e&2&&(l("ngIf",t.importExportShowBothType),c(),l("ngIf",!t.importExportShowBothType&&t.importExportType==="layer"),c(),l("ngIf",!t.importExportShowBothType&&t.importExportType==="context"))},dependencies:[Y,li,ai,si,Vr,Ul,ie,me,ce],styles:[`mat-form-field[_ngcontent-%COMP%]{width:100%}
/*# sourceMappingURL=import-export-tool.component-3E56JP6B.css.map */`],changeDetection:0})};Ka=G([z({name:"importExport",title:"igo.integration.tools.importExport",icon:"file_save"}),q("design:paramtypes",[I,be,Ke,$t])],Ka);function Od(o,i){if(o&1&&(m(0,"mat-form-field",13)(1,"mat-label"),x(2),g(3,"translate"),u(),v(4,"textarea",14,2),g(6,"translate"),u()),o&2){let e=C();c(2),ye(h(3,3,"igo.integration.advanced-map-tool.advanced-coordinates.lon")),c(2),l("placeholder",h(6,5,"igo.integration.advanced-map-tool.advanced-coordinates.lon"))("value",e.coordinates[0])}}function Ed(o,i){if(o&1&&(m(0,"mat-form-field",13),v(1,"textarea",14,2),g(3,"translate"),u()),o&2){let e=C();c(),l("placeholder",h(3,2,"igo.integration.advanced-map-tool.advanced-coordinates.est"))("value",e.coordinates[0])}}function Ld(o,i){if(o&1&&(m(0,"mat-form-field",13)(1,"mat-label"),x(2),g(3,"translate"),u(),v(4,"textarea",14,2),g(6,"translate"),u()),o&2){let e=C();c(2),ye(h(3,3,"igo.integration.advanced-map-tool.advanced-coordinates.lat")),c(2),l("placeholder",h(6,5,"igo.integration.advanced-map-tool.advanced-coordinates.lat"))("value",e.coordinates[1])}}function Ad(o,i){if(o&1&&(m(0,"mat-form-field",13),v(1,"textarea",14,2),g(3,"translate"),u()),o&2){let e=C();c(),l("placeholder",h(3,2,"igo.integration.advanced-map-tool.advanced-coordinates.nord"))("value",e.coordinates[1])}}function Fd(o,i){if(o&1){let e=$();m(0,"mat-option",15),M("click",function(r){return L(e),A(r.stopPropagation())}),x(1),u()}if(o&2){let e=i.$implicit;l("value",e),c(),W(" ",e.translatedValue||e.alias," ")}}var Ip=(()=>{class o{mapState;languageService;messageService;cdRef;storageService;config;formBuilder;formattedScale$=new P("");projections$=new P([]);form;coordinates;currentCenterDefaultProj;center;inMtmZone=!0;inLambert2={32198:!0,3798:!0};mapState$$;formStatus$$;_projectionsLimitations={};projectionsConstraints;defaultProj;currentZones={utm:void 0,mtm:void 0};units=!0;get map(){return this.mapState.map}get inputProj(){return this.form.get("inputProj").value}set inputProj(e){this.form.patchValue({inputProj:e})}get projectionsLimitations(){return this._projectionsLimitations||{}}set projectionsLimitations(e){this._projectionsLimitations=e}constructor(e,t,r,n,a,s,p){this.mapState=e,this.languageService=t,this.messageService=r,this.cdRef=n,this.storageService=a,this.config=s,this.formBuilder=p,this.defaultProj={translatedValue:this.languageService.translate.instant("igo.geo.importExportForm.projections.wgs84",{code:"EPSG:4326"}),translateKey:"wgs84",alias:"WGS84",code:"EPSG:4326",zone:"",def:void 0,extent:void 0},this.center=this.storageService.get("centerToggle"),this.computeProjections(),this.buildForm()}ngOnInit(){this.mapState$$=this.map.viewController.state$.pipe(dt(50)).subscribe(()=>{this.setScaleValue(this.map),this.updateCoordinates()}),this.formStatus$$=this.form.valueChanges.subscribe(()=>{this.updateCoordinates()});let e=this.storageService.get("currentProjection");if(this.inputProj=this.projections$.value.find(t=>t.code===this.defaultProj.code)??this.projections$.value[0],e!==null){let t=this.positionInList(e);this.inputProj=this.projections$.value[t],this.updateZoneMtmUtm()}this.map.mapCenter$.next(this.center),this.coordinates=this.getCoordinates(),this.currentCenterDefaultProj=this.map.viewController.getCenter(this.defaultProj.code)}ngOnDestroy(){this.map.mapCenter$.next(!1),this.mapState$$.unsubscribe(),this.formStatus$$.unsubscribe()}setScaleValue(e){this.formattedScale$.next(": ~ 1 / "+zs(e.viewController.getScale()))}getCoordinates(){this.currentZones.mtm=Co(this.currentCenterDefaultProj[0]),this.currentZones.utm=oi(this.currentCenterDefaultProj[0]);let e=this.inputProj.code,t=2;return(e.includes("EPSG:4326")||e.includes("EPSG:4269"))&&(t=5),this.units=e==="EPSG:4326"||e==="EPSG:4269",this.map.viewController.getCenter(e).map(n=>n.toFixed(t))}updateCoordinates(){this.currentCenterDefaultProj=this.map.viewController.getCenter(this.defaultProj.code);let e=Co(this.currentCenterDefaultProj[0]),t=oi(this.currentCenterDefaultProj[0]);!this.inMtmZone&&e!==this.currentZones.mtm&&this.back2quebec();let r=!1;e!==this.currentZones.mtm&&(this.currentZones.mtm=e,r=!0),t!==this.currentZones.utm&&(this.currentZones.utm=t,r=!0),r&&this.updateProjectionsZoneChange(),this.checkLambert(this.currentCenterDefaultProj),this.coordinates=this.getCoordinates(),this.storageService.set("currentProjection",this.inputProj,_o.SESSION)}copyTextToClipboard(){ur.copy(this.coordinates.toString())&&this.messageService.success("igo.integration.advanced-map-tool.advanced-coordinates.copyMsg","igo.integration.advanced-map-tool.advanced-coordinates.copyTitle")}displayCenter(e){this.center=e,this.map.mapCenter$.next(e),this.storageService.set("centerToggle",e,_o.SESSION)}buildForm(){this.form=this.formBuilder.group({inputProj:["",[xt.required]]})}updateProjectionsZoneChange(){let e=this.projections$.value,t=this.languageService.translate;e.map(r=>{if(r.translateKey==="mtm"){let n=Co(this.currentCenterDefaultProj[0]);if(n){let a=n<10?`EPSG:3218${n}`:`EPSG:321${80+n}`;r.alias=`MTM ${n}`,r.code=a,r.zone=`${n}`,r.translatedValue=t.instant("igo.geo.importExportForm.projections.mtm",r)}else r.alias="",this.inMtmZone=!1,this.inputProj.translateKey==="mtm"&&(this.inputProj=this.projections$.value[0])}if(r.translateKey==="utm"){let n=oi(this.currentCenterDefaultProj[0]),a=`EPSG:326${n}`;r.alias=`UTM ${n}`,r.code=a,r.zone=`${n}`,r.translatedValue=t.instant("igo.geo.importExportForm.projections.utm",r)}}),e=e.filter(r=>r.alias!==""),this.projections$.next(e)}computeProjections(){this.projectionsConstraints=gl(this.projectionsLimitations);let e=[];this.currentCenterDefaultProj||(this.currentCenterDefaultProj=this.map.viewController.getCenter(this.defaultProj.code));let t=this.languageService.translate;if(this.projectionsConstraints.wgs84&&e.push({translatedValue:t.instant("igo.geo.importExportForm.projections.wgs84",{code:"EPSG:4326"}),translateKey:"wgs84",alias:"WGS84",code:"EPSG:4326",zone:"",def:void 0,extent:void 0}),this.projectionsConstraints.nad83&&e.push({translatedValue:t.instant("igo.geo.importExportForm.projections.nad83",{code:"EPSG:4269"}),translateKey:"nad83",alias:"NAD83",code:"EPSG:4269",zone:"",def:void 0,extent:void 0}),this.projectionsConstraints.webMercator&&e.push({translatedValue:t.instant("igo.geo.importExportForm.projections.webMercator",{code:"EPSG:3857"}),translateKey:"webMercator",alias:"Web Mercator",code:"EPSG:3857",zone:"",def:void 0,extent:void 0}),this.projectionsConstraints.mtm){let n=Co(this.currentCenterDefaultProj[0]);if(n){this.inMtmZone=!0;let a=n<10?`EPSG:3218${n}`:`EPSG:321${80+n}`;e.splice(3,0,{translatedValue:this.languageService.translate.instant("igo.geo.importExportForm.projections.mtm",{code:a,zone:n}),translateKey:"mtm",alias:`MTM ${n}`,code:a,zone:`${n}`,def:void 0,extent:void 0})}else this.inMtmZone=!1}if(this.projectionsConstraints.utm){let n=this.inMtmZone?4:3,a=oi(this.currentCenterDefaultProj[0]),s=a<10?`EPSG:3260${a}`:`EPSG:326${a}`;e.splice(n,0,{translatedValue:this.languageService.translate.instant("igo.geo.importExportForm.projections.utm",{code:s,zone:a}),translateKey:"utm",alias:`UTM ${a}`,code:s,zone:`${a}`,def:void 0,extent:void 0})}let r=[];this.projectionsConstraints.projFromConfig&&(r=this.config.getConfig("projections")||[]),this.projections$.next(r.concat(e))}pushMtm(e){if(this.projectionsConstraints.mtm){let t=Co(this.currentCenterDefaultProj[0]),r=t<10?`EPSG:3218${t}`:`EPSG:321${80+t}`;e.splice(3,0,{translatedValue:this.languageService.translate.instant("igo.geo.importExportForm.projections.mtm",{code:r,zone:t}),translateKey:"mtm",alias:`MTM ${t}`,code:r,zone:`${t}`,def:void 0,extent:void 0})}}back2quebec(){let e=this.projections$.value;this.pushMtm(e),this.inMtmZone=!0}updateZoneMtmUtm(){if(this.inputProj.translateKey==="mtm"){let e=Co(this.currentCenterDefaultProj[0]);this.inputProj.alias=`MTM ${e}`;let t=e<10?`EPSG:3218${e}`:`EPSG:321${80+e}`;this.inputProj.code=t,this.inputProj.zone=`${e}`,this.inputProj.translatedValue=this.languageService.translate.instant("igo.geo.importExportForm.projections.mtm",{code:t,zone:e})}if(this.inputProj.translateKey==="utm"){let e=oi(this.currentCenterDefaultProj[0]);this.inputProj.alias=`UTM ${e}`;let t=e<10?`EPSG:3260${e}`:`EPSG:326${e}`;this.inputProj.code=t,this.inputProj.zone=`${e}`,this.inputProj.translatedValue=this.languageService.translate.instant("igo.geo.importExportForm.projections.utm",{code:t,zone:e})}}positionInList(e){let t=e.translateKey,r=e.alias,n,a=0;return this.projections$.value.map(s=>{t?t===s.translateKey&&(n=a):r===s.alias&&(n=a),a++}),n=n||0,n}checkLambert(e){(this.config.getConfig("projections")||[]).forEach(r=>{let n=this.projections$.value,a=r.extent,s=r.code.match(/\d+/),p=Gs(a,r.code,this.defaultProj.code);e[0]<p[0]||e[0]>p[2]||e[1]<p[1]||e[1]>p[3]?(this.inLambert2[s]=!1,this.inputProj.alias===r.alias&&(this.inputProj=this.projections$.value[0]),n=n.filter(d=>d.alias!==r.alias),this.projections$.next(n)):this.inLambert2[s]||(this.projections$.next(n.concat(r)),this.inLambert2[s]=!0)})}static \u0275fac=function(t){return new(t||o)(f(I),f(re),f(Ie),f(le),f(he),f(ne),f(pr))};static \u0275cmp=w({type:o,selectors:[["igo-advanced-coordinates"]],inputs:{projectionsLimitations:"projectionsLimitations"},standalone:!0,features:[T],decls:36,vars:37,consts:[["elseBlock",""],["elseBlock2",""],["textArea",""],[1,"advanced-coordinates__coordinates-container"],[1,"advanced-coordinates__coordinates-container__inner"],["subscriptSizing","dynamic",4,"ngIf","ngIfElse"],["mat-icon-button","",1,"igo-form-button-group","advanced-coordinates__copy-coordinates",3,"click"],[1,"igo-form","advanced-coordinates__form",3,"formGroup"],["subscriptSizing","dynamic",1,"igo-input-container"],[3,"valueChange","value"],["matTooltipShowDelay","500",3,"value","click",4,"ngFor","ngForOf"],[1,"center-toggle","mat-typography",3,"change","checked","labelPosition"],[1,"igo-zoom","mat-typography"],["subscriptSizing","dynamic"],["matInput","","readonly","","rows","1",3,"placeholder","value"],["matTooltipShowDelay","500",3,"click","value"]],template:function(t,r){if(t&1){let n=$();m(0,"div",3)(1,"div",4),F(2,Od,7,7,"mat-form-field",5)(3,Ed,4,4,"ng-template",null,0,ge)(5,Ld,7,7,"mat-form-field",5)(6,Ad,4,4,"ng-template",null,1,ge),m(8,"button",6),g(9,"translate"),M("click",function(){return L(n),A(r.copyTextToClipboard())}),m(10,"mat-icon"),x(11,"content_copy"),u()()(),m(12,"form",7)(13,"div",4)(14,"mat-form-field",8)(15,"mat-label"),x(16),g(17,"translate"),u(),m(18,"mat-select",9),Zi("valueChange",function(s){return L(n),Ui(r.inputProj,s)||(r.inputProj=s),A(s)}),F(19,Fd,2,2,"mat-option",10),g(20,"async"),u()()(),m(21,"div",4)(22,"mat-slide-toggle",11),M("change",function(s){return L(n),A(r.displayCenter(s.checked))}),x(23),g(24,"translate"),u()()(),m(25,"p",12),x(26),g(27,"translate"),u(),m(28,"p",12),x(29),g(30,"translate"),g(31,"async"),u(),m(32,"p",12),x(33),g(34,"translate"),g(35,"number"),u()()}if(t&2){let n=Ee(4),a=Ee(7);c(2),l("ngIf",r.units)("ngIfElse",n),c(3),l("ngIf",r.units)("ngIfElse",a),c(3),_s("aria-label",h(9,18,"igo.integration.advanced-map-tool.advanced-coordinates.copy")),c(4),l("formGroup",r.form),c(4),ye(h(17,20,"igo.integration.advanced-map-tool.advanced-coordinates.coordSystem")),c(2),Hi("value",r.inputProj),c(),l("ngForOf",h(20,22,r.projections$)),c(3),l("checked",r.center)("labelPosition","before"),c(),W(" ",h(24,24,"igo.integration.advanced-map-tool.advanced-coordinates.center")," "),c(3),Vo(" ",h(27,26,"igo.integration.advanced-map-tool.advanced-coordinates.zoom")," ",r.map.viewController.getZoom()," "),c(3),Vo(" ",h(30,28,"igo.integration.advanced-map-tool.advanced-coordinates.scale")," ",h(31,30,r.formattedScale$)," "),c(4),Vo(" ",h(34,32,"igo.integration.advanced-map-tool.advanced-coordinates.resolution")," ",Yi(35,34,r.map.viewController.getResolution(),"1.0-0")," ")}},dependencies:[Y,No,zo,Go,Tr,xr,He,wt,Me,Te,Wo,lr,sr,mr,cr,wr,br,Ji,Ct,Ki,Xo,Ko,ie,Ts,me,ce],styles:[`[_nghost-%COMP%]{padding:12px 0}textarea[_ngcontent-%COMP%]{resize:none}.advanced-coordinates__coordinates-container[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;padding:12px 0}.advanced-coordinates__coordinates-container__inner[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:16px}.advanced-coordinates__coordinates-container__inner[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex:1}.advanced-coordinates__coordinates-container__inner[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]:not(:first-child), .advanced-coordinates__coordinates-container__inner[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:first-child){margin-left:8px}.advanced-coordinates__form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.advanced-coordinates__form[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]{flex:1}.advanced-coordinates__form[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]     .mdc-form-field{display:flex;justify-content:space-between}.advanced-coordinates__form[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]     .mdc-label{flex:1}
/*# sourceMappingURL=advanced-coordinates.component-YASAG54P.css.map */`]})}return o})();function Rd(o,i){if(o&1){let e=$();m(0,"mat-option",6),M("click",function(){L(e),C();let r=Ee(8),n=C();return A(n.applyNewLayers(r))}),x(1),u()}if(o&2){let e=i.$implicit;l("value",e),c(),ye(e.title)}}function Dd(o,i){if(o&1){let e=$();m(0,"div",3)(1,"form",4)(2,"mat-form-field")(3,"mat-label"),x(4),g(5,"translate"),u(),m(6,"mat-select",5)(7,"mat-option",6,1),M("click",function(){L(e);let r=Ee(8),n=C();return A(n.selectAll(r))}),x(9),g(10,"translate"),u(),v(11,"mat-divider"),F(12,Rd,2,2,"mat-option",7),u()(),m(13,"mat-slide-toggle",8),M("change",function(r){L(e);let n=C();return A(n.startSwipe(r.checked))}),x(14),g(15,"translate"),u()()()}if(o&2){let e=C();c(),l("formGroup",e.form),c(3),ye(h(5,8,"igo.integration.advanced-map-tool.advanced-swipe.swipe-select")),c(3),l("value",1),c(2),W(" ",h(10,10,"igo.integration.advanced-map-tool.advanced-swipe.selectAll")," "),c(3),l("ngForOf",e.userControlledLayerList),c(),l("checked",e.swipe)("labelPosition","before"),c(),W(" ",h(15,12,"igo.integration.advanced-map-tool.advanced-swipe.swipe")," ")}}function Bd(o,i){if(o&1){let e=$();m(0,"mat-list")(1,"p",9),x(2),g(3,"translate"),u(),m(4,"p",9),x(5),g(6,"translate"),u(),m(7,"mat-list-item")(8,"mat-icon",10),x(9,"search"),u(),m(10,"span",11),M("click",function(){L(e);let r=C();return A(r.searchEmit())}),x(11),g(12,"translate"),u()(),m(13,"mat-list-item")(14,"mat-icon",10),x(15,"library_add"),u(),m(16,"span",12),M("click",function(){L(e);let r=C();return A(r.catalogEmit())}),x(17),g(18,"translate"),u()(),m(19,"mat-list-item")(20,"mat-icon",10),x(21,"star"),u(),m(22,"span",13),M("click",function(){L(e);let r=C();return A(r.contextEmit())}),x(23),g(24,"translate"),u()()()}o&2&&(c(2),W(" ",h(3,5,"igo.integration.advanced-map-tool.advanced-swipe.empty")," "),c(3),W(" ",h(6,7,"igo.integration.advanced-map-tool.advanced-swipe.customize")," "),c(6),W(" ",h(12,9,"igo.integration.advanced-map-tool.advanced-swipe.search-tool")," "),c(6),W(" ",h(18,11,"igo.integration.advanced-map-tool.advanced-swipe.catalog-tool")," "),c(6),W(" ",h(24,13,"igo.integration.advanced-map-tool.advanced-swipe.context-tool")," "))}var Op=(()=>{class o{mapState;formBuilder;toolState;swipe=!1;layerList;userControlledLayerList;form;layers;res;listForSwipe;get map(){return this.mapState.map}constructor(e,t,r){this.mapState=e,this.formBuilder=t,this.toolState=r,this.buildForm()}ngOnInit(){this.map.layerController.all$.subscribe(e=>this.userControlledLayerList=e.filter(t=>nt(t)&&!t.baseLayer&&t.showInLayerList&&t.displayed))}ngOnDestroy(){this.swipe=!1,this.map.swipeEnabled$.next(this.swipe)}buildForm(){this.form=this.formBuilder.group({layers:["",[xt.required]]})}startSwipe(e){this.swipe=e,this.map.swipeEnabled$.next(e),this.listForSwipe=[];for(let t of this.form.value.layers)this.listForSwipe.push(t);this.map.selectedFeatures$.next(this.listForSwipe)}applyNewLayers(e){this.startSwipe(!1),this.startSwipe(!0),e._selected&&(e._selected=!1);let t=this.userControlledLayerList?.length;this.form.controls.layers.value.length===t&&(e._selected=!0)}selectAll(e){e._selected?(this.form.controls.layers.setValue(this.userControlledLayerList),e._selected=!0):this.form.controls.layers.setValue([]),this.startSwipe(!1),this.startSwipe(!0)}searchEmit(){this.toolState.toolbox.activateTool("searchResults")}catalogEmit(){this.toolState.toolbox.activateTool("catalog")}contextEmit(){this.toolState.toolbox.activateTool("contextManager")}static \u0275fac=function(t){return new(t||o)(f(I),f(pr),f(N))};static \u0275cmp=w({type:o,selectors:[["igo-advanced-swipe"]],standalone:!0,features:[T],decls:3,vars:2,consts:[["noLayersBlock",""],["e",""],["class","igo-swipe-select-container",4,"ngIf","ngIfElse"],[1,"igo-swipe-select-container"],[1,"igo-form",3,"formGroup"],["formControlName","layers","multiple",""],[3,"click","value"],[3,"value","click",4,"ngFor","ngForOf"],[1,"swipe-toggle","mat-typography",3,"change","checked","labelPosition"],[1,"map-empty","mat-typography"],["matListItemIcon",""],["matListItemTitle","",1,"search-tool","mat-typography",3,"click"],["matListItemTitle","",1,"catalog-tool","mat-typography",3,"click"],["matListItemTitle","",1,"context-tool","mat-typography",3,"click"]],template:function(t,r){if(t&1&&F(0,Dd,16,14,"div",2)(1,Bd,25,15,"ng-template",null,0,ge),t&2){let n=Ee(2);l("ngIf",r.userControlledLayerList==null?null:r.userControlledLayerList.length)("ngIfElse",n)}},dependencies:[Y,Wo,lr,ar,sr,mr,cr,Es,No,zo,Go,wr,br,Ji,Ki,nr,rr,Ct,Xo,Ko,Qt,Ut,Zt,Ht,Wt,Me,Te,me,ce],styles:[`[_nghost-%COMP%]{padding:12px 0}[_nghost-%COMP%]   .igo-swipe-select-container[_ngcontent-%COMP%]{padding:12px 0}[_nghost-%COMP%]   .igo-swipe-select-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .igo-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}[_nghost-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]     .mdc-form-field{display:flex;justify-content:space-between}[_nghost-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]     .mdc-label{flex:1}[_nghost-%COMP%]   .map-empty[_ngcontent-%COMP%], [_nghost-%COMP%]   .search-tool[_ngcontent-%COMP%], [_nghost-%COMP%]   .catalog-tool[_ngcontent-%COMP%], [_nghost-%COMP%]   .context-tool[_ngcontent-%COMP%]{margin:4px}[_nghost-%COMP%]   .map-empty[_ngcontent-%COMP%]{padding:12px 0;text-align:justify}[_nghost-%COMP%]   .search-tool[_ngcontent-%COMP%], [_nghost-%COMP%]   .catalog-tool[_ngcontent-%COMP%], [_nghost-%COMP%]   .context-tool[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   mat-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:700}[_nghost-%COMP%]   mat-list-item[_ngcontent-%COMP%]     .mdc-list-item__primary-text{font-size:smaller}[_nghost-%COMP%]   .advanced-tool-line[_ngcontent-%COMP%]{height:2px;background-color:gray}
/*# sourceMappingURL=advanced-swipe.component-4OVWX4LF.css.map */`]})}return o})();var Ln=class ts{mapState;get tracking$(){return this.mapState.map.geolocationController?.tracking$}get followPosition$(){return this.mapState.map.geolocationController?.followPosition$}constructor(i){this.mapState=i}toggleTracking(i){this.mapState.map.geolocationController&&(this.mapState.map.geolocationController.tracking=i)}toggleFollow(i){this.mapState.map.geolocationController&&(this.mapState.map.geolocationController.followPosition=i)}static \u0275fac=function(e){return new(e||ts)(f(I))};static \u0275cmp=w({type:ts,selectors:[["igo-advanced-map-tool"]],standalone:!0,features:[T],decls:24,vars:26,consts:[[1,"nameOfTool"],[1,"advanced-tool-line"],[1,"igo-input-container"],[1,"geolocation-slide-toggle-container"],[1,"geolocation-option",3,"change","checked","labelPosition"],[1,"geolocation-option",3,"change","disabled","labelPosition","checked"]],template:function(e,t){e&1&&(m(0,"h4",0),x(1),g(2,"translate"),u(),v(3,"igo-advanced-swipe")(4,"mat-divider",1),m(5,"h4",0),x(6),g(7,"translate"),u(),v(8,"igo-advanced-coordinates")(9,"mat-divider",1),m(10,"h4",0),x(11),g(12,"translate"),u(),m(13,"div",2)(14,"div",3)(15,"mat-slide-toggle",4),g(16,"async"),M("change",function(n){return t.toggleTracking(n.checked)}),x(17),g(18,"translate"),u(),m(19,"mat-slide-toggle",5),g(20,"async"),g(21,"async"),M("change",function(n){return t.toggleFollow(n.checked)}),x(22),g(23,"translate"),u()()()),e&2&&(c(),W(" ",h(2,10,"igo.integration.advanced-map-tool.advanced-swipe.swipe-tool"),`
`),c(5),W(" ",h(7,12,"igo.integration.advanced-map-tool.advanced-coordinates.coordinates"),`
`),c(5),W(" ",h(12,14,"igo.integration.advanced-map-tool.geolocation.title"),`
`),c(4),l("checked",h(16,16,t.tracking$))("labelPosition","before"),c(2),W(" ",h(18,18,"igo.integration.advanced-map-tool.geolocation.tracking")," "),c(2),l("disabled",h(20,20,t.tracking$)!==!0)("labelPosition","before")("checked",h(21,22,t.followPosition$)),c(3),W(" ",h(23,24,"igo.integration.advanced-map-tool.geolocation.follow")," "))},dependencies:[Op,nr,rr,Ip,Xo,Ko,ie,me,ce],styles:[`[_nghost-%COMP%]{display:block;padding:0 16px 12px}.nameOfTool[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:small;margin:12px 0 8px}.advanced-tool-line[_ngcontent-%COMP%]{height:2px;background-color:gray}.geolocation-slide-toggle-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:12px 0}.geolocation-slide-toggle-container[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]{flex:1}.geolocation-slide-toggle-container[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]:not(:last-child){margin-bottom:16px}.geolocation-slide-toggle-container[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]     .mdc-form-field{display:flex;justify-content:space-between}.geolocation-slide-toggle-container[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]     .mdc-label{flex:1}mat-divider[_ngcontent-%COMP%]{margin:0 -16px}
/*# sourceMappingURL=advanced-map-tool.component-I444D65B.css.map */`]})};Ln=G([z({name:"advancedMap",title:"igo.integration.tools.advancedMap",icon:"home_repair_service"}),q("design:paramtypes",[I])],Ln);function kd(o,i){if(o&1){let e=$();m(0,"button",1),g(1,"translate"),M("click",function(){L(e);let r=C();return A(r.activateWorkspace())}),m(2,"mat-icon"),x(3,"table"),u()()}if(o&2){let e=C();l("matTooltip",h(1,2,"igo.integration.workspace.toggleWorkspace"))("color",e.color)}}var Po=(()=>{class o{workspaceState;hasWorkspace$=new P(!1);hasWorkspace$$;layer$=new P(void 0);set layer(e){this._layer=e,this.layer$.next(this._layer)}get layer(){return this._layer}_layer;color="primary";constructor(e){this.workspaceState=e}ngOnInit(){this.hasWorkspace$$=De([this.workspaceState.workspaceEnabled$,this.layer$]).subscribe(([e,t])=>this.hasWorkspace$.next(e&&nt(t)&&t.options.workspace?.enabled))}ngOnDestroy(){this.hasWorkspace$$.unsubscribe()}activateWorkspace(){this.workspaceState.workspace$.value&&this.workspaceState.workspace$.value.layer.id===this.layer.id&&this.workspaceState.workspacePanelExpanded?this.workspaceState.workspacePanelExpanded=!1:(this.workspaceState.workspacePanelExpanded=!0,this.workspaceState.setActiveWorkspaceById(this.layer.id))}static \u0275fac=function(t){return new(t||o)(f(Ke))};static \u0275cmp=w({type:o,selectors:[["igo-workspace-button"]],inputs:{layer:"layer",color:"color"},standalone:!0,features:[T],decls:2,vars:3,consts:[["mat-icon-button","","tooltip-position","below","matTooltipShowDelay","500",3,"matTooltip","color","click",4,"ngIf"],["mat-icon-button","","tooltip-position","below","matTooltipShowDelay","500",3,"click","matTooltip","color"]],template:function(t,r){t&1&&(F(0,kd,4,4,"button",0),g(1,"async")),t&2&&l("ngIf",h(1,1,r.hasWorkspace$))},dependencies:[Y,He,wt,Jt,Yt,Me,Te,ie,me,ce],changeDetection:0})}return o})();function jd(o,i){if(o&1){let e=$();v(0,"igo-workspace-button",4),m(1,"igo-export-button",5),M("click",function(){let r=L(e).layer,n=C(2);return A(n.activateExport(r))}),u(),v(2,"igo-ogc-filter-button",6)(3,"igo-time-filter-button",6)(4,"igo-track-feature-button",7)(5,"igo-metadata-button",4)}if(o&2){let e=i.layer,t=C(2);l("layer",e),c(),l("layer",e),c(),l("header",t.ogcButton)("layer",e),c(),l("header",t.timeButton)("layer",e),c(),l("trackFeature",!0)("layer",e),c(),l("layer",e)}}function $d(o,i){if(o&1&&(m(0,"igo-layer-viewer",3),F(1,jd,6,9,"ng-template",null,1,ge),u()),o&2){let e=C();l("map",e.map)("options",e.layerViewerOptions)("excludeBaseLayers",e.excludeBaseLayers)("isDesktop",e.isDesktop)}}function Vd(o,i){o&1&&(m(0,"p",9),x(1),g(2,"translate"),u()),o&2&&(c(),W(" ",h(2,1,"igo.integration.mapTool.customize")," "))}function Gd(o,i){if(o&1){let e=$();m(0,"mat-list-item")(1,"mat-icon",11),x(2,"search"),u(),m(3,"span",12),M("click",function(){L(e);let r=C(3);return A(r.searchEmit())}),x(4),g(5,"translate"),u()()}o&2&&(c(4),W(" ",h(5,1,"igo.integration.mapTool.search-tool")," "))}function zd(o,i){if(o&1){let e=$();m(0,"mat-list-item")(1,"mat-icon",11),x(2,"library_add"),u(),m(3,"span",13),M("click",function(){L(e);let r=C(3);return A(r.catalogEmit())}),x(4),g(5,"translate"),u()()}o&2&&(c(4),W(" ",h(5,1,"igo.integration.mapTool.catalog-tool")," "))}function Nd(o,i){if(o&1){let e=$();m(0,"mat-list-item")(1,"mat-icon",11),x(2,"star"),u(),m(3,"span",14),M("click",function(){L(e);let r=C(3);return A(r.contextEmit())}),x(4),g(5,"translate"),u()()}o&2&&(c(4),W(" ",h(5,1,"igo.integration.mapTool.context-tool")," "))}function qd(o,i){if(o&1&&(m(0,"mat-list")(1,"p",9),x(2),g(3,"translate"),u(),F(4,Vd,3,3,"p",10)(5,Gd,6,3,"mat-list-item",8)(6,zd,6,3,"mat-list-item",8)(7,Nd,6,3,"mat-list-item",8),u()),o&2){let e=C(2);c(2),W(" ",h(3,5,"igo.integration.mapTool.empty")," "),c(2),l("ngIf",e.layerAdditionAllowed&&(e.searchToolInToolbar||e.catalogToolInToolbar||e.contextToolInToolbar)),c(),l("ngIf",e.layerAdditionAllowed&&e.searchToolInToolbar),c(),l("ngIf",e.layerAdditionAllowed&&e.catalogToolInToolbar),c(),l("ngIf",e.layerAdditionAllowed&&e.contextToolInToolbar)}}function Wd(o,i){if(o&1&&F(0,qd,8,7,"mat-list",8),o&2){let e=C();l("ngIf",e.delayedShowEmptyMapContent)}}var An=class os{mapState;toolState;searchSourceService;importExportState;configService;mediaService;cdr;isDesktop;delayedShowEmptyMapContent=!1;toggleLegendOnVisibilityChange=!1;expandLegendOfVisibleLayers=!1;updateLegendOnResolutionChange=!1;ogcButton=!0;timeButton=!0;layerListControls={};queryBadge=!1;layerAdditionAllowed=!0;_layerViewerOptions;get layerViewerOptions(){return tt({filterAndSortOptions:this.layerFilterAndSortOptions,legend:{showForVisibleLayers:this.expandLegendOfVisibleLayers,showOnVisibilityChange:this.toggleLegendOnVisibilityChange,updateOnResolutionChange:this.updateLegendOnResolutionChange},queryBadge:this.queryBadge},this._layerViewerOptions)}get map(){return this.mapState.map}get layers$(){return this.map.layerController.all$}get excludeBaseLayers(){return this.layerListControls.excludeBaseLayers||!1}get layerFilterAndSortOptions(){let i=Object.assign({showToolbar:Fe.default},this.layerListControls);switch(this.layerListControls.showToolbar){case Fe.always:i.showToolbar=Fe.always;break;case Fe.never:i.showToolbar=Fe.never;break;default:break}return i}get searchToolInToolbar(){return this.toolState.toolbox.getToolbar().indexOf("searchResults")!==-1&&this.searchSourceService.getSources().filter(ii).filter(i=>i.available&&i.getType()==="Layer").length>0}get catalogToolInToolbar(){return this.toolState.toolbox.getToolbar().indexOf("catalog")!==-1}get contextToolInToolbar(){return this.toolState.toolbox.getToolbar().indexOf("contextManager")!==-1}constructor(i,e,t,r,n,a,s){this.mapState=i,this.toolState=e,this.searchSourceService=t,this.importExportState=r,this.configService=n,this.mediaService=a,this.cdr=s,this._layerViewerOptions=this.configService.getConfig("layer")}ngOnInit(){this.handleMedia(),setTimeout(()=>{this.delayedShowEmptyMapContent=!0,this.cdr.detectChanges()},250)}searchEmit(){this.toolState.toolbox.activateTool("searchResults")}catalogEmit(){this.toolState.toolbox.activateTool("catalog")}contextEmit(){this.toolState.toolbox.activateTool("contextManager")}activateExport(i){let e=i.id;i.options.workspace?.workspaceId&&(e=i.options.workspace.workspaceId!==i.id?i.options.workspace.workspaceId:i.id),this.importExportState.setsExportOptions({layers:[e]}),this.importExportState.setMode(Je.export),this.toolState.toolbox.activateTool("importExport")}handleMedia(){this.mediaService.media$.subscribe(i=>{this.isDesktop=i===Zo.Desktop,this.cdr.detectChanges()})}static \u0275fac=function(e){return new(e||os)(f(I),f(N),f(Ue),f(be),f(ne),f(de),f(le))};static \u0275cmp=w({type:os,selectors:[["igo-map-details-tool"]],inputs:{toggleLegendOnVisibilityChange:"toggleLegendOnVisibilityChange",expandLegendOfVisibleLayers:"expandLegendOfVisibleLayers",updateLegendOnResolutionChange:"updateLegendOnResolutionChange",ogcButton:"ogcButton",timeButton:"timeButton",layerListControls:"layerListControls",queryBadge:"queryBadge",layerAdditionAllowed:"layerAdditionAllowed"},standalone:!0,features:[T],decls:4,vars:4,consts:[["empty",""],["customBottomActions",""],["class","mapDetailsList",3,"map","options","excludeBaseLayers","isDesktop",4,"ngIf","ngIfElse"],[1,"mapDetailsList",3,"map","options","excludeBaseLayers","isDesktop"],[3,"layer"],[3,"click","layer"],[3,"header","layer"],[3,"trackFeature","layer"],[4,"ngIf"],[1,"map-empty","mat-typography"],["class","map-empty mat-typography",4,"ngIf"],["matListItemIcon",""],["matListItemTitle","",1,"search-tool","mat-typography",3,"click"],["matListItemTitle","",1,"catalog-tool","mat-typography",3,"click"],["matListItemTitle","",1,"context-tool","mat-typography",3,"click"]],template:function(e,t){if(e&1&&(F(0,$d,3,4,"igo-layer-viewer",2),g(1,"async"),F(2,Wd,1,1,"ng-template",null,0,ge)),e&2){let r=Ee(3);l("ngIf",h(1,2,t.layers$).length)("ngIfElse",r)}},dependencies:[Y,eo,Po,ci,no,ao,to,so,Qt,Ut,Zt,Ht,Wt,Me,Te,ie,me,ce],styles:[`[_nghost-%COMP%]   .map-empty[_ngcontent-%COMP%], [_nghost-%COMP%]   .search-tool[_ngcontent-%COMP%], [_nghost-%COMP%]   .catalog-tool[_ngcontent-%COMP%], [_nghost-%COMP%]   .context-tool[_ngcontent-%COMP%]{margin:10px}[_nghost-%COMP%]   .map-empty[_ngcontent-%COMP%]{text-align:justify}[_nghost-%COMP%]   .search-tool[_ngcontent-%COMP%], [_nghost-%COMP%]   .catalog-tool[_ngcontent-%COMP%], [_nghost-%COMP%]   .context-tool[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   mat-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:700}[_nghost-%COMP%]   mat-list-item[_ngcontent-%COMP%]     .mdc-list-item__primary-text{font-size:smaller}[_nghost-%COMP%]   mat-list.mat-mdc-list-base[_ngcontent-%COMP%]   mat-list-item.mat-mdc-list-item[_ngcontent-%COMP%]     div.mdc-list-item__content div.mdc-list-item__primary-text{padding-left:5px}[_nghost-%COMP%]   .mapDetailsList[_ngcontent-%COMP%]{overflow:hidden}
/*# sourceMappingURL=map-details-tool.component-PKCRCLVO.css.map */`]})};An=G([z({name:"mapDetails",title:"igo.integration.tools.map",icon:"map"}),q("design:paramtypes",[I,N,Ue,be,ne,de,le])],An);function Hd(o,i){if(o&1){let e=$();m(0,"igo-layer-legend-list",4),g(1,"async"),M("allLegendsShown",function(r){L(e);let n=C();return A(n.onShowAllLegends(r))}),u()}if(o&2){let e=C();l("excludeBaseLayers",e.excludeBaseLayers)("allowShowAllLegends",e.allowShowAllLegends)("updateLegendOnResolutionChange",e.updateLegendOnResolutionChange)("showAllLegendsValue",h(1,4,e.showAllLegendsValue$))}}function Ud(o,i){}function Zd(o,i){o&1&&F(0,Ud,0,0,"ng-template")}function Qd(o,i){if(o&1&&(m(0,"p",5),x(1),g(2,"async"),g(3,"translate"),g(4,"translate"),u()),o&2){let e=C();c(),W(" ",h(2,1,e.visibleLayers$).length?h(3,3,"igo.integration.mapTool.noLayersInRange"):h(4,5,"igo.integration.mapTool.noLayersVisible"),`
`)}}function Yd(o,i){o&1&&(m(0,"p",5),x(1),g(2,"translate"),u()),o&2&&(c(),W(" ",h(2,1,"igo.integration.mapTool.customize")," "))}function Jd(o,i){if(o&1){let e=$();m(0,"mat-list-item")(1,"mat-icon",7),x(2,"search"),u(),m(3,"span",8),M("click",function(){L(e);let r=C(3);return A(r.searchEmit())}),x(4),g(5,"translate"),u()()}o&2&&(c(4),W(" ",h(5,1,"igo.integration.mapTool.search-tool")," "))}function Kd(o,i){if(o&1){let e=$();m(0,"mat-list-item")(1,"mat-icon",7),x(2,"library_add"),u(),m(3,"span",9),M("click",function(){L(e);let r=C(3);return A(r.catalogEmit())}),x(4),g(5,"translate"),u()()}o&2&&(c(4),W(" ",h(5,1,"igo.integration.mapTool.catalog-tool")," "))}function Xd(o,i){if(o&1){let e=$();m(0,"mat-list-item")(1,"mat-icon",7),x(2,"star"),u(),m(3,"span",10),M("click",function(){L(e);let r=C(3);return A(r.contextEmit())}),x(4),g(5,"translate"),u()()}o&2&&(c(4),W(" ",h(5,1,"igo.integration.mapTool.context-tool")," "))}function ef(o,i){if(o&1&&(m(0,"mat-list")(1,"p",5),x(2),g(3,"translate"),u(),F(4,Yd,3,3,"p",3)(5,Jd,6,3,"mat-list-item",6)(6,Kd,6,3,"mat-list-item",6)(7,Xd,6,3,"mat-list-item",6),u()),o&2){let e=C(2);c(2),W(" ",h(3,5,"igo.integration.mapTool.empty")," "),c(2),l("ngIf",e.layerAdditionAllowed&&(e.searchToolInToolbar||e.catalogToolInToolbar||e.contextToolInToolbar)),c(),l("ngIf",e.layerAdditionAllowed&&e.searchToolInToolbar),c(),l("ngIf",e.layerAdditionAllowed&&e.catalogToolInToolbar),c(),l("ngIf",e.layerAdditionAllowed&&e.contextToolInToolbar)}}function tf(o,i){if(o&1&&F(0,ef,8,7,"mat-list",6),o&2){let e=C();l("ngIf",e.delayedShowEmptyMapContent)}}var Fn=class is{mapState;toolState;searchSourceService;cdRef;delayedShowEmptyMapContent=!1;layers$=new P([]);showAllLegendsValue$=new P(!1);change$=new ds(1);resolution$$;visibleOrInRangeLayers$$;updateLegendOnResolutionChange=!1;layerAdditionAllowed=!0;allowShowAllLegends=!1;showAllLegendsValue=!1;layerListControls={};get map(){return this.mapState.map}get visibleOrInRangeLayers$(){return this.layers$.pipe(ot(i=>i.filter(e=>e.displayed)))}get visibleLayers$(){return this.layers$.pipe(ot(i=>i.filter(e=>e.visible)))}get excludeBaseLayers(){return this.layerListControls.excludeBaseLayers||!1}get searchToolInToolbar(){return this.toolState.toolbox.getToolbar().indexOf("searchResults")!==-1&&this.searchSourceService.getSources().filter(ii).filter(i=>i.available&&i.getType()==="Layer").length>0}get catalogToolInToolbar(){return this.toolState.toolbox.getToolbar().indexOf("catalog")!==-1}get contextToolInToolbar(){return this.toolState.toolbox.getToolbar().indexOf("contextManager")!==-1}constructor(i,e,t,r){this.mapState=i,this.toolState=e,this.searchSourceService=t,this.cdRef=r}ngOnInit(){this.resolution$$=De([this.map.layerController.all$,this.map.viewController.resolution$]).pipe(dt(10)).subscribe(i=>{this.layers$.next(i[0].filter(e=>e.showInLayerList!==!1&&(!this.excludeBaseLayers||!fr(e))))}),this.allowShowAllLegends?(this.mapState.showAllLegendsValue=this.mapState.showAllLegendsValue!==void 0?this.mapState.showAllLegendsValue:this.showAllLegendsValue||!1,this.showAllLegendsValue$.next(this.mapState.showAllLegendsValue)):this.showAllLegendsValue$.next(!1),setTimeout(()=>{this.delayedShowEmptyMapContent=!0,this.cdRef.detectChanges()},250)}onShowAllLegends(i){this.mapState.showAllLegendsValue=i,this.showAllLegendsValue$.next(i)}showAllLegend(){if(this.layers$.getValue().length===0)return!1;if(this.layers$.getValue().length!==0&&this.allowShowAllLegends===!1){let i;if(this.visibleOrInRangeLayers$$=this.visibleOrInRangeLayers$.subscribe(e=>{i=e.length!==0}),i===!1)return!1}return!0}ngOnDestroy(){this.resolution$$.unsubscribe(),this.visibleOrInRangeLayers$$&&this.visibleOrInRangeLayers$$.unsubscribe()}searchEmit(){this.toolState.toolbox.activateTool("searchResults")}catalogEmit(){this.toolState.toolbox.activateTool("catalog")}contextEmit(){this.toolState.toolbox.activateTool("contextManager")}static \u0275fac=function(e){return new(e||is)(f(I),f(N),f(Ue),f(le))};static \u0275cmp=w({type:is,selectors:[["igo-map-legend-tool"]],inputs:{updateLegendOnResolutionChange:"updateLegendOnResolutionChange",layerAdditionAllowed:"layerAdditionAllowed",allowShowAllLegends:"allowShowAllLegends",showAllLegendsValue:"showAllLegendsValue",layerListControls:"layerListControls"},standalone:!0,features:[T],decls:8,vars:10,consts:[["emptyLayers",""],["igoLayerLegendListBinding","",3,"excludeBaseLayers","allowShowAllLegends","updateLegendOnResolutionChange","showAllLegendsValue","allLegendsShown",4,"ngIf"],[4,"ngIf","ngIfElse"],["class","map-empty mat-typography",4,"ngIf"],["igoLayerLegendListBinding","",3,"allLegendsShown","excludeBaseLayers","allowShowAllLegends","updateLegendOnResolutionChange","showAllLegendsValue"],[1,"map-empty","mat-typography"],[4,"ngIf"],["matListItemIcon",""],["matListItemTitle","",1,"search-tool","mat-typography",3,"click"],["matListItemTitle","",1,"catalog-tool","mat-typography",3,"click"],["matListItemTitle","",1,"context-tool","mat-typography",3,"click"]],template:function(e,t){if(e&1&&(F(0,Hd,2,6,"igo-layer-legend-list",1)(1,Zd,1,0,null,2),g(2,"async"),F(3,Qd,5,7,"p",3),g(4,"async"),g(5,"async"),F(6,tf,1,1,"ng-template",null,0,ge)),e&2){let r=Ee(7);l("ngIf",t.showAllLegend()),c(),l("ngIf",h(2,4,t.layers$).length!==0)("ngIfElse",r),c(2),l("ngIf",!t.allowShowAllLegends&&h(4,6,t.layers$).length!==0&&h(5,8,t.visibleOrInRangeLayers$).length===0)}},dependencies:[Y,ei,Ar,Qt,Ut,Zt,Ht,Wt,Me,Te,ie,me,ce],styles:[`[_nghost-%COMP%]   .map-empty[_ngcontent-%COMP%], [_nghost-%COMP%]   .search-tool[_ngcontent-%COMP%], [_nghost-%COMP%]   .catalog-tool[_ngcontent-%COMP%], [_nghost-%COMP%]   .context-tool[_ngcontent-%COMP%]{margin:10px}[_nghost-%COMP%]   .map-empty[_ngcontent-%COMP%]{text-align:justify}[_nghost-%COMP%]   .search-tool[_ngcontent-%COMP%], [_nghost-%COMP%]   .catalog-tool[_ngcontent-%COMP%], [_nghost-%COMP%]   .context-tool[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   mat-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:700}[_nghost-%COMP%]   mat-list-item[_ngcontent-%COMP%]     .mdc-list-item__primary-text{font-size:smaller}[_nghost-%COMP%]   mat-list.mat-mdc-list-base[_ngcontent-%COMP%]   mat-list-item.mat-mdc-list-item[_ngcontent-%COMP%]     div.mdc-list-item__content div.mdc-list-item__primary-text{padding-left:5px}
/*# sourceMappingURL=map-legend-tool.component-CFAV3Q3Y.css.map */`]})};Fn=G([z({name:"mapLegend",title:"igo.integration.tools.legend",icon:"format_list_bulleted"}),q("design:paramtypes",[I,N,Ue,le])],Fn);var Pn=(()=>{class o{mapState;storageService;defaultProximityRadiusValue=30;enabled$=new P(!1);proximityRadiusValue$;proximitylocationType$=new P("geolocation");proximityFeatureStore;subs$$=[];currentPositionCoordinate$=new P(void 0);get map(){return this.mapState.map}constructor(e,t){this.mapState=e,this.storageService=t,this.proximityFeatureStore=new Tt([],{map:this.mapState.map}),this.proximityRadiusValue$=new P(this.storageService.get("mapProximityRadius")||this.defaultProximityRadiusValue),this.mapState.map.ol.once("rendercomplete",()=>{this.subscribeProximityMonitor()})}subscribeProximityMonitor(){this.subs$$.push(De([this.enabled$,this.proximitylocationType$,this.proximityRadiusValue$,fs(5e3),this.map.geolocationController.position$]).pipe(dt(750)).subscribe(e=>{this.proximityFeatureStore.clear();let t=e[0],r=this.map.layerController.all,n=this.map.geolocationController.position$.value,a=e[1],s=e[2];if(this.storageService.set("mapProximityRadius",s||this.defaultProximityRadiusValue),!t)return;let p;if(a==="geolocation"){if(!n||!n.position)return;p=Ne(n.position,n.projection,this.map.projection),this.map.mapCenter$.next(!1)}else p=this.map.viewController.getCenter(),this.map.mapCenter$.next(!0);let d=Ne(p,this.map.projection,"EPSG:4269"),S=dr(d,6);this.currentPositionCoordinate$.next(S),r.filter(y=>nt(y)&&y.ol instanceof Hs&&y.dataSource.options.queryable&&y.visible&&y.isInResolutionsRange).map(y=>{let b=y.ol.getSource(),O=b.getFeaturesAtCoordinate(p);if(O&&O.length)O.map(j=>{let V=Ei(j,this.map.projection),D=this.getQueryTitle(V,y);this.addFeatureToStore(y,p,V,D,0)});else{let j=b.getClosestFeatureToCoordinate(p);if(j){let V=j.getGeometry(),D=Ei(j,this.map.projection),U=V.getClosestPoint(p),H=new gr([p,U]),k=Tl(H,"EPSG:3857");if(k<=s){let E=this.getQueryTitle(D,y);this.addFeatureToStore(y,p,D,E,k)}}}})}))}addFeatureToStore(e,t,r,n,a){let s=Ds(),p=this.map.ol.getView().getProjection(),d=r.ol.getGeometry(),S=new Kt().writeGeometryObject(d,{featureProjection:p,dataProjection:p});this.proximityFeatureStore.update({type:at,geometry:S,projection:p.getCode(),properties:Oi(tt({},r.properties),{id:s,element:n,distance:a,coordFromCalculatedDistance:t,layerSrcId:e.id,layerSrcTitle:e.title}),meta:{id:s}})}getQueryTitle(e,t){if(nt(t)&&t.options?.source?.options){let r=t.options.source.options;if(r.queryTitle)return this.getLabelMatch(e,r.queryTitle)}}getLabelMatch(e,t){let r=t,n=Array.from(t.matchAll(/\$\{([^\{\}]+)\}/g));return n.forEach(a=>{r=r.replace(a[0],e.properties[a[1]])}),n.length===0&&r===t&&(r=e.properties[t]||t),r}static \u0275fac=function(t){return new(t||o)(B(I),B(he))};static \u0275prov=K({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var rf=["table"];function nf(o,i){if(o&1&&(m(0,"mat-form-field",15),v(1,"textarea",16,1),g(3,"translate"),u()),o&2){let e=i.ngIf;c(),l("placeholder",h(3,2,"igo.integration.map-proximity-tool.lon"))("value",e[0])}}function af(o,i){if(o&1&&(m(0,"mat-form-field",17),v(1,"textarea",16,1),g(3,"translate"),u()),o&2){let e=i.ngIf;c(),l("placeholder",h(3,2,"igo.integration.map-proximity-tool.lat"))("value",e[1])}}function sf(o,i){if(o&1){let e=$();m(0,"button",18),M("click",function(){L(e);let r=C();return A(r.copyTextToClipboard())}),m(1,"mat-icon"),x(2,"content_copy"),u()()}}var Rn=class rs{mapState;mapProximityState;languageService;messageService;subs$$=[];table;get maxDistance(){return this.mapProximityState.proximityRadiusValue$.value}set maxDistance(i){this.mapProximityState.proximityRadiusValue$.next(i)}get map(){return this.mapState.map}userDefinedMapCenter;userDefinedFollowPosition;tableTemplate;constructor(i,e,t,r){this.mapState=i,this.mapProximityState=e,this.languageService=t,this.messageService=r,this.tableTemplate={selection:!0,selectMany:!1,selectionCheckbox:!1,sort:!0,columns:[{name:"element",title:this.languageService.translate.instant("igo.integration.map-proximity-tool.feature"),valueAccessor:n=>n.properties.element},{name:"distance",title:this.languageService.translate.instant("igo.integration.map-proximity-tool.distance"),valueAccessor:n=>`${Rs.roundToNDecimal(n.properties.distance,1)}m`}]}}ngOnInit(){this.mapProximityState.enabled$.next(!0),this.userDefinedFollowPosition=this.map.geolocationController.followPosition===!0,this.userDefinedMapCenter=this.map.mapCenter$.value===!0,this.subs$$.push(this.mapProximityState.proximitylocationType$.subscribe(i=>{this.map.mapCenter$.next(i!=="geolocation"),i==="geolocation"?this.map.geolocationController.followPosition=!0:this.map.geolocationController.followPosition=!1}))}ngOnDestroy(){this.mapProximityState.enabled$.next(!1),this.map.mapCenter$.next(this.userDefinedMapCenter),this.subs$$.map(i=>i.unsubscribe()),this.map.geolocationController.followPosition=this.userDefinedFollowPosition}onLocationTypeChange(i){this.mapProximityState.proximitylocationType$.next(i.value)}copyTextToClipboard(){ur.copy(this.mapProximityState.currentPositionCoordinate$?.value.toString())&&this.messageService.success("igo.integration.map-proximity-tool.copyMsg","igo.integration.map-proximity-tool.copyTitle")}static \u0275fac=function(e){return new(e||rs)(f(I),f(Pn),f(re),f(Ie))};static \u0275cmp=w({type:rs,selectors:[["igo-map-proximity-tool"]],viewQuery:function(e,t){if(e&1&&ko(rf,7),e&2){let r;jo(r=$o())&&(t.table=r.first)}},standalone:!0,features:[T],decls:31,vars:35,consts:[["table",""],["textArea",""],[1,"table-compact",3,"store","template"],["class","coordinates",4,"ngIf"],["class","coordinates2",4,"ngIf"],["mat-icon-button","",3,"click",4,"ngIf"],[1,"title-container"],[1,"title","mat-typography"],[1,"igo-input-container","mat-typography"],[3,"change"],["value","geolocation",3,"checked"],["value","mapCenter",3,"checked"],[1,"radius-unit"],["floatLabel","always",1,"radius-field"],["type","number","pattern","[0-9]*","matInput","",3,"ngModelChange","ngModel","placeholder"],[1,"coordinates"],["matInput","","readonly","","rows","1",3,"placeholder","value"],[1,"coordinates2"],["mat-icon-button","",3,"click"]],template:function(e,t){if(e&1){let r=$();v(0,"igo-entity-table",2,0)(2,"br"),F(3,nf,4,4,"mat-form-field",3),g(4,"async"),F(5,af,4,4,"mat-form-field",4),g(6,"async"),F(7,sf,3,0,"button",5),g(8,"async"),g(9,"async"),m(10,"div",6)(11,"mat-label",7),x(12),g(13,"translate"),u()(),m(14,"div",8)(15,"mat-radio-group",9),M("change",function(a){return L(r),A(t.onLocationTypeChange(a))}),m(16,"mat-radio-button",10),g(17,"async"),x(18),g(19,"translate"),u(),m(20,"mat-radio-button",11),g(21,"async"),x(22),g(23,"translate"),u()()(),m(24,"div",12)(25,"mat-form-field",13)(26,"mat-label"),x(27),g(28,"translate"),u(),m(29,"input",14),g(30,"translate"),Zi("ngModelChange",function(a){return L(r),Ui(t.maxDistance,a)||(t.maxDistance=a),A(a)}),u()()()}e&2&&(l("store",t.mapProximityState.proximityFeatureStore)("template",t.tableTemplate),c(3),l("ngIf",h(4,13,t.mapProximityState.currentPositionCoordinate$)),c(2),l("ngIf",h(6,15,t.mapProximityState.currentPositionCoordinate$)),c(2),l("ngIf",h(8,17,t.mapProximityState.currentPositionCoordinate$)&&h(9,19,t.mapProximityState.currentPositionCoordinate$).length),c(5),ye(h(13,21,"igo.integration.map-proximity-tool.method")),c(4),l("checked",h(17,23,t.mapProximityState.proximitylocationType$)==="geolocation"),c(2),ye(h(19,25,"igo.integration.map-proximity-tool.geolocation")),c(2),l("checked",h(21,27,t.mapProximityState.proximitylocationType$)==="mapCenter"),c(2),ye(h(23,29,"igo.integration.map-proximity-tool.mapCenter")),c(5),ye(h(28,31,"igo.integration.map-proximity-tool.radiusM")),c(2),Cs("placeholder",h(30,33,"igo.integration.map-proximity-tool.radiusM")),Hi("ngModel",t.maxDistance))},dependencies:[Qo,Y,No,zo,Go,Tr,xr,He,wt,Me,Te,bl,_l,Cl,Wo,Ms,Os,ar,Ls,Is,ie,me,ce],styles:[`[_nghost-%COMP%]   .table-compact[_ngcontent-%COMP%]{height:auto}[_nghost-%COMP%]   .table-compact[_ngcontent-%COMP%]     .mat-mdc-header-cell.mat-column-selectionCheckbox{width:52px}[_nghost-%COMP%]   textarea[_ngcontent-%COMP%]{resize:none}[_nghost-%COMP%]   mat-form-field[_ngcontent-%COMP%]{padding:10px 15px}[_nghost-%COMP%]   mat-form-field.coordinates[_ngcontent-%COMP%]{width:110px}[_nghost-%COMP%]   mat-form-field.coordinates2[_ngcontent-%COMP%]{width:100px;padding:0 10px 0 3px}[_nghost-%COMP%]   mat-form-field.igo-input-container[_ngcontent-%COMP%]{width:60%;padding:0 15px}[_nghost-%COMP%]   .radius-unit[_ngcontent-%COMP%]{display:flex;width:90%;margin-left:2px;padding:5px}[_nghost-%COMP%]   .radius-unit[_ngcontent-%COMP%]   mat-form-field.radius-field[_ngcontent-%COMP%]{display:flex;flex-flow:column nowrap;width:100%}[_nghost-%COMP%]   .title-container[_ngcontent-%COMP%]{padding:10px}[_nghost-%COMP%]   .title[_ngcontent-%COMP%]{margin-left:5px;font-size:initial}[_nghost-%COMP%]   .mat-mdc-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   .mat-mdc-radio-button[_ngcontent-%COMP%]{display:inline-flex;position:relative;margin-left:12px}
/*# sourceMappingURL=map-proximity-tool.component-UYIAOMM5.css.map */`]})};Rn=G([z({name:"map-proximity",title:"igo.integration.tools.closestFeature",icon:"radar"}),q("design:paramtypes",[I,Pn,re,Ie])],Rn);function lf(o,i){if(o&1){let e=$();v(0,"igo-workspace-button",4),m(1,"igo-export-button",5),M("click",function(){let r=L(e).layer,n=C();return A(n.activateExport(r))}),u(),v(2,"igo-ogc-filter-button",6)(3,"igo-time-filter-button",6)(4,"igo-track-feature-button",7)(5,"igo-metadata-button",4)}if(o&2){let e=i.layer,t=C();l("layer",e),c(),l("layer",e),c(),l("header",t.ogcButton)("layer",e),c(),l("header",t.timeButton)("layer",e),c(),l("trackFeature",!0)("layer",e),c(),l("layer",e)}}var Dn=class ns{mapState;toolState;importExportState;configService;mediaService;cdr;isDesktop;toggleLegendOnVisibilityChange=!1;expandLegendOfVisibleLayers=!1;updateLegendOnResolutionChange=!1;ogcButton=!0;timeButton=!0;layerListControls={};queryBadge=!1;get map(){return this.mapState.map}get excludeBaseLayers(){return this.layerListControls.excludeBaseLayers||!1}get layerFilterAndSortOptions(){let i=Object.assign({showToolbar:Fe.default},this.layerListControls);switch(this.layerListControls.showToolbar){case Fe.always:i.showToolbar=Fe.always;break;case Fe.never:i.showToolbar=Fe.never;break;default:break}return i}_layerViewerOptions;get layerViewerOptions(){return tt({filterAndSortOptions:this.layerFilterAndSortOptions,legend:{showForVisibleLayers:this.expandLegendOfVisibleLayers,showOnVisibilityChange:this.toggleLegendOnVisibilityChange,updateOnResolutionChange:this.updateLegendOnResolutionChange},queryBadge:this.queryBadge},this._layerViewerOptions)}constructor(i,e,t,r,n,a){this.mapState=i,this.toolState=e,this.importExportState=t,this.configService=r,this.mediaService=n,this.cdr=a,this._layerViewerOptions=this.configService.getConfig("layer")}ngOnInit(){this.handleMedia()}activateExport(i){let e=i.id;i.options.workspace?.workspaceId&&(e=i.options.workspace.workspaceId!==i.id?i.options.workspace.workspaceId:i.id),this.importExportState.setsExportOptions({layers:[e]}),this.importExportState.setMode(Je.export),this.toolState.toolbox.activateTool("importExport")}handleMedia(){this.mediaService.media$.subscribe(i=>{this.isDesktop=i===Zo.Desktop,this.cdr.detectChanges()})}static \u0275fac=function(e){return new(e||ns)(f(I),f(N),f(be),f(ne),f(de),f(le))};static \u0275cmp=w({type:ns,selectors:[["igo-map-tool"]],inputs:{toggleLegendOnVisibilityChange:"toggleLegendOnVisibilityChange",expandLegendOfVisibleLayers:"expandLegendOfVisibleLayers",updateLegendOnResolutionChange:"updateLegendOnResolutionChange",ogcButton:"ogcButton",timeButton:"timeButton",layerListControls:"layerListControls",queryBadge:"queryBadge"},standalone:!0,features:[T],decls:9,vars:10,consts:[["customBottomActions",""],[3,"label"],[3,"map","options","excludeBaseLayers","isDesktop"],["igoContextListBinding",""],[3,"layer"],[3,"click","layer"],[3,"header","layer"],[3,"trackFeature","layer"]],template:function(e,t){e&1&&(m(0,"mat-tab-group")(1,"mat-tab",1),g(2,"translate"),m(3,"igo-layer-viewer",2),F(4,lf,6,9,"ng-template",null,0,ge),u()(),m(6,"mat-tab",1),g(7,"translate"),v(8,"igo-context-list",3),u()()),e&2&&(c(),l("label",h(2,6,"igo.integration.tools.map")),c(2),l("map",t.map)("options",t.layerViewerOptions)("excludeBaseLayers",t.excludeBaseLayers)("isDesktop",t.isDesktop),c(3),l("label",h(7,8,"igo.integration.tools.contexts")))},dependencies:[li,ai,si,Po,ci,no,ao,to,so,eo,tn,on,me,ce],styles:[`[_nghost-%COMP%]     .mat-mdc-tab-body-content{overflow:hidden}
/*# sourceMappingURL=map-tool.component-QZDJRLFS.css.map */`],changeDetection:0})};Dn=G([z({name:"map",title:"igo.integration.tools.map",icon:"map"}),q("design:paramtypes",[I,N,be,ne,de,le])],Dn);var cf=["tabGroup"];function pf(o,i){if(o&1&&v(0,"igo-style-modal-layer-button",12),o&2){let e=C().layer;l("layer",e)}}function mf(o,i){if(o&1){let e=$();m(0,"igo-time-filter-button",16),M("click",function(){L(e);let r=C(2);return A(r.activateTimeFilter())}),u()}if(o&2){let e=C().layer,t=C();l("header",t.timeButton)("layer",e)}}function uf(o,i){if(o&1){let e=$();m(0,"igo-ogc-filter-button",16),M("click",function(){L(e);let r=C(2);return A(r.activateOgcFilter())}),u()}if(o&2){let e=C().layer,t=C();l("header",t.ogcButton)("layer",e)}}function df(o,i){if(o&1){let e=$();m(0,"igo-export-button",17),M("click",function(){L(e);let r=C().layer,n=C();return A(n.activateExport(r))}),u()}if(o&2){let e=C().layer;l("layer",e)}}function ff(o,i){if(o&1&&(F(0,pf,1,1,"igo-style-modal-layer-button",11),v(1,"igo-metadata-button",12)(2,"igo-track-feature-button",13),F(3,mf,1,2,"igo-time-filter-button",14)(4,uf,1,2,"igo-ogc-filter-button",14)(5,df,1,1,"igo-export-button",15),v(6,"igo-workspace-button",12)),o&2){let e=i.layer,t=C();l("ngIf",t.isStyleEditButton(e)),c(),l("layer",e),c(),l("trackFeature",!0)("layer",e),c(),l("ngIf",t.isTimeFilterButton(e)),c(),l("ngIf",t.isOGCFilterButton(e)),c(),l("ngIf",t.isExportButton(e)),c(),l("layer",e)}}function gf(o,i){}function hf(o,i){if(o&1){let e=$();m(0,"igo-layer-legend-list",18),g(1,"async"),M("allLegendsShown",function(r){L(e);let n=C();return A(n.onShowAllLegends(r))}),u()}if(o&2){let e=C();l("allowShowAllLegends",e.allowShowAllLegends)("showAllLegendsValue",h(1,4,e.showAllLegendsValue$))("excludeBaseLayers",e.excludeBaseLayers)("updateLegendOnResolutionChange",e.updateLegendOnResolutionChange)}}function yf(o,i){}function Sf(o,i){o&1&&F(0,yf,0,0,"ng-template")}function vf(o,i){if(o&1&&(m(0,"p",19),x(1),g(2,"async"),g(3,"translate"),g(4,"translate"),u()),o&2){let e=C();c(),W(" ",h(2,1,e.visibleLayers$).length?h(3,3,"igo.integration.mapTool.noLayersInRange"):h(4,5,"igo.integration.mapTool.noLayersVisible")," ")}}function _f(o,i){o&1&&(m(0,"p",19),x(1),g(2,"translate"),u()),o&2&&(c(),W(" ",h(2,1,"igo.integration.mapTool.customize")," "))}function Cf(o,i){if(o&1){let e=$();m(0,"mat-list-item")(1,"mat-icon",21),x(2,"search"),u(),m(3,"span",22),M("click",function(){L(e);let r=C(3);return A(r.searchEmit())}),x(4),g(5,"translate"),u()()}o&2&&(c(4),W(" ",h(5,1,"igo.integration.mapTool.search-tool")," "))}function bf(o,i){if(o&1){let e=$();m(0,"mat-list-item")(1,"mat-icon",21),x(2,"library_add"),u(),m(3,"span",23),M("click",function(){L(e);let r=C(3);return A(r.catalogEmit())}),x(4),g(5,"translate"),u()()}o&2&&(c(4),W(" ",h(5,1,"igo.integration.mapTool.catalog-tool")," "))}function wf(o,i){if(o&1){let e=$();m(0,"mat-list-item")(1,"mat-icon",21),x(2,"star"),u(),m(3,"span",24),M("click",function(){L(e);let r=C(3);return A(r.contextEmit())}),x(4),g(5,"translate"),u()()}o&2&&(c(4),W(" ",h(5,1,"igo.integration.mapTool.context-tool")," "))}function xf(o,i){if(o&1&&(m(0,"mat-list")(1,"p",19),x(2),g(3,"translate"),u(),F(4,_f,3,3,"p",10)(5,Cf,6,3,"mat-list-item",20)(6,bf,6,3,"mat-list-item",20)(7,wf,6,3,"mat-list-item",20),u()),o&2){let e=C(2);c(2),W(" ",h(3,5,"igo.integration.mapTool.empty")," "),c(2),l("ngIf",e.layerAdditionAllowed&&(e.searchToolInToolbar||e.catalogToolInToolbar||e.contextToolInToolbar)),c(),l("ngIf",e.layerAdditionAllowed&&e.searchToolInToolbar),c(),l("ngIf",e.layerAdditionAllowed&&e.catalogToolInToolbar),c(),l("ngIf",e.layerAdditionAllowed&&e.contextToolInToolbar)}}function Tf(o,i){if(o&1&&F(0,xf,8,7,"mat-list",20),o&2){let e=C();l("ngIf",e.delayedShowEmptyMapContent)}}var Bn=class as{layerListToolState;toolState;mapState;searchSourceService;importExportState;configService;mediaService;cdr;isDesktop;layers$=new P([]);showAllLegendsValue$=new P(!1);resolution$$;visibleOrInRangeLayers$$;delayedShowEmptyMapContent=!1;allowShowAllLegends=!1;showAllLegendsValue=!1;toggleLegendOnVisibilityChange=!1;expandLegendOfVisibleLayers=!1;updateLegendOnResolutionChange=!1;selectedTabAtOpening;ogcButton=!0;timeButton=!0;layerAdditionAllowed=!0;get layerListControls(){return this._layerListControls}set layerListControls(i){let e=this.layerListToolState.getLayerListControls(),t=e.keyword,r=e.onlyVisible,n=e.sortAlpha;i.keyword=t!==""?t:i.keyword,i.onlyVisible=r!==void 0?r:i.onlyVisible,i.sortAlpha=n!==void 0?n:i.sortAlpha,i.onlyVisible=i.onlyVisible===void 0?!1:i.onlyVisible,i.sortAlpha=i.sortAlpha===void 0?!1:i.sortAlpha,this._layerListControls=i}_layerListControls={};get map(){return this.mapState.map}queryBadge=!1;get visibleOrInRangeLayers$(){return this.layers$.pipe(ot(i=>i.filter(e=>e.displayed)))}get visibleLayers$(){return this.layers$.pipe(ot(i=>i.filter(e=>e.visible)))}get excludeBaseLayers(){return this.layerListControls.excludeBaseLayers||!1}get layerFilterAndSortOptions(){let i=Object.assign({showToolbar:Fe.default},this.layerListControls);switch(this.layerListControls.showToolbar){case Fe.always:i.showToolbar=Fe.always;break;case Fe.never:i.showToolbar=Fe.never;break;default:break}return i}_layerViewerOptions;get layerViewerOptions(){return tt({filterAndSortOptions:this.layerFilterAndSortOptions,legend:{showForVisibleLayers:this.expandLegendOfVisibleLayers,showOnVisibilityChange:this.toggleLegendOnVisibilityChange,updateOnResolutionChange:this.updateLegendOnResolutionChange},queryBadge:this.queryBadge},this._layerViewerOptions)}tabGroup;get searchToolInToolbar(){return this.toolState.toolbox.getToolbar().indexOf("searchResults")!==-1&&this.searchSourceService.getSources().filter(ii).filter(i=>i.available&&i.getType()==="Layer").length>0}get catalogToolInToolbar(){return this.toolState.toolbox.getToolbar().indexOf("catalog")!==-1}get contextToolInToolbar(){return this.toolState.toolbox.getToolbar().indexOf("contextManager")!==-1}constructor(i,e,t,r,n,a,s,p){this.layerListToolState=i,this.toolState=e,this.mapState=t,this.searchSourceService=r,this.importExportState=n,this.configService=a,this.mediaService=s,this.cdr=p,this._layerViewerOptions=this.configService.getConfig("layer")}ngOnInit(){this.handleMedia(),this.selectedTab(),this.resolution$$=De([this.map.layerController.all$,this.map.viewController.resolution$]).pipe(dt(10)).subscribe(([i])=>{this.layers$.next(i)}),this.allowShowAllLegends?(this.mapState.showAllLegendsValue=this.mapState.showAllLegendsValue!==void 0?this.mapState.showAllLegendsValue:this.showAllLegendsValue||!1,this.showAllLegendsValue$.next(this.mapState.showAllLegendsValue)):this.showAllLegendsValue$.next(!1),setTimeout(()=>this.delayedShowEmptyMapContent=!0,250)}ngOnDestroy(){this.resolution$$.unsubscribe(),this.visibleOrInRangeLayers$$&&this.visibleOrInRangeLayers$$.unsubscribe()}onShowAllLegends(i){this.mapState.showAllLegendsValue=i,this.showAllLegendsValue$.next(i)}selectedTab(){let i=this.layerListToolState.selectedTab$.value;i!==void 0?this.layerListToolState.setSelectedTab(i):this.selectedTabAtOpening==="legend"?this.layerListToolState.setSelectedTab(1):this.layerListToolState.setSelectedTab(0)}tabChanged(i){this.layerListToolState.setSelectedTab(i.index),this.layers$.next(this.map.layerController.all)}onLayerListChange(i){this.layerListToolState.setKeyword(i.keyword),this.layerListToolState.setSortAlpha(i.sortAlpha),this.layerListToolState.setOnlyVisible(i.onlyVisible)}showAllLegend(){if(this.layers$.getValue().length===0)return!1;if(this.layers$.getValue().length!==0&&this.allowShowAllLegends===!1){let i;if(this.visibleOrInRangeLayers$$=this.visibleOrInRangeLayers$.subscribe(e=>{i=e.length!==0}),i===!1)return!1}return!0}activateExport(i){let e=i.id;i.options.workspace?.workspaceId&&(e=i.options.workspace.workspaceId!==i.id?i.options.workspace.workspaceId:i.id),this.importExportState.setsExportOptions({layers:[e]}),this.importExportState.setMode(Je.export),this.toolState.toolbox.activateTool("importExport")}activateTimeFilter(){this.toolState.toolbox.activateTool("activeTimeFilter")}activateOgcFilter(){this.toolState.toolbox.activateTool("activeOgcFilter")}searchEmit(){this.toolState.toolbox.activateTool("searchResults")}catalogEmit(){this.toolState.toolbox.activateTool("catalog")}contextEmit(){this.toolState.toolbox.activateTool("contextManager")}isTimeFilterButton(i){let e=i.dataSource.options;return this.timeButton&&e.timeFilterable&&e.timeFilter}isOGCFilterButton(i){let e=i.dataSource.options;return this.ogcButton&&e.ogcFilters&&e.ogcFilters.enabled&&(e.ogcFilters.pushButtons||e.ogcFilters.checkboxes||e.ogcFilters.radioButtons||e.ogcFilters.select||e.ogcFilters.autocomplete||e.ogcFilters.editable)}isExportButton(i){return!!(i instanceof zn&&i.exportable===!0||i.dataSource.options.download&&i.dataSource.options.download.url||i.options.workspace?.enabled&&i.options.workspace?.workspaceId!==i.id)}isStyleEditButton(i){return!!(i instanceof zn&&i.options?.igoStyle?.editable)}handleMedia(){this.mediaService.media$.subscribe(i=>{this.isDesktop=i===Zo.Desktop,this.cdr.detectChanges()})}static \u0275fac=function(e){return new(e||as)(f(ho),f(N),f(I),f(Ue),f(be),f(ne),f(de),f(le))};static \u0275cmp=w({type:as,selectors:[["igo-map-tools"]],viewQuery:function(e,t){if(e&1&&ko(cf,7),e&2){let r;jo(r=$o())&&(t.tabGroup=r.first)}},inputs:{allowShowAllLegends:"allowShowAllLegends",showAllLegendsValue:"showAllLegendsValue",toggleLegendOnVisibilityChange:"toggleLegendOnVisibilityChange",expandLegendOfVisibleLayers:"expandLegendOfVisibleLayers",updateLegendOnResolutionChange:"updateLegendOnResolutionChange",selectedTabAtOpening:"selectedTabAtOpening",ogcButton:"ogcButton",timeButton:"timeButton",layerAdditionAllowed:"layerAdditionAllowed",layerListControls:"layerListControls",queryBadge:"queryBadge"},standalone:!0,features:[T],decls:20,vars:24,consts:[["tabGroup",""],["customBottomActions",""],["emptyLayers",""],[3,"selectedTabChange","selectedIndex"],[3,"label"],[3,"appliedFilterAndSort","options","map","excludeBaseLayers","isDesktop"],["ngProjectAs","[emptyList]",5,["","emptyList",""]],[3,"ngTemplateOutlet"],["igoLayerLegendListBinding","",3,"allowShowAllLegends","showAllLegendsValue","excludeBaseLayers","updateLegendOnResolutionChange","allLegendsShown",4,"ngIf"],[4,"ngIf","ngIfElse"],["class","map-empty mat-typography",4,"ngIf"],[3,"layer",4,"ngIf"],[3,"layer"],[3,"trackFeature","layer"],[3,"header","layer","click",4,"ngIf"],[3,"layer","click",4,"ngIf"],[3,"click","header","layer"],[3,"click","layer"],["igoLayerLegendListBinding","",3,"allLegendsShown","allowShowAllLegends","showAllLegendsValue","excludeBaseLayers","updateLegendOnResolutionChange"],[1,"map-empty","mat-typography"],[4,"ngIf"],["matListItemIcon",""],["matListItemTitle","",1,"search-tool","mat-typography",3,"click"],["matListItemTitle","",1,"catalog-tool","mat-typography",3,"click"],["matListItemTitle","",1,"context-tool","mat-typography",3,"click"]],template:function(e,t){if(e&1){let r=$();m(0,"mat-tab-group",3,0),g(2,"async"),M("selectedTabChange",function(a){return L(r),A(t.tabChanged(a))}),m(3,"mat-tab",4),g(4,"translate"),m(5,"igo-layer-viewer",5),M("appliedFilterAndSort",function(a){return L(r),A(t.onLayerListChange(a))}),F(6,ff,7,8,"ng-template",null,1,ge),it(8,6),F(9,gf,0,0,"ng-template",7),rt(),u()(),m(10,"mat-tab",4),g(11,"translate"),F(12,hf,2,6,"igo-layer-legend-list",8)(13,Sf,1,0,null,9),g(14,"async"),F(15,vf,5,7,"p",10),g(16,"async"),g(17,"async"),u(),F(18,Tf,1,1,"ng-template",null,2,ge),u()}if(e&2){let r=Ee(19);l("selectedIndex",h(2,12,t.layerListToolState.selectedTab$)),c(3),l("label",h(4,14,"igo.integration.tools.layers")),c(2),l("options",t.layerViewerOptions)("map",t.map)("excludeBaseLayers",t.excludeBaseLayers)("isDesktop",t.isDesktop),c(4),l("ngTemplateOutlet",r),c(),l("label",h(11,16,"igo.integration.tools.legend")),c(2),l("ngIf",t.showAllLegend()),c(),l("ngIf",h(14,18,t.layers$).length!==0)("ngIfElse",r),c(2),l("ngIf",!t.allowShowAllLegends&&h(16,20,t.layers$).length!==0&&h(17,22,t.visibleOrInRangeLayers$).length===0)}},dependencies:[li,ai,si,Y,xs,eo,Ll,so,to,ao,no,ci,Po,ei,Ar,Qt,Ut,Zt,Ht,Wt,Me,Te,ie,me,ce],styles:[`[_nghost-%COMP%]   mat-tab-group[_ngcontent-%COMP%]{height:100%}[_nghost-%COMP%]     mat-tab-header{border-bottom:1px solid #ccc}[_nghost-%COMP%]     .mat-mdc-tab-body-wrapper{flex:1}[_nghost-%COMP%]     .mat-tab-body{margin-top:8px}[_nghost-%COMP%]     .mat-mdc-tab-body-content{overflow:hidden}[_nghost-%COMP%]   .map-empty[_ngcontent-%COMP%], [_nghost-%COMP%]   .search-tool[_ngcontent-%COMP%], [_nghost-%COMP%]   .catalog-tool[_ngcontent-%COMP%], [_nghost-%COMP%]   .context-tool[_ngcontent-%COMP%]{margin:10px}[_nghost-%COMP%]   .map-empty[_ngcontent-%COMP%]{text-align:justify}[_nghost-%COMP%]   .search-tool[_ngcontent-%COMP%], [_nghost-%COMP%]   .catalog-tool[_ngcontent-%COMP%], [_nghost-%COMP%]   .context-tool[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   mat-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:700}[_nghost-%COMP%]   mat-list-item[_ngcontent-%COMP%]     .mdc-list-item__primary-text{font-size:smaller}[_nghost-%COMP%]   mat-list.mat-mdc-list-base[_ngcontent-%COMP%]   mat-list-item.mat-mdc-list-item[_ngcontent-%COMP%]     div.mdc-list-item__content div.mdc-list-item__primary-text{padding-left:5px}
/*# sourceMappingURL=map-tools.component-ZVYU3EOW.css.map */`],changeDetection:0})};Bn=G([z({name:"mapTools",title:"igo.integration.tools.map",icon:"map"}),q("design:paramtypes",[ho,N,I,Ue,be,ne,de,le])],Bn);var kn=(()=>{class o{mapState;store;constructor(e){this.mapState=e,this.store=new Tt([],{map:this.mapState.map}),this.mapState.map.layerController.all$.subscribe(t=>{t.some(n=>n.id?.startsWith("igo-measures-"))||(this.store.deleteMany(this.store.all()),this.mapState.map.ol.getOverlays().getArray().filter(n=>n.options.className.includes("igo-map-tooltip")).map(n=>this.mapState.map.ol.removeOverlay(n)))})}static \u0275fac=function(t){return new(t||o)(B(I))};static \u0275prov=K({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var ss=class ls{measureState;mapState;get store(){return this.measureState.store}get map(){return this.mapState.map}constructor(i,e){this.measureState=i,this.mapState=e}static \u0275fac=function(e){return new(e||ls)(f(kn),f(I))};static \u0275cmp=w({type:ls,selectors:[["igo-measurer-tool"]],standalone:!0,features:[T],decls:1,vars:2,consts:[[3,"store","map"]],template:function(e,t){e&1&&v(0,"igo-measurer",0),e&2&&l("store",t.store)("map",t.map)},dependencies:[Br],encapsulation:2,changeDetection:0})};ss=G([z({name:"measurer",title:"igo.integration.tools.measurer",icon:"square_foot"}),q("design:paramtypes",[kn,I])],ss);var cs=class ps{mapState;get map(){return this.mapState.map}constructor(i){this.mapState=i}static \u0275fac=function(e){return new(e||ps)(f(I))};static \u0275cmp=w({type:ps,selectors:[["igo-print-tool"]],standalone:!0,features:[T],decls:1,vars:1,consts:[[3,"map"]],template:function(e,t){e&1&&v(0,"igo-print",0),e&2&&l("map",t.map)},dependencies:[Xr],encapsulation:2})};cs=G([z({name:"print",title:"igo.integration.tools.print",icon:"print"}),q("design:paramtypes",[I])],cs);var Vt=(()=>{class o{searchSourceService;storageService;workspaceState;configService;mapState;searchLayerStores=[];searchOverlayStyle={};searchOverlayStyleSelection={};searchOverlayStyleFocus={};focusedOrResolution$$;selectedOrResolution$$;featureMotion={selected:_e.Default,focus:_e.None};searchTermSplitter$=new P("|");searchTerm$=new P(void 0);searchType$=new P(void 0);searchDisabled$=new P(!1);searchResultsGeometryEnabled$=new P(!1);searchSettingsChange$=new P(void 0);selectedResult$=new P(void 0);store=new $e([]);get searchTypes(){return this.searchSourceService.getEnabledSources().map(e=>e.constructor.type)}constructor(e,t,r,n,a){this.searchSourceService=e,this.storageService=t,this.workspaceState=r,this.configService=n,this.mapState=a;let s=this.configService.getConfig("searchOverlayStyle");s&&(this.searchOverlayStyle=s.base,this.searchOverlayStyleSelection=s.selection,this.searchOverlayStyleFocus=s.focus);let p=this.storageService.get("searchResultsGeometryEnabled");p&&this.searchResultsGeometryEnabled$.next(p),this.store.addStrategy(this.createCustomFilterTermStrategy(),!1);let d=this.searchSourceService.getSources().find(S=>S.getId()==="workspace");d&&this.workspaceState.store.entities$.subscribe(S=>{let _=S.filter(y=>y instanceof Yr&&y.layer.options.workspace.searchIndexEnabled);this.searchSourceService.setWorkspaces(d,_)}),this.monitorLayerDeletion()}monitorLayerDeletion(){this.mapState.map.layerController.all$.subscribe(e=>{this.searchLayerStores.forEach(t=>{if(!e.find(n=>n.id===t.layer.id)){let n=this.searchLayerStores.indexOf(t);this.searchLayerStores.splice(n,1)}})})}createCustomFilterTermStrategy(){let e=t=>t.entity.meta.score===100;return new Xt({filterClauseFunc:e})}activateCustomFilterTermStrategy(){let e=this.store.getStrategyOfType(Xt);e!==void 0&&e.activate()}deactivateCustomFilterTermStrategy(){let e=this.store.getStrategyOfType(Xt);e!==void 0&&e.deactivate()}enableSearch(){this.searchDisabled$.next(!1)}disableSearch(){this.searchDisabled$.next(!0)}setSearchTerm(e){this.searchTerm$.next(e)}setSearchType(e){this.searchSourceService.enableSourcesByType(e),this.searchType$.next(e)}setSearchSettingsChange(){this.searchSettingsChange$.next(!0)}setSelectedResult(e){this.selectedResult$.next(e)}setSearchResultsGeometryStatus(e){this.storageService.set("searchResultsGeometryEnabled",e),this.searchResultsGeometryEnabled$.next(e)}static \u0275fac=function(t){return new(t||o)(B(Ue),B(he),B(Ke),B(ne),B(I))};static \u0275prov=K({token:o,factory:o.\u0275fac})}return o})();function Of(o,i){o&1&&(m(0,"div",4)(1,"section",5)(2,"h4")(3,"strong"),x(4),g(5,"translate"),u()(),m(6,"p")(7,"strong"),x(8),g(9,"translate"),u()(),v(10,"div",6),g(11,"translate"),g(12,"sanitizeHtml"),u()()),o&2&&(c(4),ye(h(5,3,"igo.integration.searchResultsTool.noResults")),c(4),ye(h(9,5,"igo.integration.searchResultsTool.doSearch")),c(2),l("innerHTML",h(12,9,h(11,7,"igo.integration.searchResultsTool.examples")),Ss))}function Ef(o,i){if(o&1&&v(0,"igo-search-add-button",12),o&2){let e=i.result,t=C(2);l("map",t.map)("store",t.store)("stores",t.stores)("layer",e)("saveSearchResultInLayer",t.saveSearchResultInLayer)}}function Lf(o,i){if(o&1){let e=$();m(0,"button",17),g(1,"async"),g(2,"translate"),M("click",function(){L(e);let r=C(3);return A(r.zoomToFeatureExtent())}),m(3,"mat-icon",18),g(4,"async"),g(5,"async"),x(6,"zoom_in"),u()()}if(o&2){let e=C(3);l("matTooltip",h(2,5,h(1,3,e.isSelectedResultOutOfView$)?"igo.integration.searchResultsTool.zoomOnFeatureTooltipOutOfView":"igo.integration.searchResultsTool.zoomOnFeatureTooltip")),c(3),l("matBadge",h(4,7,e.isSelectedResultOutOfView$)?"!":"")("matBadgeHidden",h(5,9,e.isSelectedResultOutOfView$)===!1)}}function Af(o,i){if(o&1){let e=$();m(0,"igo-panel",13),M("click",function(r){L(e);let n=C(2);return A(n.toggleTopPanel(r))}),m(1,"button",14),M("click",function(){L(e);let r=C(2);return A(r.toggleTopPanel())}),m(2,"mat-icon"),x(3),g(4,"async"),u()(),F(5,Lf,7,11,"button",15),m(6,"igo-feature-details",16),g(7,"async"),M("routingEvent",function(){L(e);let r=C(2);return A(r.getRoute())}),u()()}if(o&2){let e=C(2);l("title",e.featureTitle)("cursorPointer",!0),c(3),ye(h(4,7,e.topPanelState$)==="collapsed"?"arrow_upward":"arrow_downward"),c(2),l("ngIf",e.feature.geometry),c(),l("feature",h(7,9,e.feature$))("map",e.map)("toolbox",e.toolState.toolbox)}}function Ff(o,i){if(o&1){let e=$();m(0,"igo-flexible",7,0),g(2,"async"),m(3,"div",8)(4,"igo-search-results",9),M("resultFocus",function(r){L(e);let n=C();return A(n.onResultFocus(r))})("resultSelect",function(r){L(e);let n=C();return A(n.onResultSelect(r))})("resultUnfocus",function(r){L(e);let n=C();return A(n.onResultUnfocus(r))})("resultMouseenter",function(r){L(e);let n=C();return A(n.onResultFocus(r))})("resultMouseleave",function(r){L(e);let n=C();return A(n.onResultUnfocus(r))})("moreResults",function(r){L(e);let n=C();return A(n.onSearch(r))}),F(5,Ef,1,5,"ng-template",null,1,ge),u()(),m(7,"div",10),F(8,Af,8,11,"igo-panel",11),g(9,"async"),u()()}if(o&2){let e=C();l("state",h(2,8,e.feature$)?e.topPanelState:"initial"),c(4),l("store",e.store)("showIcons",e.showIcons)("term",e.term)("termSplitter",e.termSplitter)("settingsChange$",e.settingsChange$)("map",e.map),c(4),l("ngIf",h(9,10,e.feature$))}}var jn=class ms{mapState;searchState;elRef;toolState;directionState;showIcons=!0;topPanelStateDefault="expanded";hasFeatureEmphasisOnSelection=!1;saveSearchResultInLayer=!1;showResultsGeometries$$;getRoute$$;shownResultsGeometries=[];shownResultsEmphasisGeometries=[];focusedResult$=new P(void 0);isSelectedResultOutOfView$=new P(!1);isSelectedResultOutOfView$$;abstractFocusedResult;abstractSelectedResult;debouncedEmpty$=new P(!0);debouncedEmpty$$;get store(){return this.searchState.store}get map(){return this.mapState.map}get featureTitle(){return this.feature?_r(this.feature):void 0}get feature$(){return this.store.stateView.firstBy$(i=>i.state.focused).pipe(ot(i=>this.feature=i?i.entity.data:void 0))}feature;term="";searchTerm$$;settingsChange$=new P(void 0);topPanelState$=new P("initial");topPanelState$$;set topPanelState(i){this.topPanelState$.next(i)}get topPanelState(){return this.topPanelState$.value}get termSplitter(){return this.searchState.searchTermSplitter$.value}format=new Kt;get stores(){return this.searchState.searchLayerStores}constructor(i,e,t,r,n,a){this.mapState=i,this.searchState=e,this.elRef=t,this.toolState=r,this.directionState=n,this.hasFeatureEmphasisOnSelection=a.getConfig("hasFeatureEmphasisOnSelection"),this.saveSearchResultInLayer=a.getConfig("saveSearchResultInLayer")}ngOnInit(){this.searchTerm$$=this.searchState.searchTerm$.subscribe(i=>{i!=null&&i!==""?(this.term=i,this.debouncedEmpty$.next(!1)):i===""&&this.debouncedEmpty$.next(!0)});for(let i of this.store.stateView.all$().value)this.store.state.get(i.entity).selected===!0&&(this.topPanelState="expanded");this.searchState.searchSettingsChange$.subscribe(()=>{this.settingsChange$.next(!0)}),this.topPanelState$$=this.topPanelState$.subscribe(()=>{let i=this.computeElementRef()[0],e=this.computeElementRef()[1];e&&setTimeout(()=>{this.isScrolledIntoView(i,e)||this.adjustTopPanel(i,e)},Wn.transitionTime+50)}),this.hasFeatureEmphasisOnSelection&&(this.searchState.focusedOrResolution$$||(this.searchState.focusedOrResolution$$=De([this.focusedResult$,this.map.viewController.resolution$]).subscribe(i=>this.buildResultEmphasis(i[0],"focused"))),this.searchState.selectedOrResolution$$||(this.searchState.selectedOrResolution$$=De([this.searchState.selectedResult$,this.map.viewController.resolution$]).subscribe(i=>this.buildResultEmphasis(i[0],"selected")))),this.monitorResultOutOfView(),this.showResultsGeometries$$=De([this.searchState.searchResultsGeometryEnabled$,this.store.stateView.all$(),this.focusedResult$,this.searchState.selectedResult$,this.searchState.searchTerm$,this.map.viewController.resolution$]).subscribe(i=>{let e=i[0],t=i[1];this.hasFeatureEmphasisOnSelection&&this.clearFeatureEmphasis("shown"),this.shownResultsGeometries.map(n=>this.map.queryResultsOverlay.removeFeature(n)),t.filter(n=>n.entity.meta.dataType===at&&n.entity.data.geometry&&!n.state.selected&&!n.state.focused).map(n=>{e&&(n.entity.data.meta.style=Hn(Object.assign({},{feature:n.entity.data},this.searchState.searchOverlayStyle,n.entity.style?.base?n.entity.style.base:{})),this.shownResultsGeometries.push(n.entity.data),this.map.queryResultsOverlay.addFeature(n.entity.data,_e.None),this.hasFeatureEmphasisOnSelection&&this.buildResultEmphasis(n.entity,"shown"))})}),this.debouncedEmpty$$=this.store.stateView.empty$.pipe(dt(1500)).subscribe(i=>this.debouncedEmpty$.next(i))}monitorResultOutOfView(){this.isSelectedResultOutOfView$$=De([this.map.viewController.state$,this.searchState.selectedResult$]).pipe(dt(100)).subscribe(i=>{let e=i[1];if(!e){this.isSelectedResultOutOfView$.next(!1);return}if(e.data.geometry){let t=ft(e.data,this.map.projection),r=Ks([t],this.map.viewController.getOlProjection());this.isSelectedResultOutOfView$.next(Xs(this.map.getExtent(),r))}})}buildResultEmphasis(i,e){if(e!=="shown"&&this.clearFeatureEmphasis(e),!i||!i.data.geometry)return;let r=ft(i.data,this.map.projection).getGeometry();if(el(this.map.viewController,r.getExtent(),.0025)){let n=r.getExtent(),a=n[0]+(n[2]-n[0])/2,s=n[1]+(n[3]-n[1])/2,p=new Uo({name:`${e}AbstractResult'`,geometry:new hr([a,s])}),d=Ei(p,this.map.projection),S,_=0;switch(e){case"focused":S=pi(Object.assign({},{feature:d},this.searchState.searchOverlayStyleFocus,i.style?.focus?i.style.focus:{})),_=2;break;case"shown":S=Hn(Object.assign({},{feature:d},this.searchState.searchOverlayStyle,i.style?.base?i.style.base:{}));break;case"selected":S=pi(Object.assign({},{feature:d},this.searchState.searchOverlayStyleSelection,i.style?.selection?i.style.selection:{})),_=1;break}d.meta.style=S,d.meta.style.setZIndex(2e3+_),this.map.searchResultsOverlay.addFeature(d,this.searchState.featureMotion.focus),e==="focused"&&(this.abstractFocusedResult=d),e==="selected"&&(this.abstractSelectedResult=d),e==="shown"&&this.shownResultsEmphasisGeometries.push(d)}else this.clearFeatureEmphasis(e)}clearFeatureEmphasis(i){i==="focused"&&this.abstractFocusedResult&&(this.map.searchResultsOverlay.removeFeature(this.abstractFocusedResult),this.abstractFocusedResult=void 0),i==="selected"&&this.abstractSelectedResult&&(this.map.searchResultsOverlay.removeFeature(this.abstractSelectedResult),this.abstractSelectedResult=void 0),i==="shown"&&(this.shownResultsEmphasisGeometries.map(e=>this.map.searchResultsOverlay.removeFeature(e)),this.shownResultsEmphasisGeometries=[])}ngOnDestroy(){this.topPanelState$$.unsubscribe(),this.searchTerm$$.unsubscribe(),this.isSelectedResultOutOfView$$&&this.isSelectedResultOutOfView$$.unsubscribe(),this.showResultsGeometries$$&&this.showResultsGeometries$$.unsubscribe(),this.getRoute$$&&this.getRoute$$.unsubscribe(),this.debouncedEmpty$$&&this.debouncedEmpty$$.unsubscribe()}onResultFocus(i){if(this.focusedResult$.next(i),i.meta.dataType===at&&i.data.geometry){i.data.meta.style=pi(Object.assign({},{feature:i.data},this.searchState.searchOverlayStyleFocus,i.style?.focus?i.style.focus:{}));let e=this.map.searchResultsOverlay.dataSource.ol.getFeatureById(i.meta.id);if(e){e.setStyle(i.data.meta.style);return}this.map.searchResultsOverlay.addFeature(i.data,this.searchState.featureMotion.focus)}}onResultUnfocus(i){if(this.focusedResult$.next(void 0),i.meta.dataType===at){if(this.store.state.get(i).selected===!0){let e=this.map.searchResultsOverlay.dataSource.ol.getFeatureById(i.meta.id);if(e){let t=pi(Object.assign({},{feature:i.data},this.searchState.searchOverlayStyleFocus,i.style?.focus?i.style.focus:{}));e.setStyle(t)}return}this.map.searchResultsOverlay.removeFeature(i.data)}}onResultSelect(i){if(this.map.searchResultsOverlay.dataSource.ol.clear(),this.tryAddFeatureToMap(i,this.searchState.featureMotion.selected),this.searchState.setSelectedResult(i),this.topPanelState==="initial"&&(this.topPanelStateDefault!=="collapsed"?this.topPanelState="expanded":this.topPanelState="collapsed"),this.topPanelState==="expanded"){let e=this.computeElementRef()[0],t=this.computeElementRef()[1];this.isScrolledIntoView(e,t)||this.adjustTopPanel(e,t)}}onSearch(i){let e=i.results,t=this.store.entities$.value.filter(r=>r.source!==i.research.source).concat(e);this.store.load(t);for(let r of this.store.all())this.store.state.get(r).focused===!0&&this.store.state.get(r).selected!==!0&&this.store.state.update(r,{focused:!1},!0);setTimeout(()=>{let r=this.elRef.nativeElement.querySelector("igo-list"),n;i.research.request.subscribe(a=>{!a[0]||!a[0].source?n=null:a[0].source.getId()==="icherche"?n=r.querySelector(".icherche .moreResults"):a[0].source.getId()==="ilayer"?n=r.querySelector(".ilayer .moreResults"):a[0].source.getId()==="nominatim"?n=r.querySelector(".nominatim .moreResults"):n=r.querySelector("."+a[0].source.getId()+" .moreResults"),n!==null&&!this.isScrolledIntoView(r,n)&&(r.scrollTop=n.offsetTop+n.offsetHeight-r.clientHeight)})},250)}computeElementRef(){let i=document.getElementsByTagName("igo-search-results-item"),e=this.elRef.nativeElement.getElementsByTagName("igo-list")[0],t;for(let r=0;r<i.length;r++)i[r].className.includes("igo-list-item-selected")&&(t=i[r]);return[e,t]}adjustTopPanel(i,e){this.isScrolledIntoView(i,e)||(i.scrollTop=e.offsetTop+e.children[0].offsetHeight-i.clientHeight)}toggleTopPanel(i){i&&i.target?.className!=="igo-panel-title"||(this.topPanelState==="expanded"?this.topPanelState="collapsed":this.topPanelState="expanded")}zoomToFeatureExtent(){if(this.feature.geometry){let i=this.format.readFeature(this.feature,{dataProjection:this.feature.projection,featureProjection:this.map.projectionCode});Yo(this.map.viewController,[i],_e.Zoom)}}tryAddFeatureToMap(i,e=_e.Default){if(i.meta.dataType!==at)return;let t=i.data;t.geometry&&(t.meta.style=pi(Object.assign({},{feature:t},this.searchState.searchOverlayStyleSelection,i.style?.selection?i.style.selection:{})),this.map.searchResultsOverlay.addFeature(t,e))}isScrolledIntoView(i,e){let r=i.scrollTop,n=r+i.clientHeight,a=e.offsetTop;return a+e.clientHeight+6<=n&&a>=r}getRoute(){this.toolState.toolbox.activateTool("directions"),this.directionState.stopsStore.clearStops(),setTimeout(()=>{let i=!1;this.getRoute$$&&this.getRoute$$.unsubscribe(),this.getRoute$$=this.directionState.stopsStore.storeInitialized$.subscribe(()=>{if(this.directionState.stopsStore.storeInitialized$.value&&!i){i=!0;let e=this.directionState.stopsStore.all().find(r=>r.position===1),t;if(this.feature.geometry)if(this.feature.geometry.type==="Point")t=[this.feature.geometry.coordinates[0],this.feature.geometry.coordinates[1]];else{let r=tl(this.feature.geometry);t=[r.geometry.coordinates[0],r.geometry.coordinates[1]]}if(e.text=this.featureTitle,e.coordinates=t,this.directionState.stopsStore.update(e),this.map.geolocationController.position$.value){let r=this.map.geolocationController.position$.value,n=this.directionState.stopsStore.all().find(p=>p.position===0),a=Ne(r.position,r.projection,"EPSG:4326"),s=dr([a[0],a[1]],6);n.text=s.join(","),n.coordinates=s,this.directionState.stopsStore.update(n)}}})},250)}static \u0275fac=function(e){return new(e||ms)(f(I),f(Vt),f(Nt),f(N),f(yo),f(ne))};static \u0275cmp=w({type:ms,selectors:[["igo-search-results-tool"]],inputs:{showIcons:"showIcons",topPanelStateDefault:"topPanelStateDefault",topPanelState:"topPanelState"},standalone:!0,features:[T],decls:4,vars:6,consts:[["topPanel",""],["igoSearchItemToolbar",""],["style","margin: 10px",4,"ngIf"],["initial","100%","initialMobile","100%","collapsed","calc(100% - 58px)","collapsedMobile","calc(100% - 58px)","expanded","60%","expandedMobile","60%",3,"state",4,"ngIf"],[2,"margin","10px"],[1,"mat-typography"],[3,"innerHTML"],["initial","100%","initialMobile","100%","collapsed","calc(100% - 58px)","collapsedMobile","calc(100% - 58px)","expanded","60%","expandedMobile","60%",3,"state"],[1,"igo-content"],["placeholder","false",3,"resultFocus","resultSelect","resultUnfocus","resultMouseenter","resultMouseleave","moreResults","store","showIcons","term","termSplitter","settingsChange$","map"],["igoFlexibleFill","",1,"igo-content"],[3,"title","cursorPointer","click",4,"ngIf"],[3,"map","store","stores","layer","saveSearchResultInLayer"],[3,"click","title","cursorPointer"],["mat-icon-button","","panelLeftButton","",1,"igo-icon-button",3,"click"],["mat-icon-button","","panelRightButton","","class","igo-icon-button","matTooltipShowDelay","500",3,"matTooltip","click",4,"ngIf"],["igoFeatureDetailsDirective","",3,"routingEvent","feature","map","toolbox"],["mat-icon-button","","panelRightButton","","matTooltipShowDelay","500",1,"igo-icon-button",3,"click","matTooltip"],["aria-hidden","false","matBadgeColor","accent","matBadgeSize","small",3,"matBadge","matBadgeHidden"]],template:function(e,t){e&1&&(F(0,Of,13,11,"div",2),g(1,"async"),F(2,Ff,10,12,"igo-flexible",3),g(3,"async")),e&2&&(l("ngIf",(!t.store||t.store.stateView.empty)&&h(1,2,t.debouncedEmpty$)),c(2),l("ngIf",h(3,4,t.debouncedEmpty$)===!1))},dependencies:[Y,Wn,qr,Nr,Pe,He,wt,Me,Te,Jt,Yt,il,ol,It,ie,me,ce,Zs],encapsulation:2,changeDetection:0})};jn=G([z({name:"searchResults",title:"igo.integration.tools.searchResults",icon:"search"}),q("design:paramtypes",[I,Vt,Nt,N,yo,ne])],jn);var Pf=["mapBrowser"],Rf=()=>["ConfigService","LanguageService"];function Df(o,i){if(o&1&&(m(0,"span",12),x(1),u()),o&2){let e=C();c(),W(" Pointer activated: ",e.igoSearchPointerSummaryEnabled," (F2 activate/deactivate the pointer location). ")}}function Bf(o,i){if(o&1&&v(0,"igo-search-add-button",13),o&2){let e=i.result,t=C();l("map",t.map)("layer",e)}}function kf(o,i){if(o&1&&(m(0,"igo-panel",12),v(1,"igo-feature-details",14),u()),o&2){let e=C();c(),l("feature",e.selectedFeature)}}function jf(o,i){if(o&1&&v(0,"igo-actionbar",15),o&2){let e=C();l("store",e.store)("withIcon",!1)("horizontal",!0)("mode",e.actionBarMode)}}var Ap=(()=>{class o{mapService;layerService;searchState;mediaService;storageService;store=new Pl([]);actionBarMode=Zr.Context;igoSearchPointerSummaryEnabled=!1;termSplitter="|";map=new J({overlay:!0,controls:{attribution:{collapsed:!0}}});view={center:[-73,47.2],zoom:7};mapBrowser;lonlat;mapProjection;term;settingsChange$=new P(void 0);get searchStore(){return this.searchState.store}get isTouchScreen(){return this.mediaService.isTouchScreen()}selectedFeature;igoReverseSearchCoordsFormatEnabled;constructor(e,t,r,n,a){this.mapService=e,this.layerService=t,this.searchState=r,this.mediaService=n,this.storageService=a,this.mapService.setMap(this.map),this.layerService.createAsyncLayer({title:"OSM",baseLayer:!0,visible:!0,sourceOptions:{type:"osm"}}).subscribe(s=>this.map.layerController.add(s)),this.igoReverseSearchCoordsFormatEnabled=!!this.storageService.get("reverseSearchCoordsFormatEnabled")||!1}onPointerSummaryStatusChange(e){this.igoSearchPointerSummaryEnabled=e}onSearchTermChange(e){this.term=e,this.searchState.setSearchTerm(e),e.replace(/(#[^\s]*)/g,"").trim().length<2&&(this.searchStore.clear(),this.selectedFeature=void 0)}onSearch(e){let t=e.results;this.searchStore.state.updateAll({focused:!1,selected:!1});let r=this.searchStore.entities$.value.filter(n=>n.source!==e.research.source).concat(t);this.searchStore.updateMany(r)}onReverseCoordsFormatStatusChange(e){this.storageService.set("reverseSearchCoordsFormatEnabled",e),this.igoReverseSearchCoordsFormatEnabled=e}onSearchSettingsChange(){this.settingsChange$.next(!0)}onResultFocus(e){this.tryAddFeatureToMap(e,this.searchState.featureMotion.focus),this.selectedFeature=e.data}onResultSelect(e){this.tryAddFeatureToMap(e,this.searchState.featureMotion.selected),this.selectedFeature=e.data}tryAddFeatureToMap(e,t=_e.Default){e.meta.dataType===at&&e.data.geometry!==void 0&&this.map.searchResultsOverlay.setFeatures([e.data],t)}ngOnInit(){this.store.load([{id:"coordinates",title:"coordinates",handler:()=>this.searchCoordinate(this.lonlat)},{id:"googleMaps",title:"googleMap",handler:()=>this.openGoogleMaps(this.lonlat)},{id:"googleStreetView",title:"googleStreetView",handler:()=>this.openGoogleStreetView(this.lonlat)}])}ngOnDestroy(){this.store.destroy()}removeFeatureFromMap(){this.map.searchResultsOverlay.clear()}onContextMenuOpen(e){let t=this.mapPosition(e),r=this.mapService.getMap().ol.getCoordinateFromPixel(t);this.mapProjection=this.mapService.getMap().projectionCode,this.lonlat=Ne(r,this.mapProjection,"EPSG:4326")}mapPosition(e){let t=e;return t.y=t.y-this.mapBrowser.nativeElement.getBoundingClientRect().top+window.scrollY,t.x=t.x-this.mapBrowser.nativeElement.getBoundingClientRect().left+window.scrollX,[t.x,t.y]}searchCoordinate(e){this.searchStore.clear(),this.term=this.igoReverseSearchCoordsFormatEnabled?e.reverse().map(t=>t.toFixed(6)).join(", "):e.map(t=>t.toFixed(6)).join(", ")}openGoogleMaps(e){window.open(qn.getGoogleMapsCoordLink(e[0],e[1]))}openGoogleStreetView(e){window.open(qn.getGoogleStreetViewLink(e[0],e[1]))}static \u0275fac=function(t){return new(t||o)(f(Mt),f(Z),f(Vt),f(de),f(he))};static \u0275cmp=w({type:o,selectors:[["app-search"]],viewQuery:function(t,r){if(t&1&&ko(Pf,7,Nt),t&2){let n;jo(n=$o())&&(r.mapBrowser=n.first)}},standalone:!0,features:[Qi([en([Wr(),Wl()],{analytics:!0}),Vt]),T],decls:15,vars:19,consts:[["mapBrowser",""],["igoSearchItemToolbar",""],["actionbarMenu",""],["title","Search","subtitle","Geo",3,"dependencies"],["codeFolder","geo/search","configFolder","environments"],["title","Details",4,"ngIf"],["igoLongPress","","igoSearchPointerSummary","",3,"menuPosition","map","view","igoContextMenu","igoSearchPointerSummaryDelay","igoSearchPointerSummaryEnabled"],[1,"map-actions","--vertical","--bottom","--right"],["color","primary",3,"map"],["title","Search"],[3,"pointerSummaryStatus","searchTermChange","search","clearFeature","searchSettingsChange","reverseSearchCoordsFormatStatus","term","searchSettings","store","termSplitter","reverseSearchCoordsFormatEnabled"],["placeholder","false",3,"resultFocus","resultSelect","moreResults","store","term","termSplitter","settingsChange$"],["title","Details"],[3,"map","layer"],[3,"feature"],[3,"store","withIcon","horizontal","mode"]],template:function(t,r){if(t&1){let n=$();m(0,"app-doc-viewer",3)(1,"app-example-viewer",4),F(2,Df,2,1,"span",5),m(3,"igo-map-browser",6,0),M("menuPosition",function(s){return L(n),A(r.onContextMenuOpen(s))}),m(5,"div",7),v(6,"igo-zoom-button",8),u()(),m(7,"igo-panel",9)(8,"igo-search-bar",10),M("pointerSummaryStatus",function(s){return L(n),A(r.onPointerSummaryStatusChange(s))})("searchTermChange",function(s){return L(n),A(r.onSearchTermChange(s))})("search",function(s){return L(n),A(r.onSearch(s))})("clearFeature",function(){return L(n),A(r.removeFeatureFromMap())})("searchSettingsChange",function(){return L(n),A(r.onSearchSettingsChange())})("reverseSearchCoordsFormatStatus",function(s){return L(n),A(r.onReverseCoordsFormatStatusChange(s))}),u(),m(9,"igo-search-results",11),M("resultFocus",function(s){return L(n),A(r.onResultFocus(s))})("resultSelect",function(s){return L(n),A(r.onResultSelect(s))})("moreResults",function(s){return L(n),A(r.onSearch(s))}),F(10,Bf,1,2,"ng-template",null,1,ge),u()(),F(12,kf,2,1,"igo-panel",5)(13,jf,1,4,"ng-template",null,2,ge),u()()}if(t&2){let n=Ee(14);l("dependencies",ae(18,Rf)),c(2),l("ngIf",!r.isTouchScreen),c(),l("map",r.map)("view",r.view)("igoContextMenu",n)("igoSearchPointerSummaryDelay",500)("igoSearchPointerSummaryEnabled",r.igoSearchPointerSummaryEnabled),c(3),l("map",r.map),c(2),l("term",r.term)("searchSettings",!0)("store",r.searchStore)("termSplitter",r.termSplitter)("reverseSearchCoordsFormatEnabled",r.igoReverseSearchCoordsFormatEnabled),c(),l("store",r.searchStore)("term",r.term)("termSplitter",r.termSplitter)("settingsChange$",r.settingsChange$),c(3),l("ngIf",r.selectedFeature)}},dependencies:[te,oe,Y,X,ee,Zn,Qn,El,Nn,qr,Nr,Ol,Pe,Qr,It],styles:[`igo-map-browser[_ngcontent-%COMP%]{width:100%;height:300px}igo-panel[_ngcontent-%COMP%]{height:100%;width:100%;padding-top:10px}
/*# sourceMappingURL=search.component-LSMBZZEE.css.map */`]})}return o})();var $f=()=>["LanguageService"];function Vf(o,i){if(o&1&&(m(0,"p"),x(1),u()),o&2){let e=C();c(),ye(e.pointerCoord)}}var Fp=(()=>{class o{layerService;mediaService;pointerCoord;pointerCoordDelay=0;map=new J({controls:{attribution:{collapsed:!0},scaleLine:!0}});view={center:[-73,47.2],zoom:6,rotation:.75};get media(){return this.mediaService.getMedia()}get isTouchScreen(){return this.mediaService.isTouchScreen()}constructor(e,t){this.layerService=e,this.mediaService=t,this.layerService.createAsyncLayer({title:"OSM",sourceOptions:{type:"osm"},visible:!0,baseLayer:!0}).subscribe(r=>{this.map.layerController.add(r)})}onPointerMove(e){this.pointerCoord=e}static \u0275fac=function(t){return new(t||o)(f(Z),f(de))};static \u0275cmp=w({type:o,selectors:[["app-simple-map"]],standalone:!0,features:[T],decls:13,vars:12,consts:[["title","Simple Map","subtitle","Geo",3,"dependencies"],["codeFolder","geo/simple-map"],["igoPointerPosition","",3,"pointerPositionCoord","map","view","pointerPositionDelay"],[3,"infoContent"],[1,"map-actions","--vertical","--top","--right"],[1,"spinner-spacer"],["color","primary",1,"mat-elevation-z2",3,"showIfNoRotation","map"],[1,"map-actions","--vertical","--bottom","--right"],["color","primary",1,"mat-elevation-z2",3,"map"],["color","primary",3,"map"],[4,"ngIf"]],template:function(t,r){t&1&&(m(0,"app-doc-viewer",0)(1,"app-example-viewer",1)(2,"igo-map-browser",2),M("pointerPositionCoord",function(a){return r.onPointerMove(a)}),v(3,"igo-info-section",3),m(4,"div",4),v(5,"div",5)(6,"igo-rotation-button",6),u(),m(7,"div",7),v(8,"igo-home-extent-button",8)(9,"igo-wake-lock-button")(10,"igo-geolocate-button",8)(11,"igo-zoom-button",9),u()(),F(12,Vf,2,1,"p",10),u()()),t&2&&(l("dependencies",ae(11,$f)),c(2),l("map",r.map)("view",r.view)("pointerPositionDelay",r.pointerCoordDelay),c(),l("infoContent",r.pointerCoord==null?null:r.pointerCoord.toString()),c(3),l("showIfNoRotation",!0)("map",r.map),c(2),l("map",r.map),c(2),l("map",r.map),c(),l("map",r.map),c(),l("ngIf",!r.isTouchScreen))},dependencies:[te,oe,oo,io,yl,X,ul,ro,hl,ee,Y],styles:[`igo-map-browser[_ngcontent-%COMP%]{width:100%;height:350px}
/*# sourceMappingURL=simple-map.component-DJPNLAQL.css.map */`]})}return o})();var Gf=()=>["LanguageService"];function zf(o,i){if(o&1&&(it(0),v(1,"igo-feature-details",11),rt()),o&2){let e=i.ngIf;c(),l("feature",e)}}var Pp=(()=>{class o{matIconRegistry;spatialFilterService;dataSourceService;layerService;messageService;languageService;cdRef;map=new J({controls:{attribution:{collapsed:!0}}});view={center:[-73,47.2],zoom:6};type;itemType=bo.Address;freehandDrawIsActive;layers=[];activeLayers=[];queryType;thematics;zone;zoneWithBuffer;buffer=0;iterator=1;selectedFeature$=new P(void 0);format=new Kt;store=new $e([]);spatialListStore=new $e([]);loading=!1;thematicLength=0;measureUnit=ni.Meters;unsubscribe$=new zt;defaultStyle;constructor(e,t,r,n,a,s,p){this.matIconRegistry=e,this.spatialFilterService=t,this.dataSourceService=r,this.layerService=n,this.messageService=a,this.languageService=s,this.cdRef=p,this.dataSourceService.createAsyncDataSource({type:"osm"}).subscribe(d=>{this.map.layerController.add(this.layerService.createLayer({title:"OSM",source:d,baseLayer:!0,visible:!0}))})}ngOnInit(){for(let e of this.map.layerController.all){if(Gn(e))return;e.title&&e.title.includes(this.languageService.translate.instant("igo.geo.spatialFilter.spatialFilter"))&&this.layers.push(e)}}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}getOutputType(e){this.type=e,this.queryType=void 0}getOutputQueryType(e){this.queryType=e,this.queryType&&this.loadFilterList()}loadFilterList(){this.spatialFilterService.loadFilterList(this.queryType).pipe(vo(this.unsubscribe$)).subscribe(e=>{e.sort((t,r)=>t.properties.nom<r.properties.nom?-1:t.properties.nom>r.properties.nom?1:0),this.spatialListStore.clear(),this.spatialListStore.load(e)})}getOutputToggleSearch(){this.loadThematics()}getOutputClearSearch(){this.zone=void 0,this.queryType=void 0}clearMap(){this.map.layerController.remove(...this.layers),this.layers=[],this.activeLayers=[],this.thematicLength=0,this.iterator=1,this.type===Ae.Predefined&&(this.zone=void 0,this.queryType=void 0)}loadThematics(){this.loading=!0;let e=!0,t;(this.buffer===0||this.type===Ae.Point)&&this.tryAddFeaturesToMap([this.zone]),this.itemType!==bo.Thematics?t=[{name:""}]:t=this.thematics,this.measureUnit===ni.Kilometers&&this.type!==Ae.Point&&(this.buffer=this.buffer*1e3),this.type===Ae.Polygon&&(this.buffer=0);let r=[];t.forEach(n=>{r.push(this.spatialFilterService.loadFilterItem(this.zone,this.itemType,this.queryType,n,this.buffer).pipe(Ni(a=>{this.store.insertMany(a);let s=[],p=[],d,S;a.forEach(_=>{_.geometry.type===Ae.Point?(_.properties.longitude=_.geometry.coordinates[0],_.properties.latitude=_.geometry.coordinates[1],s.push(_),d=_.meta.id):(p.push(_),S=_.meta.id)}),this.tryAddPointToMap(s,d),this.tryAddLayerToMap(p,S),a.length?(e=!1,this.thematicLength+=1,n.zeroResults=!1,this.cdRef.detectChanges()):n.zeroResults=!0,a.length>=1e4&&this.messageService.alert("igo.geo.spatialFilter.maxSizeAlert","igo.geo.spatialFilter.warning",{timeOut:1e4})})))}),zi(r).pipe(vo(this.unsubscribe$)).subscribe(()=>{this.loading=!1,e&&this.messageService.alert("igo.geo.spatialFilter.zeroResults","igo.geo.spatialFilter.warning",{timeOut:1e4})})}onZoneChange(e,t){this.zone=e,e&&(t?this.tryAddFeaturesToMap([e],!0):this.tryAddFeaturesToMap([e]),this.zoomToFeatureExtent(e))}tryAddFeaturesToMap(e,t){let r=1;for(let n of e){if(this.type===Ae.Predefined)for(let a of this.layers){if(a.options._internal&&a.options._internal.code===n.properties.code&&!t){if(!a.title?.startsWith("Zone")){let s=this.layers.indexOf(a);this.layers.splice(s,1)}return}if(a.title?.startsWith("Zone")){this.activeLayers=[];let s=this.layers.indexOf(a);this.layers.splice(s,1),this.map.layerController.remove(a)}}else{if(t){for(let a of this.activeLayers)if(this.activeLayers.length===1&&a.title?.startsWith("Zone")){let s=this.layers.indexOf(a);this.layers.splice(s,1),this.map.layerController.remove(a)}}this.activeLayers=[]}for(let a of this.layers)a.title?.startsWith("Zone")&&r++;this.defaultStyle=(a,s)=>{let p=e[0].geometry.coordinates;return new Le({image:new ke({radius:p?this.buffer/Math.cos(Math.PI/180*p[1])/s:void 0,fill:new Se({color:"rgba(200, 200, 20, 0.2)"}),stroke:new ve({width:1,color:"orange"})}),stroke:new ve({width:1,color:"orange"}),fill:new Se({color:"rgba(200, 200, 20, 0.2)"})})},this.dataSourceService.createAsyncDataSource({type:"vector",queryable:!0}).pipe(ze(1)).subscribe(a=>{let s=this.layerService.createLayer({isIgoInternalLayer:!0,title:"Zone "+r+" - "+this.languageService.translate.instant("igo.geo.spatialFilter.spatialFilter"),workspace:{enabled:!0},_internal:{code:this.type===Ae.Predefined?n.properties.code:void 0},source:a,visible:!0}),p=e.map(S=>ft(S,this.map.projectionCode));if(this.type!==Ae.Predefined){let S=this.type===Ae.Point?"Cercle":"Polygone";p[0].set("nom","Zone",!0),p[0].set("type",S,!0)}a.ol.addFeatures(p),s.ol.setStyle(this.defaultStyle),this.map.layerController.add(s),this.layers.push(s),this.activeLayers.push(s),this.cdRef.detectChanges()})}}tryAddPointToMap(e,t){let r=1;if(e.length){if(this.map===void 0)return;for(let n of this.layers)n.title?.startsWith(e[0].meta.title)&&r++;this.dataSourceService.createAsyncDataSource({type:"cluster",id:t,queryable:!0,distance:120,meta:{title:"Cluster"}}).pipe(ze(1)).subscribe(n=>{let a=e[0].meta.icon,s;a?s=this.createSvgIcon(a)||Jo():s=Jo();let p=this.layerService.createLayer({isIgoInternalLayer:!0,title:e[0].meta.title+" "+r+" - "+this.languageService.translate.instant("igo.geo.spatialFilter.spatialFilter"),source:n,visible:!0,style:s}),d=e.map(_=>ft(_,this.map.projectionCode));n.ol.getSource().addFeatures(d),this.layers.find(_=>_.id===p.id)&&(this.map.layerController.remove(this.layers.find(_=>_.id===p.id)),r=r-1,p.title=e[0].meta.title+" "+r+" - "+this.languageService.translate.instant("igo.geo.spatialFilter.spatialFilter"),p.options.title=p.title),this.iterator=r,this.map.layerController.add(p),this.layers.push(p),this.pushLayer(p),this.cdRef.detectChanges()})}}createSvgIcon(e){let t;return this.matIconRegistry.getNamedSvgIcon(e).subscribe(r=>{let n=new XMLSerializer;r.setAttribute("width","30"),r.setAttribute("height","30"),r.setAttribute("fill","rgba(0, 128, 255)"),r.setAttribute("stroke","white");let a=n.serializeToString(r);t=new Le({image:new yr({src:"data:image/svg+xml;utf8,"+a})})}),t}tryAddLayerToMap(e,t){let r=1;if(e.length){if(this.map===void 0)return;for(let n of this.layers)n.title?.startsWith(e[0].meta.title)&&r++;this.dataSourceService.createAsyncDataSource({type:"vector",id:t,queryable:!0}).pipe(ze(1)).subscribe(n=>{let a=this.layerService.createLayer({isIgoInternalLayer:!0,title:e[0].meta.title+" "+r+" - "+this.languageService.translate.instant("igo.geo.spatialFilter.spatialFilter"),source:n,visible:!0}),s=e.map(d=>ft(d,this.map.projectionCode));n.ol.addFeatures(s),this.layers.find(d=>d.id===a.id)&&(this.map.layerController.remove(this.layers.find(d=>d.id===a.id)),r=r-1,a.title=e[0].meta.title+" "+r+" - "+this.languageService.translate.instant("igo.geo.spatialFilter.spatialFilter"),a.options.title=a.title),this.map.layerController.add(a),this.layers.push(a),this.pushLayer(a),this.cdRef.detectChanges()})}}zoomToFeatureExtent(e){if(e){let t=this.format.readFeature(e,{dataProjection:e.projection,featureProjection:this.map.projectionCode});Yo(this.map.viewController,[t],_e.Zoom)}}pushLayer(e){for(let t of this.activeLayers)if(t.id===e.id)return;this.activeLayers.push(e)}static \u0275fac=function(t){return new(t||o)(f(qo),f(ri),f(Ce),f(Z),f(Ie),f(re),f(le))};static \u0275cmp=w({type:o,selectors:[["app-spatial-filter"]],inputs:{type:"type",itemType:"itemType",freehandDrawIsActive:"freehandDrawIsActive"},standalone:!0,features:[T],decls:15,vars:22,consts:[["title","Spatial Filter","subtitle","Geo",3,"dependencies"],["codeFolder","geo/spatial-filter"],["cols","2","rowHeight","500px","gutterSize","16px"],["igoQuery","",3,"map","view","queryFeatures"],[1,"map-actions","--vertical","--bottom","--right"],["color","primary",3,"map"],[1,"flex","flex-col","align-start","h-100","w-100","overflow-y-auto"],[1,"w-100"],[3,"eventType","eventQueryType","zoneChange","zoneWithBufferChange","bufferChange","measureUnitChange","store","selectedQueryType","zone","layers"],[3,"radiusEvent","bufferEvent","measureUnitChange","freehandControl","drawZoneEvent","zoneWithBufferChange","itemTypeChange","thematicChange","toggleSearch","clearButtonEvent","clearSearchEvent","type","queryType","map","zone","loading","store","layers","allLayers","thematicLength"],[4,"ngIf"],[3,"feature"]],template:function(t,r){t&1&&(m(0,"app-doc-viewer",0)(1,"app-example-viewer",1)(2,"mat-grid-list",2)(3,"mat-grid-tile")(4,"igo-map-browser",3)(5,"div",4),v(6,"igo-zoom-button",5),u()()(),m(7,"mat-grid-tile")(8,"div",6)(9,"igo-panel",7)(10,"igo-spatial-filter-type",8),M("eventType",function(a){return r.getOutputType(a)})("eventQueryType",function(a){return r.getOutputQueryType(a)})("zoneChange",function(a){return r.onZoneChange(a)})("zoneWithBufferChange",function(a){return r.onZoneChange(a,!0)})("bufferChange",function(a){return r.buffer=a})("measureUnitChange",function(a){return r.measureUnit=a}),u(),m(11,"igo-spatial-filter-item",9),M("radiusEvent",function(a){return r.buffer=a})("bufferEvent",function(a){return r.buffer=a})("measureUnitChange",function(a){return r.measureUnit=a})("freehandControl",function(a){return r.freehandDrawIsActive=a})("drawZoneEvent",function(a){return r.zone=a})("zoneWithBufferChange",function(a){return r.onZoneChange(a,!0)})("itemTypeChange",function(a){return r.itemType=a})("thematicChange",function(a){return r.thematics=a})("toggleSearch",function(){return r.getOutputToggleSearch()})("clearButtonEvent",function(){return r.clearMap()})("clearSearchEvent",function(){return r.getOutputClearSearch()}),u()(),m(12,"igo-panel",7),F(13,zf,2,1,"ng-container",10),g(14,"async"),u()()()()()()),t&2&&(l("dependencies",ae(21,Gf)),c(4),l("map",r.map)("view",r.view)("queryFeatures",!0),c(2),l("map",r.map),c(4),l("store",r.spatialListStore)("selectedQueryType",r.queryType)("zone",r.zone)("layers",r.activeLayers),c(),l("type",r.type)("queryType",r.queryType)("map",r.map)("zone",r.zone)("loading",r.loading)("store",r.store)("layers",r.activeLayers)("allLayers",r.layers)("thematicLength",r.thematicLength),c(2),l("ngIf",h(14,19,r.selectedFeature$)))},dependencies:[te,oe,Ye,Qe,Ze,X,ee,zr,Gr,Pe,jr,kr,Y,It,ie],styles:[`[_nghost-%COMP%]   igo-form[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   igo-spatial-filter-item[_ngcontent-%COMP%]     .thematics-header{max-width:225px}
/*# sourceMappingURL=spatial-filter.component-C4PT2JBB.css.map */`],changeDetection:0})}return o})();var Nf=()=>["LanguageService"],Rp=(()=>{class o{dataSourceService;layerService;map=new J({controls:{attribution:{collapsed:!0}}});view={center:[-73,47.2],zoom:7};constructor(e,t){this.dataSourceService=e,this.layerService=t,this.dataSourceService.createAsyncDataSource({type:"osm"}).subscribe(n=>{this.map.layerController.add(this.layerService.createLayer({title:"OSM",baseLayer:!0,visible:!0,source:n}))});let r={type:"wms",url:"https://geoegl.msp.gouv.qc.ca/ws/igo_gouvouvert.fcgi",params:{LAYERS:"vg_observation_v_inondation_embacle_wmst",VERSION:"1.3.0"},timeFilterable:!0,timeFilter:{min:"2013",max:"2019",range:!1,type:rl.YEAR,style:nl.SLIDER,step:1}};this.dataSourceService.createAsyncDataSource(r).subscribe(n=>{this.map.layerController.add(this.layerService.createLayer({title:"Emb\xE2cles",source:n}))})}static \u0275fac=function(t){return new(t||o)(f(Ce),f(Z))};static \u0275cmp=w({type:o,selectors:[["app-time-filter"]],standalone:!0,features:[T],decls:11,vars:6,consts:[["title","Time filter","subtitle","Geo",3,"dependencies"],["codeFolder","geo/time-filter"],["cols","2","rowHeight","500px","gutterSize","16px"],[3,"map","view"],[1,"map-actions","--vertical","--bottom","--right"],["color","primary",3,"map"],[1,"flex","align-start","h-100","w-100"],["title","Layers",1,"w-100"],[3,"layers"]],template:function(t,r){t&1&&(m(0,"app-doc-viewer",0)(1,"app-example-viewer",1)(2,"mat-grid-list",2)(3,"mat-grid-tile")(4,"igo-map-browser",3)(5,"div",4),v(6,"igo-zoom-button",5),u()()(),m(7,"mat-grid-tile")(8,"div",6)(9,"igo-panel",7),v(10,"igo-time-filter-list",8),u()()()()()()),t&2&&(l("dependencies",ae(5,Nf)),c(4),l("map",r.map)("view",r.view),c(2),l("map",r.map),c(4),l("layers",r.map.layerController.all))},dependencies:[te,oe,Ye,Qe,Ze,X,ee,Pe,$r]})}return o})();function qf(o,i){if(o&1){let e=$();m(0,"igo-entity-table-paginator",8),M("paginatorChange",function(r){L(e);let n=C(2);return A(n.paginatorChange(r))}),u()}if(o&2){let e=C().ngIf,t=C();l("store",e.entityStore)("paginatorOptions",t.paginatorOptions)("entitySortChange$",t.entitySortChange$)}}function Wf(o,i){if(o&1&&(it(0),F(1,qf,1,3,"igo-entity-table-paginator",7),g(2,"async"),rt()),o&2){let e=i.ngIf;c(),l("ngIf",h(2,1,e.inResolutionRange$))}}function Hf(o,i){if(o&1&&v(0,"igo-actionbar",12),o&2){let e=C().ngIf,t=C();l("store",e.actionStore)("horizontal",!0)("withToggleButton",!0)("withTitle",!0)("mode",t.actionbarMode)}}function Uf(o,i){if(o&1&&v(0,"igo-entity-table",13),o&2){let e=C().ngIf,t=C();l("paginator",t.workspacePaginator)("scrollBehavior",t.scrollBehavior)("store",e.entityStore)("template",e.meta.tableTemplate)}}function Zf(o,i){o&1&&(m(0,"mat-card-content"),x(1," No data available at this scale. Please zoom in. "),u())}function Qf(o,i){if(o&1&&(it(0),F(1,Hf,1,5,"igo-actionbar",9)(2,Uf,1,4,"igo-entity-table",10),g(3,"async"),F(4,Zf,2,0,"mat-card-content",6),g(5,"async"),v(6,"igo-workspace-widget-outlet",11),rt()),o&2){let e=i.ngIf;c(),l("ngIf",e.actionStore),c(),l("ngIf",e.entityStore&&e.meta&&e.meta.tableTemplate&&h(3,4,e.inResolutionRange$)),c(2),l("ngIf",h(5,6,e.inResolutionRange$)===!1),c(2),l("workspace",e)}}var Dp=(()=>{class o{dataSourceService;layerService;workspaceState;workspacePaginator;entitySortChange$=new P(!1);paginatorOptions={pageSize:5,pageSizeOptions:[1,5,10,15,30,50,100],showFirstLastButtons:!0};map=new J({controls:{attribution:{collapsed:!0}}});view={center:[-72,47.2],zoom:5};get workspaceStore(){return this.workspaceState.store}selectedWorkspace$;actionbarMode=Zr.Overlay;scrollBehavior=Us.Instant;constructor(e,t,r){this.dataSourceService=e,this.layerService=t,this.workspaceState=r}ngOnInit(){this.selectedWorkspace$=this.workspaceStore.stateView.firstBy$(e=>e.state.selected===!0).pipe(ot(e=>{let t=e===void 0?void 0:e.entity;return t&&t.actionStore.view.filter(r=>r.id!=="wfsDownload"),t})),this.layerService.createLayers([{title:"OSM",sourceOptions:{type:"osm"},baseLayer:!0,visible:!0},{title:"Simple WFS ",maxResolution:3e3,visible:!0,workspace:{enabled:!0},sourceOptions:{type:"wfs",url:"https://ws.mapserver.transports.gouv.qc.ca/swtq",params:{featureTypes:"etablissement_mtq",fieldNameGeometry:"geometry",version:"2.0.0",outputFormat:"geojson"},sourceFields:[{name:"idetablis",alias:"ID"},{name:"nometablis",alias:"Name"},{name:"typetablis",alias:"Type"}]}}]).subscribe(e=>{this.map.layerController.add(...e)})}paginatorChange(e){this.workspacePaginator=e}static \u0275fac=function(t){return new(t||o)(f(Ce),f(Z),f(Ke))};static \u0275cmp=w({type:o,selectors:[["app-workspace"]],standalone:!0,features:[T],decls:10,vars:11,consts:[["title","Workspace","subtitle","Geo"],["codeFolder","geo/workspace"],[1,"m-b-16",3,"map","view"],[1,"map-actions","--vertical","--bottom","--right"],["color","primary",3,"map"],["igoWorkspaceSelector","",3,"store","map"],[4,"ngIf"],[3,"store","paginatorOptions","entitySortChange$","paginatorChange",4,"ngIf"],[3,"paginatorChange","store","paginatorOptions","entitySortChange$"],[3,"store","horizontal","withToggleButton","withTitle","mode",4,"ngIf"],["class","table-compact table-centered",3,"paginator","scrollBehavior","store","template",4,"ngIf"],[3,"workspace"],[3,"store","horizontal","withToggleButton","withTitle","mode"],[1,"table-compact","table-centered",3,"paginator","scrollBehavior","store","template"]],template:function(t,r){t&1&&(m(0,"app-doc-viewer",0)(1,"app-example-viewer",1)(2,"igo-map-browser",2)(3,"div",3),v(4,"igo-zoom-button",4),u()(),v(5,"igo-workspace-selector",5),F(6,Wf,3,3,"ng-container",6),g(7,"async"),F(8,Qf,7,8,"ng-container",6),g(9,"async"),u()()),t&2&&(c(2),l("map",r.map)("view",r.view),c(2),l("map",r.map),c(),l("store",r.workspaceStore)("map",r.map),c(),l("ngIf",h(7,7,r.selectedWorkspace$)),c(2),l("ngIf",h(9,9,r.selectedWorkspace$)))},dependencies:[ie,te,oe,Qo,Qr,Ys,Gl,X,ee,Al,Vl,Fl,Dl,Rl,Y],styles:[`igo-map-browser[_ngcontent-%COMP%]{width:100%;height:300px}igo-panel[_ngcontent-%COMP%]{width:100%;padding-top:10px}igo-entity-table[_ngcontent-%COMP%]{height:400px}igo-actionbar[_ngcontent-%COMP%]{height:48px}
/*# sourceMappingURL=workspace.component-F3KQ7OB7.css.map */`]})}return o})();var QA=[{path:"",redirectTo:"activity",pathMatch:"full"},{title:"Simple map",path:"simple-map",component:Fp},{title:"Layer",path:"layer",component:ac},{title:"Legend",path:"legend",component:sc},{title:"Overlay",path:"overlay",component:pc},{title:"Geometry",path:"geometry",component:ic},{title:"Feature",path:"feature",component:oc},{title:"Hover",path:"hover",component:rc},{title:"Measure",path:"measure",component:lc},{title:"Draw",path:"draw",component:tc},{title:"Query",path:"query",component:uc},{title:"Catalog",path:"catalog",component:Xl},{title:"Search",path:"search",component:Ap},{title:"Print",path:"print",component:mc},{title:"Import/Export",path:"import-export",component:nc},{title:"Directions",path:"directions",component:ec},{title:"Time Filter",path:"time-filter",component:Rp},{title:"OGC Filter",path:"ogc-filter",component:cc},{title:"Spatial Filter",path:"spatial-filter",component:Pp},{title:"Workspace",path:"workspace",component:Dp}];export{Cn as a,bn as b,iS as c,QA as d};
//# sourceMappingURL=chunk-ZX6OMTRD.js.map
